(function(){'use strict';!function(){"use strict";function a(){var a;switch(window.STORE){case"XFORCE_CHINA":case"XFORCE_TAIWAN":case"WILDTANGENT":case"GAMELOFT":case"CELLFISH":case"GD":a=yc;break;case"VK":case"OK":case"WIZQ":a=zc;break;case"FB_INSTANT":a=Ac;break;default:a=Engine.Storage}return a}function b(a){Ic.call(this,a),this.maxTries=a&&a.maxTries?a.maxTries:b.MAX_TRIES,this.timeout=a&&a.timeout?a.timeout:b.TIMEOUT}function c(){var a=this;this._status=null,this._userId=null,this._firstTime=!0,this._name=null,this._pic=null,this.processLoginResponse=function(b){a._status="connected",a._userId=1,a._name="Player Name",a._pic=this.loadUrl(this.generatePhotoImageName(),"https://i.imgur.com/mTqGE6Z.jpg"),a.trigger("connected")},this.generatePhotoImageName=function(){return"social_photo_"+this._userId},this.loadUrl=function(a,b){return Fc.getById(a)||Fc.register(a,Dc(b)),a},Ic.call(this)}function d(){var a=this;this._status=null,this._userId=null,this._firstTime=!0,this.processLoginResponse=function(b){a._status=b.status,b.authResponse&&b.authResponse.userID&&(a._userId=b.authResponse.userID),a.isConnected()&&(a._firstTime===!0&&a.setFirstTimeState(!0),a.trigger("connected"))},this.getFirstTimeState=function(){Oc.get("facebook_has_been_connected",function(b){a._firstTime=!b})},this.setFirstTimeState=function(a){Oc.set("facebook_has_been_connected",a)},Ic.call(this)}function e(){var a=this;this._status=null,this._userId=null,this._firstTime=!0,this._name=null,this._pic=null,this.processLoginResponse=function(b){a._status="connected",a._userId=FBInstant.player.getID(),a._name=FBInstant.player.getName(),a._pic=a.loadUrl("player_picture_1",FBInstant.player.getPhoto()),a.isConnected()&&(a._firstTime===!0&&a.setFirstTimeState(!0),a.trigger("connected"))},this.getFirstTimeState=function(){Oc.get("facebook_has_been_connected",function(b){a._firstTime=!b})},this.setFirstTimeState=function(a){Oc.set("facebook_has_been_connected",a)},this.loadUrl=function(a,b){return Fc.getById(a)||Fc.register(a,Dc(b)),a},Ic.call(this)}function f(){var a=this;this._status=null,this._userId=null,this._firstTime=!0,this._loginTime=null,this._gameId=null,this._appId=null,this._agent=null,this.checkSign=function(a){var b=md5("username="+this._userId+"&appkey=jdt864a8e12459874be012c6juehgihy&logintime="+this._loginTime);return a==b},this.processLoginResponse=function(b){this.checkSign(b)&&(a._status="connected",a.isConnected()&&(a._firstTime===!0&&a.setFirstTimeState(!0),a.trigger("connected")))},this.getFirstTimeState=function(){Oc.get("hi5_has_been_connected",function(b){a._firstTime=!b})},this.setFirstTimeState=function(a){Oc.set("hi5_has_been_connected",a)},Ic.call(this)}function g(){var a=this;this._status=null,this._userId=null,this._firstTime=!0,this.processLoginResponse=function(b){var c="object"==typeof b?b:JSON.parse(b);a._status="connected",c.id&&(a._userId=c.id),a.isConnected()&&(a._firstTime===!0&&a.setFirstTimeState(!0),a.trigger("connected"))},this.getFirstTimeState=function(){Oc.get("wakool_has_been_connected",function(b){a._firstTime=!b})},this.setFirstTimeState=function(a){Oc.set("wakool_has_been_connected",a)},Ic.call(this)}function h(a){this._impl=a}function i(){}function j(){this.PLACEMENT_ID="my_placement_id",this.RETRY_TIMEOUT=3e4,this.interstitialAd=null,this.rewardedVideo=null,this.ads={},this.apiCheck=function(){if("undefined"==typeof FBInstant)return!1;var a=FBInstant.getSupportedAPIs();return a.indexOf("getInterstitialAdAsync")>-1&&a.indexOf("getRewardedVideoAsync")},this.initAd=function(a,b){var c=this,d=a==h.REWARDED_AD?FBInstant.getRewardedVideoAsync:FBInstant.getInterstitialAdAsync;d(c.PLACEMENT_ID).then(function(d){c.loadAd(a,d,b)})["catch"](function(){b&&b(!1)})},this.loadAd=function(a,b,c){var d=this;b.loadAsync().then(function(){d.ads[a]=b,c&&c(!0)})["catch"](function(){d.ads[a]=null,c&&c(!1)})},this.retryInit=function(a){var b=this;b.initAd(a,function(c){c||setTimeout(function(){b.retryInit(a)},b.RETRY_TIMEOUT)})}}function k(){}function l(){this.adViews=Yc.get("rewarded_ad_views"),this.adTimer=Yc.get("rewarded_ad_timer"),this.limit=Bc.config.getAsInt("rewarded_ad_daily_limit",0),this.soundState=!1,this.updateState=function(){if(0!==this.adTimer&&0!==this.limit&&this.adViews>=this.limit){var a=Engine.now();a>=this.adTimer&&(this.adViews=0,Yc.set("rewarded_ad_views",this.adViews))}},this.showRewarded=function(a){this.limit>0&&this.adViews>=this.limit||(this.limit>0&&(this.adViews++,this.adViews>=this.limit&&(this.adTimer=Engine.now()+864e5,Yc.set("rewarded_ad_timer",this.adTimer)),Yc.set("rewarded_ad_views",this.adViews)),Bc.once("gdResumeGame",a),this.showAd())},this.showAd=function(){"undefined"!=typeof gdApi&&gdApi.showBanner()}}function m(){this.soundState=!1,this.messageHandler=function(a){"action=pause"==a.data&&(soundState=Xc.audio.enabled,soundState&&Bc.trigger("muteOn")),"action=resume"==a.data&&soundState&&Bc.trigger("muteOff")},this.showAd=function(){window.parent.postMessage("event=pause_ready","*")}}function n(a){this._array=a,this._index=0}function o(a){var b=this;this._url=a,this.calcSig=function(a){var c=b.sortObject(a),d="";for(var e in c)d+=c[e];return d+=String(null),md5(d)},this.sortObject=function(a){return Object.keys(a).sort().reduce(function(b,c){return b[c]=a[c],b},{})}}function p(){this._url="",this._userId=null,this._api=null,this._generateBankConfig=function(a){var b={deposites:{}};return Array.isArray(a)?(a.forEach(function(a){b.deposites[a.id]={sku:a.sku,type:a.type,price:Number(a.price),currency:a.currency,items:[{type:"mana",amount:a.infinity?1/0:Number(a.amount)}],title:a.title,description:a.description,photo:a.photo}}),b):b}}function q(){this._url="",this._userId=null,this._enabled=!1,this._api=null,Ic.call(this)}function r(){this.types={mana1000:"bag",mana3000:"box",mana10000:"suitcase",mana30000:"chest",infinity:"infinity"},this.items={mana1000:[{type:"mana",amount:1e3}],mana3000:[{type:"mana",amount:3e3}],mana10000:[{type:"mana",amount:1e4}],mana30000:[{type:"mana",amount:3e4}],infinity:[{type:"mana",amount:1/0}]},this.generateProduct=function(a){return{sku:a.productID,type:this.types[a.productID],price:Number(a.price),currency:a.priceCurrencyCode,items:this.items[a.productID],title:a.title,description:a.description,photo:a.imageURI}}}function s(){this._map={},this._cachedJSON={}}function t(a){this._impl=a}function u(){}function v(a,b,c){this._executor=a,this._command=b,this._timeout=c}function w(a){this._impl=a}function x(a,b,c){w.call(this,a),this._success=b,this._error=c}function y(a){this._readers=a}function z(a,b){this._name=a,this._timeout=b}function A(a,b,c){this._resourceLoader=a,this._url=b,this._timeout=c}function B(a){this._name=a}function C(a){this._impl=a}function D(){var a=this;this._news=[],this._filesAmount=0,this._outdatedNewsIds=[],this._generateNews=function(b,c){c.id=b,a._filesAmount++;var d=("news"+a._filesAmount).toString();return Fc.register(d,Dc(c.image),"news"),c.image=d,c.expDate=this._parseDate(c.expDate),c.expDate&&c.expDate<=new Date&&(c.outdated=!0),c},this._parseDate=function(a){if(!a)return null;var b=a.match(/(\d\d\d\d)-(\d\d)-(\d\d)/),c=new Date;return c.setUTCFullYear(b[1],b[2]-1,b[3]),c.setHours(0,0,0,0),c}}function E(){}function F(){this.ready=!1,this.apiCheck=function(){if("undefined"==typeof FBInstant)return!1;var a=FBInstant.getSupportedAPIs();return a.indexOf("payments.purchaseAsync")>-1}}function G(a,b,c){this._gameId=a,this._appId=b,this._cache={},this._interval=null,this._sandbox=c===!0,this.getTransactions=function(a){var b={app_id:this._gameId,user_id:Bc.account.userId};b.cmd="ask_hi5_items",Bc.stats.request(b,function(b){a(b)})},this.applyTransactions=function(a){var b,c,d=[];for(var e in a)b=a[e],c=Bc.manaShop.bank.getBoxBySku(b),Bc.manaShop.purchase(c.id),d.push(c.id);return d},this.approveTransactions=function(a){var b={app_id:this._gameId,user_id:Bc.account.userId},c=this;b.cmd="ask_hi5_items",b.list=JSON.stringify(a),Bc.stats.request(b,function(b){var d=JSON.parse(b);if(d.hasOwnProperty("approved")){for(var e in d.approved)a.hasOwnProperty(e)&&delete a[e];Object.keys(a).length>0&&c.approveTransactions(a)}})},this.genSign=function(a){var b=md5("username="+Bc.account.userId+"&appkey=jdt864a8e12459874be012c6juehgihy&paytime="+a);return b}}function H(a,b){this._onSuccess=null,this._api=new o(a),this._userId=b,this._interval=null,this._reloadMana=function(){Oc.forceGet("mana",function(a){bb(a)})},this._applyOrder=function(a,b,c){this._api.request({cmd:"order/complete",id:b,userId:a},function(a){c&&c(a)})},this._getNewOrders=function(a,b){this._api.request({cmd:"orders/new/get",userId:a},function(a){b&&b(a)})}}function I(a){this._impl=a}function J(a,b){this._onSuccess=null,this._api=new o(a),this._userId=b,this._reloadMana=function(){Oc.forceGet("mana",function(a){bb(a)})},this._applyOrder=function(a,b,c){this._api.request({cmd:"order/complete",id:b,userId:a},function(a){c&&c(a)})},this._getNewOrders=function(a,b){this._api.request({cmd:"orders/new/get",userId:a},function(a){b&&b(a)})}}function K(a,b){this._projectId=a,this._cache={},this._interval=null,this._sandbox=b===!0,this.getTransactions=function(a){var b={app_id:this._projectId,user_id:Bc.account.userId};b.cmd="ask_wakool_items",Bc.stats.request(b,function(b){a(b)})},this.applyTransactions=function(a){var b,c,d=[];for(var e in a)b=a[e],c=Bc.manaShop.bank.getBoxBySku(b),Bc.manaShop.purchase(c.id),d.push(c.id);return d},this.approveTransactions=function(a){var b={app_id:this._projectId,user_id:Bc.account.userId},c=this;b.cmd="ask_wakool_items",b.list=JSON.stringify(a),Bc.stats.request(b,function(b){var d=JSON.parse(b);if(d.hasOwnProperty("approved")){for(var e in d.approved)a.hasOwnProperty(e)&&delete a[e];Object.keys(a).length>0&&c.approveTransactions(a)}})}}function L(a,b){this._api=new o(a),this._userId=b,this._reloadMana=function(){Oc.forceGet("mana",function(a){bb(a)})},this._applyOrder=function(a,b,c){this._api.request({cmd:"order/complete",id:b,userId:a},function(a){c&&c(a)})},this._getNewOrders=function(a,b){this._api.request({cmd:"orders/new/get",userId:a},function(a){b&&b(a)})}}function M(a,b){this._projectId=a,this._cache={},this._interval=null,this._sandbox=b===!0,this.getTransactions=function(a){var b={};b.cmd="ask_xsolla_items",Bc.stats.request(b,function(b){a(b)})},this.applyTransactions=function(a){var b,c=[];for(var d in a)b=a[d],0==b.indexOf("quest")?c.push(this.applyQuest(b)):c.push(this.applyMana(b));return c},this.applyMana=function(a){var b=Bc.manaShop.bank.getBoxBySku(a);return Bc.manaShop.purchase(b.id),b.id},this.applyQuest=function(a){var b=Bc.chapters.getChapterById(a);return b.unlock(),b.id},this.approveTransactions=function(a){var b={},c=this;b.cmd="ask_xsolla_items",b.list=JSON.stringify(a),Bc.stats.request(b,function(b){var d=JSON.parse(b);if(d.hasOwnProperty("approved")){for(var e in d.approved)a.hasOwnProperty(e)&&delete a[e];Object.keys(a).length>0&&c.approveTransactions(a)}})}}function N(){var a=this;this._interval=null,this._lastPromoItem={},this._rawData=[],this._data=[],this._filesAmount=0,this._processFile=function(b,c){a._filesAmount++;var d=("promo"+a._filesAmount).toString();b[c.name]=d,Fc.register(d,Dc(c.path+c.filename),"promo")},this._processLink=function(a,b){a[b.name]=b},this._processText=function(a,b){a[b.name]=b.text},this._processParam=function(a,b){a[b.name]=b.value},this._processArray=function(a,b){a[b.name]=b.content},this._handlers={file:a._processFile,url:a._processLink,text:a._processText,param:a._processParam,array:a._processArray},this._processPromo=function(a){var b={};if(b.type=a.promo_type,b.vertical_priority=a.vertical_priority,b.horizontal_priority=a.horizontal_priority,a.content)for(var c=0;c<a.content.length;c++){var d=a.content[c];this._handlers[d.type]&&this._handlers[d.type](b,d)}return b},this._sortPromo=function(a,b){if(parseInt(a.vertical_priority)>parseInt(b.vertical_priority))return-1;if(parseInt(a.vertical_priority)<parseInt(b.vertical_priority))return 1;if(parseInt(a.vertical_priority)==parseInt(b.vertical_priority)){if(parseInt(a.horizontal_priority)>parseInt(b.horizontal_priority))return-1;if(parseInt(a.horizontal_priority)<parseInt(b.horizontal_priority))return 1;if(parseInt(a.horizontal_priority)==parseInt(b.horizontal_priority))return 0}return 0}}function O(){this.data={}}function P(a){this._impl=a}function Q(){}function R(a,b,c){this._loader=a,this._url=b,this._time=c}function S(a,b){this._data=b,this._executor=a,this.events={}}function T(){var a=this;this._accountType=null,this._userId=null,this._enabled=!1,this._restoreOffersQueue=[],this.calcSig=function(b){var c=a.sortObject(b),d="null";for(var e in c)d+=e+"="+c[e];return md5(d)},this.sortObject=function(a){return Object.keys(a).sort().reduce(function(b,c){return b[c]=a[c],b},{})},this.request=function(b,c,d){b.sig=a.calcSig(b);var e=new O;e.fill(b);var f=new P(new U(Sh,"https://html5.joybits.org/api/index.php")),g=new x(new v(f,e,1e4),function(a){try{var b=JSON.parse(a);b.success?c&&c(b.response):d&&d()}catch(e){console.error(e)}});g.load()},Ic.call(this)}function U(a,b,c){this._loader=a,this._url=b,this._time=c}function V(a){Object.merge(this,a),Object.addProperty(this,"__configKey__",Object.WRITABLE,""),Object.seal(this)}function W(a){void 0!==a.node,void 0!==a.api,void 0!==a.onShow,void 0!==a.onHide,Ic.call(this,a),Object.merge(this,a),this.events=new Ic,sc()&&this.node&&Xc.setNodeStateRecursive(this.node,"portrait"),Object.freeze(this)}function X(a){void 0!==a.onHide,Ic.call(this,a),Object.merge(this,a),Object.freeze(this)}function Y(){}function Z(a){Object.merge(this,a),this.config=new V({active:!1}),Yc.register(Z.CONFIG_KEY.format(this),this.config)}function $(){var a=this;Bc.on("achievementUnlocked",function(b){a.historyPush(b)}),Bc.on("elementVisible",function(b){a.config.consequentDiscoveries++,a.config.commit()}),Bc.on("achievementsCheck",function(){a.check()}),Bc.on("elementReactionFailed",function(b){a.config.consequentDiscoveries=0,a.config.commit()}),Bc.on("matchedReaction",function(b){b.elements[0]===b.elements[1]&&(a.config.pendingRequests.push("605892"),a.config.commit()),b.results.forEach(function(b){3===Bc.currentChapter.elementsDiscoveredCounter[b]&&(a.config.pendingRequests.push("605872"),a.config.commit())});var c="Philosophers stone"===b.elements[0]?1:-1;-1===c&&(c="Philosophers stone"===b.elements[1]?0:-1),c>=0&&!a.isUnlockedById("605912")&&(a.visibleReactionsWithPhilosophersStone={},a.visibleReactionsWithPhilosophersStone[b.elements[c]]=!0,Bc.chapters.getChaptersAsArray().forEach(function(b){b instanceof na&&Object.merge(a.visibleReactionsWithPhilosophersStone,a.getReactionsFromHistoryWithElement(b,"Philosophers stone"))}),a.allReactionsWithPhilosophersStone||(a.allReactionsWithPhilosophersStone={},Bc.chapters.getChaptersAsArray().forEach(function(b){b instanceof na&&Object.merge(a.allReactionsWithPhilosophersStone,a.getReactionsWithElement(b,"Philosophers stone"))})))}),Bc.on("review",function(){a.config.pendingRequests.push("605992")}),Bc.on("shared",function(){a.config.pendingRequests.push("605982")}),Bc.on("purchased",function(){a.config.pendingRequests.push("701302")}),this.config=new V({history:[],consequentDiscoveries:0,pendingRequests:[]}),Yc.register("achievements",this.config),a.allReactionsWithPhilosophersStone=null,a.visibleReactionsWithPhilosophersStone=null}function _(a){var b=this;Object.merge(this,a),a.elements.forEach(function(a){}),this.config=new V({visible:!1,active:!1}),Yc.register(_.CONFIG_KEY.format(this),this.config),this.visible||Bc.on("elementVisible",function(a){b.visible||-1!==b.elements.indexOf(a)&&(b.visible=b.elements.every(function(a){return _c.getElementById(a)}))})}function aa(a){a.forEach(function(a){this[a.id]=a},this),this.push.apply(this,a),this.config=new V({artifacts_attempts_amount:Bc.config.getAsInt("artifacts_attempts_amount",100),rechargeStartTime:-1}),Yc.register("artifactsConfig",this.config)}function ba(){this.bonus=null}function ba(){this._boxes={},this._boxesArray=[]}function ca(a,b){this._endTime=a,this._bank=b}function da(a,b,c,d,e,f,g,h,i){this._id=a,b&&(this._type=b),this._price=c,this._special=d,this._currency=e,this._sku=f,this._title=g,this._description=h,this._photo=i}function ea(a){this.itemsFactory=a}function fa(a){if(this.producers={},a)for(var b in a)a.hasOwnProperty(b)&&this.register(b,a[b])}function ha(a){this.bonus=a&&a.bonus||!1}function ia(a,b){ha.call(this,a),this.type=a.type,this.name=a.name,this.amount=a.amount,this.hints=b}function ja(a,b){ha.call(this,a),this.type=a.type,this.amount=a.amount,this.addMana=b}function ka(a){this._bank=a,this._bonuses=[]}function la(){function a(a){e+=a}function b(b){var c=new fa({mana:function(b){return new ja(b,a)},hint:function(a){return new ia(a,f)}}),e=new ea(c),g=e.createBank(b),h=new ka(g),i=e.createBonus(d);return h.addBonus(i),h}var c={deposites:{item1:{type:"bag",price:100,currency:"USD",items:[{type:"mana",amount:200}]},item2:{type:"chest",price:1e3,currency:"USD",items:[{type:"mana",amount:300}]}}},d={endTime:Engine.now()+1e3,bank:{deposites:{item1:{price:50,items:[{type:"hint",name:"1",amount:2},{type:"hint",name:"2",amount:23}]},item2:{price:70,items:[{type:"mana",amount:1e3},{type:"hint",name:"1",amount:5}]}}}},e=100,f={1:{amount:0,add:function(a){this.amount+=a}},2:{amount:0,add:function(a){this.amount+=a}}},g=b(c),h=g.bank.getBoxById("item1");g.purchase(h.id),h=g.createBonusIterator().next().bank.getBoxById(h.id),h=g.bank.getBoxById("item2"),g.purchase(h.id),h=g.createBonusIterator().next().bank.getBoxById(h.id)}function ma(a){var b=this;Object.addProperty(this,"id",a.id),Object.addProperty(this,"data",a.data),Object.addProperty(this,"_elementsAll",Object.ENUMERABLE,{}),Object.addProperty(this,"_elementsKids",Object.ENUMERABLE,{}),Object.addProperty(this,"_elementsDataAll",a.elementsData.all),Object.addProperty(this,"_elementsDataKids",a.elementsData.kids),Object.addProperty(this,"groups",a.groups),Object.addProperty(this,"groupsWithElements",{}),Object.addProperty(this,"reactions",a.reactions),Object.addProperty(this,"initialized",Object.WRITABLE|Object.ENUMERABLE,!1),Object.addProperty(this,"history",Object.ENUMERABLE,[]),Object.addProperty(this,"historyMap",Object.ENUMERABLE,{}),Object.addProperty(this,"elementsDiscoveredCounter",Object.ENUMERABLE,{}),Object.addProperty(this,"hintsUsed",Object.WRITABLE|Object.ENUMERABLE,0),Object.addProperty(this,"complete",Object.WRITABLE|Object.ENUMERABLE,!1),Object.addProperty(this,"_startElementsLengthAll",Object.WRITABLE|Object.ENUMERABLE,-1),Object.addProperty(this,"_startElementsLengthKids",Object.WRITABLE|Object.ENUMERABLE,-1),Object.addProperty(this,"unlocked",Object.WRITABLE|Object.ENUMERABLE,!1),Object.addProperty(this,"pairedElements",Object.WRITABLE|Object.ENUMERABLE,new fb),Object.addProperty(this,"_possibleReactionsCache",Object.WRITABLE,null),Object.addProperty(this._elementsAll,"length",Object.WRITABLE,0),Object.addProperty(this._elementsDataAll,"length",Object.keys(a.elementsData.all).length),Object.addProperty(this._elementsKids,"length",Object.WRITABLE,0),Object.addProperty(this._elementsDataKids,"length",Object.keys(a.elementsData.kids).length),Object.addProperty(this.groups,"length",Object.WRITABLE,0),Object.addProperty(this.groupsWithElements,"length",Object.WRITABLE,0),Object.addProperty(this.reactions,"length",Object.WRITABLE,0),this.unlockParams=a.unlockParams||a.data.unlockParams,Object.addProperty(this,"inappPrice",Object.WRITABLE,{}),Bc.on("hintUsed",function(a){Bc.currentChapter===b&&b.hintsUsed++}),Bc.on("safeModeChanged",function(){b._possibleReactionsCache=null}),Object.seal(this)}function na(a){Object.addProperty(this,"elementsMaching",new Ia({chapter:this})),Object.addProperty(this,"progressCalculator",new kb({chapter:this})),Object.addProperty(this,"elementsIterator",new Fa({chapter:this})),ma.call(this,a)}function oa(a){Object.addProperty(this,"elementsMaching",new Ha({chapter:this})),Object.addProperty(this,"progressCalculator",new ib({chapter:this})),Object.addProperty(this,"elementsIterator",new Ea({chapter:this})),Object.addProperty(this,"filteredReactions",[]),ma.call(this,a)}function pa(a){Object.addProperty(this,"elementsMaching",new Ia({chapter:this})),Object.addProperty(this,"progressCalculator",new kb({chapter:this})),Object.addProperty(this,"elementsIterator",new Fa({chapter:this})),Object.addProperty(this,"progressLabel",Object.WRITABLE,""),Object.addProperty(this,"lastRemeberedElementName",Object.WRITABLE,""),ma.call(this,a)}function qa(a){Object.merge(this,a),Object.freeze(this)}function ra(a){var b=this;this.chapters=a.chapters,function(){function a(){c=!1,Oc.set("chapters",b),Bc.remoteStorage.set("chapters",b)}var c=!1;Bc.on("chapterChanged",function(){c||(c=!0,setTimeout(a,ma.AUTOSAVE_PERIOD))})}(),Object.freeze(this)}function sa(a){this.parent=a.parent,this.chapterId=a.chapterId}function ta(a){sa.call(this,a),this.REQUIRED_ELEMENTS=100}function ua(a){sa.call(this,a)}function va(a){sa.call(this,a)}function wa(a){sa.call(this,a)}function xa(a){sa.call(this,a)}function ya(a){sa.call(this,a)}function za(a){sa.call(this,a),this.totalInSafeMode=0;for(var b=Bc.chapters.getChapterById(this.chapterId),c=0,d=b.data.questElements.length;d>c;++c){var e=b.getPossibleElementById(b.data.questElements[c]);e&&!e.isAdult&&this.totalInSafeMode++}}function Aa(a){sa.call(this,a)}function Ba(){var a=this;this.pendingActions=[],this.conditions={},this.conditions.length=0,this.registeredModels={},this.events=new Ic,this.registerModel("episode_1",ta),this.registerModel("episode_2",ua),this.registerModel("episode_3",va),this.registerModel("default",Aa),this.registerModel("puzzle",wa),this.registerModel("quest_princess",ya),this.registerModel("quest_lost",xa),this.registerModel("quest_santa",za);var a=this;Bc.chapters.getChaptersAsArray().forEach(function(b){a.registerCondition(new a.registeredModels[b.data.conditions]({parent:a,chapterId:b.id}))}),Bc.on("elementVisible",function(b){null!=Bc.currentChapter&&a.onElementVisible(Bc.currentChapter,b)}),Bc.on("chapterStart",function(b){a.onChapterStart(b)}),Bc.on("chapterStop",function(b){a.onChapterStop(b)}),Bc.on("chapterReset",function(b){a.onChapterReset(b)}),Bc.on("chapterChanged",function(b){a.onChapterChanged(b)})}function Ca(a){Object.addProperty(this,"parent",a.parent),Object.addProperty(this,"_id",a.id),Object.addProperty(this,"_image",a.image),Object.addProperty(this,"_isAdult",a.isAdult),Object.addProperty(this,"_group",a.group),Object.addProperty(this,"_text",Object.WRITABLE,""),Object.addProperty(this,"_quotes",Object.WRITABLE,null),Object.addProperty(this,"_isFinal",Object.WRITABLE,!0),a.id&&Ca.instancesWithId.push(this),Object.seal(this)}function Da(a){var b=this;Object.addProperty(this,"_dirty",Object.WRITABLE,!0),Object.addProperty(this,"_values",Object.WRITABLE,null),Object.addProperty(this,"_currentIndex",Object.WRITABLE,0),this.chapter=a.chapter,Bc.on("chapterChanged",function(a){a===b.chapter&&(b._dirty=!0)}),Bc.on("safeModeChanged",function(){b._dirty=!0}),Object.seal(this)}function Ea(a){Da.call(this,a)}function Fa(a){Da.call(this,a)}function Ga(a){this.chapter=a.chapter,Object.freeze(this)}function Ha(a){Ga.call(this,a)}function Ia(a){Ga.call(this,a)}function Ja(a){var b=this;this._prepareSlots=function(a){for(var b={dotted:"no_pairs",gray:"no_reaction",disable_repetitions:"no_repeat",hint1:"1",hint2:"2",hint3:"3"},c=[],d=0;d<a.length;d++){var e={},f=a[d];e.amount=f.quantity,b[f.name]?(e.type="hint",e.name=b[f.name]):(e.name=f.name,e.type=e.name),e.appear_prob=f.appear_prob,e.choose_prob=f.choose_prob,"_JACKPOT_"==e.name&&(e.appear_prob=1e8,this._jackpot=f),"_CHEST_"==e.name&&(this._chestItems=f.items),c.push(e)}return c},this._getWeighted=function(a){var b=a.reduce(function(a,b){return a+b});if(0==b)return-1;for(var c=Math.random()*b,d=0,e=0,f=0;f<a.length;f++){if(e=d+a[f],c>=d&&e>c)return f;d=e}return-1},this._selectWheelSlots=function(a){for(var c=[],d=a.clone(),e=0;8>e;e++){var f=b._getAppearProbs(d),g=b._getWeighted(f);0>g&&(g=0),c.push(d[g]),d.splice(g,1)}return c},this._getAppearProbs=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].appear_prob;return b},this._getChooseProbs=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].choose_prob;return b},this._enabled=a.enabled,this._price=a.price,this._cooldown=a.cooldown,this._jackpot=null,this._chestItems=null,this._slots=this._prepareSlots(a.slots.items),this._jackpotState=0}function Ka(a){Ic.call(this,a);var b=this;Object.addProperty(this,"_dirty",Object.WRITABLE,Ka.DIRTY_ALL),Object.addProperty(this,"elements",Object.WRITABLE,null),Object.addProperty(this,"possibleElements",Object.WRITABLE,null),Object.addProperty(this,"_newElements",Object.WRITABLE|Object.ENUMERABLE,0),Object.merge(this,a),Bc.on("chapterChanged",function(a){a===b.chapter&&(b._dirty|=Ka.DIRTY_ALL)}),Bc.on("chapterReset",function(a){a===b.chapter&&(b._dirty|=Ka.DIRTY_ALL,b.trigger("newElementsChanged",0))}),Bc.on("safeModeChanged",function(){b._dirty|=Ka.DIRTY_ALL}),Bc.on("elementVisible",function(a){b.chapter.initialized&&Bc.currentChapter===b.chapter&&b.chapter.getElementById(a).group===b.data&&b.newElements++}),Object.seal(this)}function La(a){Object.addProperty(this,"parent",a.parent),Object.addProperty(this,"_id",a.id),Object.addProperty(this,"_image",a.image),Object.freeze(this)}function Ma(a){var b=this;Object.merge(this,a),this.config=new V({amount:a.initialAmount?a.initialAmount:0,buyTime:0,depletedTime:0,adsRewardTime:0}),Yc.register(Ma.CONFIG_KEY.format(this),this.config),this.rechargeTimer=setInterval(function(){b.rechargeable&&b.amount<=0&&0==b.rechargeRemainingTime&&(b.add(1),Bc.trigger("hintRecharged",this))},1e3),this.durationTimer=setInterval(function(){b.duration&&(b.amount<=0||b.config.buyTime<=Engine.now()&&(b.config.amount--,b.config.commit(),Bc.trigger("hintCompleted",this)))},1e3)}function Na(){}function Oa(a,b,c,d,e){this.generatePhotoImageName=function(a){return"social_photo_"+a},this.loadUrl=function(a,b){return Fc.getById(a)||Fc.register(a,Dc(b)),a},this.id=a,this.name=b,this.score=c,this.rank=d,this.photo=this.loadUrl(this.generatePhotoImageName(a),e)}function Pa(){this.leaderboard=null}function Qa(a){this.impl=a,this.impl.init()}function Ra(){if(100!==Yc.get("light_power")){var a=Yc.get("light_timer");if(a>0){var b=Engine.now()-a,c=_a(),d=b/1e3/c*100;d>=1&&(Va(Wa()+d),Wa()<100?Yc.set("light_timer",Engine.now()):Yc.set("light_timer",0))}}}function Sa(){var a=_a(),b=Yc.get("light_power");if(b>=100)return 0;var c=Yc.get("light_timer"),d=Engine.now()-c,e=$a(),f=d/1e3/a*100,g=Math.floor((b+f)/100*e),h=g+1,i=h/e*100,j=i-b-f,k=Math.round(j/100*a);return k}function Ta(a){Yc.set("light_power_type",a),Bc.trigger("lightPowerTypeChanged",a)}function Ua(){return Yc.get("light_power_type")}function Va(a){var b=Math.max(a,0);b>=100&&(b=100,Yc.set("light_timer",0)),Yc.get("light_power")!==1/0&&(Yc.set("light_power",a),Bc.trigger("lightPowerChanged",a))}function Wa(){return Math.min(Yc.get("light_power"),100)}function Xa(){Va(Wa()-100/$a()),0===Yc.get("light_timer")&&Wa()<100&&Yc.set("light_timer",Engine.now())}function Ya(a){Va(Wa()+100/$a()*a)}function Za(){return Math.floor(Wa()/100*$a())}function $a(){switch(Yc.get("light_power_type")){case 1:default:return Bc.config.getAsInt("light_1_reactions",10);case 2:return Bc.config.getAsInt("light_2_reactions",20);case 3:return 1/0}}function _a(){switch(Yc.get("light_power_type")){case 1:default:return Bc.config.getAsInt("light_1_restore_time",36e3);case 2:return Bc.config.getAsInt("light_2_restore_time",72e3);case 3:return 0}}function ab(){return Za()===$a()}function bb(a){Yc.get("mana")!==1/0&&(Yc.set("mana",a),Bc.trigger("manaChanged",a))}function cb(){return Yc.get("mana")}function db(a){Object.merge(this,a),this.config=new V({visible:!1,finished:!1,reward:null}),Yc.register(db.CONFIG_KEY.format(this.element.id),this.config)}function eb(a){function b(a){if(!Bc.config.getAsBool("auto_missions_enabled",!0))return!1;if(d=!1,c.finished,c.visible.length>=eb.MAX_VISIBLE)return!1;if(0!==Yc.get("missionsVisibleElementCounter"))return!1;for(var b=a.getPossibleReactions(),e=0,f=b.length;f>e;e++)for(var g=b[e],h=0,i=g.results.length;i>h;h++){var j=g.results[h];if(c[j]&&!c[j].visible&&!a.getElementById(j))return c[j].activate()&&Yc.set("missionsActivated",Yc.get("missionsActivated")+1),Yc.set("missionsVisibleElementCounter",-1),!0}return!1}var c=this;this.push.apply(this,a),this.forEach(function(a){this[a.element.id]=a},this),Bc.on("elementVisible",function(a){var b=_c.getElementsLength()/_c.getPossibleElementsLength();Yc.set("missionsVisibleElementCounter",(Yc.get("missionsVisibleElementCounter")+1)%((6*b|0)+1))});var d=!1;Bc.on("chapterChanged",function(a){!d&&a.initialized&&(setTimeout(b,0,a),d=!0)})}function fb(){this.elements={}}function gb(a){this.config=new V({firstTime:!0,newMission:""}),Object.addProperty(this,"elements",Object.WRITABLE,null),Yc.register("planet",this.config);var b=this;Bc.on("chapterReset",function(a){"episode_1"===a.id&&b.reset()}),Bc.on("newMission",function(a){b.newMission=a.element.id}),Object.merge(this,a)}function hb(a){var b=this;Object.addProperty(this,"_value",Object.WRITABLE,0),Object.addProperty(this,"_dirty",Object.WRITABLE,!0),this.chapter=a.chapter,Bc.on("chapterChanged",function(a){a===b.chapter&&(b._dirty=!0)}),Bc.on("safeModeChanged",function(a){b._dirty=!0})}function ib(a){var b=this;hb.call(this,a),this.game=this.chapter,this.reset(),Bc.on("chapterReset",function(a){b.game===a&&b.reset()})}function jb(a){if(this.mElements={},this.mReactions={},this.mFirstReaction="",this.minReactions=0,void 0!==a)for(var b in a)a.hasOwnProperty(b)&&(this.mElements[b]=a[b])}function kb(a){hb.call(this,a)}function lb(a){this.elements=a.elements,this.results=a.results,this.isAdult=this.elements.some(function(a){return Bc.elements[a].isAdult}),this.isAdult=this.isAdult||this.results.every(function(a){return Bc.elements[a].isAdult}),this.id=lb.generateId(this.elements),Object.freeze(this)}function mb(){function a(){b.selectedLeft=null,b.selectedRight=null,b.groupState[0]=null,b.groupState[1]=null}var b=this;return this.config.finished===!0?null:(this.selectedLeft=null,this.selectedRight=null,this.groupState=[null,null],this.transitions={ChapterStop:function(a){return a.hide},ChapterStart:function(b){return a(),b.open_left_group},BoardShown:function(a){return a.selectedLeft=a.selectedRight=null,a.open_left_group},MatchedReaction:function(a,b){return a.finished},ElementSelected:function(a,b){"left"===b.side?a.selectedLeft=b.element:a.selectedRight=b.element},ElementBlured:function(a,b){"left"===b.side?a.selectedLeft=null:a.selectedRight=null},GroupClosed:function(a,b){return"left"===b.side||"center"===b.side?a.open_left_group:void 0}},this.open_left_group={transitions:{GroupOpened:function(a,b){return"left"===b.side||"center"===b.side?"Fire"!==b.group.data.id?a.close_left_group:null==a.groupState[1]?a.open_right_group:"Earth"===a.groupState[1].group.data.id?a.select_left_element:a.close_right_group:void 0}},onBegin:function(a){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialOpenGroupLeft"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialOpenGroupLeft"})}},this.close_left_group={transitions:{GroupClosed:function(a,b){return"left"===b.side||"center"===b.side?a.open_left_group:void 0}},onBegin:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialCloseGroupLeft"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialCloseGroupLeft"})}},this.close_right_group={transitions:{GroupClosed:function(a,b){return"right"===b.side?a.open_right_group:"left"===b.side||"center"===b.side?a.open_left_group:void 0}},onBegin:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialCloseGroupRight"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialCloseGroupRight"})}},this.select_left_element={transitions:{GroupClosed:function(a,b){return"right"===b.side?a.open_right_group:a.open_left_group},ElementSelected:function(a,b){return"left"===b.side&&"Fire"===b.element.id?a.select_right_element:void 0}},onBegin:function(a){return null!==a.selectedLeft&&"Fire"===a.selectedLeft.id?a.select_right_element:void Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialSelectElementLeft"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialSelectElementLeft"})}},this.select_right_element={transitions:{GroupClosed:function(a,b){return"right"===b.side?a.open_right_group:a.open_left_group},ElementSelected:function(a,b){return"Earth"===b.element.id?a.open_left_group:void 0},ElementBlured:function(a,b){if("left"===b.side){if(a.selectedLeft=null,"Fire"===b.element.id)return a.select_left_element}else a.selectedRight=null}},onBegin:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialSelectElementRight"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialSelectElementRight"})}},this.open_right_group={transitions:{GroupOpened:function(a,b){return"right"===b.side?"Earth"!==b.group.data.id?a.close_right_group:a.select_left_element:void 0}},onBegin:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialOpenGroupRight"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialOpenGroupRight"})}},this.finished={transitions:{},onBegin:function(){b.config.finished=!0,b.config.commit(),b.unregisterAll()},onEnd:function(){}},this.hide={transitions:{},onBegin:function(){b.unregisterAll()},onEnd:function(){}},this.change(this.open_left_group),this.listener={groupOpened:function(a){b.transition("GroupOpened",a),"left"===a.side||"center"===a.side?b.groupState[0]=a:b.groupState[1]=a},groupClosed:function(a){b.transition("GroupClosed",a),"left"===a.side||"center"===a.side?b.groupState[0]=null:b.groupState[1]=null},elementSelected:function(a){b.transition("ElementSelected",a)},elementBlurred:function(a){b.transition("ElementBlured",a)},matchedReaction:function(a){b.transition("MatchedReaction",a)},chapterStop:function(a){b.transition("ChapterStop",a)},chapterStart:function(a){b.transition("ChapterStart",a)}},this.unregisterAll=function(){Bc.off("groupOpened",b.listener.groupOpened),Bc.off("groupClosed",b.listener.groupClosed),Bc.off("elementSelected",b.listener.elementSelected),Bc.off("elementBlured",b.listener.elementBlurred),Bc.off("matchedReaction",b.listener.matchedReaction),Bc.off("chapterStop",b.listener.chapterStop),Bc.off("chapterStart",b.listener.chapterStart)},Bc.on("groupOpened",this.listener.groupOpened),Bc.on("groupClosed",this.listener.groupClosed),Bc.on("elementSelected",this.listener.elementSelected),Bc.on("elementBlured",this.listener.elementBlurred),Bc.on("matchedReaction",this.listener.matchedReaction),Bc.on("chapterStop",this.listener.chapterStop),void Bc.on("chapterStart",this.listener.chapterStart))}function nb(){var a=this;return this.config.finished===!0?null:(this.transitions={},this.incorrectAttempts=0,this.maxIncorrectAttempts=10,this.count_attempts={transitions:{GroupOpened:function(a,b){return a.incorrectAttempts++,a.incorrectAttempts===a.maxIncorrectAttempts?a.show_search:void 0},GroupClosed:function(a,b){return a.incorrectAttempts++,a.incorrectAttempts===a.maxIncorrectAttempts?a.show_search:void 0},ChapterStop:function(a){return a.hide},ElementSelected:function(a,b){a.incorrectAttempts=0}},onBegin:function(a){},onEnd:function(){}},this.show_search={transitions:{BoardShown:function(a){return a.finished},ChapterStop:function(a){return a.finished},MouseDown:function(a){return a.finished}},onBegin:function(a){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"show",name:"tutorialSearch"})},onEnd:function(){Bc.conditions.events.trigger("Action",{message:"tutorial",action:"hide",name:"tutorialSearch"})}},this.finished={transitions:{},onBegin:function(){a.config.finished=!0,a.config.commit()},onEnd:function(){}},this.hide={transitions:{},onBegin:function(){},onEnd:function(){}},this.change(this.count_attempts),this.listener={groupOpened:function(b){a.transition("GroupOpened",b)},groupClosed:function(b){a.transition("GroupClosed",b)},elementSelected:function(b){a.transition("ElementSelected",b)},mouseDown:function(){a.transition("MouseDown")},chapterStop:function(b){a.transition("ChapterStop",b),Bc.off("groupOpened",a.listener.groupOpened),Bc.off("groupClosed",a.listener.groupClosed),Bc.off("chapterStop",a.listener.chapterStop),Bc.off("elementSelected",a.listener.elementSelected),th.off("mousedown",a.listener.mouseDown)}},Bc.on("groupOpened",this.listener.groupOpened),Bc.on("groupClosed",this.listener.groupClosed),Bc.on("chapterStop",this.listener.chapterStop),Bc.on("elementSelected",this.listener.elementSelected),void th.on("mousedown",this.listener.mouseDown))}function ob(a){Yc.set("undo",a),Bc.trigger("undoChanged",a)}function pb(){return Yc.get("undo")}function qb(a){var b=this,c=a.loops;this.loop=!0;var d=new Jc({type:"vsync",duration:this.duration*c*(this.reverse?2:1),on:{stop:function(){b.playing&&b.stop()}}});return this.on("start",function(){d.play()}).on("end",function(){d.stop()}),this}function rb(){return this.destroy=rb.destroyMethod,this}function sb(){return Xc.factoryNode(Kc,{parent:this,name:"mouse",zIndex:1,x:-this.width/2,y:-this.height/2,width:this.width,height:this.height,on:{mousefocus:function(a){a.propagate=!1}}}),this}function tb(a){var b=this,c=a.on;a.on=null,Lc.call(this,a);var d,e=Xc.factoryNode(Kc,{parent:this,name:"area",zIndex:1,x:-this.width/2,y:-this.height/2,width:this.width,height:this.height,$showed:function(){Bc.mouse.registerMouseOver(e),void 0!==d&&(b.scale=d)},$hidden:function(){Bc.mouse.unregisterMouseOver(e)},on:Object.merge({mousefocus:function(a){a.propagate=!1,void 0===d&&(d=b.scale),Xc.animate(b,"scale",{duration:50,from:d,to:d+.1})},mouseblur:function(){Xc.animate(b,"scale",{duration:50,from:d+.1,to:d})},mouseclick:function(){var a=b.clickSound||"click";Xc.playSound(a)},mouseover:function(){var a=b.overSound||"button_hover";Xc.playSound(a)}},c||{})});return this}function ub(a){var b=Object.getPrototypeOf(this);this.contentHeight=a&&a.contentHeight,void 0!=this.contentHeight?this.__children=[]:delete this.__children,Kc.call(this,a),this.spacing=a&&null!=a.spacing?a.spacing:b.spacing,this.isDestroying=!1}function vb(a){var b=this;this.width=250,this.height=76,tb.call(this,a),this.achievement=a.achievement||this.achievement,new Kc({parent:this,x:-125,children:[new Lc({x:38,width:76,height:76,$preload:["achievements/lock_achievement",xc.REMOVE_SMALL_ACHIEVEMENTS?this.achievement.largeImage:this.achievement.image],$base:{scale:.5,opacity:0},$showed:function(){this.$.preload=["achievements/lock_achievement"],b.achievement.active&&Xc.setNodeState(this,"active"),Xc.animate(this,"scale",{delay:400,duration:100,from:.5,to:1,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.linear})},$active:function(){this.$.preload=[xc.REMOVE_SMALL_ACHIEVEMENTS?b.achievement.largeImage:b.achievement.image]}}),new Kc({$base:{x:-85,scale:.5,opacity:0},$showed:function(){Xc.animate(this,"x",{delay:800,duration:200,from:-85,to:0,easing:Vc.linear}),Xc.animate(this,"scale",{delay:800,duration:200,from:.5,to:1,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:800,duration:200,from:0,to:1,easing:Vc.linear})},children:[new nc({x:80,y:-23,width:a.textWidth||145,height:40,text:this.achievement.name,textColor:"rgba(79, 43, 21, 1)",textAlign:"left",fontType:"author"})]})]}),Xc.bindCustomMethodsRecursive(this)}function wb(a){var b=this;Kc.call(this,a),new Lc({parent:this,width:oh,height:ph,color:"black",opacity:.5,on:{mousefocus:function(a){a.propagate=!1}}}),new Kc({parent:this,name:"content",children:a.children,scale:.5}),this.opacity=0,this.$.showed=function(){Xc.animate(b,"opacity",{from:0,to:1,duration:100}),Xc.animate(b.content,"scale",{from:.5,to:1,duration:100})}}function xb(a){this.height=45,Kc.call(this,a),Xc.factoryNode(mc,{parent:this,name:"char",x:sc()?40:-40,y:sc()?-this.height/2:-this.height/2+5,width:190,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"medium"}),Xc.factoryNode(Lc,{parent:this,y:15,width:469,height:8,image:"interface/line"})}function yb(a){this.width=20,this.height=20,tb.call(this,a),Xc.factoryNode(mc,{parent:this,textColor:"white",name:"text",font:"font",width:20,textAlign:"center",x:-this.width/2,y:-this.height/2,fontType:"author"})}function zb(a){var b=this;this.width=131,this.height=153,tb.call(this,a);var c=Xc.factoryNode(Kc,{parent:this,name:"body"});Xc.factoryNode(Lc,{parent:c,name:"stand",x:0,y:54,width:131,height:51,$preload:"artifacts_menu/stand"}),Xc.factoryNode(Lc,{parent:c,name:"plate",x:0,y:75,width:131,height:53,$preload:"artifacts_menu/plate"});var d=Xc.factoryNode(Kc,{parent:c,name:"content"}),e=Xc.factoryNode(Lc,{name:"artifact",width:131,height:153,image:void 0,children:[Xc.factoryNode(nc,{parent:this,name:"title",x:-43.5,y:55.5,width:91,height:31,text:"name",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"small_artifact"})]}),f=Xc.factoryNode(Lc,{name:"lock",x:0,y:0,width:131,height:153,$preload:"artifacts_menu/lock"});this.$.hidden=function(){b.removeChild(c)},this.$.active=function(){b.appendChild(c),Xc.setViewPartial(d,e)},this.$.locked=function(){b.appendChild(c),Xc.setViewPartial(d,f)}}function Ab(a){var b=this;if(Kc.call(this,a),Object.addProperty(this,"_artifacts",Object.WRITABLE,null),this.leftGroup=Xc.factoryNode(Kc,{parent:this,name:"group_left",x:sc()?-245:0,y:0,children:[Xc.factoryNode(Bb,{x:0,y:-12}),Xc.factoryNode(Bb,{x:0,y:165}),Xc.factoryNode(Bb,{x:0,y:340})]}),this.rightGroup=Xc.factoryNode(Kc,{parent:this,name:"group_right",x:sc()?-245:490,y:sc()?515:0,children:[new Bb({x:0,y:-12}),new Bb({x:0,y:165}),sc()?new Kc:new Bb({x:0,y:340})]}),sc()){var c=new Wb({parent:this,name:"content",x:490,y:295,width:640,height:790,children:[new Kc({name:"scrollarea",scale:1.3,children:[this.leftGroup,this.rightGroup]})]});c.contentNode.scrollarea.y=-c.height/2,c.contentNode.height=1137.5,c.updateContent()}this.forEachArtifactNode(function(a,c,d,e,f){a.area.on("mousefocusclick",function(){b.onArtifactNodeClick(c)})})}function Bb(a){Kc.call(this,a),new Lc({parent:this,x:255,y:166,width:460,height:102,$preload:"artifacts_menu/shelf"}),new zb({parent:this,x:115.5,y:93.5,width:131,height:153}),new zb({parent:this,x:251.5,y:93.5}),new zb({parent:this,x:380.5,y:93.5})}function Cb(a){function b(){if(a.bonusPack.remainingTime>0){var b=Math.floor(a.bonusPack.remainingTime/1e3),c=Math.floor(b/86400);b-=86400*c;var d=Math.floor(b/3600);b-=3600*d;var g=Math.floor(b/60),h=b-60*g;c>0?f.text="{}d {}h".format(c,d):d>0?f.text="{}h {}m".format(d,g):f.text="{}m {}s".format(g,h)}else f.text="",clearInterval(e)}var c=this;Kc.call(this,a),new Lc({parent:this,name:"icon",x:0,y:0,image:"shop_money/action_box_wide",width:165,height:110}),new Kc({parent:this,name:"bonusSlot1",x:-23,y:15}),new Kc({parent:this,name:"bonusSlot2",x:30,y:15});var d=0|Math.randomBetween(200,1100);if(this.scale=0,this.opacity=0,Xc.animate(c,"scale",{delay:d,duration:300,from:0,to:1,easing:Vc.outBounce}),Xc.animate(c,"opacity",{delay:d,duration:300,from:0,to:1,easing:Vc.outBounce}),a.bonusPack){var e=setInterval(b,1e3),f=new nc({parent:this,x:65,y:10.5,width:170,height:69,text:"",textColor:"rgba(10, 10, 10, 1)",textAlign:"center",fontType:"author"});b()}this.$.remove=function(){clearInterval(e)}}function Db(a){var b=this;Kc.call(this,a),this.image="shop_money/energy_slot_free",new tb({parent:this,name:"icon",x:0,y:0,image:this.image,width:369,height:104,on:{mousefocusclick:function(){b.trigger("ad")}}}),new tb({parent:this,name:"icon",x:200,y:0,image:"interface/button_small_gray",width:153,height:62.1,on:{mousefocusclick:function(){b.trigger("ad")}},$refresh:function(){var a=this;Bc.ads.isAdAvailable(h.REWARDED_AD,function(b){b?a.image="interface/button_big_blue":a.image="hint/button_big_gray"})},children:[new Lc({x:-41,y:0,width:40,height:40,image:"shop_money/sign_viewads"}),new nc({name:"price",x:-69,y:-34.5,width:170,height:69,text:"SHOP_BONUS_BTN_VIEWOFFERS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"small"})]}),new nc({parent:this,name:"mana",x:-165,y:-34.5,width:170,height:69,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})}function Eb(a){Kc.call(this,a),new Lc({parent:this,name:"icon",x:0,y:0,image:a.image,width:85,height:85,children:[new nc({name:"amount",x:-15,y:10,width:60,text:a.text,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"small"})]})}function Fb(a){var b=this;Kc.call(this,a),this.image=a.image,new tb({parent:this,name:"icon",x:0,y:0,image:this.image,width:369,height:a.box.special?124:104,on:{mousefocusclick:function(){b.trigger("buy",a.box.id)}}}),new tb({parent:this,name:"icon",x:200,y:0,image:"interface/button_small_green",width:170,height:69,on:{mousefocusclick:function(){b.trigger("buy",a.box.id)}},children:[new nc({name:"price",x:-85,y:-34.5,width:170,height:69,text:a.box.price+" "+a.box.currency,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]}),a.box.oldPrice&&(new nc({parent:this,x:115,y:-74.5,width:170,height:69,text:a.box.oldPrice+" "+a.box.currency,textColor:"rgba(100, 100, 100, 1)",textAlign:"center",fontType:"author"}),new Lc({parent:this,image:"shop_money/sale_line_little",x:200,y:-40,width:75,height:12})),new nc({parent:this,name:"mana",x:-155,y:-39.5,width:170,height:69,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Kc({parent:this,name:"bonusSlot",x:55,y:-10})}function Gb(a){Kc.call(this,a),new nc({parent:this,name:"amount",x:-50,y:-10,width:100,text:a.text,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"})}function Hb(a){this.width=241,this.height=73,this.scale=.7,this.$.preload="hint/button_big_green",this.hint=Bc.hints[a.hintId],tb.call(this,a),this.$.base={image:"hint/button_big_green"},this.$.disabled={image:"hint/button_big_gray"},new nc({parent:this,x:-54.5,y:-10,width:155,height:20,text:"HINT_DLG_BUY_HINT",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"author":"font"}),new Lc({parent:this,x:-70,y:-3,width:116,height:116,$preload:"hint/shop",scale:.5})}function Ib(a){this.width=241,this.height=73,this.scale=.7,this.hint=Bc.hints[a.hintId],tb.call(this,a),this.$.preload=["hint/button_big_gray","hint/button_big_blue"],this.$.base={image:"hint/button_big_gray"},this.$.active={image:"hint/button_big_blue"},this.$.ad={image:"hint/button_big_blue"},new Lc({parent:this,x:-70,y:-3,width:116,height:116,$preload:["hint/hint_off","hint/hint_on","hint/ad_small"],$base:{image:"hint/hint_off",x:-70,y:-3,width:116,height:116,scale:.5},$active:{image:"hint/hint_on",x:-70,y:-3,width:116,height:116,scale:.5},$ad:{image:"hint/ad_small",x:-65,y:0,width:60,height:46,scale:1},scale:.5}),new nc({parent:this,name:"text",x:-54.5,y:-10,width:145,height:20,text:"HINT_DLG_USE_HINT",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"author":"font",$ad:function(){var a=Bc.config.getAsInt("hint_ads_acceleration_time",180)/60;this.text="-"+a+Qc.tr("FORMAT_TIME_MINUTE")},$base:function(){this.text=Qc.tr("HINT_DLG_USE_HINT")},$active:function(){this.text=Qc.tr("HINT_DLG_USE_HINT")}})}function Jb(a){var b=this;this.width=sc()?150:109,this.height=sc()?150:109,this.opacity=0,this.scale=.3,tb.call(this,a);var b=this;new Lc({parent:this,name:"bg",width:109,height:109,opacity:a.bgDisabled?0:1}),new Lc({name:"fg",parent:this,width:sc()?150:109,height:sc()?150:109,image:a.buttonImage}),this.opacity=0;var c=null;return this.$.showed=function(){b.activate(),Xc.animate(b,"scale",{delay:300,duration:300,to:1,from:.3,easing:Vc.outBounce}),Xc.animate(b,"opacity",{delay:300,duration:300,to:1,from:0,easing:Vc.outBounce}),Xc.async.waitOnNode(b,300,function(){var a=b.clickSound||"tool_bar_btn_appear";Xc.playSound(a)}),c=setTimeout(function(){b.opacity=1,b.scale=1},700),a.onShowed&&a.onShowed()},this.$.visible={opacity:1,scale:1},this.$.hidden=function(){clearTimeout(c)},this}function Kb(a){return tb.call(this,a),this.grey=!1,this}function Lb(a){var b=this;Kc.call(this,a),this.chapter=a.chapter||this.chapter,this.title=a.title||this.title,this.desc=a.desc||this.desc,this.image=a.image||this.image,null!=this.chapter,a&&a.image&&(this.customImage=a.image),new ic({parent:this,x:-15,y:35});new Kb({parent:this,name:"playNode",width:450,height:550,$preload:[b.getImageSrc()],$unlocked:function(){this.setGrey(!1)},$base:{opacity:0,scale:.2},$visible:{opacity:1,scale:1},$showed:function(){this.setGrey(!!b.chapter),Xc.animate(this,"opacity",{duration:100,to:1}),Xc.animate(this,"scale",{duration:1e3,from:.2,to:1,easing:Vc.outBounce}),b.updateNodeState()},on:{mousefocusclick:function(){b.trigger("play")}},children:[new nc({name:"title",x:-135,y:40,width:270,height:this.desc?40:80,text:this.title,textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"medium"}),new nc({x:-135,y:105,width:270,height:40,text:this.desc,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"}),new Kc({name:"showed",children:[new Lc({name:"ready",x:118,y:-17,width:125,height:115,$preload:"quests_menu/ready",$base:{opacity:0},$finished:{opacity:1}}),new Kc({name:"unloced_progress",x:80,y:200,$setProgress:function(a){this.value.text="{}%".format(Math.round(100*a))},$base:{opacity:0},$unlocked:function(){this.opacity=1,b.updateProgress()},children:[new Lc({x:63,y:58,width:125,height:115,$preload:"tree_main_game/percent_bkg",$showed:function(){Xc.fadeIn(this,{delay:200,duration:100})}}),new mc({name:"value",x:15,y:5,width:100,height:100,text:"0%",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})]}),a.hideUnlock?new Kc:new Lc({x:120,y:-25,width:120,height:120,$preload:"quests_menu/unlock_quest",$unlocked:{opacity:0},$adult:{opacity:0}})]});new tb({parent:this,name:"resetButton",x:-122,y:203,width:125,height:115,$preload:"tree_main_game/reset",$base:{opacity:0,zoom:0},$resetShowed:function(){b.chapter&&Xc.fadeIn(this,{delay:0|Math.randomBetween(1,400),duration:200})},on:{mousefocusclick:function(){b.trigger("resetButtonClicked")}}}),Xc.bindCustomMethodsRecursive(this)}function Mb(a){this.width=54,this.height=54,Lc.call(this,a),a.hasOwnProperty("amount")&&(this.amount=a.amount)}function Nb(a){var b=this,c=Object.getPrototypeOf(this),d=96,e=96,f=60,g=45;this.image=null,sc()&&(d*=ad,e*=ad,f*=ad,g*=ad),this.width=d,this.height=e,Lc.call(this,a);var h=this.element=a.element||c.element;if(this.image=a.image||c.image,!this.element)var h=this.element=Bc.elements[this.name];this.image="elements/border_shadow",Xc.factoryNode(Lc,{parent:this,name:"border",width:d,height:e}),this.setBorderType(a.borderType||"solid"),Xc.factoryNode(Lc,{parent:this,name:"addition",image:h.image.addition&&Nb.IMAGE_SRC.format(h.image.addition),width:d,height:e}),Xc.factoryNode(Lc,{parent:b,name:"icon",y:-4*ad,image:Nb.ASSET_ID.format(h),width:f,height:g}),Xc.factoryNode(nc,{parent:this,name:"text",font:"font",text:h.id,x:-d/2,y:18*ad,width:d,textAlign:"center",textColor:"rgba(49, 44, 32, 1)",maxTextWidth:60*ad,fontType:"smaller"})}function Ob(a){this.width=96,this.height=96,tb.call(this,a),new Nb({parent:this,name:this.name})}function Pb(a){Nb.call(this,a),sb.call(this),this.mouse.on("mousefocusclick",this.onMouseClick),new Lc({parent:this,x:-32,y:-32,width:48,height:48,$preload:"artifacts_menu/close_element"}),this.failAnimation=qb.call(Rc({target:this,property:"x",from:-10,duration:50,to:10,reverse:!0,on:{end:function(){this.target.x=0}}}),{loops:2})}function Qb(a){Nb.call(this,a);var b=this.x,c=this.y,d=Math.randomBetween(0,2*Math.PI),e=Math.cos(d)*mh/2-b,f=Math.sin(d)*nh/2-c,g=Math.randomBetween(d+Math.PI-Math.PI/2,d+Math.PI+Math.PI/2),h=Math.cos(g)*mh-b,i=Math.sin(g)*nh-c;this.x=e,this.y=f;var j=this.animationTimer=Xc.animatePositionByCurve(this,{autoplay:!1,duration:1275,points:[Hc(e,f),Hc(h,i),Hc(b,c)]});this.$.showed=function(){j.play()}}function Rb(a){Nb.call(this,a),sb.call(this),this.mouse.on("mousefocusclick",this.onClick.bind(this))}function Sb(a){Rb.call(this,a)}function Tb(a){Rb.call(this,a),this.selectAnimation=Rc({target:this,property:"rotation",from:-Math.PI/20,to:Math.PI/20,duration:150,loop:!0,reverse:!0}),this.failAnimation=qb.call(Rc({target:this,property:"x",from:-10,duration:50,to:10,reverse:!0,on:{end:function(){this.target.x=0}}}),{loops:2})}function Ub(a){function b(){c.trigger("elementClick",this.parent.children[1].name)}var c=this;Kc.call(this,a),this.children.forEach(function(a){a.area.on("mousefocusclick",b)})}function Vb(a){var b=this,c=a.on;Kc.call(this,a),new Kb({parent:this,name:"button",width:344,height:160,x:a.button.x,y:a.button.y,opacity:0,scale:.5,on:c,$preload:a.button.active,$active:function(){this.setGrey(!1)},$showed:function(){this.setGrey(!0)},children:[new Kc({x:a.text.x,y:a.text.y,children:[new nc({width:208,height:40,text:a.text.titleText,textColor:"rgba(49, 44, 32, 0.5019607843137255)",textAlign:"center",fontType:"medium_fr",$active:{textColor:"rgba(49, 44, 32, 1)"}}),new nc({y:30,width:208,height:40,text:a.text.descText,textColor:"rgba(255, 255, 255, 0.5019607843137255)",textAlign:"center",fontType:"author",$active:{textColor:"rgba(255, 255, 255, 1)"}})]})]}),this.progressText=new Kc({parent:this,name:"progress",x:a.progress.x,y:a.progress.y,opacity:0,children:[new Lc({width:55,height:49,$preload:a.progress.image}),new mc({name:"text",x:-34.5,y:-35.5,width:70,height:70,text:"0%",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]}),this.resetButton=new tb({parent:this,name:"reset",x:a.reset.x,y:a.reset.y,width:86,height:86,opacity:0,scale:.1,$preload:"interface/reset",on:{mousefocusclick:function(){b.trigger("resetButtonClicked")}}})}function Wb(a){var b=this,c=a.children,d=Object.clone(a);return delete d.children,Kc.call(this,d),this.snap=a.snap||this.snap,this.enabled=!0,this.useAutoSelectX=a.useAutoSelectX||!1,this.useScrollByClick=a.useScrollByClick||!1,Object.addProperty(this,"_content",Object.WRITABLE,a.content||[0,0,0,0]),new Kc({name:"clipNode",parent:this,width:this.width,height:this.height,x:-this.width/2,y:-this.height/2,clip:!0}),new Kc({name:"contentNode",parent:this.clipNode,children:c,width:this.width,height:this.height,x:this.width/2,y:this.height/2}),this.contentNode=this.clipNode.contentNode,setTimeout(function(){new Kc({parent:b.parent,x:-b.width/2+b.x,y:-b.height/2+b.y,width:b.width,height:b.height,zIndex:999,on:{mousefocus:b.onMouseFocus.bind(b),wheel:function(a){b.onWheel(a)}}})}),Engine.Input.on("mousemove",this.onMouseMove.bind(this)).on("mouseup",this.onMouseUp.bind(this)),a.content||setTimeout(this.updateContent.bind(this)),this.horizontalContinuous=new Wb.ContunuousScrolling(this,"x"),this.verticalContinuous=new Wb.ContunuousScrolling(this,"y"),this}function Xb(a){Kc.call(this,a),new Lc({parent:this,name:"bkg",$preload:"message_box/wheel_bkg",width:410,height:475,x:0,y:0}),new Kc({name:"wheel",parent:this,x:-3,y:26,children:[new Lc({x:0,y:0,name:"table",$preload:"message_box/wheel_table",width:397,height:397}),new Yb({x:0,y:0,name:"slot1",width:135,height:199,rotation:0}),new Yb({x:0,y:0,name:"slot2",width:135,height:199,rotation:45*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot3",width:135,height:199,rotation:90*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot4",width:135,height:199,rotation:135*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot5",width:135,height:199,rotation:180*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot6",width:135,height:199,rotation:225*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot7",width:135,height:199,rotation:270*(Math.PI/180)}),new Yb({x:0,y:0,name:"slot8",width:135,height:199,rotation:315*(Math.PI/180)})],$spin:function(){Xc.animate(this,"rotation",{duration:3e3,loop:!0,from:0*(Math.PI/180),to:3600*(Math.PI/180),easing:Vc.linear})}}),new Lc({parent:this,name:"arrow",$preload:"message_box/wheel_arrow",width:62,height:93,x:-3,y:-183}),new Lc({parent:this,name:"center",$preload:"message_box/wheel_center",width:102,height:105,x:-3,y:26})}function Yb(a){Kc.call(this,a),new Lc({parent:this,name:"icon",image:void 0,width:91,height:88,x:0,y:-144}),new nc({parent:this,name:"amount",x:-24,y:-91,width:50,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})}function Zb(a){var b=Object.getPrototypeOf(this);Kc.call(this,a),this.columns=a.columns||b.columns,this.cellWidth=a.cellWidth||b.cellWidth,this.cellHeight=a.cellHeight||b.cellHeight,this.width=this.columns*this.cellWidth}function $b(a){var b=this;this.image=null,this.width=192,this.height=192;var c=a.on;a.on=null,Lc.call(this,a),this.group=a.group||this.group,this.image=a.image||this.image;var d=this.groupChapter=a.group,e=this.group=a.group?a.group.data:Bc.groups[this.name];if(this.image=$b.ASSET_ID.format(e),d){this.counter=Xc.factoryNode(Mb,{parent:this,x:3*this.width/8,y:3*-this.height/8,amount:d.newElements});d.on("newElementsChanged",function(a){b.counter&&(b.counter.amount=a)})}Xc.factoryNode(Kc,{parent:this,name:"area",zIndex:1,width:this.width,height:this.height,x:-this.width/2,y:-this.height/2,on:c}),this.$.showed=function(){Xc.fadeIn(b,{scale:{from:.5,to:b.scale},duration:200})}}function _b(a){var b=Object.getPrototypeOf(this);Kc.call(this,a),this.spacing=a&&null!=a.spacing?a.spacing:b.spacing}function ac(a){Kc.call(this,a);var b=a.hintIcon||"hint/hint_1_on",c=Bc.hints[a.hintId];new Lc({parent:this,name:"border_disable",x:6,y:9,width:126,height:128,$preload:["hint/border_hint_disable","hint/border_hint"],$base:{image:"hint/border_hint_disable"},$active:{image:"hint/border_hint"}}),new Lc({parent:this,width:116,height:116,$preload:["hint/hint_1_on","hint/hint_2_on","hint/hint_3_on"],$showed:{image:b}}),new nc({parent:this,name:"remain",x:11,y:33,width:50,height:15,text:"HINT1_DLG_REMAIN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font",format:[0]}),new nc({parent:this,name:"timer_text",x:-47,y:80,width:100,height:30,text:"12h 34m",textColor:"black",textAlign:"center",fontType:"font",timer:null,$portrait:{y:80},$deactivated:{opacity:0},$hidden:function(){this.timer&&this.timer.stop()},$base:function(){function a(){var a=c.rechargeRemainingTime,d=Math.floor(a/36e5),e=Math.floor((a-36e5*d)/6e4),f=Math.floor((a-36e5*d-6e4*e)/1e3);b.opacity=a>0?1:0,b.text="{}m {}s".format(e,f),0===a&&(self.image="hint/button_big_green",b.timer.stop())}this.opacity=0;var b=this;c.rechargeRemainingTime>0&&c.rechargeable&&(a(),void 0===this.timer?this.timer=new Jc({autoplay:!0,duration:1/0,loop:!0,delay:1e3,on:{step:function(){a()}}}):this.timer.play())}})}function bc(a){var b=this;Lc.call(this,a),this.screenDelay=a.screenDelay||this.screenDelay,new Lc({parent:this,name:"blinkNode",width:oh,height:2*ph,x:sc()?256:oh/2,y:ph/2,color:"white",opacity:0}),this._delayTimer=null,this.screens=null,this.currentIndex=0,this.showNextScreen=this.showNextScreen.bind(this),this.$.showed=function(){b.currentIndex=0,b.screens=b.getScreenNodes(),b.showNextScreen(),b.trigger("showed")},new Kc({parent:this,name:"area",zIndex:1,width:oh,height:ph,on:{mouseclick:this.showNextScreen}})}function cc(a){Kc.call(this,a),this.delay=a.delay||this.delay}function dc(a){Kc.call(this,a),this.node=new Kc({parent:this,name:"body",children:[new Lc({name:"bkg",width:584,height:96,image:"leaderboards/border_normal"}),new Lc({name:"bkg_gold",opacity:0,width:584,height:96,image:"leaderboards/border_gold"}),new Lc({name:"flag",opacity:0,width:642,height:128,y:12,image:"leaderboards/flag"}),new Lc({name:"cup",width:72,height:62,x:-230,image:"leaderboards/cup_01"}),new mc({name:"rank",width:72,height:33,x:-220,y:-22,text:"0",textColor:"white",textAlign:"right",fontType:"medium"}),new Lc({name:"photo",x:-100,children:[new Lc({name:"picture",width:70,height:70,image:void 0}),new Lc({name:"border",width:82,height:80,image:"leaderboards/ava_border_normal"})]}),new mc({name:"userName",text:"",width:200,height:96,x:-70,y:-52,textAlign:"center",fontType:"font",textColor:"rgba(136, 45, 24, 1)"}),new mc({name:"score",text:"0",width:110,height:33,x:130,y:-22,textAlign:"right",fontType:"medium",textColor:"white"})]})}function ec(a){var b=this;Kc.call(this,a),this.image=a.image||this.image,this.images=a.images||this.images,this.manaAmount=a.manaAmount||this.manaAmount,this.oldPrice=a.oldPrice||this.oldPrice,this.cost=a.cost||this.cost,this.fadeInDelay=a.fadeInDelay||this.fadeInDelay,this.$.base={opacity:0,scale:.5},this.$.showed=function(){Xc.animate(b,"opacity",{delay:b.fadeInDelay,duration:300,from:0,to:1,easing:Vc.linear}),Xc.animate(b,"scale",{delay:b.fadeInDelay,duration:300,from:.5,to:1,easing:Vc.linear})},new tb({parent:this,name:"buy_btn_invisible",x:30,y:22,width:0,height:0}),new Lc({parent:this,name:"bkg",x:225,y:52,width:369,height:104,$preload:this.image,$showed:function(){b.images&&Xc.animateImage(b.bkg,b.images)}}),new nc({parent:this,name:"manna",x:123,y:40,width:60,height:20,text:this.manaAmount,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),-1!==this.oldPrice&&(new nc({parent:this,name:"old_price",x:344,y:5,width:106,height:20,text:this.oldPrice,textColor:"rgba(123, 123, 123, 1)",textAlign:"center",fontType:"font"}),new Lc({parent:this,name:"cross_out",x:398,y:20,width:75,height:12,$preload:"shop_money/sale_line_little"})),new tb({parent:this,name:"buy_btn",x:395,y:55,width:170,height:69,$preload:"interface/button_small_green",children:[new nc({name:"price",x:-79,y:-14.5,width:160,height:20,text:this.cost,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})}function fc(a){function b(){d.$.animations.forEach(function(a){a.play()})}function c(){d.$.animations.forEach(function(a){a.playing&&a.stop()})}var d=this;Kc.call(this,a),this.elements=a.elements||[],this.$.showed=function(){b(),this.contentNode.scale=1,this.flickable.contentNode.scale=0,this.flickable.contentNode.x=this.flickable.width/2,this.flickable.contentNode.y=this.flickable.height/2},this.$.hidden=function(){c(),d.rotationAnimation.playing&&d.rotationAnimation.stop(),Xc.animate(this.flickable.contentNode,"scale",{duration:500,from:1,to:0})},this.$.show=function(){this.opacity=0,Xc.animate(this,"scale",{delay:0,duration:0,from:.1,to:.1,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:0,duration:250,from:0,to:1,easing:Vc.linear}),Xc.animate(this,"scale",{delay:0,duration:250,from:.1,to:1,easing:Vc.linear})},this.$.show_intro=function(){this.opacity=0,Xc.animate(this,"opacity",{delay:0,duration:150,from:0,to:1,easing:Vc.linear}),Xc.animate(this,"scale",{delay:0,duration:250,from:.1,to:1,easing:Vc.linear})},this.$.hide=function(){Xc.animate(this,"opacity",{delay:0,duration:200,from:1,to:0,easing:Vc.linear}),Xc.animate(this,"scale",{delay:0,duration:300,from:1,to:.1,easing:Vc.linear})},Xc.bindCustomMethods(this);var e=1*oh,f=1*ph;this.contentNode=new Lc({width:e,height:f,scale:.6,children:[this.bodyNode=new Kc({name:"body",children:this.elements})]});var g=this.contentNode.body,h=Xc.getNodeChildrenBoundingBox(g);g.x=-g.planet_glow.x,g.y=-g.planet_glow.y,h.destroy(),this.flickable=new Wb({parent:this,width:oh,height:ph,children:[this.contentNode],content:[e,f,-e+oh,-f+ph]}),this.flickable.on("scroll",this.updateContentSize.bind(this)),this.flickable.onWheel=function(a){var b=d.contentNode;b.scale=Math.max(.4,Math.min(1.8,b.scale+a.deltaY/10)),d.updateContentSize(),d.flickable.scrollBy(0,0)},this.$.animations=[],this.rotationAnimation=Rc({target:this.contentNode,property:"rotation",to:-Math.PI,duration:8e3,easing:Vc.inSine,on:{end:function(){Xc.animate(d.contentNode,"rotation",{delay:0,duration:4e3,to:1.3*-Math.PI,easing:Vc.outSine})}}});for(var i=1;4>=i;i++){var j=g["cloud_0{}".format(i)],k=Math.randomBetween(0,2*Math.PI);j.originX=g.planet_glow.x-j.x,j.originY=g.planet_glow.y-j.y,this.$.animations.push(Rc({target:j,property:"rotation",from:k,to:k-2*Math.PI,duration:0|Math.randomBetween(9e4,12e4),loop:!0}))}}function gc(a){var b=this;Lc.call(this,a);this.element=Bc.elements[this.name.capitalize()];this._isVisible=!1,this.lighten=1,this.$.showed=function(){var a=!b.element;a=a||Bc.currentChapter&&Bc.currentChapter.getElementById(b.element.id),b._isVisible=a,b.opacity=a?1:0}}function hc(a){Kc.call(this,a);var b=null;this.$.showed=function(){if(this.$.images)if(this.$.images.length>0){b={};for(var a=0;a<this.$.images.length;++a)b[this.$.images[a]]|=0;W.imageManager.loadImages(b)}else b=null},this.$.hidden=function(){b&&W.imageManager.unloadImages(b),b=null}}function ic(a){Kc.call(this,a);var b=new Lc({parent:this,name:"raysDown",width:819,height:819,opacity:0,$preload:"main_menu/rays_down",$animation:null,$showed:function(){var a=b;a.opacity=0,Xc.fadeIn(a,{delay:1300,opacity:{to:.56}}),a.$.animation=Rc({autoplay:!0,autodestroy:!0,loop:!0,target:a,property:"rotation",duration:5e5,from:0,to:Math.deg2rad(-3590)})},$hidden:function(){var a=b;a.$.animation.playing&&a.$.animation.stop(),Xc.fadeOut(a,{delay:400,duration:400})}}),c=new Lc({parent:this,name:"rays",width:819,height:819,opacity:0,$preload:"main_menu/rays",$animation:null,$showed:function(){var a=c;Xc.fadeIn(a,{delay:1500,duration:1200,opacity:{to:.56}}),a.$.animation=Rc({autoplay:!0,autodestroy:!0,loop:!0,target:a,property:"rotation",duration:5e5,from:0,to:Math.deg2rad(3590)})},$hidden:function(){var a=c;a.$.animation.playing&&a.$.animation.stop(),Xc.fadeOut(a,{delay:400,duration:400})}})}function jc(a){Kc.call(this,a)}function kc(a){Kc.call(this,a),this.hint=a.hint||this.hint,this.image=a.image||this.image,this.title=a.title||this.title,this.description=a.description||this.description,this.longDescription=a.longDescription||this.longDescription,this.descriptionFormat=a.descriptionFormat||this.descriptionFormat,this.price=a.price||this.price,this.buyMessage=a.buyMessage||this.buyMessage,this.sellMessage=a.sellMessage||this.sellMessage,this.sellMessage=a.sellMessage||this.sellMessage,this.exclude=a.exclude||this.exclude,this.positionY=a.positionY||this.positionY,this.delay=a.delay||this.delay;var b=this,c=(this.hint.remainingTime>0,this.hint.isLight);new tb({parent:this,name:"icon",x:59,y:56,$preload:this.image,width:138,height:130,$portrait:{width:168,height:160,x:20},children:[new nc({name:"qty",x:3,y:17,width:40,height:20,$portrait:{x:9,y:27},text:0===this.hint.duration&&b.hint.countable?"+"+this.hint.buyAmount:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"})],$highlight:function(a){if(b.hint===a){this.opacity=1;var c=qb.call(Rc({target:this,property:"opacity",from:0,autoplay:!1,duration:200,to:1}),{loops:5});c.play()}}}),new Lc({parent:this,name:"glow",x:59,y:56,width:138,height:130,$portrait:{width:168,height:160,x:20},$preload:"shop/purchased_frame",$base:{opacity:0},$disabled:{opacity:0},$active:function(){this.opacity=b.hint.countable===!1&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)},$ad:function(){this.opacity=0}}),new nc({parent:this,name:"title",x:115,y:11,width:235,height:20,text:this.title,textColor:"rgba(21, 18, 14, 1)",textAlign:"left",fontType:"author",format:[this.hint.buyAmount]}),new nc({parent:this,name:"description",x:115,y:65,width:235,height:20,text:this.description,textColor:sc()?"rgba(150, 41, 0, 1)":"rgba(150, 105, 54, 1)",textAlign:"left",fontType:"author",format:this.descriptionFormat}),new Kc({parent:this,name:"button",x:-42,y:-5,children:[new tb({name:"buy",x:454,y:61,width:107,height:82,$portrait:{width:107*1.6,height:82*1.6,x:484},on:{mouseclick:function(){if(b.hint.sellable===!0&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration))b.trigger("sell",{hint:b.hint,message:b.sellMessage});else if(c){if(3===Ua())return;ab()&&b.hint.name==="light_"+Ua()||b.trigger("buy",{hint:b.hint,message:b.buyMessage})}else b.trigger("buy",{hint:b.hint,message:b.buyMessage})}},$base:{image:"shop/button_disabled"},$disabled:{image:"shop/button_disabled"},$active:function(){this.image=b.hint.sellable===!0&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)?"shop/button_sell":"shop/button_buy",c&&b.hint.sellable===!1&&(ab()&&b.hint.amount>0&&(this.image="shop/button_timer"),3===Ua()&&(this.image="shop/button_disabled"))},$ad:function(){this.image="shop/button_free"},children:[new nc({name:"buy_text",x:-41.5,y:-5,width:80,height:30,text:b.hint.sellable===!0&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)?"SHOP_SCR_SELL":"SHOP_SCR_BUY",textColor:"rgba(248, 228, 0, 1)",textAlign:"center",fontType:"author",$disabled:{opacity:0},$base:{opacity:0},$active:function(){this.fontType="author",this.y=-5,this.changeTextDefinition(b.hint.sellable===!0&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)?"SHOP_SCR_SELL":"SHOP_SCR_BUY"),this.opacity=1,c&&b.hint.sellable===!1&&(ab()&&b.hint.amount>0||3===Ua())&&(this.opacity=0)},$ad:function(){this.opacity=1,this.y=sc()?5:-1;var a=Bc.config.getAsInt("hint_ads_border_time",300)/60;this.text="+"+a+Qc.tr("FORMAT_TIME_MINUTE")}}),new nc({name:"timer_text",x:-41.5,y:25,width:80,height:30,text:"12h 34m",textColor:"black",textAlign:"center",fontType:"author",timer:null,$portrait:{y:15},$disabled:{opacity:0},$hidden:function(){this.timer&&this.timer.stop()},$base:function(){function a(){var a=Math.floor(b.hint.remainingTime/36e5),d=Math.floor((b.hint.remainingTime-36e5*a)/6e4);c.opacity=!!(b.hint.remainingTime>0),c.text="{}h {}m".format(a,d)}this.opacity=!!(b.hint.remainingTime>0);var c=this;b.hint.duration>0&&!b.hint.countable&&(a(),void 0===this.timer?this.timer=new Jc({autoplay:!0,duration:1/0,loop:!0,delay:1e3,on:{step:function(){a()}}}):this.timer.play())}})]}),new nc({name:"price",x:437,y:37,width:50,height:20,$portrait:{x:467,y:30,width:70},text:(this.hint.sellable===!0&&this.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)?this.hint.calculateSellPrice():this.hint.buyPrice).toString(),textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font",$disabled:function(){this.opacity=1,this.changeTextDefinition((b.hint.sellable===!0&&b.hint.amount>0&&(b.hint.duration&&b.hint.remainingTime>0||!b.hint.duration)?b.hint.calculateSellPrice():b.hint.calculateBuyPrice()).toString())},$ad:function(){this.opacity=0}}),new Lc({x:454,y:52,width:60,height:46,image:"hint/ad_small",scale:.8,$portrait:{scale:1.2,x:480,y:45},$disabled:function(){this.opacity=0},$active:function(){this.opacity=0},$ad:function(){this.opacity=1}})]})}function lc(a){Kc.call(this,a),new Kc({parent:this,name:"statusBar",x:70,y:2,children:[new Lc({name:"bar",x:-45,y:-1,scale:.5,width:8,height:83,image:"interface/toolbar_penta_progress_02",originX:Engine.Node.RIGHT}),new Lc({name:"frg",x:0,y:0,scale:.5,width:294,height:84,image:"interface/toolbar_penta_progress_01"})]}),new mc({parent:this,name:"counter",x:10,y:-21,width:147,height:42,text:"10/20",textColor:"white",textAlign:"center",fontType:"font"}),new tb({parent:this,name:"pentagram_btn",x:0,y:0,width:80,height:80,image:"interface/border_pentagram_01",on:{mousefocusclick:function(){ff.events.trigger("manaButtonClicked")}},$animation_flash_on:function(){Xc.animate(this,"opacity",{delay:0,duration:500,from:0,to:1,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:0,duration:500,from:1,to:0,easing:Vc.linear})},$animation_flash_off:function(){Xc.animate(this,"opacity",{delay:0,duration:200,from:0,to:1,easing:Vc.linear})},children:[new Lc({name:"light1",x:0,y:0,width:80,height:80,image:"interface/border_pentagram_01",opacity:1===Ua()?1:0}),new Lc({name:"light2",x:0,y:0,width:80,height:80,image:"interface/border_pentagram_02",opacity:2===Ua()?1:0}),new Lc({name:"light3",x:0,y:0,width:80,height:80,image:"interface/border_pentagram_03",opacity:3===Ua()?1:0})]}),new nc({parent:this,name:"timer",x:-25,y:10,width:180,height:42,text:"MORE_LIGHT",textColor:"white",textAlign:"center",fontType:"small",format:[""],timer:null,$hidden:function(){this.timer&&(this.timer.stop(),this.opacity=0)},$showed:function(){function a(){var a=1e3*Sa(),c=Math.floor(a/36e5),d=Math.floor((a-36e5*c)/6e4),e=Math.floor((a-36e5*c-6e4*d)/1e3);b.opacity=!!(a>0);var f="";c>0&&(f+="{h}"+Qc.tr("FORMAT_TIME_HOUR")+" "),d>0&&(f+="{m}"+Qc.tr("FORMAT_TIME_MINUTE")+" "),e>0&&(f+="{s}"+Qc.tr("FORMAT_TIME_SECOND")),b.format=[f.format({h:c,m:d,s:e})],b.changeTextDefinition("MORE_LIGHT")}var b=this;a(),void 0===this.timer?this.timer=new Jc({autoplay:!0,duration:1/0,loop:!0,delay:1e3,on:{step:function(){a()}}}):this.timer.play()}})}function mc(a){var b=Object.getPrototypeOf(this),c=Engine.I18n.getDefaultTranslator();mc.instances.push(this),Mc.call(this,a),this.fontName=a.fontName||b.fontName,this.font=mc.getFont(c&&c.code,this.fontName),this.fontSize=a.fontSize||b.fontSize,this.fontType=a.fontType||b.fontType,this.maxTextWidth=a.maxTextWidth||b.maxTextWidth,Object.addProperty(this,"_needsPaddingUpdate",Object.WRITABLE|Object.CONFIGURABLE,!1),Object.addProperty(this,"_baseWidth",Object.CONFIGURABLE,this.width),Object.addProperty(this,"_baseHeight2",Object.CONFIGURABLE,this.height/2);var d=mc.TRIGGER_NONE;a&&(a.on&&a.on.render?d=mc.TRIGGER_ALWAYS:a.once&&a.once.render&&(this.once("render",a.once.render),d=mc.TRIGGER_ONCE)),Object.addProperty(this,"triggerRender",Object.WRITABLE,d),c&&this.updateFontType(c.code)}function nc(a){var b=Object.getPrototypeOf(this);return mc.call(this,a),this.format=a.format||b.format,this.$.textDefinition=this.text,this.tr(),this}function oc(a){Kc.call(this,a);var b=sc()?264.8:308;new Lc({parent:this,name:"left",$preload:"tutorial/dialog_help_arrow_left",x:-b/2+5,y:0,width:34,height:34,opacity:0,$active:function(){this.opacity=1}}),new Lc({parent:this,name:"right",$preload:"tutorial/dialog_help_arrow_right",x:b/2-5,y:0,width:34,height:34,opacity:0,$active:function(){this.opacity=1}}),new Lc({parent:this,name:"up",$preload:"tutorial/dialog_help_arrow_up",x:0,y:sc()?-70:-40,width:34,height:34,opacity:0,$active:function(){this.opacity=1}}),new Lc({parent:this,name:"down",$preload:"tutorial/dialog_help_arrow_down",x:sc()?-50:0,y:sc()?65:46,width:34,height:34,opacity:0,$active:function(){this.opacity=1}}),new Lc({parent:this,name:"background",$preload:sc()?"tutorial/dialog_help":"tutorial/dialog_help_small",width:308,height:100,$portrait:{width:261.8,height:146.2}}),new nc({parent:this,name:"text",textColor:"black",text:"Tutorial tutorial tutorial tutorial tutorial tutorial tutorial tutorial",font:"font",x:sc()?-154*1.45*.5:-130,y:sc()?-62.35:-25,width:sc()?154*1.45:260,height:sc()?124.7:60,textAlign:"center",fontType:sc()?"font":"author"})}function pc(a){var b=this;Kc.call(this,a),this.image=a.image||this.image,this.$.base={opacity:0,scale:.5},this.$.showed=function(){Xc.animate(b,"opacity",{delay:b.fadeInDelay,duration:300,from:0,to:1,easing:Vc.linear}),Xc.animate(b,"scale",{delay:b.fadeInDelay,duration:300,from:.5,to:1,easing:Vc.linear})},new tb({parent:this,name:"buy_btn_invisible",x:30,y:22,width:0,height:0}),new Lc({parent:this,name:"bkg",x:225,y:52,width:369,height:104,$preload:this.image,$showed:function(){b.images&&Xc.animateImage(b.bkg,b.images)}}),new nc({parent:this,name:"manna",x:123,y:40,width:60,height:20,text:this.manaAmount,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),-1!==this.oldPrice&&(new nc({parent:this,name:"old_price",x:344,y:5,width:106,height:20,text:this.oldPrice,textColor:"rgba(123, 123, 123, 1)",textAlign:"center",fontType:"font"}),new Lc({parent:this,name:"cross_out",x:398,y:20,width:75,height:12,$preload:"shop_money/sale_line_little"})),new tb({parent:this,name:"buy_btn",x:395,y:55,width:170,height:69,$preload:"interface/button_small_green",children:[new nc({name:"price",x:-79,y:-14.5,width:160,height:20,text:this.cost,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})}function qc(a){Wb.call(this,a),this.cellWidth=a.cellWidth||this.cellWidth,this.updatePositions(),this.updateChildrenScale()}function rc(a){function b(){var a=this.parent.text.text;if(a){var b=d[a],e=c.content,f=-b.y+e.height/2+b.height;e.scrollTo(0,f)}}var c=new Kc({$preload:"interface/line",$left:{x:-530,y:-288},$right:{x:-38,y:-288},$center:{x:0,y:-288},children:[new Lc({x:275,y:252,width:550,height:624,$left:{image:"interface/book_under_hole_left"},$right:{image:"interface/book_under_hole_right"},$center:{}}),new Wb({name:"content",$left:{x:312,y:247},$right:{x:276,y:247},$center:{x:-10,y:265},width:sc()?640:370,height:sc()?790:460,children:[new ub({name:"column",contentHeight:sc()?790:460})]}),new Lc({x:275,y:252,width:550,height:624,$left:{image:"interface/book_hole_left"},$right:{image:"interface/book_hole_right"},$center:{}}),new Lc({name:"alphabet",$left:{x:88,y:254,image:"alphabet/alphabetical_search_left"},$right:{x:479,y:254,image:"alphabet/alphabetical_search_right"},$center:{x:479,y:254,image:"alphabet/alphabetical_search_right"},width:72,height:442,children:[new Kc({name:"buttons",$left:{x:-15,y:-199},$right:{x:0,y:-199},$center:{x:0,y:-199},children:function(){var b=[-6,21],c=0;return"right"===a&&b.reverse(),[new yb({x:b[c++%2],y:-6}),new yb({x:b[c++%2],y:13}),new yb({x:b[c++%2],y:30}),new yb({x:b[c++%2],y:49}),new yb({x:b[c++%2],y:66}),new yb({x:b[c++%2],y:85}),new yb({x:b[c++%2],y:102}),new yb({x:b[c++%2],y:121}),new yb({x:b[c++%2],y:138}),new yb({x:b[c++%2],y:157}),new yb({x:b[c++%2],y:174}),new yb({x:b[c++%2],y:192}),new yb({x:b[c++%2],y:209}),new yb({x:b[c++%2],y:228}),new yb({x:b[c++%2],y:245}),new yb({x:b[c++%2],y:264}),new yb({x:b[c++%2],y:281}),new yb({x:b[c++%2],y:299}),new yb({x:b[c++%2],y:316}),new yb({x:b[c++%2],y:335}),new yb({x:b[c++%2],y:352}),new yb({x:b[c++%2],y:371}),new yb({x:b[c++%2],y:388})]}()})]}),new tb({x:250,y:580,width:550,height:200}),new tb({x:250,y:-52,width:550,height:150})]});Xc.setNodeStateRecursive(c,a,{permanent:!0}),c.alphabet.buttons.children.forEach(function(a){a.area.on("mousefocusclick",b)});var d={};c.content.on("scroll",function(a){var b=c.content,d=b.contentNode,e=d.column;e.updatePositions(d.y)});var e=new W({name:"encyclopedia-nav-{}".format(a),node:c,api:{nav:{setAlphabet:function(a){var b=a.alphabet,f=a.elements,g=c.content,h=g.contentNode,i=h.column;Object.clear(d),i.destroyChildren();for(var j=c.alphabet,k=j.buttons.children,l=0,m=k.length;m>l;l++)k[l].text.text=b[l]?b[l][0]:"";for(var l=0,m=b.length;m>l;l++){var n=Xc.factoryNode(xb);n["char"].text=b[l]+"",i.appendChild(n),d[b[l][0]]=n;var o=Xc.factoryNode(Zb,{columns:3,cellWidth:sc()?160:120,cellHeight:120}),p=b[l];p.forEach(function(a){var b=f[a];b&&b.forEach(function(a){var b=Xc.factoryNode(Sb,{parent:o,element:a,name:a.id,on:{select:function(){e.events.trigger("selectedChanged",b)}}})})}),Xc.factoryNode(Kc,{parent:i,children:[o],width:o.width,height:o.height}),o.x=-o.width/2+96*ad/2,o.y=-o.height/2+96*ad/2}i.updatePositions(g.height/2),i.y=-g.height/2,h.height=i.height+20,g.updateContent()}}}});return e}function sc(){return"portrait"==window.LOCKED_ORIENTATION}function tc(){return window.LOCKED_ORIENTATION===yh}function uc(){sc()?window.innerWidth<window.innerHeight&&(oh=window.innerWidth/window.innerHeight>qh.width/qh.height?qh.height*window.innerWidth/window.innerHeight:qh.width,ph=window.innerWidth/window.innerHeight>qh.width/qh.height?qh.height:qh.width*window.innerHeight/window.innerWidth):window.innerWidth>=window.innerHeight&&(oh=qh.width,ph=qh.height)}function vc(){ci=!0}function wc(a){Vh.indexOf(a)>=0&&(Wh++,ei[a]=a),bi++,di[a]=a,ai===bi&&(Yc.ready?vc():Yc.on("ready",vc))}!function(a,b,c,d){function e(a,b,c){return setTimeout(k(a,c),b)}function f(a,b,c){return Array.isArray(a)?(g(a,c[b],c),!0):!1}function g(a,b,c){var e;if(a)if(a.forEach)a.forEach(b,c);else if(a.length!==d)for(e=0;e<a.length;)b.call(c,a[e],e,a),e++;else for(e in a)a.hasOwnProperty(e)&&b.call(c,a[e],e,a)}function h(a,b,c){for(var e=Object.keys(b),f=0;f<e.length;)(!c||c&&a[e[f]]===d)&&(a[e[f]]=b[e[f]]),f++;return a}function i(a,b){return h(a,b,!0)}function j(a,b,c){var d,e=b.prototype;d=a.prototype=Object.create(e),d.constructor=a,d._super=e,c&&h(d,c)}function k(a,b){return function(){return a.apply(b,arguments)}}function l(a,b){return typeof a==ka?a.apply(b?b[0]||d:d,b):a}function m(a,b){return a===d?b:a}function n(a,b,c){g(r(b),function(b){a.addEventListener(b,c,!1)})}function o(a,b,c){g(r(b),function(b){a.removeEventListener(b,c,!1)})}function p(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1}function q(a,b){return a.indexOf(b)>-1}function r(a){return a.trim().split(/\s+/g)}function s(a,b,c){if(a.indexOf&&!c)return a.indexOf(b);for(var d=0;d<a.length;){if(c&&a[d][c]==b||!c&&a[d]===b)return d;d++}return-1}function t(a){return Array.prototype.slice.call(a,0)}function u(a,b,c){for(var d=[],e=[],f=0;f<a.length;){var g=b?a[f][b]:a[f];s(e,g)<0&&d.push(a[f]),e[f]=g,f++}return c&&(d=b?d.sort(function(a,c){return a[b]>c[b]}):d.sort()),d}function v(a,b){for(var c,e,f=b[0].toUpperCase()+b.slice(1),g=0;g<ia.length;){if(c=ia[g],e=c?c+f:b,e in a)return e;g++}return d}function w(){return oa++}function x(a){var b=a.ownerDocument;return b.defaultView||b.parentWindow}function y(a,b){var c=this;this.manager=a,this.callback=b,this.element=a.element,this.target=a.options.inputTarget,this.domHandler=function(b){l(a.options.enable,[a])&&c.handler(b)},this.init()}function z(a){var b,c=a.options.inputClass;return new(b=c?c:ra?N:sa?Q:qa?S:M)(a,A)}function A(a,b,c){var d=c.pointers.length,e=c.changedPointers.length,f=b&ya&&d-e===0,g=b&(Aa|Ba)&&d-e===0;c.isFirst=!!f,c.isFinal=!!g,f&&(a.session={}),c.eventType=b,B(a,c),a.emit("hammer.input",c),a.recognize(c),a.session.prevInput=c}function B(a,b){var c=a.session,d=b.pointers,e=d.length;c.firstInput||(c.firstInput=E(b)),e>1&&!c.firstMultiple?c.firstMultiple=E(b):1===e&&(c.firstMultiple=!1);var f=c.firstInput,g=c.firstMultiple,h=g?g.center:f.center,i=b.center=F(d);b.timeStamp=na(),b.deltaTime=b.timeStamp-f.timeStamp,b.angle=J(h,i),b.distance=I(h,i),C(c,b),b.offsetDirection=H(b.deltaX,b.deltaY),b.scale=g?L(g.pointers,d):1,b.rotation=g?K(g.pointers,d):0,D(c,b);var j=a.element;p(b.srcEvent.target,j)&&(j=b.srcEvent.target),b.target=j}function C(a,b){var c=b.center,d=a.offsetDelta||{},e=a.prevDelta||{},f=a.prevInput||{};(b.eventType===ya||f.eventType===Aa)&&(e=a.prevDelta={x:f.deltaX||0,y:f.deltaY||0},d=a.offsetDelta={x:c.x,y:c.y}),b.deltaX=e.x+(c.x-d.x),b.deltaY=e.y+(c.y-d.y)}function D(a,b){var c,e,f,g,h=a.lastInterval||b,i=b.timeStamp-h.timeStamp;if(b.eventType!=Ba&&(i>xa||h.velocity===d)){var j=h.deltaX-b.deltaX,k=h.deltaY-b.deltaY,l=G(i,j,k);e=l.x,f=l.y,c=ma(l.x)>ma(l.y)?l.x:l.y,g=H(j,k),a.lastInterval=b}else c=h.velocity,e=h.velocityX,f=h.velocityY,g=h.direction;b.velocity=c,b.velocityX=e,b.velocityY=f,b.direction=g}function E(a){for(var b=[],c=0;c<a.pointers.length;)b[c]={clientX:la(a.pointers[c].clientX),clientY:la(a.pointers[c].clientY)},c++;return{timeStamp:na(),pointers:b,center:F(b),deltaX:a.deltaX,deltaY:a.deltaY}}function F(a){var b=a.length;if(1===b)return{x:la(a[0].clientX),y:la(a[0].clientY)};for(var c=0,d=0,e=0;b>e;)c+=a[e].clientX,d+=a[e].clientY,e++;return{x:la(c/b),y:la(d/b)}}function G(a,b,c){return{x:b/a||0,y:c/a||0}}function H(a,b){return a===b?Ca:ma(a)>=ma(b)?a>0?Da:Ea:b>0?Fa:Ga}function I(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return Math.sqrt(d*d+e*e)}function J(a,b,c){c||(c=Ka);var d=b[c[0]]-a[c[0]],e=b[c[1]]-a[c[1]];return 180*Math.atan2(e,d)/Math.PI}function K(a,b){return J(b[1],b[0],La)-J(a[1],a[0],La)}function L(a,b){return I(b[0],b[1],La)/I(a[0],a[1],La)}function M(){this.evEl=Na,this.evWin=Oa,this.allow=!0,this.pressed=!1,y.apply(this,arguments)}function N(){this.evEl=Ra,this.evWin=Sa,y.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function O(){this.evTarget=Ua,this.evWin=Va,this.started=!1,y.apply(this,arguments)}function P(a,b){var c=t(a.touches),d=t(a.changedTouches);return b&(Aa|Ba)&&(c=u(c.concat(d),"identifier",!0)),[c,d]}function Q(){this.evTarget=Xa,this.targetIds={},y.apply(this,arguments)}function R(a,b){var c=t(a.touches),d=this.targetIds;if(b&(ya|za)&&1===c.length)return d[c[0].identifier]=!0,[c,c];var e,f,g=t(a.changedTouches),h=[],i=this.target;if(f=c.filter(function(a){return p(a.target,i)}),b===ya)for(e=0;e<f.length;)d[f[e].identifier]=!0,e++;for(e=0;e<g.length;)d[g[e].identifier]&&h.push(g[e]),b&(Aa|Ba)&&delete d[g[e].identifier],e++;return h.length?[u(f.concat(h),"identifier",!0),h]:void 0}function S(){y.apply(this,arguments);var a=k(this.handler,this);this.touch=new Q(this.manager,a),this.mouse=new M(this.manager,a)}function T(a,b){this.manager=a,this.set(b)}function U(a){if(q(a,bb))return bb;var b=q(a,cb),c=q(a,db);return b&&c?cb+" "+db:b||c?b?cb:db:q(a,ab)?ab:_a}function V(a){this.id=w(),this.manager=null,this.options=i(a||{},this.defaults),this.options.enable=m(this.options.enable,!0),this.state=eb,this.simultaneous={},this.requireFail=[]}function W(a){return a&jb?"cancel":a&hb?"end":a&gb?"move":a&fb?"start":""}function X(a){return a==Ga?"down":a==Fa?"up":a==Da?"left":a==Ea?"right":""}function Y(a,b){var c=b.manager;return c?c.get(a):a}function Z(){V.apply(this,arguments)}function $(){Z.apply(this,arguments),this.pX=null,this.pY=null}function _(){Z.apply(this,arguments)}function aa(){V.apply(this,arguments),this._timer=null,this._input=null}function ba(){Z.apply(this,arguments)}function ca(){Z.apply(this,arguments)}function da(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ea(a,b){return b=b||{},b.recognizers=m(b.recognizers,ea.defaults.preset),new fa(a,b)}function fa(a,b){b=b||{},this.options=i(b,ea.defaults),this.options.inputTarget=this.options.inputTarget||a,this.handlers={},this.session={},this.recognizers=[],this.element=a,this.input=z(this),this.touchAction=new T(this,this.options.touchAction),ga(this,!0),g(b.recognizers,function(a){var b=this.add(new a[0](a[1]));a[2]&&b.recognizeWith(a[2]),a[3]&&b.requireFailure(a[3])},this)}function ga(a,b){var c=a.element;g(a.options.cssProps,function(a,d){c.style[v(c.style,d)]=b?a:""})}function ha(a,c){var d=b.createEvent("Event");d.initEvent(a,!0,!0),d.gesture=c,c.target.dispatchEvent(d)}var ia=["","webkit","moz","MS","ms","o"],ja=b.createElement("div"),ka="function",la=Math.round,ma=Math.abs,na=Date.now,oa=1,pa=/mobile|tablet|ip(ad|hone|od)|android/i,qa="ontouchstart"in a,ra=v(a,"PointerEvent")!==d,sa=qa&&pa.test(navigator.userAgent),ta="touch",ua="pen",va="mouse",wa="kinect",xa=25,ya=1,za=2,Aa=4,Ba=8,Ca=1,Da=2,Ea=4,Fa=8,Ga=16,Ha=Da|Ea,Ia=Fa|Ga,Ja=Ha|Ia,Ka=["x","y"],La=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&n(this.element,this.evEl,this.domHandler),this.evTarget&&n(this.target,this.evTarget,this.domHandler),this.evWin&&n(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&o(this.element,this.evEl,this.domHandler),this.evTarget&&o(this.target,this.evTarget,this.domHandler),this.evWin&&o(x(this.element),this.evWin,this.domHandler)}};var Ma={mousedown:ya,mousemove:za,mouseup:Aa},Na="mousedown",Oa="mousemove mouseup";j(M,y,{handler:function(a){var b=Ma[a.type];b&ya&&0===a.button&&(this.pressed=!0),b&za&&1!==a.which&&(b=Aa),this.pressed&&this.allow&&(b&Aa&&(this.pressed=!1),this.callback(this.manager,b,{pointers:[a],changedPointers:[a],pointerType:va,srcEvent:a}))}});var Pa={pointerdown:ya,pointermove:za,pointerup:Aa,pointercancel:Ba,pointerout:Ba},Qa={2:ta,3:ua,4:va,5:wa},Ra="pointerdown",Sa="pointermove pointerup pointercancel";a.MSPointerEvent&&(Ra="MSPointerDown",Sa="MSPointerMove MSPointerUp MSPointerCancel"),j(N,y,{handler:function(a){var b=this.store,c=!1,d=a.type.toLowerCase().replace("ms",""),e=Pa[d],f=Qa[a.pointerType]||a.pointerType,g=f==ta,h=s(b,a.pointerId,"pointerId");e&ya&&(0===a.button||g)?0>h&&(b.push(a),h=b.length-1):e&(Aa|Ba)&&(c=!0),0>h||(b[h]=a,this.callback(this.manager,e,{pointers:b,changedPointers:[a],pointerType:f,srcEvent:a}),c&&b.splice(h,1))}});var Ta={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Ua="touchstart",Va="touchstart touchmove touchend touchcancel";j(O,y,{handler:function(a){var b=Ta[a.type];if(b===ya&&(this.started=!0),this.started){var c=P.call(this,a,b);b&(Aa|Ba)&&c[0].length-c[1].length===0&&(this.started=!1),this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}});var Wa={touchstart:ya,touchmove:za,touchend:Aa,touchcancel:Ba},Xa="touchstart touchmove touchend touchcancel";j(Q,y,{handler:function(a){var b=Wa[a.type],c=R.call(this,a,b);c&&this.callback(this.manager,b,{pointers:c[0],changedPointers:c[1],pointerType:ta,srcEvent:a})}}),j(S,y,{handler:function(a,b,c){var d=c.pointerType==ta,e=c.pointerType==va;if(d)this.mouse.allow=!1;else if(e&&!this.mouse.allow)return;b&(Aa|Ba)&&(this.mouse.allow=!0),this.callback(a,b,c)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ya=v(ja.style,"touchAction"),Za=Ya!==d,$a="compute",_a="auto",ab="manipulation",bb="none",cb="pan-x",db="pan-y";T.prototype={set:function(a){a==$a&&(a=this.compute()),Za&&(this.manager.element.style[Ya]=a),this.actions=a.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var a=[];return g(this.manager.recognizers,function(b){l(b.options.enable,[b])&&(a=a.concat(b.getTouchAction()))}),U(a.join(" "))},preventDefaults:function(a){if(!Za){var b=a.srcEvent,c=a.offsetDirection;if(this.manager.session.prevented)return void b.preventDefault();var d=this.actions,e=q(d,bb),f=q(d,db),g=q(d,cb);return e||f&&c&Ha||g&&c&Ia?this.preventSrc(b):void 0}},preventSrc:function(a){this.manager.session.prevented=!0,a.preventDefault()}};var eb=1,fb=2,gb=4,hb=8,ib=hb,jb=16,kb=32;V.prototype={defaults:{},set:function(a){return h(this.options,a),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(a){if(f(a,"recognizeWith",this))return this;var b=this.simultaneous;return a=Y(a,this),b[a.id]||(b[a.id]=a,a.recognizeWith(this)),this},dropRecognizeWith:function(a){return f(a,"dropRecognizeWith",this)?this:(a=Y(a,this),delete this.simultaneous[a.id],this)},requireFailure:function(a){if(f(a,"requireFailure",this))return this;var b=this.requireFail;return a=Y(a,this),-1===s(b,a)&&(b.push(a),a.requireFailure(this)),this},dropRequireFailure:function(a){if(f(a,"dropRequireFailure",this))return this;a=Y(a,this);var b=s(this.requireFail,a);return b>-1&&this.requireFail.splice(b,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(a){return!!this.simultaneous[a.id]},emit:function(a){function b(b){c.manager.emit(c.options.event+(b?W(d):""),a)}var c=this,d=this.state;hb>d&&b(!0),b(),d>=hb&&b(!0)},tryEmit:function(a){return this.canEmit()?this.emit(a):void(this.state=kb)},canEmit:function(){for(var a=0;a<this.requireFail.length;){if(!(this.requireFail[a].state&(kb|eb)))return!1;a++}return!0},recognize:function(a){var b=h({},a);return l(this.options.enable,[this,b])?(this.state&(ib|jb|kb)&&(this.state=eb),this.state=this.process(b),void(this.state&(fb|gb|hb|jb)&&this.tryEmit(b))):(this.reset(),void(this.state=kb))},process:function(a){},getTouchAction:function(){},reset:function(){}},j(Z,V,{defaults:{pointers:1},attrTest:function(a){var b=this.options.pointers;return 0===b||a.pointers.length===b},process:function(a){var b=this.state,c=a.eventType,d=b&(fb|gb),e=this.attrTest(a);return d&&(c&Ba||!e)?b|jb:d||e?c&Aa?b|hb:b&fb?b|gb:fb:kb}}),j($,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ja},getTouchAction:function(){var a=this.options.direction,b=[];return a&Ha&&b.push(db),a&Ia&&b.push(cb),b},directionTest:function(a){var b=this.options,c=!0,d=a.distance,e=a.direction,f=a.deltaX,g=a.deltaY;return e&b.direction||(b.direction&Ha?(e=0===f?Ca:0>f?Da:Ea,c=f!=this.pX,d=Math.abs(a.deltaX)):(e=0===g?Ca:0>g?Fa:Ga,c=g!=this.pY,d=Math.abs(a.deltaY))),a.direction=e,c&&d>b.threshold&&e&b.direction},attrTest:function(a){return Z.prototype.attrTest.call(this,a)&&(this.state&fb||!(this.state&fb)&&this.directionTest(a))},emit:function(a){this.pX=a.deltaX,this.pY=a.deltaY;var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this._super.emit.call(this,a)}}),j(_,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.scale-1)>this.options.threshold||this.state&fb)},emit:function(a){if(this._super.emit.call(this,a),1!==a.scale){var b=a.scale<1?"in":"out";this.manager.emit(this.options.event+b,a)}}}),j(aa,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[_a]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime>b.time;if(this._input=a,!d||!c||a.eventType&(Aa|Ba)&&!f)this.reset();else if(a.eventType&ya)this.reset(),this._timer=e(function(){this.state=ib,this.tryEmit()},b.time,this);else if(a.eventType&Aa)return ib;return kb},reset:function(){clearTimeout(this._timer)},emit:function(a){this.state===ib&&(a&&a.eventType&Aa?this.manager.emit(this.options.event+"up",a):(this._input.timeStamp=na(),this.manager.emit(this.options.event,this._input)))}}),j(ba,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[bb]},attrTest:function(a){return this._super.attrTest.call(this,a)&&(Math.abs(a.rotation)>this.options.threshold||this.state&fb)}}),j(ca,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Ha|Ia,pointers:1},getTouchAction:function(){return $.prototype.getTouchAction.call(this)},attrTest:function(a){var b,c=this.options.direction;return c&(Ha|Ia)?b=a.velocity:c&Ha?b=a.velocityX:c&Ia&&(b=a.velocityY),this._super.attrTest.call(this,a)&&c&a.direction&&a.distance>this.options.threshold&&ma(b)>this.options.velocity&&a.eventType&Aa},emit:function(a){var b=X(a.direction);b&&this.manager.emit(this.options.event+b,a),this.manager.emit(this.options.event,a)}}),j(da,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[ab]},process:function(a){var b=this.options,c=a.pointers.length===b.pointers,d=a.distance<b.threshold,f=a.deltaTime<b.time;if(this.reset(),a.eventType&ya&&0===this.count)return this.failTimeout();if(d&&f&&c){if(a.eventType!=Aa)return this.failTimeout();var g=this.pTime?a.timeStamp-this.pTime<b.interval:!0,h=!this.pCenter||I(this.pCenter,a.center)<b.posThreshold;this.pTime=a.timeStamp,this.pCenter=a.center,h&&g?this.count+=1:this.count=1,this._input=a;var i=this.count%b.taps;if(0===i)return this.hasRequireFailures()?(this._timer=e(function(){this.state=ib,this.tryEmit()},b.interval,this),fb):ib}return kb},failTimeout:function(){return this._timer=e(function(){this.state=kb},this.options.interval,this),kb},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ib&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ea.VERSION="2.0.4",ea.defaults={domEvents:!1,touchAction:$a,enable:!0,inputTarget:null,inputClass:null,preset:[[ba,{enable:!1}],[_,{enable:!1},["rotate"]],[ca,{direction:Ha}],[$,{direction:Ha},["swipe"]],[da],[da,{event:"doubletap",taps:2},["tap"]],[aa]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var lb=1,mb=2;fa.prototype={set:function(a){return h(this.options,a),a.touchAction&&this.touchAction.update(),a.inputTarget&&(this.input.destroy(),this.input.target=a.inputTarget,this.input.init()),this},stop:function(a){this.session.stopped=a?mb:lb},recognize:function(a){var b=this.session;if(!b.stopped){this.touchAction.preventDefaults(a);var c,d=this.recognizers,e=b.curRecognizer;(!e||e&&e.state&ib)&&(e=b.curRecognizer=null);for(var f=0;f<d.length;)c=d[f],b.stopped===mb||e&&c!=e&&!c.canRecognizeWith(e)?c.reset():c.recognize(a),!e&&c.state&(fb|gb|hb)&&(e=b.curRecognizer=c),f++}},get:function(a){if(a instanceof V)return a;for(var b=this.recognizers,c=0;c<b.length;c++)if(b[c].options.event==a)return b[c];return null},add:function(a){if(f(a,"add",this))return this;var b=this.get(a.options.event);return b&&this.remove(b),this.recognizers.push(a),a.manager=this,this.touchAction.update(),a},remove:function(a){if(f(a,"remove",this))return this;var b=this.recognizers;return a=this.get(a),b.splice(s(b,a),1),this.touchAction.update(),this},on:function(a,b){var c=this.handlers;return g(r(a),function(a){c[a]=c[a]||[],c[a].push(b)}),this},off:function(a,b){var c=this.handlers;return g(r(a),function(a){b?c[a].splice(s(c[a],b),1):delete c[a]}),this},emit:function(a,b){this.options.domEvents&&ha(a,b);var c=this.handlers[a]&&this.handlers[a].slice();if(c&&c.length){b.type=a,b.preventDefault=function(){b.srcEvent.preventDefault()};for(var d=0;d<c.length;)c[d](b),d++}},destroy:function(){this.element&&ga(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ea,{INPUT_START:ya,INPUT_MOVE:za,INPUT_END:Aa,INPUT_CANCEL:Ba,STATE_POSSIBLE:eb,STATE_BEGAN:fb,STATE_CHANGED:gb,STATE_ENDED:hb,STATE_RECOGNIZED:ib,STATE_CANCELLED:jb,STATE_FAILED:kb,DIRECTION_NONE:Ca,DIRECTION_LEFT:Da,DIRECTION_RIGHT:Ea,DIRECTION_UP:Fa,DIRECTION_DOWN:Ga,DIRECTION_HORIZONTAL:Ha,DIRECTION_VERTICAL:Ia,DIRECTION_ALL:Ja,Manager:fa,Input:y,TouchAction:T,TouchInput:Q,MouseInput:M,PointerEventInput:N,TouchMouseInput:S,SingleTouchInput:O,Recognizer:V,AttrRecognizer:Z,Tap:da,Pan:$,Swipe:ca,Pinch:_,Rotate:ba,Press:aa,on:n,off:o,each:g,merge:i,extend:h,inherit:j,bindFn:k,prefixed:v}),typeof define==ka&&define.amd?define(function(){return ea}):"undefined"!=typeof module&&module.exports?module.exports=ea:a[c]=ea}(window,document,"Hammer");var xc={REMOVE_CREDITS:!1,REMOVE_GAMEOVER:!1,REMOVE_GROUP_SKETCHES:!1,REMOVE_BACKGROUND_DECORATORS:!1,REMOVE_ADVERTISING_BACKGROUNDS:!1,REMOVE_OPTIONS_ANIMATION_FRAMES:!1,MERGE_HOME_SCREEN:!1,LOW_BITRATE_SOUND:!1,REMOVE_PLANET:!1,REMOVE_ARTIFACTS:!1,REMOVE_INTRO_ANIMATION_FRAMES:!1,HELP_FRAGMENTED:!1,_REMOVE_SMALL_ACHIEVEMENTS:!1,_REMOVE_LARGE_ACHIEVEMENTS:!1,degradateAll:function(){this.REMOVE_CREDITS=!0,this.REMOVE_GAMEOVER=!0,this.REMOVE_BACKGROUND_DECORATORS=!0,this.REMOVE_ADVERTISING_BACKGROUNDS=!0,this.REMOVE_OPTIONS_ANIMATION_FRAMES=!0,this.MERGE_HOME_SCREEN=!1,this.LOW_BITRATE_SOUND=!0,this.REMOVE_SMALL_ACHIEVEMENTS=!0}};Object.addProperty(xc,"REMOVE_LARGE_ACHIEVEMENTS",function(){return!!this._REMOVE_LARGE_ACHIEVEMENTS},function(a){this._REMOVE_LARGE_ACHIEVEMENTS=a,a&&(this._REMOVE_SMALL_ACHIEVEMENTS=!1)}),Object.addProperty(xc,"REMOVE_SMALL_ACHIEVEMENTS",function(){return!!this._REMOVE_SMALL_ACHIEVEMENTS},function(a){this._REMOVE_SMALL_ACHIEVEMENTS=a,a&&(this._REMOVE_LARGE_ACHIEVEMENTS=!1)});var yc={prefix:"DG_",clone:function(a){switch(a){case null:return null;case"undefined"==typeof a:return null;case Object.isObject(a):return Object.cloneDeep(a);default:return a}},get:function(a,b,c){try{var d=localStorage.getItem(this.prefix+a);null===d?c&&c():b&&b(JSON.parse(d))}catch(e){c&&c()}},set:function(a,b,c,d){try{localStorage.setItem(this.prefix+a,JSON.stringify(b)),c&&c()}catch(e){d&&d()}},remove:function(a){try{localStorage.removeItem(this.prefix+a)}catch(b){}}},zc={data:void 0,storage:null,loaded:!1,restoreValue:function(a){return"Infinity"==a?1/0:"NaN"==a?NaN:a},restoreData:function(a){var b={};for(var c in a)b[c]=this.restoreValue(a[c]);return b},load:function(a){var b=this;if(void 0!==this.data)return void(a&&a());if(this.loaded)setTimeout(function(){b.load(function(){a&&a()})},1e3);else{if("undefined"==typeof window.PLATFORM_USER_ID)return void setTimeout(function(){b.load(function(){a&&a()})},1e3);this.loaded=!0,this.storage=new q,this.storage.init(window.PLATFORM_SERVER_URL,window.PLATFORM_USER_ID),setTimeout(function(){b.storage.getUser(function(c){b.data=b.restoreData(c),a&&a()})},100)}},clone:function(a){switch(a){case null:return null;case"undefined"==typeof a:return null;case Object.isObject(a):return Object.cloneDeep(a);default:return a}},init:function(a){this.load(function(){a&&a()})},get:function(a,b,c){var d=this;void 0===this.data?d.init(function(){d.get(a,b,c)}):d.data&&d.data.hasOwnProperty(a)?b&&b(d.data[a]):c&&c()},forceGet:function(a,b,c){var d=this;void 0===this.data?d.init(function(){d.forceGet(a,b,c)}):d.storage.get(a,function(a){b&&b(d.restoreValue(a))},c)},set:function(a,b,c,d){var e=this;void 0===this.data?e.init(function(){e.set(a,b,c,d)}):(e.data[a]=b,"cachedGameConfig"!=a&&e.storage.set(a,b,c))},remove:function(a){}},Ac={data:void 0,loaded:!1,load:function(a){var b=this;return void 0!==this.data?void(a&&a()):void(this.loaded?setTimeout(function(){b.load(function(){a&&a()})},1e3):(b.loaded=!0,FBInstant.player.getDataAsync(["save"]).then(function(c){"undefined"!=typeof c.save?b.data=c.save:b.data={},a&&a()})))},clone:function(a){switch(a){case null:return null;case"undefined"==typeof a:return null;case Object.isObject(a):return Object.cloneDeep(a);default:return a}},init:function(a){this.load(function(){a&&a()})},get:function(a,b,c){var d=this;void 0===this.data?d.init(function(){d.get(a,b,c)}):d.data&&d.data.hasOwnProperty(a)?b&&b(d.data[a]):c&&c()},set:function(a,b,c,d){var e=this;void 0===this.data?e.init(function(){e.set(a,b,c,d)}):(e.data[a]=b,"cachedGameConfig"!=a&&FBInstant.player.setDataAsync({save:e.data}).then(function(){c&&c(),("chapters"==a||"mana"==a)&&FBInstant.player.flushDataAsync()}))},remove:function(a){}},Bc=window.Game=Object.seal(Object.merge(new Engine.Model,{elements:null,episodeElements:null,artifacts:null,chapters:null,groups:null,mouse:null,hints:null,achievements:null,currentChapter:null,conditions:null,missions:null,loadingPending:!1,loadingAssets:0,planet:null,config:null,manaShop:null,stats:null,payments:null,account:null,remoteStorage:null,promo:null,ads:null,fortune:null,debug:null,news:null,leaderboards:null})),Cc=Engine.NOP,Dc=(Engine.Color,Engine.Gradient,Engine.Image),Ec=(Engine.Font,Engine.Asset),Fc=Engine.Asset.Manager,Gc=Math.pow,Hc=Math.Vector2d,Ic=Engine.Model,Jc=Engine.Timer,Kc=(Engine.Scene,Engine.Node),Lc=Engine.Rectangle,Mc=Engine.Geometry.Text,Nc=Engine.Network.Resource,Oc=a(),Pc=Engine.Device,Qc=Engine.I18n,Rc=Engine.NumberAnimation,Sc=Engine.PropertyAnimation,Tc=Engine.SequentialAnimation,Uc=Engine.ParallelAnimation,Vc=Sc.Easing,Wc=Engine.AmbientSound;Array.POOL_THRESHOLD=4e3,Kc.POOL_THRESHOLD=500,Lc.POOL_THRESHOLD=500;var Xc={};b.MAX_TRIES=50,b.TIMEOUT=15e5,b.prototype=Object.create(Ic.prototype),b.prototype.constructor=b,b.prototype.maxTries=b.MAX_TRIES,b.prototype.timeout=b.TIMEOUT,b.prototype.load=function(a,b,c,d,e){function f(){clearTimeout(m),m=setTimeout(function(){m=null,l&&(l.abort(),i())},j.timeout)}function g(){k=j.maxTries}function h(){g(),f()}function i(){if(clearTimeout(m),--k>0)if(f(),l=new XMLHttpRequest,l.open(o,a,!0),l.onload=function(a){if(a.target.status>=200&&a.target.status<400){var d=a.target.response;b===Nc.JSON&&(d=JSON.parse(a.target.response)),clearTimeout(m),j.off("load",h),j.trigger("load",l),n||c&&c(d),n=!0}else i()},l.onerror=i,"GET"===o)l.send();else if("POST"===o&&p&&p.data){var d=new FormData;for(var e in p.data)d.append(e,p.data[e]);l.send(d)}}var j=this,k=j.maxTries,l=null,m=null,n=!1,o="undefined"!=typeof d?d:"GET",p="undefined"!=typeof e?e:null;i(),j.on("load",h)},c.prototype=Object.create(Ic.prototype),c.prototype.constructor=e,c.prototype.init=function(){var a=this;Bc.once("ready",function(){a.processLoginResponse()})},c.prototype.login=function(a){a&&a(self.isConnected())},c.prototype.isConnected=function(){return!0},Object.addProperty(c.prototype,"status",function(){return"connected"},null),Object.addProperty(c.prototype,"userId",function(){return this._userId},null),Object.addProperty(c.prototype,"firstTime",function(){return!0},null),Object.addProperty(c.prototype,"type",function(){return"default"},null),Object.addProperty(c.prototype,"remoteStorage",function(){return!1},null),Object.addProperty(c.prototype,"name",function(){return this._name},null),Object.addProperty(c.prototype,"photo",function(){return this._pic},null),d.prototype=Object.create(Ic.prototype),d.prototype.constructor=d,d.prototype.init=function(){var a=this;a.getFirstTimeState(),"undefined"!=typeof FB?(FB.init({appId:Rh,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(b){a.processLoginResponse(b)})):setTimeout(a.init.bind(a),500)},d.prototype.login=function(a){var b=this;try{FB.login(function(c){b.processLoginResponse(c),a&&a(b.isConnected())})}catch(c){console.error(c)}},d.prototype.isConnected=function(){return"connected"===this._status?!0:!1},Object.addProperty(d.prototype,"status",function(){return this._status},null),Object.addProperty(d.prototype,"userId",function(){return this._userId},null),Object.addProperty(d.prototype,"firstTime",function(){return this._firstTime},null),Object.addProperty(d.prototype,"type",function(){return"facebook"},null),Object.addProperty(f.prototype,"remoteStorage",function(){return!0},null),e.prototype=Object.create(Ic.prototype),e.prototype.constructor=e,e.prototype.init=function(){var a=this;a.getFirstTimeState(),"undefined"!=typeof FBInstant?Bc.once("ready",function(){FBInstant.startGameAsync().then(a.processLoginResponse)}):setTimeout(a.init.bind(a),500)},e.prototype.login=function(a){a&&a(self.isConnected())},e.prototype.isConnected=function(){return"connected"===this._status?!0:!1},Object.addProperty(e.prototype,"status",function(){return this._status},null),Object.addProperty(e.prototype,"userId",function(){return this._userId},null),Object.addProperty(e.prototype,"firstTime",function(){return this._firstTime},null),Object.addProperty(e.prototype,"type",function(){return"facebookinstant"},null),Object.addProperty(e.prototype,"remoteStorage",function(){return!1},null),Object.addProperty(e.prototype,"name",function(){return this._name},null),Object.addProperty(e.prototype,"photo",function(){return this._pic},null),f.prototype=Object.create(Ic.prototype),f.prototype.constructor=f,f.prototype.init=function(){var a=this;a.getFirstTimeState(),a.login()},f.prototype.login=function(a){var b=this,c=Xc.urlParams;try{c.sign&&(this._userId=c.username,this._loginTime=c.logintime,this._gameId=c.gameid,this._agent=c.agent,b.processLoginResponse(c.sign),a&&a(b.isConnected()))}catch(d){console.error(d)}},f.prototype.isConnected=function(){return"connected"===this._status?!0:!1},Object.addProperty(f.prototype,"status",function(){return this._status},null),Object.addProperty(f.prototype,"userId",function(){return this._userId},null),Object.addProperty(f.prototype,"firstTime",function(){return this._firstTime},null),Object.addProperty(f.prototype,"type",function(){return"hi5"},null),Object.addProperty(f.prototype,"agent",function(){return this._agent},null),Object.addProperty(f.prototype,"remoteStorage",function(){return!0},null),g.prototype=Object.create(Ic.prototype),g.prototype.constructor=g,g.prototype.init=function(){var a=this;a.getFirstTimeState(),"undefined"!=typeof wakool?a.login():setTimeout(a.init.bind(a),500)},g.prototype.login=function(a){var b=this;try{wakool.login(function(c){c?(b.processLoginResponse(c),a&&a(b.isConnected())):setTimeout(b.login.bind(b),3e4)})}catch(c){console.error(c)}},g.prototype.isConnected=function(){return"connected"===this._status?!0:!1},Object.addProperty(g.prototype,"status",function(){return this._status},null),Object.addProperty(g.prototype,"userId",function(){return this._userId},null),Object.addProperty(g.prototype,"firstTime",function(){return this._firstTime},null),Object.addProperty(g.prototype,"type",function(){return"wakool"},null),Object.addProperty(g.prototype,"remoteStorage",function(){return!0},null),Bc.on("configLoaded",function(){Yc.register("rewarded_ad_views",0),Yc.register("rewarded_ad_timer",0)}),Bc.on("ready",function(){function a(){c&&(console.info("AdsMgr.INTERSTITIAL_AD"),Bc.ads.showAd(h.INTERSTITIAL_AD),c=!1,e=setInterval(d,6e4))}var b=0,c=!0,d=function(){c=!0,clearInterval(e)},e=null;Bc.on("stopButtonClicked",a),Bc.on("showAd",a),Bc.on("adsAfterResult",a),Bc.on("playButtonClicked",function(){b++,b>1&&a()})}),h.INTERSTITIAL_AD="interstitialAd",h.REWARDED_AD="rewardedAd",h.prototype=Object.create(null),h.prototype.constructor=h,h.prototype.init=function(){this._impl.init()},h.prototype.showAd=function(a,b){this._impl.showAd(a,b)},h.prototype.isAdAvailable=function(a,b){this._impl.isAdAvailable(a,b)},i.prototype=Object.create(null),i.prototype.constructor=i,i.prototype.init=function(){},i.prototype.showAd=function(a,b){b&&b()},i.prototype.isAdAvailable=function(a,b){b(!0)},j.prototype=Object.create(null),j.prototype.constructor=j,j.prototype.init=function(){"undefined"!=typeof FBInstant&&this.apiCheck()&&(this.ads[h.INTERSTITIAL_AD]=null,this.ads[h.REWARDED_AD]=null,this.retryInit(h.INTERSTITIAL_AD),this.retryInit(h.REWARDED_AD))},j.prototype.showAd=function(a,b){if("undefined"!=typeof FBInstant&&this.ads[a]){var c=this,d=this.ads[a];d.showAsync().then(function(){b&&b(),setTimeout(function(){c.ads[a]=null,c.retryInit(a)},100)})}},j.prototype.isAdAvailable=function(a,b){b(null!==this.ads[a])},k.prototype=Object.create(null),k.prototype.constructor=k,k.prototype.init=function(){},k.prototype.showAd=function(a,b){"undefined"!=typeof window&&window.famobi&&window.famobi.showAd(function(){b&&b()},!0)},k.prototype.isAdAvailable=function(a,b){b(!0)},l.prototype=Object.create(null),l.prototype.constructor=l,l.prototype.init=function(){var a=this;Bc.on("gdPauseGame",function(){"undefined"!=typeof ga&&ga("send","event","gamedistribution_ad","show_ad"),a.soundState=Xc.audio.enabled,a.soundState&&Bc.trigger("muteOn")}),Bc.on("gdResumeGame",function(){a.soundState&&Bc.trigger("muteOff")})},l.prototype.showAd=function(a,b){return a==h.REWARDED_AD?void this.showRewarded(b):void this.showAd()},l.prototype.isAdAvailable=function(a,b){return a==h.REWARDED_AD?(this.updateState(),void b(this.limit>0?this.adViews<this.limit:!0)):void b(!0)},m.prototype=Object.create(null),m.prototype.constructor=m,m.prototype.init=function(){window.addEventListener?addEventListener("message",this.messageHandler,!1):attachEvent("onmessage",this.messageHandler)},m.prototype.showAd=function(a,b){a!=h.REWARDED_AD&&(this.showAd(),b&&b())},m.prototype.isAdAvailable=function(a,b){a!=h.REWARDED_AD&&b(!0)},Xc.animate=function(a,b,c){function d(){Bc.loadingPending?Bc.once("loadingStopped",d):e[b]!==l||l.playing||l.play()}var e=a.$.animations;void 0===e&&(e=a.$.animations={});var f=a.$.baseState;void 0===f&&(f=a.$.baseState={}),void 0===f[b]&&(f[b]=a[b]);var g=e[b],h=g&&g.playing;if(h&&g.target===a&&g.property===b&&g.stop(),null!=c.baseFrom){var i=Sc.prototype.duration,j=null!=c.duration?c.duration:i;c=Object.clone(c);var k=Math.abs((c.to-a[b])/(c.to-c.baseFrom));c.duration=Math.round(j*k),delete c.baseFrom}c.delay=c.delay>0?c.delay:1,c.autoplay=!1;var l=e[b]=a.animate(b,c);return Xc.async.waitOnNode(a,c.delay,d),l},Xc.stopAnimation=function(a,b){if(a.hasOwnProperty("$")){var c=a.$.animations;c[b]&&c[b].playing&&c[b].stop()}},Xc.stopAnimations=function(a){if(a.hasOwnProperty("$")){var b=a.$.animations;if(b)for(var c in b)b[c]&&b[c].playing&&b[c].stop()}},Xc.stopAnimationsRecursive=function(a){Xc.stopAnimations(a),a.children.forEach(Xc.stopAnimationsRecursive,Xc)},Xc.restoreNode=function(a){a.hasOwnProperty("$")&&(Xc.stopAnimations(a),Xc.async.stopNodeTimers(a),setTimeout(function(){var b=a.$.baseState;if(b)for(var c in b)a[c]=b[c]}))},Xc.restoreNodeRecursive=function(a){Xc.restoreNode(a),a.children.forEach(Xc.restoreNodeRecursive,Xc)},Xc.animatePositionByCurve=function(a,b){var c=b.points[0],d=b.points[2],e=b.points[1];return new Engine.Timer({type:"vsync",autoplay:"autoplay"in b?b.autoplay:!0,duration:b.duration||1e3,on:{step:function(){var b=this.progress/this.duration;a.x=Gc(1-b,2)*c.x+2*(1-b)*b*e.x+Gc(b,2)*d.x,a.y=Gc(1-b,2)*c.y+2*(1-b)*b*e.y+Gc(b,2)*d.y}}})},Xc.animateImage=function(a,b,c){var d=a.$.timers;void 0===d&&(d=a.$.timers=[]);var e=0,f=new Engine.Timer({type:"vsync",autoplay:c&&null!=c.autoplay?c.autoplay:!0,delay:c&&null!=c.delay?c.delay:100,duration:1/0,on:{step:function(){e=(e+1)%b.length,a.image=b[e]}}});return d.push(f),f},Xc.fadeIn=function(a,b){var c={},d={};b.scale&&Object.merge(c,b.scale),b.opacity&&Object.merge(d,b.opacity),Object.merge(c,b),Object.merge(d,b),null==c.from&&(c.from=.5),null==c.to&&(c.to=1),null==d.from&&(d.from=0),null==d.to&&(d.to=1);Xc.animate(a,"scale",c),Xc.animate(a,"opacity",d)},Xc.fadeOut=function(a,b){var c={from:1,to:.5},d={from:1,to:0};b.scale&&Object.merge(c,b.scale),b.opacity&&Object.merge(d,b.opacity);var e=Object.merge(Object.clone(b),{scale:c,opacity:d});Xc.fadeIn(a,e)},Xc.lerp=function(a,b,c){return(1-c)*a+c*b},n.prototype=Object.create(null),n.prototype.constructor=n,n.prototype._array=null,n.prototype._index=0,n.prototype.reset=function(a){this._index=0,a&&(this._array=a)},n.prototype.get=function(){return this._index<this._array.length?this._array[this._index]:null},n.prototype.next=function(){return this._index<this._array.length?this._array[this._index++]:null},Xc.async={},Xc.async.callAll=function(a,b){function c(){d++,d===e&&b()}var d=0,e=a.length;if(0===e)return b();for(var f=0;e>f;f++)a[f](c)},Xc.async.wait=function(a,b){function c(){Bc.loadingPending?Bc.once("loadingStopped",c):d.play()}var d=Jc.create();return Jc.call(d,{type:"vsync",delay:a,duration:a,on:{step:b,stop:function(){d.trigger("destroy"),d.destroy()}}}),c(),d},Xc.async.waitOnNode=function(a,b,c){var d=a.$.timers;void 0===d&&(d=a.$.timers=[]);var e=Xc.async.wait(b,c);return e.once("destroy",function(){d.remove(e)}),d.push(e),e},Xc.async.stopNodeTimers=function(a){if(a.hasOwnProperty("$")){var b=a.$.timers;if(void 0!==b)for(;b.length;)b.pop().stop()}},Xc.async.stopNodeTimersRecursive=function(a){Xc.async.stopNodeTimers(a),a.children.forEach(Xc.async.stopNodeTimersRecursive)},o.prototype=Object.create(null),o.prototype.request=function(a,b,c){a.sig=this.calcSig(a);var d=new O;d.fill(a);var e=new P(new U(Sh,this._url)),f=new x(new v(e,d,1e4),function(a){try{var d=JSON.parse(a);d.success?b&&b(d.response):c&&c()}catch(e){console.error(e)}});f.load()},p.prototype=Object.create(null),p.prototype.constructor=p,p.prototype.init=function(a,b){this._url=a,this._userId=b,this._api=new o(a)},p.prototype.get=function(a,b){var c=this,d={};d.cmd="items/get",d.userId=this._userId,this._api.request(d,function(b){a&&a(c._generateBankConfig(b))},b)},q.prototype=Object.create(Ic.prototype),q.prototype.constructor=q,q.prototype.init=function(a,b){this._url=a,this._userId=b,this._enabled=!0,this._api=new o(a)},q.prototype.isReady=function(){return null!==this._userId&&this._enabled},q.prototype.get=function(a,b,c){var d={};d.cmd="storage/get",d.userId=this._userId,d.name=a,this._api.request(d,b,c)},q.prototype.getUser=function(a,b){var c={};c.cmd="storage/user/get",c.userId=this._userId,this._api.request(c,a,b)},q.prototype.set=function(a,b,c,d){if(!this.isReady())return void(d&&d());var e={};e.cmd="storage/set",e.userId=this._userId,e.name=a,e.value="object"==typeof b?JSON.stringify(b):b,this._api.request(e,c,d)},Object.addProperty(q.prototype,"enabled",function(){return this._enabled},null),r.prototype=Object.create(null),r.prototype.constructor=r,r.prototype.get=function(a,b){var c=this;return"undefined"==typeof FBInstant?void(b&&b()):void FBInstant.payments.getCatalogAsync().then(function(b){var d=[];b.forEach(function(a){d[a.productID]=c.generateProduct(a)}),a&&a({deposites:d}),console.log(b)})["catch"](b)},Xc.openLink=function(){var a=document.createElement("a");return a.setAttribute("target","new"),function(b){if(b){a.setAttribute("href",b.replace(/\{/g,"%").replace(/\}/g,""));var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(c)}}}(),s.prototype=Object.create(null),s.prototype.constructor=s,s.prototype._map={},s.prototype.set=function(a,b){this._map[a]=b},s.prototype.get=function(a){return this._map[a]},s.prototype.getAsBool=function(a,b){var c=this.get(a);return c?"true"===String(c).toLowerCase():b},s.prototype.getAsInt=function(a,b){var c=this.get(a);return c?0|c:b},s.prototype.getAsJSON=function(a,b){var c=this.get(a);return c?this._cachedJSON.hasOwnProperty(a)?this._cachedJSON[a]:c=this._cachedJSON[a]=JSON.parse(c):b},t.prototype=Object.create(null),t.prototype.constructor=t,t.prototype.decode=function(a,b,c,d){a?this._impl?this._impl.decode(a,b,c,d):d&&d("There is no cofig decoder implementation"):d&&d("No gameConfig provided")},u.prototype=Object.create(null),u.prototype.constructor=u,u.prototype.decode=function(a,b,c,d){if(!a)return void(d&&d("No gameConfig provided"));if(!b)return void(d&&d("There is no text data provided"));for(var e=b.split("\n");e.length;){var f=e.shift(),g=f.indexOf("//");if(g>=0&&(f=f.substr(0,g)),f=f.trim(),f.length>0){var h=[],i=f.indexOf(" ");h.push(f.substr(0,i).trim()),h.push(f.substr(i).trim()),a.set(h[0],h[1])}}c&&c(a)},v.prototype=Object.create(null),v.prototype.constructor=v,v.prototype.load=function(a,b){var c=null;this._timeout&&(c=setTimeout(function(){var c=b;a=null,b=null,c&&c("CommandDataReaderImpl timedout")},this._timeout)),this._executor.execute(this._command,function(b){clearTimeout(c),a&&a(b)})},w.prototype=Object.create(null),w.prototype.constructor=w,w.prototype.load=function(a,b){this._impl?this._impl.load(a,b):b&&b("DataReader implementation not set")},x.prototype=Object.create(w.prototype),x.prototype.constructor=x,x.prototype.load=function(a,b){var c=this;w.prototype.load.call(this,function(b){c._success&&c._success(b),a&&a(b)},function(a){c._error&&c._error(a),b&&b(a)})},y.prototype=Object.create(null),y.prototype.constructor=y,y.prototype.load=function(a,b){function c(){var e=d.shift();e?e.load(function(b){a&&a(b)},c):b&&b("SequentialDataReaderImpl all readers failed")}var d=this._readers;this.readers=null,c()},z.prototype=Object.create(null),z.prototype.constructor=z,z.prototype.load=function(a,b){var c=null;this._timeout&&(c=setTimeout(function(){var c=b;a=null,b=null,c&&c("StorageDataReaderImpl read timedout")},this._timeout)),Oc.get(this._name,function(b){clearTimeout(c),a&&a(b)},function(){clearTimeout(c),b&&b("StorageDataReaderImpl read error")})},A.prototype=Object.create(null),A.prototype.constructor=A,A.prototype.load=function(a,b){var c=null;this._timeout&&(c=setTimeout(function(){var c=b;a=null,b=null,c&&c("WebDataReaderImpl timedout")},this._timeout)),this._resourceLoader.load(this._url,Nc.TEXT,function(b){clearTimeout(c),a&&a(b)})},B.prototype=Object.create(null),B.prototype.constructor=B,B.prototype.write=function(a,b,c){Oc.set(this._name,a,b,c)},C.prototype=Object.create(null),C.prototype.constructor=C,C.prototype.write=function(a,b,c){this._impl?this._impl.write(a,b,c):c&&c("DataWriter implementation not set")},D.prototype=Object.create(null),D.prototype.constructor=D,D.prototype.init=function(){var a=this;this.loadOutdated(function(b){a._outdatedNewsIds=b,a.load(function(b){Fc.createGroup("news"),a.parse(b),Fc.load("news")})})},D.prototype.loadOutdated=function(a){Oc.get("outdated_news_ids",function(b){a&&a(b)},function(){a&&a([])})},D.prototype.load=function(a){var b={cmd:"get_news",lang:"en"};Bc.stats.request(b,function(b){a&&a(b)})},D.prototype.parse=function(a){for(var b=a.split("\n");b.length;){var c=b.shift(),d=c.indexOf("//");if(d>=0&&(c=c.substr(0,d)),c=c.trim(),c.length>0){var e=[],f=c.indexOf(" ");e.push(c.substr(0,f).trim()),e.push(c.substr(f).trim());try{this._news.push(this._generateNews(e[0],JSON.parse(e[1])))}catch(g){}}}},D.prototype.getLastNews=function(){return this._news?this._news[this._news.length-1]:null},D.prototype.isOutdated=function(a){return this._outdatedNewsIds.indexOf(a)>-1},D.prototype.setOutdated=function(a){-1===this._outdatedNewsIds.indexOf(a)&&(this._outdatedNewsIds.push(a),Oc.set("outdated_news_ids",this._outdatedNewsIds))},D.prototype.getLastFreshNews=function(){var a=this._news?this._news[this._news.length-1]:null;return a?this.isOutdated(a.id)?null:(this.setOutdated(a.id),a):null},D.prototype.hasNextNews=function(a){for(var b=0;b<this._news.length;b++)if(this._news[b].id==a)return this._news[b+1];return null},D.prototype.getNextNews=function(a){for(var b=0;b<this._news.length;b++)if(this._news[b].id==a)return this._news[b+1]?(this.setOutdated(this._news[b+1].id),this._news[b+1]):null;return!1},D.prototype.hasPrevNews=function(a){for(var b=0;b<this._news.length;b++)if(this._news[b].id==a)return this._news[b-1];return!1},D.prototype.getPrevNews=function(a){for(var b=0;b<this._news.length;b++)if(this._news[b].id==a)return this._news[b-1]?(this.setOutdated(this._news[b-1].id),this._news[b-1]):null;return null},Xc.getNodeChildrenBoundingBox=function(a){if(!a.children.length)return Engine.Box(0,0,0,0);var b=1/0,c=1/0,d=-(1/0),e=-(1/0);return a.children.forEach(function(a){b=Math.min(b,a.x),c=Math.min(c,a.y),d=Math.max(d,a.x+a.width),e=Math.max(e,a.y+a.height)}),Engine.Box(b,c,d-b,e-c)},Xc.factoryNode=function(a,b){var c=a.create();return c instanceof Kc&&(c.x=c.y=c.width=c.height=0),a.call(c,b),c},Xc.removeChildren=function(a){for(var b=a.children.length;b--;)a.removeChild(a.children[0])},E.prototype=Object.create(null),E.prototype.constructor=E,E.prototype.init=function(){},E.prototype.buy=function(a,b){var c=Bc.manaShop.bank.getBoxBySku(a);Bc.manaShop.purchase(c.id),b()},E.prototype.check=function(a){},E.prototype.onCloseBankScreen=function(){},E.prototype.onComplete=function(){},E.prototype.isAvailable=function(){return!0},F.prototype=Object.create(null),F.prototype.constructor=F,F.prototype.init=function(){var a=this;a.apiCheck()&&FBInstant.payments.onReady(function(){a.ready=!0,console.log("FB payments ready")})},F.prototype.buy=function(a,b){this.ready&&FBInstant.payments.purchaseAsync({productID:a}).then(function(c){console.log(c),FBInstant.payments.consumePurchaseAsync(c.purchaseToken).then(function(){var c=Bc.manaShop.bank.getBoxBySku(a);Bc.manaShop.purchase(c.id),b&&b()})["catch"](function(a){console.log("FB consume error")})})},F.prototype.check=function(a){this.ready&&FBInstant.payments.getPurchasesAsync().then(function(b){b.forEach(function(b){FBInstant.payments.consumePurchaseAsync(b.purchaseToken).then(function(){var b=Bc.manaShop.bank.getBoxBySku(sku);Bc.manaShop.purchase(b.id),a&&a()})["catch"](function(a){console.log("FB consume error")})}),console.log(b)})},F.prototype.onCloseBankScreen=function(){},F.prototype.onComplete=function(){},F.prototype.isAvailable=function(){return this.ready},G.prototype=Object.create(null),G.prototype.constructor=G,G.prototype.update=function(){},G.prototype.init=function(){this.update()},G.prototype.buy=function(a,b){var c=this,d=Bc.manaShop.bank.getBoxBySku(a),e="Doodle God",f="";d[0].amount&&(f+=d[0].amount!==1/0?Qc.tr("SHOP_MANA_TITLE")+" "+d[0].amount:Qc.tr("INFINITE_MANA"));var g=Math.floor(Date.now()/1e3),h=this.genSign(g),i=d.price;HappyH5GetMine.purchase(Bc.account.agent,Bc.account.userId,e,f,i,"1","1",this._gameId,this._appId,g,a,h),null===this._interval&&(this._interval=setInterval(function(){c.check(function(a){clearInterval(c._interval),c._interval=null,b(a)})},1e3))},G.prototype.check=function(a){var b=this;b.getTransactions(function(c){var d=JSON.parse(c);if(d.hasOwnProperty("list")){var e=b.applyTransactions(d.list);b.approveTransactions(d.list),e.length>0&&a&&a(e)}})},G.prototype.onCloseBankScreen=function(){null!==this._interval&&(clearInterval(this._interval),this._interval=null)},G.prototype.onComplete=function(){},G.prototype.isAvailable=function(){return!0},H.prototype=Object.create(null),H.prototype.constructor=H,H.prototype.init=function(){},H.prototype.buy=function(a,b){if(this._onSuccess=b,"undefined"!=typeof FAPI){var c=Bc.manaShop.bank.getBoxBySku(a);FAPI.UI.showPayment(c.title,c.description,a,Math.round(c.price),null,null,"ok","true")}},H.prototype.check=function(a){var b=this;this._getNewOrders(this._userId,function(c){c&&c.forEach(function(c){b._applyOrder(b._userId,c,function(c){var d=Bc.manaShop.bank.getBoxBySku(c);b._reloadMana(),a&&a([d.id])})})})},H.prototype.onCloseBankScreen=function(){},H.prototype.onComplete=function(){var a=this;this.check(function(){a._onSuccess&&a._onSuccess()})},H.prototype.isAvailable=function(){return!0},I.prototype=Object.create(null),I.prototype.constructor=I,I.prototype.init=function(){this._impl.init()},I.prototype.buy=function(a,b){this._impl.buy(a,b)},I.prototype.check=function(a){this._impl.check(a)},I.prototype.onCloseBankScreen=function(){this._impl.onCloseBankScreen()},I.prototype.onComplete=function(){this._impl.onComplete()},I.prototype.isAvailable=function(){return this._impl.isAvailable()},J.prototype=Object.create(null),J.prototype.constructor=J,J.prototype.init=function(){var a=this;"undefined"!=typeof VK&&VK.addCallback("onOrderSuccess",function(b){a._applyOrder(a._userId,b,function(b){a._reloadMana(),a._onSuccess&&a._onSuccess()})})},J.prototype.buy=function(a,b){this._onSuccess=b,"undefined"!=typeof VK&&VK.callMethod("showOrderBox",{type:"item",item:a})},J.prototype.check=function(a){var b=this;this._getNewOrders(this._userId,function(c){c&&c.forEach(function(c){b._applyOrder(b._userId,c,function(c){var d=Bc.manaShop.bank.getBoxBySku(c);b._reloadMana(),a&&a([d.id])})})})},J.prototype.onCloseBankScreen=function(){},J.prototype.onComplete=function(){},J.prototype.isAvailable=function(){return!0},K.prototype=Object.create(null),K.prototype.constructor=K,K.prototype.update=function(){},K.prototype.init=function(){this.update()},K.prototype.buy=function(a,b){var c=this;wakool.purchase(a),null===this._interval&&(this._interval=setInterval(function(){c.check(function(a){clearInterval(c._interval),c._interval=null,b(a)})},1e3))},K.prototype.check=function(a){var b=this;b.getTransactions(function(c){var d=JSON.parse(c);if(d.hasOwnProperty("list")){var e=b.applyTransactions(d.list);b.approveTransactions(d.list),e.length>0&&a&&a(e)}})},K.prototype.onCloseBankScreen=function(){null!==this._interval&&(clearInterval(this._interval),this._interval=null)},K.prototype.onComplete=function(){},K.prototype.isAvailable=function(){return!0},L.prototype=Object.create(null),L.prototype.constructor=J,L.prototype.init=function(){},L.prototype.buy=function(a,b){var c=this,d=Bc.manaShop.bank.getBoxBySku(a),e=parseInt(a),f=1,g=d.price,h=d.title,i=d.photo,j=wizqConfig.handlePaymentURL;wqapi.requestPayment(e,f,g,h,i,j,function(a,d){(a==WizQAPI.ReturnCode.PAYMENT_REQUEST_SENT.code||a==WizQAPI.ReturnCode.SUCCESS.code)&&c.check(b)})},L.prototype.check=function(a){var b=this;this._getNewOrders(this._userId,function(c){c&&c.forEach(function(c){b._applyOrder(b._userId,c,function(c){var d=Bc.manaShop.bank.getBoxBySku(c);b._reloadMana(),a&&a([d.id])})})})},L.prototype.onCloseBankScreen=function(){},L.prototype.onComplete=function(){},L.prototype.isAvailable=function(){return!0},M.prototype=Object.create(null),M.prototype.constructor=M,M.prototype.update=function(){var a=new O,b={},c=this;b.user_id=Yc.get("user_uuid")+"."+Ph+"."+Oh,b.project_id=this._projectId;var d=Bc.manaShop.getSkus(),e=Bc.chapters.getQuestIds();b.items=[].concat(d,e),this._sandbox===!0&&(b.sandbox=!0),a.set("t","items_cache"),a.set("p",btoa(JSON.stringify(b)));var f=new P(new R(Sh,"https://dontrackmedoodlegod/callback/xsolla-token.php")),g=new x(new v(f,a,1e4),function(a){try{c._cache=JSON.parse(a).tokens}catch(b){console.error(b)}});g.load()},M.prototype.init=function(){this.update()},M.prototype.buy=function(a,b){var c=this;if(a in this._cache){var d={access_token:this._cache[a],sandbox:this._sandbox,childWindow:{target:"_blank"}};XPayStationWidget?(XPayStationWidget.init(d),XPayStationWidget.open()):console.error("XPayStationWidget doesn't exist")}else console.error("Tokens not created.");null===this._interval&&(this._interval=setInterval(function(){c.check(function(a){clearInterval(c._interval),c._interval=null,b(a)})},1e3))},M.prototype.check=function(a){var b=this;b.getTransactions(function(c){var d=JSON.parse(c);if(d.hasOwnProperty("list")){var e=b.applyTransactions(d.list);b.approveTransactions(d.list),e.length>0&&a&&a(e)}})},M.prototype.onCloseBankScreen=function(){null!==this._interval&&(clearInterval(this._interval),this._interval=null)},M.prototype.onComplete=function(){},M.prototype.isAvailable=function(){return!0},N.prototype=Object.create(null),N.prototype.constructor=N,N.prototype.init=function(){var a=this;this.load(function(b){Fc.createGroup("promo"),a.parse(b),Fc.load("promo"),a._data.sort(a._sortPromo)})},N.prototype.load=function(a){var b=new O,c=this;b.set("platform",sc()?Mh+"_PORTRAIT":Mh+"_LANDSCAPE"),b.set("store",Nh),b.set("game_type",Oh),b.set("game_id",Ph),b.set("version",Qh),b.set("screen_scale_factor","1");var d=new P(new R(Sh,"https://ads.joybits.org/api/")),e=new x(new v(d,b,1e4),function(b){try{c._rawData=JSON.parse(b).promo,a&&a(c._rawData)}catch(d){}});e.load()},N.prototype.parse=function(a){for(var b=0;b<a.length;b++){var c=a[b];this._data.push(this._processPromo(c))}},N.prototype.get=function(a,b){this._interval&&clearInterval(this._interval);var c=0;b="undefined"==typeof b,c=this._lastPromoItem[a]?this._lastPromoItem[a]:0;for(var d=c;d<this._data.length;d++){var e=this._data[d];if(e.type==a)return this._lastPromoItem[a]=d+1,e}return this._lastPromoItem[a]=0,b?this.get(a,!1):null},N.prototype.getAll=function(a){for(var b=[],c=0;c<this._data.length;c++){var d=this._data[c];d.type==a&&b.push(d)}return b},N.prototype.has=function(a){for(var b=0;b<this._data.length;b++){var c=this._data[b];if(c.type==a)return!0}return!1},N.prototype.onTimer=function(){},N.prototype.onClose=function(){},N.prototype.getPromoChapterNode=function(){var a=this.get("episodes_all");if(!a)return null;var b=new Lb({name:"btn_promo",image:a.episode_promo_image,title:a.episode_promo_header,desc:a.episode_promo_body,on:{play:function(){Bc.promo.openLink("episodes",a.promo_link)}},hideUnlock:!0});return this.sendStats("episodes","show",a.promo_link),b},N.prototype.getPromoArtifact=function(){var a=this.get("artefact");if(!a)return null;var b={};return b.id="promo",b.promo=!0,b.visible=!0,b.active=!0,b.name=a.artefact_promo_header,b.image=a.artefact_promo_image,b.link=a.promo_link,this.sendStats("artifact","show",a.promo_link),b},N.prototype.hasUniverse=function(){return Bc.config.getAsBool("cross_promo_enabled",!1)&&this.has("universe_new")},N.prototype.getUniverse=function(){var a=this,b=[],c=this.getAll("universe_new");return c.forEach(function(c){b.push(a.exportUniverseBanner(c))}),b},N.prototype.exportUniverseBanner=function(a){var b={},c={},d=[],e=Pc.platform.name;return b.game_name=a.game_name,b.main_button_image=a.main_button_image,1==a.smart&&a.smart_options&&a.store_links?(c=JSON.parse(a.smart_options),d=void 0!=c[e]?c[e]:c["default"],this.exportStore(a,b,d,0),this.exportStore(a,b,d,1)):(b.store_button_image1=a.store_button_image1,b.store_button_image2=a.store_button_image2,b.store_button_link1=a.store_button_link1,b.store_button_link2=a.store_button_link2),b},N.prototype.exportStore=function(a,b,c,d){if(c[d]){var e=this.getStoreInfo(c[d]),f=this.getStoreLink(a.store_links,c[d]);e&&(b["store_button_image"+String(d+1)]=e.store_button_image),f&&(b["store_button_link"+String(d+1)]=f)}},N.prototype.getStoreLink=function(a,b){var c=null;return a.forEach(function(a){a.store_id==b&&(c=a)}),c},N.prototype.getStoreInfo=function(a){var b=this.getAll("store_info"),c=null;return b.forEach(function(b){b.store_id==a&&(c=b)}),c},N.prototype.openLink=function(a,b){this.sendStats(a,"click",b),Xc.openLink(b.url)},N.prototype.sendStats=function(a,b,c){"undefined"!=typeof ga&&c&&ga("send","event","promo_"+a,b,c.platform+" "+c.store+" "+c.game_type+" "+c.game_id)},Xc.getImageFromSprites=function(a,b,c,d,e,f){var g=a.src||Fc.getById(a)||a;b*=Yh,c*=Yh,d*=Yh,e*=Yh;var h=g.toString(),i=h+"_"+b+"_"+c+"_"+d+"_"+e;f(Dc(h).createSubImage(i,b,c,d,e))},Xc.lightenImage=function(a,b){var c=a.src||Fc.getById(a)||a;Engine.Renderer.Image.get(c,function(){var a=document.createElement("canvas");a.width=this.width,a.height=this.height;var c=a.getContext("2d");c.drawImage(this,0,0),c.globalCompositeOperation="lighter",c.drawImage(this,0,0),c.globalCompositeOperation="destination-in",c.drawImage(this,0,0),b(Dc(a.toDataURL()))})},function(){var a="undefined"!=typeof module&&module.exports,b="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,c=function(){for(var a,b,c=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],d=0,e=c.length,f={};e>d;d++)if(a=c[d],a&&a[1]in document){for(d=0,b=a.length;b>d;d++)f[c[0][d]]=a[d];return f}return!1}(),d={request:function(a){var d=c.requestFullscreen;a=a||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?a[d]():a[d](b&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[c.exitFullscreen]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},raw:c};return c?(Object.defineProperties(d,{isFullscreen:{get:function(){return Boolean(document[c.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[c.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[c.fullscreenEnabled])}}}),void(a?module.exports=d:window.screenfull=d)):void(a?module.exports=!1:window.screenfull=!1)}(),Bc.on("ready",function(){Yc.register("mute"),Bc.on("disableMusic",function(){Xc.stopMusic()}),Bc.on("enableMusic",function(){Xc.restartMusic()}),Bc.on("muteOn",function(){Xc.audio.enabled=!1,Xc.stopMusic(),Yc.set("mute",!0)}),Bc.on("muteOff",function(){Xc.audio.enabled=!0,Xc.restartMusic(),Yc.set("mute",!1)}),"iOS"===Pc.platform.name&&window.navigator.standalone&&(Xc.audio.enabled=!1),Xc.audio.enabled=!Yc.get("mute"),Engine.Device.on(Engine.Device.PAGE_SHOW,function(){Xc.restartMusic()}),Engine.Device.on(Engine.Device.PAGE_HIDE,function(){Xc.stopMusic()}),Ch||(Xc.audio.music.playlists.Game=[{sound:"bg1",loop:!0}])}),Xc.fixMusic=function(){Yc.get("music")&&(Xc.stopMusic(),Xc.restartMusic())},Xc.setMusicPlaylist=function(a,b){var c=Xc.audio.music;if(void 0!==c.playlists[a]){if(c.currentPlaylist===c.playlists[a])return;c.currentPlaylist=c.playlists[a],Xc._nextPlaylistTrack(),"mobile"===Engine.Device.platform.type&&(Engine.Input.off("mousedown",Xc.fixMusic),Engine.Input.once("mousedown",Xc.fixMusic))}},Xc._nextPlaylistTrack=function(){if(Xc.audio.music.currentPlaylist){Xc.audio.music.trackTimer.stop();var a=Xc.audio.music.currentPlaylist[Math.floor(Math.random()*Xc.audio.music.currentPlaylist.length)];if(void 0!==a.loop&&a.loop===!0)return void Xc.playMusic(a.sound,{loop:!0,fromPlaylist:!0});Xc.playMusic(a.sound,{loop:!1,fromPlaylist:!0}),Xc.audio.music.trackTimer=new Engine.Timer({type:Engine.Timer.VSYNC}),Xc.audio.music.trackTimer.delay=Xc.audio.music.trackTimer.duration=a.duration,Xc.audio.music.trackTimer.once(Engine.Timer.STEP,Xc._nextPlaylistTrack),Xc.audio.music.trackTimer.play()}},Xc.playMusic=function(a,b){if(Xc.audio.enabled){var c="music/{}",d={parent:th,volume:1,loop:!0,autoplay:!0,autodestroy:!0,channel:"music"};if(void 0!==b&&Object.merge(d,b),"music"===d.channel){if(null!==Xc.audio.music.object&&Xc.audio.music.object.playing){if(Xc.audio.music.name===a)return Xc.audio.music.object;var e=Xc.audio.music.object;e.stop(),Xc.audio.music.object=null}Xc.audio.music.name=a,Xc.audio.music.opts=d}return null!==Xc.audio.music.trackTimer&&Xc.audio.music.trackTimer.stop(),Yc.get(d.channel)===!0&&(d.sound=c.format(a),Xc.audio.music.object=Wc(d)),void 0===d.fromPlaylist&&(Xc.audio.music.currentPlaylist=null),Xc.audio.music.object}},Xc.playSound=function(a,b){if(Xc.audio.enabled){var c={parent:th,volume:1,loop:!1,autoplay:!0,autodestroy:!0,channel:"sound"};void 0!==Xc.audio.defaultSoundVolumes&&void 0!==Xc.audio.defaultSoundVolumes[a]&&(c.volume=Xc.audio.defaultSoundVolumes[a]),void 0!==b&&Object.merge(c,b);var d=c.channel+"/{}";if(void 0!==Fc.getById(d.format(a+"__1"))){for(var e=2;void 0!==Fc.getById(d.format(a+"__"+e));)e++;e=Math.floor(Math.random()*e),e>0&&(a+="__"+e)}return Yc.get(c.channel)===!0&&(c.sound=d.format(a),Fc.getById(c.sound)&&!Xc.audio.lastSounds[c.sound])?(Xc.audio.lastSounds[c.sound]=Xc.audio.lastSounds[c.sound]||0,Xc.audio.lastSounds[c.sound]++,setTimeout(function(){Xc.audio.lastSounds[c.sound]--},0),Wc(c)):void 0}},Xc.playVoice=function(a,b){Xc.audio.enabled&&(void 0===b&&(b={}),b.channel="voice",null!=Xc.audio.lastVoice&&Xc.audio.lastVoice.playing&&Xc.audio.lastVoice.stop(),Xc.audio.lastVoice=Xc.playSound(a,b))},Xc.restartMusic=function(){Xc._nextPlaylistTrack()},Xc.stopMusic=function(){null!==Xc.audio.music.object&&(null!==Xc.audio.music.trackTimer&&Xc.audio.music.trackTimer.stop(),Xc.audio.music.object.playing&&Xc.audio.music.object.stop(),Xc.audio.music.object=null)},Xc.isMusicPlaying=function(){return Xc.audio.music.object&&Xc.audio.music.object.playing},Xc.audio={music:{name:null,opts:null,object:null,trackTimer:new Engine.Timer({type:Engine.Timer.VSYNC})},voice:{lastVoice:null},enabled:!0,lastSounds:{}},Xc.audio.music.playlists={Game:[{sound:"bg1",min:1,max:3,duration:111e3},{sound:"bg2",min:1,max:3,duration:155e3}],Main:[{sound:"bgMain",loop:!0}],DailyBonus:[{sound:"doodlegod_store",loop:!0}],Menu:[{name:"doodlegod_store",loop:!0}]},O.prototype=Object.create(null),O.prototype.constructor=O,O.prototype.clear=function(){Object.clear(this.data)},O.prototype.fill=function(a){if(a instanceof O)for(var b in a.data)a.data.hasOwnProperty(b)&&this.set(b,a.data[b]);else Object.merge(this.data,a);return this},O.prototype.set=function(a,b){return this.data[a]=b,this},O.prototype.get=function(a){for(var b in this.data)this.data.hasOwnProperty(b)&&(a[b]=this.data[b])},P.prototype=Object.create(null),P.prototype.constructor=P,P.prototype.execute=function(a,b,c){this._impl.execute(a,b,c)},Q.prototype=Object.create(null),Q.prototype.constructor=Q,Q.prototype.execute=function(a,b,c){throw new Error("CommandExecutorImpl.execute not implemented")},R.prototype=Object.create(Q.prototype),R.prototype.constructor=R,R.prototype._prepareUrl=function(a,b){var c={},d="?";b.get(c);for(var e in c)c.hasOwnProperty(e)&&(a+=d+e+"="+c[e],d="&");return a},R.prototype.execute=function(a,b,c){this._loader.load(this._prepareUrl(this._url,a),Nc.TEXT,b)},S.prototype=Object.create(null),S.prototype.constructor=S,S.prototype.register=function(a){this.events[a]=a},S.prototype.send=function(a,b,c){var d=new O;d.fill(this.data).set("cmd","stat").set("timestamp",""+Engine.now()).set("event",a),b&&d.fill(b),this.trackPixel(a,b),this._executor.execute(d,c)},S.prototype.request=function(a,b){var c=new O;c.fill(this.data).set("timestamp",""+Engine.now()),a&&c.fill(a),this._executor.execute(c,b)},S.prototype.trackPixel=function(a,b){"undefined"!=typeof gi&&gi.trackFromStats(a,b)},Object.addProperty(S.prototype,"data",function(){return this._data},null),T.prototype=Object.create(Ic.prototype),T.prototype.constructor=T,T.prototype.getRestoreOffer=function(a){a&&a(this._restoreOffersQueue.pop())},T.prototype.init=function(a,b,c){var d=this;this._accountType=a,this._userId=b,this._enabled=!1,c?this.getLastUpdateStr(function(a){null!==a?(d._restoreOffersQueue.push({date:a}),d.trigger("restoreOffer")):(d._enabled=!0,d.cloneLocal())}):this.getLastUpdate(function(a){null!==a?Oc.get("remote_save_last_update",function(b){parseInt(a)>parseInt(b)?d.getLastUpdateStr(function(a){d._restoreOffersQueue.push({date:a}),d.trigger("restoreOffer")}):d._enabled=!0},function(){d._enabled=!0}):d._enabled=!0})},T.prototype.isReady=function(){return null!==this._userId&&this._enabled},T.prototype.get=function(a,b,c){var d={};d.cmd="storage.get",d.account=this._accountType,d.user_id=this._userId,d.platform=Mh,d.store=Nh,d.game_type=Oh,d.game_id=Ph,d.name=a,this.request(d,b,c)},T.prototype.getAll=function(a,b){var c={};c.cmd="storage.getAll",c.account=this._accountType,c.user_id=this._userId,c.platform=Mh,c.store=Nh,c.game_type=Oh,c.game_id=Ph,this.request(c,a,b)},T.prototype.set=function(a,b,c,d){if(!this.isReady())return void(d&&d());var e={};e.cmd="storage.set",e.account=this._accountType,e.user_id=this._userId,e.platform=Mh,e.store=Nh,e.game_type=Oh,e.game_id=Ph,e.name=a,e.value="object"==typeof b?JSON.stringify(b):b,this.request(e,function(a){Oc.set("remote_save_last_update",a,c)},d)},T.prototype.setMultiple=function(a,b,c){if(!this.isReady())return void(c&&c());var d={};d.cmd="storage.setMultiple",d.account=this._accountType,d.user_id=this._userId,d.platform=Mh,d.store=Nh,d.game_type=Oh,d.game_id=Ph,d.value="object"==typeof a?JSON.stringify(a):a,this.request(d,function(a){Oc.set("remote_save_last_update",a,b)},c)},T.prototype.getLastUpdateStr=function(a,b){var c={};c.cmd="storage.getLastUpdateStr",c.account=this._accountType,c.user_id=this._userId,c.platform=Mh,c.store=Nh,c.game_type=Oh,c.game_id=Ph,this.request(c,a,b)},T.prototype.getLastUpdate=function(a,b){var c={};c.cmd="storage.getLastUpdate",c.account=this._accountType,c.user_id=this._userId,c.platform=Mh,c.store=Nh,c.game_type=Oh,c.game_id=Ph,this.request(c,a,b)},T.prototype.values=function(){return Yc.values()},T.prototype.cloneLocal=function(a,b){var c=this,d=Yc.values();this._enabled=!0,this.setMultiple(JSON.stringify(d),a,b),Oc.get("chapters",function(a){c.set("chapters",a)})},T.prototype.applyRemote=function(a,b){var c=this,d=function(e){var f=e.pop(),g=function(){d(e)},h=function(){c._enabled=!0,b&&b()};"undefined"!=typeof f?"chapters"!==f.name?Yc.set(f.name,f.value,g.bind(this),h.bind(this)):Oc.set(f.name,f.value,g.bind(this),h.bind(this)):(c._enabled=!0,c.applyRemoteLastUpdate(a,b))};this._enabled=!1,this.getAll(function(a){d(a)})},T.prototype.applyRemoteLastUpdate=function(a,b){this.getLastUpdate(function(b){null!==b&&Oc.set("remote_save_last_update",b,a)},b)},Object.addProperty(T.prototype,"enabled",function(){return this._enabled},null),U.prototype=Object.create(Q.prototype),U.prototype.constructor=U,U.prototype.execute=function(a,b,c){this._loader.load(this._url,Nc.TEXT,b,"POST",a)},Xc.urlParams,(window.onpopstate=function(){var a,b=/\+/g,c=/([^&=]+)=?([^&]*)/g,d=function(a){return decodeURIComponent(a.replace(b," "))},e=window.location.search.substring(1);for(Xc.urlParams={};a=c.exec(e);)Xc.urlParams[d(a[1])]=d(a[2])})(),Xc.setViewPartial=function(a,b){for(var c=a.children.length;c--;)a.removeChild(a.children[c]);null!=b&&(a.$.lastPartial=b,a.appendChild(b))},Xc.transferChildren=function(a,b){for(;b.children.length;)a.appendChild(b.children[0])},Xc.setNodeState=function(a,b,c){if(a.hasOwnProperty("$")){a.$.currentState=b;var d=a.$[b];d&&(void 0!==a.$.base||c&&c.permanent||(a.$.base={x:a.x,y:a.y,width:a.width,height:a.height,image:a.image,color:a.color,gradient:a.gradient,opacity:a.opacity,roatation:a.roatation,scale:a.scale}),"function"==typeof d&&(d=arguments.length>2?d.apply(a,Array.prototype.slice.call(arguments,2)):d()),Object.isObject(d)&&Object.merge(a,d))}},Xc.setNodeStateRecursive=function(a,b,c){Xc.setNodeState(a,b,c);for(var d=a.children,e=0,f=d.length;f>e;e++)Xc.setNodeStateRecursive(d[e],b,c)},Xc.bindCustomMethods=function(a){if(a.hasOwnProperty("$")){var b=a.$;for(var c in b)"function"==typeof b[c]&&(b[c]=b[c].bind(a))}return a},Xc.bindCustomMethodsRecursive=function(a){Xc.bindCustomMethods(a);for(var b=a.children,c=0,d=b.length;d>c;c++)Xc.bindCustomMethodsRecursive(b[c])};var Yc=function(){function a(){Yc.ready||0!==--c||(Yc.ready=!0,Yc.trigger("ready"))}var b={},c=0;return Object.merge(new Ic,{ready:!1,register:function(d,e){void 0===e&&(e=null),b[d]=e,c++,Oc.get(d,function(c){b[d]=c,e instanceof V&&Object.merge(e,c),a()},function(){e instanceof V?e.commit():Yc.set(d,e),a()}),e instanceof V&&Object.addProperty(e,"__configKey__",d)},get:function(a){return b[a]},set:function(a,c,d,e){return b[a]=c,Oc.set(a,c,d,e),Bc.remoteStorage&&Bc.remoteStorage.set(a,c),Yc},has:function(a){return void 0!==b[a]},values:function(){return b}})}();V.prototype.commit=function(){var a={};Object.merge(a,this),Yc.set(this.__configKey__,a)};var Zc=Object.merge(new Ic,{LANGUAGE_CHANGE:"languagechange",DEFAULT_LANGUAGE:"en-US",STORAGE_KEY:"language",I18N_PATH:window.RESOURSE_HOST+"static/i18n/{}.json",DATA_PATH:window.RESOURSE_HOST+"static/i18n/{}/{}.json",DATA_TYPES:["letters","quotes","links"],MAP:{auto:"auto",de:"de-DE",en:"en-US",es:"es-ES",fr:"fr-FR",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL",pt:"pt-PT",ru:"ru-RU",sv:"sv-SV",zh:"zh-CN",zh_Hant:"zh-TW"},SUPPORTED_LANGUAGES:["de","de-de","es","es-es","fr","fr-fr","it","it-it","nl","nl-nl","pl","pl-pl","pt","pt-pt","ru","ru-ru","sv","sv-sv","en-us","ja-jp","ko-kr","zh-cn","zh-tw"],REPLACE_MAP:{"zh-sg":"zh-tw","zh-hk":"zh-tw","zh-mo":"zh-tw"},data:{},setLanguage:"",checkLanguageIsSupported:function(a){return Zc.SUPPORTED_LANGUAGES.indexOf(a.toLowerCase())>-1},applyReplaceMap:function(a){return Zc.REPLACE_MAP[a.toLowerCase()]?Zc.REPLACE_MAP[a.toLowerCase()]:a},changeLanguage:function(a,b,c){function d(){if(++f===e){var a=Qc.getDefaultTranslator();if(!a)return;Zc.trigger(Zc.LANGUAGE_CHANGE,a.code),Yc.set(Zc.STORAGE_KEY,a.code),Zc.setLanguage=a.code,b()}}b=b||Cc,c=c||Cc,a=Zc.applyReplaceMap(a),Zc.checkLanguageIsSupported(a)||(a=Zc.DEFAULT_LANGUAGE);var e=0,f=0;Object.clear(Zc.data),e++,Sh.load(Zc.I18N_PATH.format(a),Nc.JSON,function(a){var b=Qc.Translator.parseRulesFromJSON(a.rules);for(var c in a.strings)a.strings.hasOwnProperty(c)&&(a.strings[c]=a.strings[c].replace(/\|/g,""));var e=Qc.translatorFactory(a.code,b,a.strings);Qc.setDefaultTranslator(e),d()}),Zc.DATA_TYPES.forEach(function(b){e++,Sh.load(Zc.DATA_PATH.format(a,b),Nc.JSON,function(a){Zc.data[b]=a,d()})})},useDefaultLanguage:function(a,b){function c(){"auto"===d&&Oc.remove(Zc.STORAGE_KEY),a&&a()}var d=Bc.config.get("options_language");d&&(d=Zc.MAP[d.toLowerCase()]),d=d||"auto";var e="auto"===d?Pc.navigator.language:d;Zc.changeLanguage(e,c,function(){Zc.changeLanguage(Zc.DEFAULT_LANGUAGE,c)})},init:function(){function a(a){Zc.useDefaultLanguage()}Oc.get(Zc.STORAGE_KEY,function(b){b?Zc.changeLanguage(b):a()},a)},enableEmergencyMode:function(){Zc.setLanguage="en-US",Zc.changeLanguage(Zc.setLanguage,function(){Oc.remove(Zc.STORAGE_KEY)})}});Yc.register(Zc.STORAGE_KEY),W.current=null,W.active=[],W.activeNodes=[],W.pending=null,W.assetsLoading=0,W.showLoadingTimeout=null,W.imageManager=function(){function a(b,c){var d;if(b.hasOwnProperty("$")&&(d=b.$.preload))if("string"==typeof d)c[d]|=0,b.image=d;else{for(var e=0,f=d.length;f>e;e++)c[d[e]]|=0;b.image=d[0]}for(var e=0,f=b.children.length;f>e;e++)a(b.children[e],c);return c}function b(){if(j){var a=0;for(var b in g)if(0===g[b]){var c=Fc.getById(b);c.status!==Ec.READY||vh.image&&vh.image.src===c.src||(c.unload(),a++)}j=!1}}function c(){if(h--,this.$.appViewListens=!1,this.off(Ec.READY,c),this.off(Ec.ERROR,d),!h)for(var a=0,b=i.length;b>a;a++)i.shift()();0===--W.assetsLoading&&(Bc.loadingPending=!1,clearTimeout(W.showLoadingTimeout),W.showLoadingTimeout=null,Bc.trigger("loadingStopped"))}function d(){(!this.$.maxRetries||this.$.maxRetries<=1)&&c.call(this)}function e(a){if(Eh)return null;for(var b in a){g.hasOwnProperty(b)||(g[b]=0),g[b]++;var e=Fc.getById(b);e&&(e.status===Ec.INITIALIZED&&e.load(),e.status!==Ec.LOADING||e.$.appViewListens||(W.showLoadingTimeout||(W.showLoadingTimeout=setTimeout(function(){Be.show()},400)),h++,e.$.appViewListens=!0,W.assetsLoading++,e.on(Ec.READY,c),e.on(Ec.ERROR,d)))}}function f(a){var c=0;for(var d in a){g[d]-=1;var e=Fc.getById(d);e&&0===g[d]&&e.status===Ec.READY&&c++}Fh&&c>0&&!j&&(j=!0,setTimeout(b,1e3))}var g={},h=0,i=[],j=!1;return{loadView:function(b){b.$.preloadImages=a(b,b.$.preloadImages||{}),e(b.$.preloadImages)},unloadView:function(a){f(a.$.preloadImages)},loadImages:function(a){e(a)},unloadImages:function(a){f(a)},cancelGc:function(){j=!1},getImages:function(b){return a(b.node,b.node.$.preloadImages||{})}}}(),W.prototype=Object.create(Ic.prototype),W.prototype.constructor=W,W.prototype.name="",W.prototype.node=null,W.prototype.api=null,W.prototype.events=null,W.prototype.onShow=Cc,W.prototype.onHide=function(a){a()},W.prototype.toPartial=function(a,b){function c(a){void 0===a&&(a=d.node),W.activeNodes.push(a),W.imageManager.loadView(a),b.call(d,a)}null!=a&&this.onShow.length<1;var d=this;return this.onShow.length<2?c(this.onShow(a)):this.onShow(a,c),W.active.push(this),this},W.prototype.appendPartial=function(a,b,c,d){return b.toPartial(c,function(b){Xc.setViewPartial(a,b),d&&d(b)}),this.once("hide",function(){Xc.setViewPartial(a,null)}),this},W.prototype.getNode=function(a,b){function c(a){void 0===a&&(a=d.node),Bc.loadingPending=!0,Xc.setNodeStateRecursive(a,"base"),Xc.setNodeStateRecursive(a,sc()?"portrait":"landscape"),Xc.setNodeStateRecursive(a,"disabled"),Xc.setNodeStateRecursive(a,"showed"),W.imageManager.loadView(a),Xc.setViewPartial(uh,a),W.current=d,W.active.push(d),W.activeNodes.push(a),b.call(d,a),W.assetsLoading<=0&&(Bc.loadingPending=!1,Bc.trigger("loadingStopped"))}"function"==typeof a&&void 0===b&&(b=a,a=null),void 0===b&&(b=Cc);var d=this;this.onShow.length>1?this.onShow(a,c):c(this.onShow(a))},W.prototype.show=function(a,b,c){"function"==typeof a&&void 0===b&&(b=a,a=null),void 0===b&&(b=Cc);var d=this,e=W.active.map(function(a){return a.trigger("hide"),a.events.off(),a.onHide});return W.activeNodes.map(function(a){W.imageManager.unloadView(a),c&&W.imageManager.cancelGc(),a.trigger("hide"),Xc.stopAnimationsRecursive(a),Xc.async.stopNodeTimersRecursive(a),Xc.setNodeStateRecursive(a,"hidden")}),W.active.clear(),W.pending=this,Xc.async.callAll(e,function(){W.activeNodes.map(function(a){Xc.restoreNodeRecursive(a)}),W.activeNodes.clear(),W.pending===d&&d.getNode(a,b)}),this},X.current=null,X.listenedModels=[],X.prototype=Object.create(Ic.prototype),X.prototype.constructor=X,X.prototype.name="",X.prototype.onShow=Cc,X.prototype.onHide=Cc,X.prototype.show=function(a,b){function c(){if(Bc.mouse.enabled=!0,X.current)for(X.current.onHide();X.listenedModels.length;)X.listenedModels.pop().off();f.onShow(a),X.current=f}function d(a){if(a.children.length>0)for(var b=0,c=a.children.length;c>b;++b){var c=d(a.children[b]);if(c)return c}return a instanceof Lc&&a.image&&a.width>500?a:void 0}function e(){setTimeout(function(){j?Bc.once("loadingStopped",function(){setTimeout(function(){Xc.fadeOut(vh,{duration:g,scale:{from:1,to:1.0000000001},opacity:{from:1,to:0}})},1)}):vh.opacity=0,k?(Be.show(),setTimeout(function(){c()},100)):c()},"mobile"===Pc.platform.type?100:1)}var f=this,g=200,h=50,i=!0,j=!0,k=!1;if(Bc.trigger("loadingStarted"),b&&(h=b.fadeDelay||h,g=b.fadeDuration||g,i="fadeIn"in b?b.fadeIn:i,j="fadeOut"in b?b.fadeOut:j,k="showLoading"in b?b.showLoading:k,b.instantSwitch))return void c();Bc.mouse.enabled=!1;var l=d(uh);l&&(vh.width=l.width,vh.height=l.height,vh.image=l.image),i?Xc.async.wait(h,function(){Xc.fadeIn(vh,{duration:g,scale:{from:1,to:1.0000000001},opacity:{from:0,to:1}}),vh.$.animations.opacity.once("end",function(){e()})}):(vh.opacity=1,e())},X.prototype.listen=function(a){return X.listenedModels.push(a),a},Y.prototype=Object.create(Object.prototype),Y.prototype.constructor=Y,Y.prototype.transition=function(a,b){if(null!==this.currentState&&void 0!==this.currentState.transitions){var c=this.currentState.transitions[a];if(void 0===c&&null!==this.transitions&&(c=this.transitions[a]),void 0!==c){var d=c(this,b);void 0!==d&&this.change(d)}}},Y.prototype.change=function(a){void 0!==this.currentState&&void 0!==this.currentState.onEnd&&this.currentState.onEnd(this),this.currentState=a;var b=this.currentState.onBegin(this);void 0!==b&&this.change(b)},Z.CONFIG_KEY="achievement({id})",Z.prototype.id="",Z.prototype.points=0,Z.prototype.name="",Z.prototype.description="",Z.prototype.image="",Z.prototype.largeImage="",Z.prototype.config=null,Object.addProperty(Z.prototype,"active",function(){return this.config.active},function(a){this.config.active!==a&&(a&&Bc.trigger("achievementUnlocked",this),this.config.active=a,this.config.commit())}),$.fromJSON=function(a){var b=new $;return a.forEach(function(a){var c=new Z(a);b.push(c),b[a.id]=c}),b},$.prototype=Object.create(Array.prototype),$.prototype.constructor=$,$.prototype.processPendingRequests=function(){for(var a=!1;this.config.pendingRequests.length>0;)this.unlockById(this.config.pendingRequests.pop()),a=!0;a&&this.config.commit()},$.prototype.check=function(){var a,b=0;this.processPendingRequests();var c=Bc.chapters.getChaptersAsArray();if(Bc.currentChapter&&(a={},c.forEach(function(c){c instanceof na&&(b+=c.hintsUsed,Object.merge(a,c.elements))})),a){var d=!1,e=!1,f=0,g=0,h=0;if(a["White russian"]&&a.Tequila&&a.Rum&&a.Absinthe&&a.B52&&a.Beer&&a.Vodka&&(d=!0),a.Chaos&&a.Death&&a.Darkness&&(e=!0),a.Life&&f++,a.Human&&g++,a.Games&&h++,Bc.currentChapter&&("episode_4"===Bc.currentChapter.id&&e&&this.unlockById("605832"),Bc.currentChapter instanceof na&&(f>0&&this.unlockById("605752"),g>0&&this.unlockById("605762"),h>0&&this.unlockById("605812"),Bc.currentChapter.getGroupsWithElements().length>=10&&this.unlockById("605742"))),d&&this.unlockById("605852"),!this.isUnlockedById("605732")){var i=0;for(var j in a)if(a.hasOwnProperty(j)&&++i>=6){this.unlockById("605732");break}}}var k=0,l=0;if(c.forEach(function(a){this.checkChapterCompletion(a,"quest_1","740512"),this.checkChapterCompletion(a,"quest_2","605862"),this.checkChapterCompletion(a,"quest_3","844452"),this.checkChapterCompletion(a,"quest_20th","610000"),this.checkChapterCompletion(a,"quest_lost","610001"),this.checkChapterCompletion(a,"episode_1","605772")&&a.hintsUsed<2&&this.unlockById("605822"),this.checkChapterCompletion(a,"episode_2","605782"),this.checkChapterCompletion(a,"episode_3","605792"),this.checkChapterCompletion(a,"episode_4","605802")&&3>b&&this.unlockById("605942"),Bc.currentChapter&&a instanceof na&&Bc.currentChapter instanceof na&&("episode_2"===Bc.currentChapter.id?this.checkChapterCompletion(a,"episode_1","go_to_main_game_2"):"episode_3"===Bc.currentChapter.id?this.checkChapterCompletion(a,"episode_2","go_to_main_game_3"):"episode_4"===Bc.currentChapter.id&&this.checkChapterCompletion(a,"episode_3","go_to_main_game_4"),k+=a.history.length,l+=a.reactions.length)},this),k>0&&k>=l&&this.unlockById("605842"),this.visibleReactionsWithPhilosophersStone){var m=!0;for(var n in this.allReactionsWithPhilosophersStone)if(!this.visibleReactionsWithPhilosophersStone.hasOwnProperty(n)){m=!1;break}m&&this.unlockById("605912")}},$.prototype.checkChapterCompletion=function(a,b,c){return a.id===b&&a.progress>=1?(this.unlockById(c),!0):!1},$.prototype.unlockById=function(a){var b=this[a];b&&(b.active=!0)},$.prototype.isUnlockedById=function(a){var b=this[a];return b?b.active:!1},$.prototype.getHistory=function(){return this.config.history.map(function(a){return{timestamp:a.timestamp,achievement:this[a.achievement]}},this)},$.prototype.historyPush=function(a){this.config.history.push({timestamp:Engine.now(),achievement:a.id}),this.config.commit()},$.prototype.getReactionsFromHistoryWithElement=function(a,b){for(var c={},d=0,e=a.history.length;e>d;++d){var f=a.history[d];a.reactions[f].elements[0]===b?c[a.reactions[f].elements[1]]=!0:a.reactions[f].elements[1]===b&&(c[a.reactions[f].elements[0]]=!0)}return c},$.prototype.getReactionsWithElement=function(a,b){var c={};for(var d in a.reactions)if(a.reactions.hasOwnProperty(d)){var e=a.reactions[d];e.elements[0]===b?c[e.elements[1]]=!0:e.elements[1]===b&&(c[e.elements[0]]=!0)}return c},$.prototype.getActiveAchievementsLength=function(){for(var a=0,b=0,c=this.length;c>b;b++)this[b].active&&a++;return a},_.CONFIG_KEY="artifact({id})",_.fromJSON=function(a){a.elements.forEach(function(a,b,c){c[b]=Bc.elements[a].id});var b=new _(a);return b},_.prototype.id="",_.prototype.name="",_.prototype.desc="",_.prototype.enigma="",_.prototype.elements=null,_.prototype.config=null,Object.addProperty(_.prototype,"visible",function(){return this.config.visible},function(a){this.config.visible!==a&&a&&Bc.trigger("artifactUnlocked",this),this.config.visible=a,this.config.commit()}),Object.addProperty(_.prototype,"active",function(){return this.config.active},function(a){this.config.active=a,this.config.commit()}),_.prototype.toString=function(){return this.id},aa.fromJSON=function(a){var b=a.map(function(a){return _.fromJSON(a)});return new aa(b)},aa.prototype=Object.create(Array.prototype),Object.addProperty(aa.prototype,"timeToRecharge",function(){return 1e3*Bc.config.getAsInt("artifacts_attempts_restore_time",86400)-(Engine.now()-this.config.rechargeStartTime)},null),Object.addProperty(aa.prototype,"attempts",function(){return this.config.artifacts_attempts_amount},function(a){var b=this.config.artifacts_attempts_amount;b!==a&&(this.config.artifacts_attempts_amount=a,this.config.commit(),Bc.trigger("artifactsAttemptsChanged",a)),b>0&&0===a?(this.config.rechargeStartTime=Engine.now(),Bc.trigger("artifactsAttemptsEmpty",a)):0>=b&&a>0&&Bc.trigger("artifactsAttemptsFull",a)}),aa.prototype.accelerateRecharge=function(a){this.config.rechargeStartTime-=a,this.config.commit()},ba.prototype=Object.create(Array.prototype),ba.prototype.constructor=ba,ba.prototype.setBonus=function(a){this.bonus=a},ba.prototype=Object.create(null),ba.prototype.constructor=ba,ba.prototype.add=function(a){this._boxes[a.id]=a,this._boxesArray.push(a)},ba.prototype.createIterator=function(){return new n(this._boxesArray)},ba.prototype.getBoxById=function(a){return this._boxes.hasOwnProperty(a)?this._boxes[a]:null},ba.prototype.getBoxBySku=function(a){var b,c=null;for(var d in this._boxes)b=this._boxes[d],b.sku===a&&(c=b);return c},ca.prototype=Object.create(null),ca.prototype.constructor=ca,ca.prototype._endTime=0,ca.prototype._bank=null,Object.addProperty(ca.prototype,"remainingTime",function(){return this._endTime-Engine.now()},null),Object.addProperty(ca.prototype,"bank",function(){return this._bank},null),da.prototype=Object.create(Array.prototype),da.prototype.constructor=da,da.prototype.purchase=function(){this.forEach(function(a){a.purchase()})},Object.addProperty(da.prototype,"id",function(){return this._id},null),Object.addProperty(da.prototype,"price",function(){return this._price},null),Object.addProperty(da.prototype,"type",function(){return this._type},null),Object.addProperty(da.prototype,"special",function(){return this._special},null),Object.addProperty(da.prototype,"currency",function(){return this._currency},null),Object.addProperty(da.prototype,"sku",function(){return this._sku},null),Object.addProperty(da.prototype,"title",function(){return this._title},null),Object.addProperty(da.prototype,"description",function(){return this._description},null),Object.addProperty(da.prototype,"photo",function(){return this._photo},null),ea.prototype=Object.create(null),ea.prototype.constructor=ea,ea.prototype.createDepositBox=function(a,b){var c=this,d=new da(a,b.type,b.price,!!b.special,b.currency,b.sku,b.title,b.description,b.photo);return b.items&&b.items.forEach(function(a){var b=c.itemsFactory.create(a);if(!b)throw new Error("bank item could not be created "+a);d.push(b)}),d},ea.prototype.createBank=function(a){var b=this,c=new ba;return a.deposites&&Object.keys(a.deposites).forEach(function(d){c.add(b.createDepositBox(d,a.deposites[d]))}),c},ea.prototype.createBonus=function(a){var b=this.createBank(a.bank),c=new ca(a.endTime,b);return c},fa.prototype=Object.create(null),fa.prototype.constructor=fa,fa.prototype.register=function(a,b){this.producers[a]=b},fa.prototype.create=function(a){var b=this.producers[a.type];return b(a)},ha.prototype=Object.create(null),ha.prototype.constructor=ha,ha.prototype.getInfo=function(){throw new Error("not implemented")},ha.prototype.getAmount=function(){throw new Error("not implemented")},ha.prototype.purchase=function(){throw new Error("not implemented")},ha.prototype.isBonus=function(){return!!this.bonus},ia.prototype=Object.create(ha.prototype),ia.prototype.constructor=ia,ia.prototype.getInfo=function(){return"hint_"+this.name},ia.prototype.getAmount=function(){return this.amount},ia.prototype.purchase=function(){this.hints[this.name].add(this.amount)},ja.prototype=Object.create(ha.prototype),ja.prototype.constructor=ja,ja.prototype.getInfo=function(){return"mana"},ha.prototype.getAmount=function(){return this.amount},ja.prototype.purchase=function(){this.addMana(this.amount)},ka.prototype=Object.create(null),ka.prototype.constructor=ka,ka.prototype._bank=null,ka.prototype._bonuses=[],Object.addProperty(ka.prototype,"bank",function(){return this._bank},null),ka.prototype.addBonus=function(a){this._bonuses.push(a)},ka.prototype.removeBonus=function(a){this._bonuses.remove(a)},ka.prototype.createBonusIterator=function(){return new n(this._bonuses)},ka.prototype.removeExpiredBonuses=function(){for(var a=0;a<this._bonuses.length;){var b=this._bonuses[a];b.remainingTime<=0?this._bonuses.remove(b):++a}},ka.prototype.purchase=function(a){var b=this.bank.getBoxById(a);b&&b.purchase(),this._bonuses.forEach(function(c){b=c.bank.getBoxById(a),b&&b.purchase()})},ka.prototype.getPrice=function(a){var b=this.bank.getBoxById(a),c=b&&b.price;return this._bonuses.forEach(function(d){b=d.bank.getBoxById(a),b&&(c=Math.min(b.price,c))}),c},ka.prototype.getSkus=function(){for(var a,b=[],c=this._bank.createIterator();a=c.next();)b.push(a.sku);return b},la(),Object.addProperty(ma.prototype,"elements",function(){return Yc.get("safeMode")?this._elementsKids:this._elementsAll},null),Object.addProperty(ma.prototype,"elementsData",function(){return Yc.get("safeMode")?this._elementsDataKids:this._elementsDataAll},null),Object.addProperty(ma.prototype,"startElementsLength",function(){return Yc.get("safeMode")?this._startElementsLengthKids:this._startElementsLengthAll},null),ma.prototype.reset=function(){Object.clear(this._elementsAll),Object.clear(this._elementsKids),Object.clear(this.groupsWithElements),this.initialized=!1,this.history.clear(),Object.clear(this.historyMap),Object.clear(this.elementsDiscoveredCounter),this.hintsUsed=0,this.complete=!1,this.pairedElements.reset(),this._possibleReactionsCache=null,this._elementsAll.length=0,this._elementsKids.length=0,this.groupsWithElements.length=0,Bc.trigger("chapterReset",this),Bc.trigger("chapterChanged",this)},ma.prototype.getElementById=function(a){return this.elements[a]&&this.elementsData[a]},ma.prototype.getElements=function(){var a={};for(var b in this.elements)a[b]=this.elementsData[b];return a},ma.prototype.getPossibleElements=function(){return this.elementsData},ma.prototype.getPossibleElementById=function(a){return this.elementsData[a]},ma.prototype.addElement=function(a){if(this._elementsDataAll[a]){var b=!1;this._elementsAll.hasOwnProperty(a)||(this._elementsAll[a]=!0,this.elementsDiscoveredCounter[a]=0,b=!0,this._elementsAll.length++,this._elementsDataKids[a]&&(this._elementsKids[a]=!0,this._elementsKids.length++)),this.elementsDiscoveredCounter[a]++,b&&(Bc.trigger("elementVisible",a),Bc.trigger("chapterChanged",this))}},ma.prototype.addElements=function(a){for(var b=0,c=a.length;c>b;b++)this.addElement(a[b])},ma.prototype.addStartElements=function(a){this.addElements(a),this._startElementsLengthAll=this._elementsAll.length,this._startElementsLengthKids=this._elementsKids.length},ma.prototype.removeElement=function(a){delete this._elementsAll[a],this._elementsAll.length--,this._elementsDataKids[a]&&(delete this._elementsKids[a],this._elementsKids.length--)},ma.prototype.removeElements=function(a){for(var b=0,c=a.length;c>b;b++)this.removeElement(a[b])},ma.prototype.getGroupById=function(a){return this.groups[a]},ma.prototype.getGroupsWithElements=function(a){var b=this.groups,c=this.groupsWithElements;for(var d in c)c[d].getElements().length||(delete c[d],c.length--);for(var d in b)!c.hasOwnProperty(d)&&b[d].getElements().length&&(c[d]=b[d],c.length++);return c},ma.prototype.addGroup=function(a){this.groups[a.data.id]=a,this.groups.length++},ma.prototype.addReaction=function(a){for(var b=0,c=a.elements.length;c>b;++b)this._elementsDataAll[a.elements[b]]._isFinal=!1,this._elementsDataKids.hasOwnProperty(a.elements[b])&&(this._elementsDataKids[a.elements[b]]._isFinal=!1);this.reactions[a.id]=a,this.reactions.length++},ma.prototype.getReactionById=function(a){return this.reactions[a]},ma.prototype.getReactionByElements=function(a){var b=lb.generateId(a);return this.reactions[b]},ma.prototype.applyReaction=function(a){for(var b=!this.historyMap.hasOwnProperty(a.id),c=!1,d=a.results,e=0,f=d.length;f>e;e++)this.getElementById(d[e])||(c=!0);return b&&(this.history.push({reaction:a.id,timestamp:Engine.now()}),this.historyMap[a.id]=!0),this.elementsMaching.applyReaction(a),this.pairedElements.addReaction(a),this._possibleReactionsCache=null,Bc.trigger("chapterChanged",this),c},ma.prototype.countElements=function(a){for(var b=0,c=0;c<a.length;++c){var d=this.elements[a[c]];d&&(b+=d)}return b},Object.addProperty(ma.prototype,"progress",function(){return this.complete?1:this.progressCalculator.getValue()},null),ma.prototype.getPossibleReactions=function(){if(null==this._possibleReactionsCache){var a=this;this._possibleReactionsCache=[];var b=!!Yc.get("safeMode");Object.keys(this.reactions).forEach(function(c){var d=a.getReactionById(c),e=!1;if(!b||!d.isAdult){for(var f=0,g=d.results.length;g>f;++f)a.elements[d.results[f]]||(e=e||!b||a.getPossibleElementById(d.results[f]));if(e){for(var h=!0,f=0,g=d.elements.length;g>f;++f)a.elements[d.elements[f]]||(h=!1);h&&a._possibleReactionsCache.push(d)}}})}return this._possibleReactionsCache},ma.prototype.isUnlocked=function(){if(this.unlocked)return!0;if(this.unlockParams){if(this.unlockParams.unlocked)return!!this.unlockParams.unlocked;if(this.unlockParams.chapters)return 0==this.unlockParams.chapters.length?!1:this.unlockParams.chapters.every(function(a){return Bc.chapters.chapters[a]?Bc.chapters.chapters[a].progress>=1?!0:!1:void 0})}return!1},ma.prototype.unlock=function(){this.unlocked||(this.unlocked=!0,Bc.trigger("chapterChanged",this))},ma.prototype.getInappPrice=function(){return this.inappPrice.price},ma.prototype.getCurrencyPrice=function(){return this.inappPrice.currency},ma.prototype.getInappFormattedPrice=function(){return this.inappPrice.price+" "+this.inappPrice.currency},na.prototype=Object.create(ma.prototype),Object.addProperty(na.prototype,"constructor",na),oa.UNLOCK_PRICE=75,oa.prototype=Object.create(ma.prototype),Object.addProperty(oa.prototype,"constructor",oa),oa.prototype.addElement=function(a){var b=!1,c=!this._elementsDataKids[a];this._elementsAll.hasOwnProperty(a)||(this._elementsAll[a]=0,this._elementsAll.length++,this.elementsDiscoveredCounter[a]=0,c||(this._elementsKids[a]=0,this._elementsKids.length++),b=!0),this._elementsAll[a]++,c||this._elementsKids[a]++,this.elementsDiscoveredCounter[a]++,b&&Bc.trigger("elementVisible",a)},oa.prototype.removeElement=function(a){--this._elementsAll[a]||(delete this._elementsAll[a],this._elementsAll.length--),this._elementsDataKids[a]&&(--this._elementsKids[a]||(delete this._elementsKids[a],this._elementsKids.length--))},oa.prototype.revertLastAction=function(){var a=this.history.pop().reaction;delete this.historyMap[a];var b=this.getReactionById(a);this.elementsMaching.revertReaction(b),this.progressCalculator.resetDeadendProgress(),Bc.trigger("chapterChanged",this)},oa.prototype.applyReaction=function(a){for(var b=!1,c=a.results,d=0,e=c.length;e>d;d++)this.getElementById(c[d])||(b=!0);return this.history.push({timestamp:Engine.now(),reaction:a.id}),this.historyMap[a.id]=!0,this.elementsMaching.applyReaction(a),Bc.trigger("chapterChanged",this),b},oa.prototype.addFilteredReaction=function(a){this.filteredReactions.push(a)},oa.prototype.getPossibleReactions=function(){return null==this.progressCalculator.hintReaction&&this.progressCalculator.calculate(),null==this.progressCalculator.hintReaction?[]:[this.getReactionById(this.progressCalculator.hintReaction)]},oa.prototype.getUnlockPrice=function(){return oa.UNLOCK_PRICE},pa.UNLOCK_PRICE=375,pa.prototype.reset=function(){this.progressLabel="",this.lastRemeberedElementName="",ma.prototype.reset.call(this)},pa.prototype=Object.create(ma.prototype),Object.addProperty(pa.prototype,"constructor",pa),pa.prototype.getUnlockPrice=function(){return pa.UNLOCK_PRICE},ra.AUTOSAVE_PERIOD=3e4,ra.getChaptersByType=function(a){var b={},c=Bc.chapters.getChapters();for(var d in c)c[d]instanceof a&&(b[d]=c[d]);return b},ra.getChaptersElements=function(a){var b={};for(var c in a)Object.merge(b,a[c].getElements());return b},ra.prototype.addChapter=function(a){this.chapters[a.id]=a},ra.prototype.getChapterById=function(a){return this.chapters[a]},ra.prototype.getChapters=function(a){return this.chapters},ra.prototype.getChaptersAsArray=function(){var a=[];for(var b in this.chapters)this.chapters.hasOwnProperty(b)&&a.push(this.chapters[b]);return a},ra.prototype.getQuestIds=function(){var a=[];for(var b in this.chapters)this.chapters.hasOwnProperty(b)&&this.chapters[b]instanceof pa&&a.push(b);return a},ra.prototype.setInappPrices=function(a){for(var b in this.chapters)this.chapters.hasOwnProperty(b)&&(a&&a[b]?this.chapters[b].inappPrice=a[b]:this.chapters[b].inappPrice={price:.99,currency:"USD"})},ra.prototype.loadSave=function(){var a=this;ai++,Oc.get("chapters",function(b){a.restoreSave(b);for(var c in a.chapters)Bc.trigger("chapterChanged",a.chapters[c]);wc()},wc)},ra.prototype.restoreSave=function(a){Object.mergeDeep(this,a);for(var b in a.chapters)this.chapters[b]._elementsAll.length=Object.keys(this.chapters[b]._elementsAll).length,this.chapters[b]._elementsKids.length=Object.keys(this.chapters[b]._elementsKids).length},sa.prototype.parent=null,sa.prototype.chapterId=null,sa.prototype.checkAdvert=function(a,b,c){var d=b.some(function(b){return a===b});d&&this.parent.pendingActions.push({action:"advert",advertType:c,quit:!1})},sa.prototype.checkProgressComplete=function(a){var a=Bc.chapters.getChapterById(this.chapterId),b=a.progress;b>=1&&this.setChapterComplete(a)},sa.prototype.setChapterComplete=function(a){return a.complete?!1:(a.complete=!0,this.parent.pendingActions.push({action:"chapterComplete",chapter:a}),!0)},sa.prototype.onElementVisible=function(a){},sa.prototype.onChapterStart=function(){},sa.prototype.onChapterStop=function(){},sa.prototype.onChapterReset=function(){},sa.prototype.onChapterChanged=function(){},ta.prototype=Object.create(sa.prototype),ta.prototype.onChapterStart=function(){this.tutorialLava||(this.tutorialLava=new mb,this.tutorialSearch=new nb)},ta.prototype.onChapterStop=function(){this.tutorialLava=null,this.tutorialSearch=null},ta.prototype.onChapterReset=function(){mb.prototype.config.finished=!1,nb.prototype.config.finished=!1},ta.prototype.onElementVisible=function(a){this.checkAdvert(a,["Sand","Palm","Sailing ship","Hut","Tools","Dinosaur","Wood","Lizard","Clothing"],"quest_lost"),this.checkAdvert(a,["Phoenix","Dragon","Treant","Warrior","Hero","Magic","Beer","Golem","Wizard"],"quest_2"),this.checkAdvert(a,["Demigod","Ghost","Ghoul","Zombie","Vampire","Werewolf","Poison"],"quest_3");var b=Bc.chapters.getChapterById(this.chapterId),c=b.elements.length>=this.REQUIRED_ELEMENTS;c&&this.setChapterComplete(b)},ta.prototype.isTutorialCompleted=function(){return mb.prototype.config.finished},ua.prototype=Object.create(sa.prototype),ua.prototype.onChapterChanged=function(a){this.checkProgressComplete(a)},ua.prototype.onElementVisible=function(a){this.checkAdvert(a,["Palm","Sun"],"quest_lost")},va.prototype=Object.create(sa.prototype),va.prototype.onChapterChanged=function(a){this.checkProgressComplete(a)},va.prototype.onElementVisible=function(a){this.checkAdvert(a,["See"],"quest_lost")},wa.prototype=Object.create(sa.prototype),wa.prototype.onElementVisible=function(a){var b=Bc.chapters.getChapterById(this.chapterId);b.data.finalElement===a&&this.parent.pendingActions.push({action:"chapterComplete",chapter:b,quit:!1})},xa.prototype=Object.create(sa.prototype),xa.prototype.onElementVisible=function(a){var b=Bc.chapters.getChapterById(this.chapterId);if("Hut"===a||"Shelter"===a){var c=b.elements.Map;void 0===c&&(b.addElement("Map"),this.parent.pendingActions.push({action:"itemUnlocked",item:"Map"}),this.parent.pendingActions.push({action:"elementsUnlocked",elements:["Map"]}))}if("Steak"===a||"Jerky"===a){var c=b.elements.Knife;void 0===c&&(b.addElement("Knife"),this.parent.pendingActions.push({action:"itemUnlocked",item:"Knife"}),this.parent.pendingActions.push({action:"elementsUnlocked",elements:["Knife"]}))}var d=!1;"Salvation_lost"===a?(b.progressLabel="QUESTLOST_COMPLETE_SUCCESS_TITLE",d=!0):"Death"===a?(b.progressLabel="QUESTLOST_COMPLETE_KILLED_TITLE",d=!0):"Torture"===a&&(b.progressLabel="QUESTLOST_COMPLETE_TORTURE_TITLE",d=!0),d===!0&&(b.lastRemeberedElementName=a,b.complete=!0,this.parent.pendingActions.push({action:"chapterComplete",chapter:b}))},ya.prototype=Object.create(sa.prototype),ya.prototype.onElementVisible=function(a){"Princess"===a&&this.setChapterComplete(Bc.chapters.getChapterById(this.chapterId))},za.prototype=Object.create(sa.prototype),za.prototype.onElementVisible=function(a){var b=Bc.chapters.getChapterById(this.chapterId);if(b.data.questElements.indexOf(a)>=0){var c=Yc.get("safeMode")?this.totalInSafeMode:b.data.questElements.length;b.countElements(b.data.questElements)>=c&&this.setChapterComplete(b)}},Aa.prototype=Object.create(sa.prototype),Aa.prototype.onChapterChanged=function(a){this.checkProgressComplete(a)},Ba.prototype=Object.create(Ic.prototype),Ba.prototype.constructor=Ba,Ba.prototype.pendingActions=null,Ba.prototype.conditions=null,Ba.prototype.registeredModels=null,Ba.prototype.onElementVisible=function(a,b){var c=this.getCondition(a);c.onElementVisible(b)},Ba.prototype.onChapterStart=function(a){var b=this.getCondition(a);b.onChapterStart()},Ba.prototype.onChapterStop=function(a){var b=this.getCondition(a);b.onChapterStop()},Ba.prototype.onChapterReset=function(a){var b=this.getCondition(a);b.onChapterReset()},Ba.prototype.onChapterChanged=function(a){var b=this.getCondition(a);b.onChapterChanged()},Ba.prototype.getCondition=function(a){return this.getConditionByChapterId(a.id)},Ba.prototype.getConditionByChapterId=function(a){return this.conditions[a]},Ba.prototype.registerModel=function(a,b){this.registeredModels[a]=b},Ba.prototype.registerCondition=function(a){this.conditions[a.chapterId]=a,this.conditions.length++},Ba.prototype.popAction=function(){if(this.pendingActions.length>0){var a=this.pendingActions.shift();return a}},Ca.instancesWithId=[],Zc.on(Zc.LANGUAGE_CHANGE,function(){for(var a=Ca.instancesWithId,b=Zc.data.quotes,c=0,d=a.length;d>c;c++){var e=a[c];e._text=Qc.tr(e._id),e._quotes=b[e._id]||[]}}),["id","image","isAdult","group","text","quotes","isFinal"].forEach(function(a){var b="_{}".format(a);Object.addProperty(Ca.prototype,a,function(){var c=this[b];return null!=c&&""!==c||!this.parent?c:this.parent[a]},null)}),Da.prototype.getValues=function(){throw new Engine.Error.NotImplemented},Da.prototype.reset=function(){this._dirty&&(this._dirty=!1,this._values=this.getValues()),this._currentIndex=0},Da.prototype.next=function(){var a=this._values[this._currentIndex++];return a&&this.chapter.getElementById(a)},Ea.prototype=Object.create(Da.prototype),Object.addProperty(Ea.prototype,"constructor",Ea),Ea.prototype.getValues=function(){var a=this._values||[],b=this.chapter.elements,c=0;for(var d in b)for(var e=0,f=b[d];f>e;e++)a[c]=d,c++;return a.length=c,a},Fa.prototype=Object.create(Da.prototype),Object.addProperty(Fa.prototype,"constructor",Fa),Fa.prototype.getValues=function(){return Object.keys(this.chapter.elements)},Ga.prototype.applyReaction=function(a){throw new Engine.Error.NotImplemented},Ha.prototype=Object.create(Ga.prototype),Object.addProperty(Ha.prototype,"constructor",Ha),Ha.prototype.applyReaction=function(a){this.chapter.addElements(a.results),this.chapter.removeElements(a.elements),Bc.trigger("reactionApplyed",a)},Ha.prototype.revertReaction=function(a){this.chapter.addElements(a.elements),this.chapter.removeElements(a.results),Bc.trigger("reactionReverted",a)},Ia.prototype=Object.create(Ga.prototype),Object.addProperty(Ia.prototype,"constructor",Ia),Ia.prototype.applyReaction=function(a){this.chapter.addElements(a.results),Bc.trigger("reactionApplyed",a)};var $c={getEpisodesAlphabet:function(){var a=ra.getChaptersByType(na),b=ra.getChaptersElements(a);return $c.getAlphabet(b)},getChaptersAlphabet:function(){var a=Bc.chapters.getChapters(),b=ra.getChaptersElements(a);return $c.getAlphabet(b)},getChapterAlphabet:function(){var a=Object.create(null);return Bc.on("chapterChanged",function(b){a[b.id]=null}),function(b){return a[b.id]?a[b.id]:a[b.id]=$c.getAlphabet(b.getElements())}}(),getEpisodesElementsByLetters:function(){var a=ra.getChaptersByType(na),b=ra.getChaptersElements(a);return $c.getElementsByLetters(b)},getChaptersElementsByLetters:function(){var a=Bc.chapters.getChapters(),b=ra.getChaptersElements(a);return $c.getElementsByLetters(b)},getChapterElementsByLetters:function(){var a=Object.create(null);return Bc.on("chapterChanged",function(b){a[b.id]=null}),function(b){return a[b.id]?a[b.id]:a[b.id]=$c.getElementsByLetters(b.getElements())}}(),getAlphabet:function(a){var b={};for(var c in a)b[a[c].text[0]]=!1;b=Object.keys(b),b.sort();for(var d={},e=0,f=b.length;f>e;e++)d[b[e]]=[];if(b=d,Zc.data.letters)for(var g in b){var h=Zc.data.letters[g];if(h&&h!==g){if(!b[h])continue;b[h].push(g),delete b[g]}}var i=[];for(var g in b){var j=b[g];j.unshift(g),i.push(j)}return i},getElementsByLetters:function(a){var b={};for(var c in a)b[a[c].text]=a[c];var d=Object.keys(b);d.sort();for(var e={},f=0,g=d.length;g>f;f++){var h=d[f],i=h[0],j=e[i]=e[i]||[];j.push(b[h])}return e}},_c={getElementById:function(a){var b=Bc.chapters.getChapters();for(var c in b)if(b[c]instanceof na){var d=b[c].getElementById(a);if(d)return d}},getElementsLength:function(){function a(){var a=ra.getChaptersByType(na);b=ra.getChaptersElements(a),c=Object.keys(b).length}var b,c=0;return Bc.on("safeModeChanged",function(){a()}),Bc.on("ready",function(){a()}),Bc.on("chapterReset",function(){a()}),Bc.on("elementVisible",function(a){Bc.currentChapter instanceof na&&!b[a]&&(!Yc.get("safeMode")||Bc.currentChapter.getPossibleElementById(a))&&(b[a]=!0,c++)}),function(){return c}}(),getPossibleElementsLength:function(){function a(){var a=Bc.chapters.getChapters(),c={};for(var d in a)a[d]instanceof na&&Object.merge(c,a[d].getPossibleElements());b=Object.keys(c).length}var b=0;return Bc.on("ready",function(){a()}),Bc.on("safeModeChanged",function(){a()}),Bc.on("chapterReset",function(){a()}),function(){return b}}(),getGroupsWithElementsLength:function(){function a(){var a=Bc.chapters.getChapters();for(var d in a)a[d]instanceof na&&Object.merge(c,a[d].getGroupsWithElements());b=Object.keys(c).length}var b=0,c={};return Bc.on("ready",function(){a()}),Bc.on("elementVisible",function(a){if(Bc.currentChapter instanceof na){var d=Bc.currentChapter.getElementById(a);d&&(c[d.group.id]||(c[d.group.id]=!0,b++))}}),Bc.on("safeModeChanged",function(){a()}),Bc.on("chapterReset",function(){a()}),function(){return b}}(),getGroupsLength:function(){function a(){var a=Bc.chapters.getChapters(),c={};for(var d in a)if(a[d]instanceof na){var e=Object.clone(a[d].groups);for(var f in e){var g=e[f];g.getPossibleElements().length<=0&&delete e[f]}Object.merge(c,e)}b=Object.keys(c).length}var b=0;return Bc.on("ready",function(){a()}),Bc.on("safeModeChanged",function(){a()}),Bc.on("chapterReset",function(){a()}),function(){return b}}()};Bc.on("configLoaded",function(){Yc.register("fortune_last_free_spin_time",0)}),Ja.prototype.getValues=function(){},Ja.prototype.getSpinPrice=function(){return this._price},Ja.prototype.getJackpot=function(){return this._jackpot},Ja.prototype.getJackpotState=function(){return this._jackpotState},Ja.prototype.getChestItems=function(){return this._chestItems},Ja.prototype.getRandomSlots=function(){return this._selectWheelSlots(this._slots)},Ja.prototype.getWinnerSlot=function(a){var b=this._getChooseProbs(a),c=b.reduce(function(a,b){return a+b});c=0==c?1:c;for(var d=Math.random()*c,e=0,f=0,g=0,h=0;h<a.length;h++){var i=a[h],j=i.choose_prob;if(j>0){if(f=e+j,d>=e&&f>d)break;e=f}g++}return g=Math.max(0,Math.min(g,a.length-1)),a[g]},Ja.prototype.processReward=function(a){switch(a.type){case"hint":this.processRewardItem(a),Hd.api.showReward({items:[a]});break;case"mana":this.processRewardItem(a),Hd.api.showReward({items:[a]});break;case"_SPIN_":Yc.set("fortune_last_free_spin_time",0);break;case"_JACKPOT_":this._jackpotState++,this._jackpotState>=3&&this.applyJackpot(),Hd.api.setStarsState(this._jackpotState);break;case"_CHEST_":for(var b=this.getChestItems(),c=0;c<b.length;c++)this.processRewardItem(b[c]);Hd.api.showReward({items:b})}},Ja.prototype.applyJackpot=function(){var a=this.getJackpot(),b=a["mana"+this._jackpotState];bb(Yc.get("mana")+b),Hd.api.showReward({items:[{name:"mana",amount:b}]}),this._jackpotState=0},Ja.prototype.processRewardItem=function(a){switch(a.name){case"mana":bb(Yc.get("mana")+a.amount);break;default:Bc.hints[a.name].add(a.amount)}},Ja.prototype.haveFreeSpin=function(){var a=Yc.get("fortune_last_free_spin_time");return a+this._cooldown<Math.round(Engine.now()/1e3)?!0:!1},Ja.prototype.remainingTimeBeforeFreeSpin=function(){var a=Yc.get("fortune_last_free_spin_time");return a+this._cooldown-Math.round(Engine.now()/1e3)},Ja.prototype.spin=function(){if(this.haveFreeSpin())Yc.set("fortune_last_free_spin_time",Math.round(Engine.now()/1e3)),Hd.api.spin();else{if(!(Yc.get("mana")>this._price))return!1;bb(Yc.get("mana")-this._price),Hd.api.spin()}return!0},Ka.DIRTY_ELEMENTS=1,Ka.DIRTY_POSSIBLE_ELEMENTS=2,Ka.DIRTY_ALL=3,Ka.prototype=Object.create(Ic.prototype),Object.addProperty(Ka.prototype,"newElements",function(){return this._newElements},function(a){var b=this._newElements!==a;this._newElements=a,b&&this.trigger("newElementsChanged",a)}),Ka.prototype.getElements=function(){if(!(this._dirty&Ka.DIRTY_ELEMENTS))return this.elements;this._dirty^=Ka.DIRTY_ELEMENTS;var a=this.elements={};Object.addProperty(a,"length",Object.WRITABLE,0);var b=this.chapter.elementsIterator;b.reset();for(var c;c=b.next();)c.group===this.data&&(a[c.id]=c,a.length++);return a},Ka.prototype.getPossibleElements=function(){if(!(this._dirty&Ka.DIRTY_POSSIBLE_ELEMENTS))return this.possibleElements;this._dirty^=Ka.DIRTY_POSSIBLE_ELEMENTS;var a=this.possibleElements={};Object.addProperty(a,"length",Object.WRITABLE,0);var b=this.chapter.getPossibleElements();for(var c in b)b[c].group===this.data&&(a[c]=b[c],a.length++);return a},Object.addProperty(La.prototype,"id",function(){return this._id||this.parent&&this.parent.id},null),Object.addProperty(La.prototype,"image",function(){return this._image||this.parent&&this.parent.image},null),Ma.CONFIG_KEY="hint({name})",Ma.prototype.name="",Ma.prototype.buyPrice=2,Ma.prototype.sellPrice=1,Ma.prototype.buyAmount=1,Ma.prototype.duration=0,Ma.prototype.rewardedAds=!1,Ma.prototype.adsRechargeTime=0,Ma.prototype.rechargeNotified=!0,Ma.prototype.countable=!0,Ma.prototype.sellable=!0,Ma.prototype.rechargeable=!1,Ma.prototype.rechargeTime=0,Object.addProperty(Ma.prototype,"amount",function(){return this.config.amount},function(a){this.config.amount=a,this.config.commit()}),Object.addProperty(Ma.prototype,"isActive",function(){return this.amount>0},null),Object.addProperty(Ma.prototype,"remainingTime",function(){return Math.max(0,this.config.buyTime-Engine.now())},null),Object.addProperty(Ma.prototype,"rechargeRemainingTime",function(){var a=this.config.depletedTime+this.rechargeTime-Engine.now();return Math.max(0,a)},null),Object.addProperty(Ma.prototype,"canShowAd",function(){return this.rechargeable&&this.rewardedAds&&this.rechargeRemainingTime>0},null),Object.addProperty(Ma.prototype,"isLight",function(){return"light_1"===this.name||"light_2"===this.name||"light_3"===this.name},null),Ma.prototype.checkAmount=function(){return this.amount>0},Ma.prototype.use=function(){return this.amount>0?Bc.config.getAsBool("light_enabled",!1)&&Za()<=0?(Bc.trigger("lightPowerDepleted"),!1):(this.amount--,this.amount<=0&&(this.config.depletedTime=Engine.now(),this.config.commit()),Bc.trigger("hintUsed",this),!0):!1},Ma.prototype.isAffordable=function(){var a=Yc.get("mana");return a>=this.calculateBuyPrice()},Ma.prototype.buy=function(){var a=Yc.get("mana");return a>=this.calculateBuyPrice()?(bb(a-this.calculateBuyPrice()),this.config.buyTime=Engine.now()+this.duration,this.config.amount+=this.buyAmount,this.config.commit(),this.isLight&&("light_1"!==this.name&&Bc.hints.light_1.reset(),"light_2"!==this.name&&Bc.hints.light_2.reset(),"light_3"!==this.name&&Bc.hints.light_3.reset(),Ta(parseInt(this.name.slice(-1))),Va(100)),!0):!1},Ma.prototype.reset=function(){this.config.buyTime=0,this.config.amount=0,this.config.depletedTime=0,this.config.commit()},Ma.prototype.add=function(a){if(this.duration>0){var b=Engine.now();this.config.buyTime<b&&(this.config.buyTime=b),this.config.buyTime+=36e5*a}this.config.amount+=a,this.config.commit()},Ma.prototype.calculateBuyPrice=function(){if("light_1"===this.name||"light_2"===this.name){var a=Wa();return a>=100?this.buyPrice:parseInt(this.name.slice(-1))===Ua()?Math.round(this.buyPrice*(100-a)/100):this.buyPrice}return this.buyPrice},Ma.prototype.calculateSellPrice=function(){return 0===this.duration?this.sellPrice=Math.round(this.buyPrice/2):this.sellPrice=Math.round(this.buyPrice/2*this.remainingTime/this.duration)},Ma.prototype.sell=function(){if(this.sellable===!0){var a=Yc.get("mana");return bb(a+this.sellPrice),this.config.buyTime=0,this.config.amount=0,this.config.commit(),this.isLight&&(Bc.hints.light_1.add(1),Ta(1),Va(100)),!0}return!1},Ma.prototype.accelerateRecharge=function(a){this.config.depletedTime-=a,this.config.commit()},Ma.prototype.chargeHint=function(a){this.duration&&(this.config.buyTime=Engine.now(),this.config.buyTime+=a,this.config.amount=1,this.config.commit())},Na.prototype=Object.create(null),Na.prototype.constructor=Na,Na.prototype.init=function(a){a&&a()},Na.prototype.getEntries=function(a){for(var b=[],c=0;20>c;c++)b.push(new Oa(c,"User Name "+c,Math.round(1e3*(100/c)),c+1,"https://i.imgur.com/mTqGE6Z.jpg"));a&&a(b)},Na.prototype.getPlayerEntry=function(a){var b=new Oa(21,"Player Name",123,21,"https://i.imgur.com/mTqGE6Z.jpg");a&&a(b)},Na.prototype.setScore=function(a,b){b&&b()},Na.prototype.getEntryCount=function(a){a&&a(21)},Oa.prototype=Object.create(null),Oa.prototype.constructor=Oa,Oa.prototype.setScore=function(a){this.score=a},Oa.prototype.getScore=function(){return this.score},Oa.prototype.getId=function(){return this.id},Oa.prototype.getRank=function(){return this.rank},Oa.prototype.getName=function(){return this.name},Oa.prototype.getPhoto=function(){return this.photo},Pa.prototype=Object.create(Na),Pa.prototype.constructor=Pa,Pa.prototype.init=function(a){var b=this;"undefined"!=typeof FBInstant&&FBInstant.getLeaderboardAsync("Leaderboard").then(function(c){b.leaderboard=c,a&&a()})},Pa.prototype.getEntries=function(a){var b=this;this.getEntryCount(function(c){return 0===c?void(a&&a([])):void b.leaderboard.getEntriesAsync(100).then(function(b){var c=[];b.forEach(function(a){var b=a.getRank(),d=a.getScore(),e=a.getPlayer().getID(),f=a.getPlayer().getName(),g=a.getPlayer().getPhoto(),h=new Oa(e,f,d,b,g);c.push(h)}),a&&a(c)})})},Pa.prototype.getPlayerEntry=function(a){this.leaderboard.getPlayerEntryAsync().then(function(b){b||a&&a(null);var c=b.getRank(),d=b.getScore(),e=b.getPlayer().getID(),f=b.getPlayer().getName(),g=b.getPlayer().getPhoto(),h=new Oa(e,f,d,c,g);a&&a(h)})},Pa.prototype.setScore=function(a,b){this.leaderboard.setScoreAsync(a).then(function(a){var c=a.getRank(),d=a.getScore(),e=a.getPlayer().getID(),f=a.getPlayer().getName(),g=a.getPlayer().getPhoto(),h=new Oa(e,f,d,c,g);b&&b(h)})},Pa.prototype.getEntryCount=function(a){this.leaderboard.getEntryCountAsync().then(function(b){a&&a(b)})},Qa.prototype=Object.create(Ic.prototype),Qa.prototype.constructor=Qa,Qa.prototype.getEntries=function(a){this.impl.getEntries(a)},Qa.prototype.getEntryCount=function(a){this.impl.getEntryCount(a)},Qa.prototype.getPlayerEntry=function(a){this.impl.getPlayerEntry(a)},Qa.prototype.setScore=function(a,b){this.impl.setScore(a,b)},Qa.prototype.getScoreData=function(){var a=0,b=0,c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=Bc.chapters.getChaptersAsArray();return k.forEach(function(c){switch(!0){case c instanceof na:d++,c.progress>=1&&g++;break;case c instanceof pa:e++,c.progress>=1&&h++;break;case c instanceof oa:f++,c.progress>=1&&i++}c.initialized&&(a+=c.elements.length,b+=c.getGroupsWithElements().length)}),c=Bc.achievements.getActiveAchievementsLength(),Bc.artifacts.forEach(function(a){a.active&&j++}),{elements:{count:a,rate:10},groups:{count:b,rate:50},achievements:{count:c,rate:100},episodes:{count:g,rate:500},quests:{count:h,rate:500},puzzles:{count:i,rate:250},artifacts:{count:j,rate:100},allEpisodes:{count:+(g>=d),rate:1e3},allQuests:{count:+(h>=e),rate:500},allPuzzles:{count:+(i>=f),rate:250}}},Qa.prototype.calculateScore=function(){var a=this.getScoreData(),b=0;for(var c in a){var d=a[c];b+=d.count*d.rate}return b},Qa.prototype.updateScore=function(){this.setScore(this.calculateScore())},Bc.on("configLoaded",function(){Yc.register("light_power",Bc.config.getAsInt("initgame_params_light_power",100)),Yc.register("light_power_type",Bc.config.getAsInt("initgame_params_light_type",1)),Yc.register("light_timer",0);setInterval(Ra,1e3)}),Bc.on("configLoaded",function(){Yc.register("mana",Bc.config.getAsInt("initgame_params_mana",300))}),db.CONFIG_KEY="mission({})",db.prototype.element=null,db.prototype.config=null,Object.addProperty(db.prototype,"reward",function(){return this.config.reward},null),Object.addProperty(db.prototype,"finished",function(){var a,b=this.config.finished,c=Bc.chapters.getChapters();for(var d in c)if(c[d]instanceof na&&(a=c[d].getElementById(this.element.id)))break;return a&&this.visible&&(this.config.finished=!0,this.config.visible=!1,this.config.commit(),Bc.trigger("missionCompleted",this),this.reward.mana&&bb(Yc.get("mana")+this.reward.mana),this.reward.hint&&(this.reward.hint.type.amount+=this.reward.hint.amount)),b||a},null),Object.addProperty(db.prototype,"visible",function(){return this.config.visible},null),db.prototype.activate=function(){if(this.visible||this.config.finished)return!1;var a=this,b=Bc.config.getAsInt("mission_extra_reward_condition",3),c=Bc.config.getAsJSON("mission_basic_reward"),d=Bc.config.getAsJSON("mission_extra_reward"),e=Bc.config.getAsInt("mission_reward_mana_increase"),f=Bc.missions.activated>0&&Bc.missions.activated%b===0?d:c;return this.config.visible=!0,this.config.reward={},f.forEach(function(b){switch(b.name){case"mana":a.config.reward.mana=b.amount+Bc.missions.activated*e;break;case"hint1":case"hint2":case"hint3":a.config.reward.hint={type:Bc.hints[0|b.name.substr(4)],amount:b.amount}}}),this.config.commit(),Bc.trigger("newMission",this),!0},eb.MAX_VISIBLE=4,eb.fromJSON=function(a){return a=a.map(function(a){return new db({element:Bc.elements[a]})}),new eb(a)},Yc.register("missionsVisibleElementCounter",0),Yc.register("missionsActivated",0),eb.prototype=Object.create(Array.prototype),eb.prototype.constructor=eb,Object.addProperty(eb.prototype,"visible",function(){if(!Bc.config.getAsBool("auto_missions_enabled",!0))return 0;for(var a=[],b=0,c=this.length;c>b;b++)this[b].config.visible&&a.push(this[b]);return a},null),Object.addProperty(eb.prototype,"finished",function(){if(!Bc.config.getAsBool("auto_missions_enabled",!0))return 0;for(var a=[],b=0,c=this.length;c>b;b++)this[b].finished&&a.push(this[b]);return a},null),Object.addProperty(eb.prototype,"activated",function(){return Bc.config.getAsBool("auto_missions_enabled",!0)?Yc.get("missionsActivated"):0},null),fb.prototype.elements=null,fb.prototype.reset=function(){this.elements={}},fb.prototype.addReaction=function(a){delete this.elements[a.elements[0]],delete this.elements[a.elements[1]]},fb.prototype.hasPair=function(a){return!!this.elements[a]},fb.prototype.refresh=function(a){this.reset();for(var b=0,c=a.length;c>b;++b){var d=a[b];this.elements[d.elements[0]]=!0,this.elements[d.elements[1]]=!0}},gb.prototype=Object.create(Object.prototype),gb.prototype.config=null,gb.prototype.reset=function(){this.firstTime=!0,this.newMission=null},Object.addProperty(gb.prototype,"firstTime",function(){return this.config.firstTime},function(a){this.config.firstTime=a,this.config.commit()}),Object.addProperty(gb.prototype,"newMission",function(){return this.config.newMission},function(a){this.config.newMission=a,this.config.commit()}),hb.prototype.calculate=function(){throw new Engine.Error.NotImplemented},hb.prototype.getValue=function(){return this._dirty?(this._dirty=!1,this._value=this.calculate()):this._value},ib.prototype=Object.create(hb.prototype),Object.addProperty(ib.prototype,"constructor",ib),ib.prototype.reset=function(){this.processedStates=[],this.statesToProcess=[],this.filteredReactions=[],this.minimumReactions=1e4,this.remainingReactions=1e4,this.hintReaction=null,this.remainingReactions=this.minimumReactions,this.targetState=new jb,this.targetState.minReactions=1e4,this.deadEndProgress=-1},ib.prototype.cleanup=function(){this.processedStates=[],this.statesToProcess=[]},ib.prototype.listContainsState=function(a,b){if(this.isObjectEmpty(b.mReactions))for(var c=0;c<a.length;++c){var d=a[c];if(d.contains(b))return d}else for(var c=0;c<a.length;++c){var d=a[c];if(this.areObjectsEqual(d.mReactions,b.mReactions))return d}return null},ib.prototype.listContainsStateByReactions=function(a,b){for(var c=0;c<a.length;++c){var d=a[c];if(this.areObjectsEqual(d.mReactions,b.mReactions))return d}return null},ib.prototype.processNextState=function(){for(var a=this.statesToProcess.shift(),b=0;b<this.filteredReactions.length;++b){var c=this.filteredReactions[b];if(a.allowsReaction(c)){var d=c.id;a.addReaction(d);var e=this.listContainsStateByReactions(this.statesToProcess,a),f=this.listContainsStateByReactions(this.processedStates,a);if(null!=e||null!=f)0==(a.mReactions[d]-=1)&&delete a.mReactions[d];else{0==(a.mReactions[d]-=1)&&delete a.mReactions[d];var g=a.clone();g.performReaction(c),g.minReactions=a.minReactions+1,this.statesToProcess.push(g)}}}this.processedStates.splice(0,0,a)},ib.prototype.resetDeadendProgress=function(){this.deadEndProgress=-1},ib.prototype.checkProgress=function(){this.cleanup();var a=this.game.elements;if(0!=a.length){for(var b=new jb(a),c=0,d=this.game.history.length;d>c;++c)b.addReaction(this.game.history[c].reaction);this.statesToProcess.push(b);for(var e=3e3,f=null;this.statesToProcess.length>0&&null==(f=this.listContainsState(this.statesToProcess,this.targetState))&&--e>0;)this.processNextState();if(null==f){var g=this.deadEndProgress;g>0?this.remainingReactions=g:this.deadEndProgress=this.remainingReactions}else this.remainingReactions=f.minReactions;if(null!=f&&f.minReactions>0)for(var h=0;h<this.filteredReactions.length;++h){var i=this.filteredReactions[h];if(f.mFirstReaction==i.id){this.hintReaction=f.mFirstReaction;break}}else this.hintReaction=null}},ib.prototype.isObjectEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},ib.prototype.areObjectsEqual=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){if(!b.hasOwnProperty(c))return!1;if(a[c]!==b[c])return!1}for(var c in b)if(b.hasOwnProperty(c)){if(!a.hasOwnProperty(c))return!1;if(a[c]!==b[c])return!1}return!0},jb.prototype=Object.create(Object.prototype),Object.addProperty(jb.prototype,"constructor",jb),jb.prototype.contains=function(a){for(var b in a.mElements)if(a.mElements.hasOwnProperty(b)){if(void 0===this.mElements[b])return!1;if(this.mElements[b]<a.mElements[b])return!1}return!0},jb.prototype.add=function(a){for(var b=0;b<a.length;++b)void 0===this.mElements[a[b]]?this.mElements[a[b]]=1:this.mElements[a[b]]+=1},jb.prototype.subtract=function(a){var b=a[0],c=a[1];b==c?0==(this.mElements[b]-=2)&&delete this.mElements[b]:(0==(this.mElements[b]-=1)&&delete this.mElements[b],0==(this.mElements[c]-=1)&&delete this.mElements[c])},jb.prototype.allowsReaction=function(a){var b=a.elements,c=this.mReactions[a.id];if(void 0!==c&&c>=3)return!1;var d=b[0],e=b[1];if(d==e)return void 0===this.mElements[d]?!1:this.mElements[d]>=2;var f=this.mElements[d],g=this.mElements[e];return void 0!==f&&void 0!==g},jb.prototype.addReaction=function(a){var b=this.mReactions[a];void 0===b?this.mReactions[a]=1:this.mReactions[a]+=1},jb.prototype.performReaction=function(a){this.subtract(a.elements),this.add(a.results),this.addReaction(a.id),""===this.mFirstReaction&&(this.mFirstReaction=a.id)},jb.prototype.clone=function(){var a=new jb;for(var b in this.mElements)this.mElements.hasOwnProperty(b)&&(a.mElements[b]=this.mElements[b]);for(var b in this.mReactions)this.mReactions.hasOwnProperty(b)&&(a.mReactions[b]=this.mReactions[b]);return a.mFirstReaction=this.mFirstReaction,a.minReactions=this.minReactions,a},ib.prototype.calculate=function(){this.minimumReactions=this.game.data.minimumReactions,this.filteredReactions=this.game.filteredReactions,this.targetState.mElements[this.game.data.finalElement]=1,this.checkProgress();var a=!0,b=this.deadEndProgress;return a&&b>0&&(this.remainingReactions=b),this.remainingReactions>this.minimumReactions&&(this.remainingReactions=this.minimumReactions),(this.minimumReactions-this.remainingReactions)/this.minimumReactions},kb.prototype=Object.create(hb.prototype),Object.addProperty(kb.prototype,"constructor",kb),kb.prototype.calculate=function(){if(this.chapter.initialized){var a=this.chapter.startElementsLength>=0?this.chapter.startElementsLength:this.chapter.data.startElements.length;return(this.chapter.elements.length-a)/(this.chapter.getPossibleElements().length-a)}return 0},lb.generateId=function(a){return a.sort(),"reaction({})".format(a)},mb.prototype=Object.create(Y.prototype),mb.prototype.constructor=mb,mb.prototype.config=function(){var a=new V({finished:!1});return Yc.register("tutorialLava",a),a}(),nb.prototype=new Y,nb.prototype.constructor=nb,nb.prototype.config=function(){var a=new V({finished:!1});return Yc.register("tutorialSearch",a),a}(),Bc.on("configLoaded",function(){Yc.register("undo",Bc.config.getAsInt("initgame_params_undo",10))}),rb.destroyMethod=function(){this.parent&&this.parent.removeChild(this)},tb.prototype=Object.create(Lc.prototype),tb.prototype.constructor=tb,ub.prototype=Object.create(Kc.prototype),ub.prototype.constructor=ub,ub.prototype.spacing=0,ub.prototype.destroyChildren=function(){if(this.isDestroying=!0,this.__children)for(;this.__children.length;)Kc.prototype.appendChild.call(this,this.__children.pop());for(;this.children.length;){var a=this.children[0];a.destroy(),this.__children&&Kc.prototype.removeChild.call(this,a)}this.isDestroying=!1},ub.prototype.appendChild=function(a){var b=a;return this.__children?(this.__children=this.__children,this.__children.push(a)):b=Kc.prototype.appendChild.call(this,a),this.isDestroying||this.updatePositions(),b},ub.prototype.removeChild=function(a){var b=a;return this.__children?this.__children?this.__children.remove(a):Kc.prototype.removeChild.call(this,a):b=Kc.prototype.removeChild.call(this,a),this.isDestroying||this.updatePositions(),b},ub.prototype.updatePositions=function(a){if(!this.isDestroying){var b=0,c=0,d=this.__children||this.children;if(void 0!=this.__children)for(;this.children.length;)Kc.prototype.removeChild.call(this,this.children[0]);for(var e=0,f=d.length;f>e;e++){var g=d[e];c=Math.max(c,g.width);var h=b+=g.height/2;g.y=h,b+=g.height/2+this.spacing,void 0!=a&&this.__children&&(b+this.y+a<0||h+this.y+a-g.height/2>this.contentHeight||Kc.prototype.appendChild.call(this,g))}this.width=c,this.height=b-this.spacing}},vb.prototype=Object.create(tb.prototype),vb.prototype.constructor=vb,vb.prototype.achievement=null,wb.prototype=Object.create(Kc.prototype),wb.prototype.constructor=wb,wb.prototype.close=function(){var a=this;Xc.animate(this,"opacity",{from:1,to:0,duration:100});var b=Xc.animate(this.content,"scale",{from:1,to:.5,duration:100});return b.on("end",function(){a.parent&&a.parent.removeChild(a)}),this},xb.prototype=Object.create(Kc.prototype),xb.prototype.constructor=xb,yb.prototype=Object.create(tb.prototype),yb.prototype.constructor=yb,zb.prototype=Object.create(tb.prototype),zb.prototype.constructor=zb,zb.prototype.setImage=function(a){this.body.content.artifact.image=a},zb.prototype.setText=function(a){this.body.content.artifact.title.changeTextDefinition(a)},Ab.IMAGE_SRC="artifacts_menu/{}",Ab.LOCKED_IMAGE_SRC="artifacts_menu/{}_glass",Ab.COLUMNS=2,Ab.ROWS=3,Ab.ITEMS_IN_CELL=3,Ab.ITEMS_IN_COLUMN=Ab.ROWS*Ab.ITEMS_IN_CELL,Ab.MAX_ARTIFACTS=sc()?15:18,Ab.prototype=Object.create(Kc.prototype),Ab.prototype.constructor=Ab,Ab.prototype.onArtifactNodeClick=function(a){var b=this._artifacts[a].promo;b?Bc.promo.openLink("artifact",this._artifacts[a].link):this.trigger("artifactClick",{i:a,artifact:this._artifacts[a]})},Ab.prototype.forEachArtifactNode=function(a,b){for(var c=Ab.MAX_ARTIFACTS,d=0;c>d;d++){var e,f=Math.floor(d/Ab.ITEMS_IN_COLUMN),g=Math.floor(d/Ab.ITEMS_IN_CELL)-f*Ab.ROWS,h=d-f*Ab.ITEMS_IN_COLUMN-g*Ab.ITEMS_IN_CELL;e=sc()?this.content.contentNode.scrollarea.children[f].children[g].getArtifact(h):this.children[f].children[g].getArtifact(h),e&&a.call(b,e,d,f,g,h)}},Ab.prototype.updateArtifacts=function(a){var b=[],c=Bc.promo.getPromoArtifact();c&&b.push(c);for(var d=0;d<a.length;d++)b.push(a[d]);this._artifacts=b,this.forEachArtifactNode(function(a,c,d,e,f){var g=b[c];return g?void(g.visible?(Xc.setNodeState(a,"active"),g.promo?a.setImage(g.image):g.active?a.setImage(Ab.IMAGE_SRC.format(g.id)):a.setImage(Ab.LOCKED_IMAGE_SRC.format(g.id)),a.setText(g.name)):Xc.setNodeState(a,"locked")):void Xc.setNodeState(a,"hidden")})},Bb.prototype=Object.create(Kc.prototype),Bb.prototype.constructor=Bb,Bb.prototype.getArtifact=function(a){return this.children[a+1]},Cb.prototype=Object.create(Kc.prototype),Cb.prototype.constructor=Cb,Cb.prototype.addBonus=function(a){0===this.bonusSlot1.children.length?this.bonusSlot1.appendChild(a):this.bonusSlot2.appendChild(a)},Db.prototype=Object.create(Kc.prototype),Db.prototype.constructor=Db,Db.prototype.setAmount=function(a){this.mana.text="+"+a},Eb.prototype=Object.create(Kc.prototype),Eb.prototype.constructor=Eb,Fb.prototype=Object.create(Kc.prototype),Fb.prototype.constructor=Fb,Fb.prototype.setBonus=function(a){Xc.removeChildren(this.bonusSlot),this.bonusSlot.appendChild(a)},Fb.prototype.setAmount=function(a){this.mana.text=a===1/0?"":a},Gb.prototype=Object.create(Kc.prototype),Gb.prototype.constructor=Gb,Gb.prototype=Object.create(Kc.prototype),Gb.prototype.constructor=Gb,Gb.prototype.setBonus=function(a){this.bonus=a,this.text.text=a.remainingTime},Hb.prototype=Object.create(tb.prototype),Ib.prototype=Object.create(tb.prototype),Jb.prototype=Object.create(tb.prototype),Jb.prototype.constructor=Jb,Jb.prototype.activate=function(){sc()||(this.bg.image="toolbar/button_toolbar_2")},Jb.prototype.deactivate=function(){sc()||(this.bg.image="toolbar/button_toolbar_2_d")},Kb.prototype=Object.create(tb.prototype),Kb.prototype.constructor=Kb,Kb.prototype.grey=!1,Kb.prototype.setGrey=function(a){this.grey=a},Kb.prototype.render=function(a){if(Engine.rendererType===Engine.WEBGL_RENDERER){Engine.Node.prototype.render.call(this,a);var b=this.width,c=this.height,d=-b/2,e=-c/2,f=this.color,g=f?f:Engine.Color("white"),h=Kb._cachedExtraVertices;this.grey?Engine.Renderer.renderRectangleCustom(a,d,e,b,c,"grey",this.image,g,h,1):Engine.Renderer.renderRectangleImage(a,d,e,b,c,this.image)}else Engine.Rectangle.prototype.render.call(this,a)},Kb._cachedExtraVertices=new Float32Array([0,0,0,0]),Kb._vertShaderCode="attribute vec2 se_aPosition;\nattribute vec2 se_aCoord;\nattribute vec4 se_aColor;\nattribute vec4 se_aExtra;\nattribute vec3 se_aMatrix0;\nattribute vec3 se_aMatrix1;\nattribute vec3 se_aMatrix2;\nuniform mat3 se_uViewProjection;\nvarying vec2 vCoord;\nvarying vec4 vColor;\nvarying vec4 vExtra;\n\nvoid main()\n{\n   mat3 model = mat3(se_aMatrix0, se_aMatrix1, se_aMatrix2);\n   mat3 modelViewProjection = se_uViewProjection * model;\n   vCoord = se_aCoord;\n   vColor = se_aColor;\n   vExtra = se_aExtra;\n   gl_Position = vec4(modelViewProjection * vec3(se_aPosition, 1.0), 1.0);\n}\n",Kb._fragShaderCode="precision mediump float;\nuniform sampler2D se_sBaseTexture;\nvarying vec2 vCoord;\nvarying vec4 vColor;\nvarying vec4 vExtra;\n\nvoid main()\n{\n   vec4 tex = texture2D(se_sBaseTexture, vCoord);\n   float grey = 0.2989 * tex.r + 0.5870 * tex.g + 0.1140 * tex.b;\n   gl_FragColor = vec4(grey,grey,grey,tex.a) * vColor;\n}\n",Engine.rendererType===Engine.WEBGL_RENDERER&&Engine.Renderer.registerMaterial("grey",Kb._vertShaderCode,Kb._fragShaderCode),Lb.CLOSED_IMAGE_SRC="{}_d",Lb.prototype=Object.create(Kc.prototype),Lb.prototype.constructor=Lb,Lb.prototype.chapter=null,Lb.prototype.title="",Lb.prototype.desc="",Lb.prototype.image="",Lb.prototype.getImageSrc=function(){return this.image},Lb.prototype.getClosedImageSrc=function(){var a=this.getImageSrc(),b=Lb.CLOSED_IMAGE_SRC.format(a);return Fc.getById(b)?b:a},Lb.prototype.updateNodeState=function(){this.chapter&&(Yc.get("safeMode")&&this.chapter.data.adult?Xc.setNodeStateRecursive(this.playNode,"adult"):this.chapter.isUnlocked()&&Xc.setNodeStateRecursive(this.playNode,"unlocked"),this.chapter.progress>=1&&Xc.setNodeStateRecursive(this.playNode,"finished"))},Lb.prototype.showResetButton=function(){null!=this.chapter&&this.chapter.isUnlocked()&&Xc.setNodeStateRecursive(this.resetButton,"resetShowed")},Lb.prototype.hideResetButton=function(){null!=this.chapter&&this.chapter.isUnlocked()&&Xc.setNodeStateRecursive(this.resetButton,"base")},Lb.prototype.updateProgress=function(){this.playNode.showed.unloced_progress.$.setProgress(this.chapter.progress)},Mb.prototype=Object.create(Lc.prototype),Mb.prototype.constructor=Mb,Object.addProperty(Mb.prototype,"amount",null,function(a){0===a?this.image=null:1===a?this.image="interface/new1":2===a?this.image="interface/new2":this.image="interface/new3"}),Nb.IMAGE_SRC="elements/{}",Nb.ASSET_ID="element/{id}";var ad=sc()?1.4:1;Nb.prototype=Object.create(Lc.prototype),Nb.prototype.constructor=Nb,Nb.prototype.element=null,Nb.prototype.setBorderType=function(a){switch(a){case"hasPair":Bc.currentChapter.pairedElements.hasPair(this.element.id)||(this.border.image="elements/border_dotted");break;case"final":Bc.currentChapter.getPossibleElementById(this.element.id).isFinal&&(this.border.image="elements/border_gray");break;case"solid":this.border.image="elements/border_solid"}},Ob.prototype=Object.create(tb.prototype),Ob.prototype.constructor=Ob,Pb.prototype=Object.create(Nb.prototype),Pb.prototype.constructor=Pb,Pb.prototype.onMouseClick=function(){this.parent.trigger("selected")},Pb.prototype.markAsFailed=function(){this.failAnimation.playing&&this.failAnimation.stop(),this.failAnimation.play()},Qb.prototype=Object.create(Nb.prototype),Qb.prototype.constructor=Qb,Rb.SELECT="select",Rb.BLUR="blur",Rb.prototype=Object.create(Nb.prototype),Rb.prototype.constructor=Rb,Rb.prototype.isSelected=!1,Rb.prototype.onClick=function(){this.isSelected?this.blur():this.select()},Rb.prototype.select=function(){this.isSelected=!0,this.trigger(Rb.SELECT)},Rb.prototype.blur=function(){this.isSelected=!1,this.trigger(Rb.BLUR)},Sb.selected=null,Sb.prototype=Object.create(Rb.prototype),Sb.prototype.constructor=Sb,Sb.prototype.onClick=function(){this.isSelected||Rb.prototype.onClick.call(this)},Sb.prototype.select=function(){Sb.selected&&Sb.selected.blur(),Sb.selected=this,this.image="elements/border_select",Rb.prototype.select.call(this)},Sb.prototype.blur=function(){this.image="elements/border_shadow",Rb.prototype.blur.call(this),Sb.selected=null},Tb.prototype=Object.create(Rb.prototype),Tb.prototype.constructor=Tb,Tb.prototype.select=function(){this.selectAnimation.play(),Rb.prototype.select.call(this)},Tb.prototype.blur=function(){this.selectAnimation.stop(),this.rotation=0,Rb.prototype.blur.call(this)},Tb.prototype.blurAsFailed=function(){Tb.prototype.blur.call(this),this.failAnimation.play()},Tb.prototype.blurAsSuccess=function(){Tb.prototype.blur.call(this),this.rotation=0},Tb.prototype.destroy=function(){this.selectAnimation.destroy(),this.failAnimation.destroy(),Rb.prototype.destroy.call(this)},Ub.prototype=Object.create(Kc.prototype),Ub.prototype.constructor=Ub,Vb.prototype=Object.create(Kc.prototype),Vb.prototype.constructor=Vb,Vb.prototype.progressText=null,Vb.prototype.resetButton=null,Vb.prototype.isActive=!1,Vb.prototype.show=function(){Xc.animate(this.button,"opacity",{to:1,duration:200}),Xc.animate(this.button,"scale",{to:1,duration:200})},Vb.prototype.promote=function(){Tc({autoplay:!0,autodestroy:!0,reverse:!0,animations:[Rc({target:this,property:"scale",duration:200,from:1,to:1.2,easing:Vc.inSine}),Rc({target:this,property:"scale",duration:200,from:1.2,to:1,easing:Vc.inSine})]})},Vb.prototype.activate=function(){this.isActive=!0,Xc.setNodeStateRecursive(this,"active")},Vb.prototype.showResetButton=function(){Xc.restoreNode(this.resetButton),Xc.animate(this.resetButton,"scale",{duration:200,to:1,easing:Vc.inSine}),Xc.animate(this.resetButton,"opacity",{duration:200,to:1})},Vb.prototype.hideResetButton=function(){Xc.stopAnimations(this.resetButton),Xc.animate(this.resetButton,"scale",{duration:200,from:1,to:.1,easing:Vc.inSine}),Xc.animate(this.resetButton,"opacity",{duration:200,from:1,to:0})},Vb.prototype.showProgressText=function(){this.progressText.opacity=1},Vb.prototype.hideProgressText=function(){this.progressText.opacity=0},Vb.prototype.setProgress=function(a){this.progressText.text.text="{}%".format(Math.round(100*a))},Wb.WHEEL_MULTIPLIER=120,Wb.ContunuousScrolling=function(a,b){this.node=a,this.prop=b,this.timer=new Jc({type:"vsync",duration:1/0,on:{step:this.animate.bind(this)}})},Wb.ContunuousScrolling.prototype.animate=function(){0===this.amplitude&&this.timer.stop();var a=Engine.now()-this.timestamp,b=-this.amplitude*Math.exp(-a/325);if(Math.abs(b)>.5){switch(this.prop){case"x":var c=this.node._scrollTo(this.target+b,this.node.contentNode.y);break;case"y":var c=this.node._scrollTo(this.node.contentNode.x,this.target+b)}c||this.timer.stop()}else this.timer.stop()},Wb.ContunuousScrolling.prototype.press=function(){this.velocity=this.amplitude=0,this.timestamp=Engine.now()},Wb.ContunuousScrolling.prototype.release=function(a){if(0===this.velocity){if(this.node.useScrollByClick)return void this.node.scrollByClick()}else if(this.node.useAutoSelectX)return void this.node.autoSelectX();if(Math.abs(this.velocity)>10&&Engine.now()<this.timestamp+200){this.amplitude=.3*this.velocity,this.timestamp=Engine.now();var b=Math.round(this.node.contentNode[this.prop]+this.amplitude),c=Math.round(b/this.node.snap)*this.node.snap;this.target===c?this.amplitude=-this.velocity:this.target=c,this.timer.play()}},Wb.ContunuousScrolling.prototype.update=function(a){var b=Engine.now(),c=b-this.timestamp;this.timestamp=b;var d=1e3*a/(1+c);this.velocity=.8*d+.2*this.velocity},Wb.ContunuousScrolling.prototype.stop=function(){this.timer.stop()},Wb.prototype=Object.create(Kc.prototype),Wb.prototype.constructor=Wb,Wb.prototype.isDragged=!1,Wb.prototype.snap=1,Wb.prototype.objectClicked=null,Wb.prototype.updateContent=function(){var a=this._content,b=this.contentNode;0===b.width&&0===b.height,a[0]=this.width/2,a[1]=this.height/2,a[2]=-b.width+1.5*this.width,a[3]=-b.height+1.5*this.height,this.scrollBy(1,1),this.scrollBy(-1,-1)},Wb.prototype._scrollTo=function(){var a={x:0,y:0};return function(b,c){var d=this._content,e=this.contentNode,f=Math.max(d[2],Math.min(d[0],b)),g=Math.max(d[3],Math.min(d[1],c));return f===e.x&&g===e.y?!1:(e.x=f,e.y=g,a.x=b,a.y=c,this.trigger("scroll",a),!0)}}(),Wb.prototype.scrollTo=function(a,b){this.horizontalContinuous.stop(),this.verticalContinuous.stop(),this._scrollTo(a,b)},Wb.prototype.scrollBy=function(a,b){var c=this.contentNode;return this.scrollTo(a+c.x,b+c.y)},Wb.prototype.autoSelectX=function(){var a,b=this,c=this.contentNode.x,d=this.contentNode.children.reduce(function(a,d,e){var f=-oh/2*(b.contentNode.children.indexOf(a)-1),g=-oh/2*(e-1);return Math.abs(g-c)<Math.abs(f-c)?d:a});a=this.contentNode.children.indexOf(d),this.scrollToIndex(a)},Wb.prototype.scrollByClick=function(){this.scrollToIndex(this.objectClicked)},Wb.prototype.scrollToIndex=function(a){var b=this,c=a,d=-oh/2*(c-1);return this.contentNode.currentX=this.contentNode.x,d==b.contentNode.currentX?void b.trigger("autoselected",{index:c,targetX:d}):(Xc.animate(b.contentNode,"currentX",{duration:300,to:d,from:b.contentNode.currentX,easing:Vc.linear,on:{end:function(){b.trigger("autoselected",{index:c,targetX:d})}}}),void new Engine.Timer({type:"vsync",autoplay:!0,duration:300,on:{step:function(){b._scrollTo(b.contentNode.currentX,b.contentNode.y)}}}))},Wb.prototype.onWheel=function(a){var b=a.deltaX*Wb.WHEEL_MULTIPLIER,c=a.deltaY*Wb.WHEEL_MULTIPLIER;0===this._content[3]&&(b=c,c=0),this.scrollBy(b,c)},Wb.prototype.onMouseFocus=function(){this.isDragged=!0,this.horizontalContinuous.press(),this.verticalContinuous.press(),this.trigger("mousefocus")},Wb.prototype.onMouseUp=function(a){this.isDragged&&(this.isDragged=!1,this.horizontalContinuous.release(a),this.verticalContinuous.release(a))},Wb.prototype.onMouseMove=function(a){this.isDragged&&this.enabled&&(this.scrollBy(a.dx,a.dy),Bc.mouse.stealEvents(),this.horizontalContinuous.update(a.dx),this.verticalContinuous.update(a.dy))},Wb.prototype.setClicked=function(a){this.objectClicked=a},Xb.prototype=Object.create(Kc.prototype),Xb.prototype.constructor=Xb,Xb.prototype.spin=function(){Xc.setNodeStateRecursive(this.wheel,"spin")},Yb.prototype=Object.create(Kc.prototype),Yb.prototype.constructor=Yb,Yb.prototype.setImage=function(a){this.icon.image=a},Yb.prototype.setAmount=function(a){this.amount.changeTextDefinition(a)},Zb.prototype=Object.create(Kc.prototype),Zb.prototype.constructor=Zb,Zb.prototype.columns=1,Zb.prototype.cellWidth=50,Zb.prototype.cellHeight=50,Zb.prototype.appendChild=function(a){var b=this.children.length%this.columns,c=Math.floor(this.children.length/this.columns),d=Kc.prototype.appendChild.call(this,a);return a.x=b*this.cellWidth,a.y=c*this.cellHeight,this.height=a.y+this.cellHeight,d},$b.IMAGE_SRC="groups/{}",$b.ASSET_ID="group/{id}",$b.prototype=Object.create(Lc.prototype),$b.prototype.constructor=$b,$b.prototype.group=null,$b.prototype.groupChapter=null,$b.prototype.init=function(a,b){var c=this;this.groupChapter!=b&&(this.groupChapter&&(this.groupChapter.off("newElementsChanged"),this.groupChapter=null),b&&(this.groupChapter=b,this.groupChapter.on("newElementsChanged",function(a){c.counter&&(c.counter.amount=a)}),this.groupChapter.trigger("newElementsChanged",this.groupChapter.newElements)))};var bd=345,cd=69;_b.prototype=Object.create(Kc.prototype),_b.prototype.constructor=_b,_b.prototype.spacing=0,_b.prototype.appendChild=function(a){var b=Kc.prototype.appendChild.call(this,a);return this.updatePositions(),b},_b.prototype.removeChild=function(a){var b=Kc.prototype.removeChild.call(this,a);return this.updatePositions(),b},_b.prototype.updatePositions=function(){var a=bd,b=0,c=this.children,d=!1;this.$.gap&&(a-=4*cd),c.length>=2&&(a-=(c.length-1)*cd,this.$.gap&&c.length>2&&(d=!0,a=bd+2.5*cd));for(var e=0,f=c.length;f>e;e++)if(!(2>e&&d)){var g=c[e];b=Math.max(b,g.width);var h=a+=g.height/2;g.y=h,a+=g.height/2+this.spacing}this.width=b,this.height=a-this.spacing},ac.prototype=Object.create(Kc.prototype),ac.prototype.constructor=ac,ac.prototype.scale=.7,bc.prototype=Object.create(Lc.prototype),bc.prototype.constructor=bc,bc.prototype.screenDelay=1e3,bc.prototype.blink=function(){this.blinkNode.opacity=1,this.blinkNode.animate("opacity",{from:1,to:0,duration:500})},bc.prototype.showNextScreen=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._delayTimer=null;var a=this,b=this.screens[this.currentIndex];if(!b)return void a.trigger("end");Xc.setNodeStateRecursive(b,"active"),this.blink(),this.currentIndex++;var c=b.delay>0?b.delay:this.screenDelay;this.currentIndex<this.screens.length?this._delayTimer=setTimeout(this.showNextScreen,c):(a.blink(),a.trigger("end"))},bc.prototype.getScreenNodes=function(){var a=[],b=this.children[0];do b instanceof cc&&a.push(b);while(b=b&&b.next);return a},cc.prototype=Object.create(Kc.prototype),cc.prototype.constructor=cc,cc.prototype.delay=-1,dc.prototype=Object.create(Kc.prototype),dc.prototype.constructor=dc,dc.prototype.setName=function(a){this.node.userName.text=a},dc.prototype.setScore=function(a){this.node.score.text=a},dc.prototype.setImage=function(a){this.node.photo.picture.image=a},dc.prototype.setFlagOpacity=function(a){this.node.flag.opacity=a},dc.prototype.setRank=function(a){this.node.rank.text=a,a>=1&&3>=a?(this.node.bkg_gold.opacity=1,this.node.cup.opacity=1,this.node.cup.image="leaderboards/cup_0"+a,this.node.photo.border.image="leaderboards/ava_border_gold"):(this.node.bkg_gold.opacity=0,this.node.cup.opacity=0,this.node.photo.border.image="leaderboards/ava_border_normal")},ec.prototype=Object.create(Kc.prototype),ec.prototype.constructor=ec,ec.prototype.image="",ec.prototype.images=null,ec.prototype.manaAmount=0,ec.prototype.oldPrice=-1,ec.prototype.cost=100,ec.prototype.fadeInDelay=1,fc.prototype=Object.create(Kc.prototype),fc.prototype.rotate=function(a){this.rotationAnimation.playing&&this.rotationAnimation.stop(),this.contentNode.rotation+=a},fc.prototype.updateContentSize=function(){var a=this,b=a.contentNode,c=Xc.lerp(oh,1400,(b.scale-.4)/1.4),d=Xc.lerp(ph,1300,(b.scale-.4)/1.4);a.flickable._content[0]=c,a.flickable._content[1]=d,a.flickable._content[2]=-c+oh,a.flickable._content[3]=-d+ph},Object.addProperty(fc.prototype,"zoom",function(){return this.contentNode.scale},function(a){this.contentNode.scale=a,this.updateContentSize(),this.flickable.scrollBy(0,0)}),fc.prototype.blink=function(){this.bodyNode.children.forEach(function(a){a instanceof gc&&a.blink()})},gc.prototype=Object.create(Lc.prototype),gc.prototype.constructor=gc,gc.prototype.element=null,gc.prototype.lighten=1,gc.prototype.render=function(a){if(Engine.rendererType===Engine.WEBGL_RENDERER){Engine.Node.prototype.render.call(this,a);var b=this.width,c=this.height,d=-b/2,e=-c/2,f=this.color,g=f?f:Engine.Color("white"),h=this.lighten,i=gc._cachedExtraVertices;i[0]=h,i[1]=h,i[2]=h,i[3]=h,Engine.Renderer.renderRectangleCustom(a,d,e,b,c,"lighten",this.image,g,i,1)}else Engine.Rectangle.prototype.render.call(this,a)},gc.prototype.preload=function(){var a=this;Xc.lightenImage(this.image,function(b){a.lightenImage=b})},gc.prototype.blink=function(a){if(this.element&&!this.blinkAnimationPending&&(this._isVisible||a&&a.force)){this.blinkAnimationPending=!0;var b=this;if(Engine.rendererType===Engine.WEBGL_RENDERER){Xc.animate(b,"opacity",{from:0,to:1,duration:1500,reverse:!(!a||!a.force)});var c=qb.call(new Rc({autoplay:!1,autodestroy:!0,target:b,property:"lighten",from:1,to:2,reverse:!0,duration:500,on:{end:function(){b.blinkAnimationPending=!1}}}),{loops:2});Xc.async.wait(1e3,c.play.bind(c))}else Xc.lightenImage(this.image,function(a){b.lightenImage=a;var c=new Lc({parent:b,width:b.width,height:b.height,image:b.lightenImage,opacity:0});Xc.animate(b,"opacity",{from:0,to:1,duration:1500});var d=qb.call(new Rc({autoplay:!1,autodestroy:!0,target:c,property:"opacity",from:0,to:1,reverse:!0,duration:500,on:{end:function(){c.destroy(),b.blinkAnimationPending=!1}}}),{loops:2});Xc.async.wait(1e3,d.play.bind(d))})}},gc._cachedExtraVertices=new Float32Array([0,0,0,0]),gc._vertShaderCode="attribute vec2 se_aPosition;\nattribute vec2 se_aCoord;\nattribute vec4 se_aColor;\nattribute vec4 se_aExtra;\nattribute vec3 se_aMatrix0;\nattribute vec3 se_aMatrix1;\nattribute vec3 se_aMatrix2;\nuniform mat3 se_uViewProjection;\nvarying vec2 vCoord;\nvarying vec4 vColor;\nvarying vec4 vExtra;\n\nvoid main()\n{\n   mat3 model = mat3(se_aMatrix0, se_aMatrix1, se_aMatrix2);\n   mat3 modelViewProjection = se_uViewProjection * model;\n   vCoord = se_aCoord;\n   vColor = se_aColor;\n   vExtra = se_aExtra;\n   gl_Position = vec4(modelViewProjection * vec3(se_aPosition, 1.0), 1.0);\n}\n",gc._fragShaderCode="precision mediump float;\nuniform sampler2D se_sBaseTexture;\nvarying vec2 vCoord;\nvarying vec4 vColor;\nvarying vec4 vExtra;\n\nvoid main()\n{\n   vec4 tex = texture2D(se_sBaseTexture, vCoord);\n   vec4 lighten = vec4(tex.xyz * vExtra.xxx, tex.a);\n   gl_FragColor = lighten * vColor;\n}\n",Engine.rendererType===Engine.WEBGL_RENDERER&&Engine.Renderer.registerMaterial("lighten",gc._vertShaderCode,gc._fragShaderCode),hc.prototype=Object.create(Kc.prototype),hc.prototype.constructor=hc,ic.prototype=Object.create(Kc.prototype),ic.prototype.constructor=ic,jc.prototype=Object.create(Kc.prototype),jc.prototype.constructor=jc,jc.prototype.appendChild=function(a){var b=Kc.prototype.appendChild.call(this,a);return this.updatePositions(),b},jc.prototype.removeChild=function(a){var b=Kc.prototype.removeChild.call(this,a);return this.updatePositions(),b},jc.prototype.updatePositions=function(){var a=0,b=0;this.children.forEach(function(c,d){b=Math.max(b,c.height);var e=a+=c.width/2;c.x=e,a+=c.width/2}),this.width=a,this.height=b},kc.prototype=Object.create(Kc.prototype),kc.prototype.constructor=kc,kc.prototype.hint=null,kc.prototype.image="",kc.prototype.title="",kc.prototype.description="",kc.prototype.longDescription="",kc.prototype.descriptionFormat=[],kc.prototype.price="",kc.prototype.buyMessage="",kc.prototype.sellMessage="",kc.prototype.exclude=!1,kc.prototype.positionY=0,kc.prototype.delay=0,lc.prototype=Object.create(Kc.prototype),lc.prototype.constructor=lc,lc.prototype.setLightPower=function(a){this.statusBar.bar.width=Math.round(a/100*225)},lc.prototype.setLightPowerType=function(a){this.pentagram_btn.light1.opacity=1===a?1:0,this.pentagram_btn.light2.opacity=2===a?1:0,this.pentagram_btn.light3.opacity=3===a?1:0},lc.prototype.setLightPowerCounter=function(a,b){this.counter.text="{}/{}".format(a,b),(b===1/0||a===1/0)&&(this.counter.text="")},mc.DEFAULT_FONT_SIZE=30,mc.FONT_TYPES={universe:{config:{fontSize:(sc(),28),lineHeight:sc()?33*1.6:57.6}},font:{config:{fontSize:sc()?28:22,lineHeight:sc()?33:27}},font_portraint_multiline_button:{config:{fontSize:sc()?28:22,lineHeight:(sc(),27)}},medium:{config:{fontSize:sc()?33:28,lineHeight:sc()?33:36}},medium_fr:{config:{fontSize:sc()?30:26,lineHeight:sc()?30:33}},author:{config:{fontSize:sc()?20:19,lineHeight:sc()?26:25},localization:{"de-DE":{fontSize:sc()?19:18,lineHeight:sc()?25:24}}},small:{config:{fontSize:16,lineHeight:19},localization:{"ko-KR":{fontSize:16,lineHeight:22},"zh-CN":{fontSize:16,lineHeight:23},"zh-TW":{fontSize:16,lineHeight:23},"pt-PT":{fontSize:15,lineHeight:19},"pl-PL":{fontSize:15,lineHeight:19},"nl-NL":{fontSize:15,lineHeight:19},"fr-FR":{fontSize:15,lineHeight:19},es:{fontSize:15,lineHeight:19},sv:{fontSize:15,lineHeight:19},it:{fontSize:15,lineHeight:19},ru:{fontSize:15,lineHeight:19},de:{fontSize:15,lineHeight:19}}},small_artifact:{config:{fontSize:16,lineHeight:29},localization:{"ko-KR":{fontSize:16,lineHeight:32},"zh-CN":{fontSize:16,lineHeight:33},"zh-TW":{fontSize:16,lineHeight:33},"pt-PT":{fontSize:15,lineHeight:29},"pl-PL":{fontSize:15,lineHeight:29},"nl-NL":{fontSize:15,lineHeight:29},"fr-FR":{fontSize:15,lineHeight:29},es:{fontSize:15,lineHeight:29},sv:{fontSize:15,lineHeight:29},it:{fontSize:15,lineHeight:29},ru:{fontSize:15,lineHeight:29},de:{fontSize:15,lineHeight:29}}},smaller:{config:{fontSize:14,lineHeight:19},localization:{"zh-CN":{fontSize:sc()?17:14,lineHeight:sc()?24:19},"zh-TW":{fontSize:sc()?17:14,lineHeight:sc()?24:19}}},verysmall:{config:{fontSize:13,lineHeight:18}}},mc.instances=[],mc.EXTENDED_FONT_CODES=["zh-CN","zh-TW","ja-JP","ko-KR"],mc.getFont=function(a,b){return mc.EXTENDED_FONT_CODES.has(a)?Engine.Font(window.RESOURSE_HOST+"fonts/cyka.fnt"):Fc.getById(b||"font")},Zc.on(Zc.LANGUAGE_CHANGE,function(a){var b=mc.getFont(a);(b.status===Ec.INITIALIZED||b.status===Ec.LOADING)&&(b.once(Ec.READY,function(){Be.hide()}),b.once(Ec.ERROR,function(){Zc.enableEmergencyMode()}),Be.show()),mc.EXTENDED_FONT_CODES.has(a)?Engine.Renderer.Text.WORD_REGEX=Engine.Renderer.Text.NO_WHITESPACE_WORD_REGEX:Engine.Renderer.Text.WORD_REGEX=Engine.Renderer.Text.WHITESPACE_WORD_REGEX;for(var c=mc.instances,d=0,e=c.length;e>d;d++)c[d].font=mc.getFont(a,c[d].fontName),c[d].updateFontType(a)}),mc.TRIGGER_NONE=0,mc.TRIGGER_ONCE=1,mc.TRIGGER_ALWAYS=2,mc.prototype=Object.create(Mc.prototype),mc.prototype.constructor=mc,mc.prototype.fontSize=mc.DEFAULT_FONT_SIZE,mc.prototype.fontType="medium",mc.prototype.triggerRender=!1,mc.prototype.maxTextWidth=-1,mc.prototype.fontName="font",mc.prototype.updateFontType=function(a){var b=mc.FONT_TYPES[this.fontType],c=b.localization&&b.localization[a];Object.merge(this,c||b.config),this.updateFontSize()},mc.prototype.render=function(a){var b=this.y;this.y=this._baseHeight2>0?this.y-(this.height>0?this.height*this.scale*.5:0)+this._baseHeight2:this.y,Mc.prototype.render.call(this,a),this.y=b,this.triggerRender&&(this.trigger("render"),this.triggerRender===mc.TRIGGER_ONCE&&(this.triggerRender=mc.TRIGGER_NONE))},mc.prototype.updateFontSize=function(){if(void 0!==this._baseWidth){this.scale=this.fontSize/mc.DEFAULT_FONT_SIZE,this.width=this._baseWidth/this.scale}},mc.prototype.destroy=function(){return mc.instances.remove(this),Mc.prototype.destroy.call(this)},nc.POOL_THRESHOLD=500,Zc.on(Zc.LANGUAGE_CHANGE,function(){for(var a=mc.instances,b=0,c=a.length;c>b;b++)a[b]instanceof nc&&a[b].tr()}),nc.prototype=Object.create(mc.prototype),nc.prototype.constructor=nc,nc.prototype.format=null,nc.prototype.tr=function(){var a=this.$.textDefinition;if(!a)return this.text="";var b=Qc.tr(a,null,null,this.format);b=b.replace(/\n\n/gm,""),this.text=b},nc.prototype.changeTextDefinition=function(a){this.$.textDefinition=a,this.tr()},oc.prototype=Object.create(Kc.prototype),oc.prototype.constructor=oc,ec.prototype=Object.create(Kc.prototype),ec.prototype.constructor=pc,ec.prototype.image="",qc.prototype=Object.create(Wb.prototype),qc.prototype.constructor=qc,qc.prototype.cellWidth=300,qc.prototype.updatePositions=function(){var a=this.contentNode;a.children.forEach(function(a,b){var c=b*this.cellWidth;a.x=c},this),a.width=(a.children.length+1)*this.cellWidth,a.height=this.height},qc.prototype.updateChildrenScale=function(a,b){var c=this.contentNode,d=[];c.children.forEach(function(a,b){var e=b*this.cellWidth,f=Math.abs(c.x-this.width/2+e);f=(this.width-f)/this.width,f=Math.max(0,f),a.scale=f,d[a.name]=f},this);var e=Object.keys(d).sort(function(a,b){return d[a]-d[b]});c.children.forEach(function(a){a.zIndex=e.indexOf(a.name)},this)},qc.prototype._scrollTo=function(a,b){return Wb.prototype._scrollTo.call(this,a,b)?(this.updateChildrenScale(),!0):!1},qc.prototype.animateScrollTo=function(a,b){Xc.animate(self,"scale",{delay:300,duration:300,to:1,from:.3,easing:Vc.outBounce})};var dd;Bc.on("ready",function(){function a(a){return{resetButtonClicked:function(){dd.events.trigger("resetButtonClicked",a)},play:function(){dd.events.trigger("play",a)}}}var b=new Kc({$setContentChildren:function(a){a.forEach(function(a){b.contentNode.appendChild(a)})},$setPromoChildren:function(a){if(a){var c=Math.randomBetween(1,Math.max(b.contentNode.children.length-1,2));b.contentNode.appendChild(a,c)}},$updateContent:function(){b.scrollview.updatePositions(),b.scrollview.updateContent()},$createListeners:a,children:[new Lc({name:"bkg",width:1024,height:768,$preload:xc.REMOVE_BACKGROUND_DECORATORS?"main_menu/bkg_main_menu":"interface/bkg_new",$portrait:{width:oh,height:ph}}),new Kc({name:"toolbar",x:0,y:626,$portrait:{y:736}}),new qc({name:"scrollview",width:oh,height:ph+200,cellWidth:oh/2,y:-100}),new Kc({name:"alert"})]});b.contentNode=b.scrollview.contentNode,dd=new W({name:"layout-chapters",node:b,onShow:function(){var a=this;Xc.setViewPartial(b.contentNode,null),Xc.setViewPartial(b.toolbar,null),Xc.setViewPartial(b.alert,null),this.appendPartial(b.toolbar,pf,null,function(b){a.appendPartial(b.button1,uf).appendPartial(b.button5,Rf),sc()&&Bc.config.getAsBool("bank_button_enabled",!0)&&a.appendPartial(b.button2,vf),Bc.promo.hasUniverse()&&a.appendPartial(b.button3,Xf)})},api:{chapters:{showResetButtons:function(){b.scrollview.contentNode.children.forEach(function(a){a.showResetButton()})},hideResetButtons:function(){b.scrollview.contentNode.children.forEach(function(a){a.hideResetButton()})},showConfirm:function(a){Ee.appendPartial(b.alert,Fd,{message:a instanceof oa?"PUZ_MSG_RESET_CONFIRM":"MESSAGEBOX_RESET_CONFIRM_QUEST"}),Xc.setNodeStateRecursive(b.alert,"showed")},updateProgress:function(a){b.scrollview.contentNode.children.some(function(b){return b.chapter===a?(b.updateProgress(),!0):void 0})},showLockedAlert:function(a){Ee.appendPartial(b.alert,Ed,{message:a.unlockParams.unlockMsg,message2:a.unlockParams.buyMsg,price:a.getUnlockPrice()}),Xc.setNodeStateRecursive(b.alert,"showed")},showAdAlert:function(a){Ee.appendPartial(b.alert,Ad,{message:a.unlockParams.unlockMsg,message2:a instanceof oa?"UNLOCK_PUZZLE_FOR_AD":"UNLOCK_QUEST_FOR_AD"}),Xc.setNodeStateRecursive(b.alert,"showed")},showNoManaAlert:function(){Ee.appendPartial(b.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(b.alert,"showed")},showAdultAlert:function(){Ee.appendPartial(b.alert,Cd,{message:"PINCODE_TITLE"}),Xc.setNodeStateRecursive(b.alert,"showed")},showBuyAlert:function(a){Ee.appendPartial(b.alert,Fd,{name:"Buy",message:Qc.tr("UNLOCK_QUEST_BY_INAPP",null,null,[a.getInappFormattedPrice()])}),Xc.setNodeStateRecursive(b.alert,"showed")}}}})});var ed;Bc.on("ready",function(){var a=new Kc({children:[new Lc({x:0,y:0,width:1024,height:768,$preload:"interface/bkg_4_3_book",$portrait:{width:oh,height:ph}}),new Lc({name:"background",x:0,y:0,width:1002,height:587,$portait:{width:oh,height:ph},$base:{image:void 0}}),new Kc({name:"left"}),new Kc({name:"right"}),new Kc({name:"center"}),new Kc({name:"toolbar",x:0,y:626,$portrait:{y:736}}),new Kc({name:"statusbar"}),new Kc({name:"overlay"}),new Kc({name:"alert"}),new Kc({name:"fortune"}),new Kc({name:"light"}),new Kc({name:"preload"})]});ed=new W({name:"layout-main",node:a,onShow:function(){Xc.setViewPartial(a.statusbar,null),Xc.setViewPartial(a.left,null),Xc.setViewPartial(a.right,null),Xc.setViewPartial(a.center,null),Xc.setViewPartial(a.toolbar,null),Xc.setViewPartial(a.alert,null),Xc.setViewPartial(a.preload,null)}})});var fd;Bc.on("ready",function(){var a=["episode_1","episode_2","episode_3","episode_4"],b={episode_1:0,episode_2:100,episode_3:140,episode_4:200},c=new Kc({x:188,y:-205,children:[new Lc({name:"bg",x:25,y:175.5,width:367,height:471,opacity:0,$preload:"tree_main_game/tree",children:[new nc({x:-170.5,y:75,width:100,height:15,text:"TREE_MAIN_GAME_LABEL_NO_MAGIC",textColor:"rgba(6, 107, 233, 1)",textAlign:"center"}),new nc({x:111.5,y:-53.5,width:100,height:15,text:"TREE_MAIN_GAME_LABEL_MAGIC",textColor:"rgba(6, 107, 233, 1)",textAlign:"center"})]}),new Vb({name:a[0],x:-20,y:365,button:{x:10,y:-10,active:"tree_main_game/begining"},text:{x:-78,y:-22,titleText:"TREE_MAIN_GAME_BASIC",descText:"TREE_MAIN_GAME_BASIC_DESC"},progress:{x:147.5,y:35.5,image:"tree_main_game/percent_basic"},reset:{x:-123,y:-17},on:{mousefocusclick:function(){fd.events.trigger("click",a[0])},resetButtonClicked:function(){fd.events.trigger("resetButtonClicked",a[0])}}}),new Vb({name:a[1],x:157,y:277,button:{image:"tree_main_game/technology_lock",active:"tree_main_game/technology",x:-25,y:-50},text:{x:-124,y:-10,titleText:"TREE_MAIN_GAME_TECHNOLOGY",descText:"TREE_MAIN_GAME_TECHNOLOGY_DESC"},progress:{x:65.5,y:21.5,image:"tree_main_game/percent_technology"},reset:{x:81,y:-40},on:{mousefocusclick:function(){fd.events.trigger("click",a[1])},resetButtonClicked:function(){fd.events.trigger("resetButtonClicked",a[1])}}}),new Vb({name:a[2],x:5,y:161,button:{image:"tree_main_game/modern_age_lock",active:"tree_main_game/modern_age",x:-35,y:-40},text:{x:-73,y:-20,titleText:"TREE_MAIN_GAME_MODERN",descText:"TREE_MAIN_GAME_MODERN_DESC"},progress:{x:108.5,y:1.5,image:"tree_main_game/percent_modern"},reset:{x:-144,y:-48},on:{mousefocusclick:function(){fd.events.trigger("click",a[2])},resetButtonClicked:function(){fd.events.trigger("resetButtonClicked",a[2])}}}),new Vb({name:a[3],x:133,y:14,button:{image:"tree_main_game/world_of_magic_lock",active:"tree_main_game/world_of_magic",x:-15,y:-10},text:{x:-116,y:-10,titleText:"TREE_MAIN_GAME_MAGIC",descText:"TREE_MAIN_GAME_MAGIC_DESC"},progress:{x:106.5,y:51.5,image:"tree_main_game/percent_magic"},reset:{x:98,y:-31},on:{mousefocusclick:function(){fd.events.trigger("click",a[3])},resetButtonClicked:function(){fd.events.trigger("resetButtonClicked",a[3])}}})]});fd=new W({name:"menu-episodes",node:c,onShow:function(){Xc.animate(c.bg,"opacity",{to:1,delay:10,duration:200}),a.forEach(function(a){var b=c[a];b.show(),b.hideProgressText()})},api:{episodes:{EPISODES:a,REQUIRED_ELEMENTS:b,promoteEpisode:function(a){Xc.async.waitOnNode(c,4e3,function(){Xc.playSound("button_blinking"),c[a].promote()})},activateEpisode:function(a){c[a].activate()},showResetButtons:function(){a.forEach(function(a){var b=c[a];b.isActive&&b.showResetButton()})},hideResetButtons:function(){a.forEach(function(a){var b=c[a];b.isActive&&b.hideResetButton()})},setProgress:function(a,b){var d=c[a];d.showProgressText(),d.setProgress(b)}}}})});var gd;Bc.on("ready",function(){var a=new Kc({x:-230,y:-50,children:[new tb({name:"bg",width:370,height:512,opacity:0,$preload:"play_menu/button_main_game",children:[new nc({name:"text",x:-50,y:100,width:100,height:15,text:"PLAYMENU_SCR_MAIN_GAME",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){Ee.events.trigger("mainGameClick")}}})]});gd=new W({name:"menu-episodes-new",node:a,onShow:function(){Xc.animate(a.bg,"opacity",{to:1,delay:10,duration:200})}})});var hd;Bc.on("ready",function(){var a=new Kc({x:510,y:-75,scale:1.05,$portrait:{x:370,y:20,scale:1.4},children:[new Kc(sc()?{name:"mainGame",x:157,y:-100,opacity:0,children:[new tb({name:"image",x:-393,y:-326,width:419,height:115,$portrait:{x:-423,height:125},$preload:["play_menu/button_main_game","play_menu/button_main_game_select"],$selected:function(){sc()||(a.mainGame.image.image="play_menu/button_main_game_select")},on:{mousefocusclick:function(){Ee.events.trigger("mainGameClick")}},children:[new nc({x:-114.5,y:-31.5,width:270,height:50,text:"PLAYMENU_SCR_MAIN_GAME",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium",$portrait:{x:-94.5,y:-26.5}})]})]}:{name:"mainGame"}),new Kc({name:"quests",x:159,y:-100,opacity:0,children:[new tb({x:-364,y:-314,width:347,height:116,$preload:null,on:{mousefocusclick:function(){Ee.events.trigger("questsClick")}},children:[new Lc({x:-60,y:-4,width:425,height:116,$portrait:{height:125},$preload:"play_menu/button_quests"}),new nc({x:-150,y:-32,width:270,height:40,fontType:sc()?"font":"medium",text:"PLAYMENU_SCR_QUESTS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]}),new Kc({name:"puzzles",x:161,y:-100,opacity:0,children:[new tb({x:-367,y:-319,width:347,height:116,$portrait:{y:-309},$preload:null,on:{mousefocusclick:function(){Ee.events.trigger("puzzlesClick")}},children:[new Lc({x:-57,y:0,width:425,height:116,$portrait:{height:125},$preload:"play_menu/button_puzzles"}),new nc({x:-149,y:-29,width:270,height:40,text:"PLAYMENU_SCR_PUZZLES",fontType:sc()?"font":"medium",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",$portrait:{y:-26}})]})]}),new Kc({name:"artifacts",x:162,y:-100,opacity:0,children:[new tb({x:-366,y:-321,width:347,height:116,$portrait:{y:-296},$preload:null,on:{mousefocusclick:function(){Ee.events.trigger("artifactsClick")}},children:[new Lc({x:-58,y:0,width:425,height:116,$portrait:{height:125},$preload:"play_menu/button_artifacts"}),new nc({x:-152,y:-30,width:270,height:40,$portrait:{y:-25},text:"PLAYMENU_SCR_ARTIFACTS",fontType:sc()?"font":"medium",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]}),new Kc(sc()?{name:"encyclopedia"}:{name:"encyclopedia",x:161,y:-100,opacity:0,children:[new tb({x:-369,y:-323,width:347,height:116,$preload:null,on:{mousefocusclick:function(){Ee.events.trigger("encyclopediaClick")}},children:[new Lc({x:-55,y:2,width:425,height:116,$preload:"play_menu/button_encyclopedia"}),new nc({x:-147,y:-28,width:270,height:40,text:"PLAYMENU_SCR_ENCYCLOPEDIA",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]})]});hd=new W({name:"menu-nav",node:a,onShow:function(){sc()&&(Xc.animate(a.mainGame,"y",{delay:400,from:-100,to:102,duration:100}),Xc.animate(a.mainGame,"opacity",{delay:400,from:0,to:1,duration:100})),Xc.animate(a.quests,"y",{delay:300,from:-100,to:205,duration:100}),Xc.animate(a.quests,"opacity",{delay:300,from:0,to:1,duration:100}),Xc.animate(a.puzzles,"y",{delay:100,from:-100,to:306,duration:100}),Xc.animate(a.puzzles,"opacity",{delay:100,from:0,to:1,duration:100}),Xc.animate(a.artifacts,"y",{delay:100,from:-100,to:402,duration:100}),Xc.animate(a.artifacts,"opacity",{delay:100,from:0,to:1,duration:100}),Xc.animate(a.encyclopedia,"y",{from:-100,to:498,duration:100}),Xc.animate(a.encyclopedia,"opacity",{from:0,to:1,duration:100})},api:{nav:{select:function(b){Xc.setNodeStateRecursive(a[b],"selected")}}}})});var id;Bc.on("ready",function(){function a(a,b,c){var d=new tb({name:b,x:0,y:100*a,width:426,height:98,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage",b)}},$disabled:function(){d.image="language/checkbox_01"},$enabled:function(){d.image="language/checkbox_02"},opacity:0,$showed:function(){d.opacity=0,Xc.animate(d,"scale",{delay:400,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(d,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[c instanceof Ec?new Lc({name:"NAME",x:0,y:-5,width:213,height:49,image:c}):new nc({name:b,x:-59.5,y:-14.5,width:180,height:20,text:c,textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"author"})]});return d}var b=new Kc(sc()?{children:[new Wb({parent:this,name:"content",x:0,y:-25,width:640,height:790,children:[new Kc({name:"scrollarea",scale:1.3,children:[a(0,"auto","OPTIONS_AUTO_LANGUAGE"),a(1,"de-DE",Fc.getById("language/de")),a(2,"en-US",Fc.getById("language/en")),a(3,"es-ES",Fc.getById("language/es")),a(4,"fr-FR",Fc.getById("language/fr")),a(5,"it-IT",Fc.getById("language/it")),a(6,"ja-JP",Fc.getById("language/ja")),a(7,"nl-NL",Fc.getById("language/nl")),a(8,"pl-PL",Fc.getById("language/pl")),a(9,"pt-PT",Fc.getById("language/pt")),a(10,"ru-RU",Fc.getById("language/ru")),a(11,"sv-SV",Fc.getById("language/sv")),a(12,"zh-CN",Fc.getById("language/zh-Hans")),a(13,"ko-KR",Fc.getById("language/ko")),a(14,"zh-TW",Fc.getById("language/zh-Hant"))]})],$showed:function(){this.contentNode.scrollarea.y=-this.height/2+100,this.contentNode.height=1995,this.updateContent()}})]}:{x:-512,y:-384,children:[new tb({name:"auto",x:630,y:130,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","auto")}},$enabled:function(){var a=b.auto;a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b.auto;a.opacity=0,Xc.animate(a,"scale",{delay:400,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new nc({name:"auto",x:-59.5,y:-14.5,width:180,height:20,text:"OPTIONS_AUTO_LANGUAGE",textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"author"})]}),new tb({name:"de-DE",x:630,y:190,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","de-DE")}},$enabled:function(){var a=b["de-DE"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["de-DE"];a.opacity=0,Xc.animate(a,"scale",{delay:450,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:450,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/de"})]}),new tb({name:"en-US",x:630,y:250,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","en-US")}},$enabled:function(){var a=b["en-US"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["en-US"];a.opacity=0,Xc.animate(a,"scale",{delay:500,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:500,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/en"})]}),new tb({name:"es-ES",x:630,y:310,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","es-ES")}},$enabled:function(){var a=b["es-ES"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["es-ES"];a.opacity=0,Xc.animate(a,"scale",{delay:550,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:550,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/es"})]}),new tb({name:"fr-FR",x:630,y:370,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","fr-FR")}},$enabled:function(){var a=b["fr-FR"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["fr-FR"];a.opacity=0,Xc.animate(a,"scale",{delay:600,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:600,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/fr"})]}),new tb({name:"it-IT",x:630,y:430,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","it-IT")}},$enabled:function(){var a=b["it-IT"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["it-IT"];a.opacity=0,Xc.animate(a,"scale",{delay:650,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:650,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/it"})]}),new tb({name:"ja-JP",x:630,y:490,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","ja-JP")}},$enabled:function(){var a=b["ja-JP"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["ja-JP"];a.opacity=0,Xc.animate(a,"scale",{delay:700,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:700,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/ja"})]}),new tb({name:"zh-TW",x:630,y:550,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","zh-TW")}},$enabled:function(){var a=b["zh-TW"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["zh-TW"];a.opacity=0,Xc.animate(a,"scale",{delay:650,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:650,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/zh-Hant"})]}),new tb({name:"nl-NL",x:862,y:130,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","nl-NL")}},$enabled:function(){var a=b["nl-NL"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["nl-NL"];a.opacity=0,Xc.animate(a,"scale",{delay:400,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/nl"})]}),new tb({name:"pl-PL",x:862,y:190,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","pl-PL")}},$enabled:function(){var a=b["pl-PL"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["pl-PL"];a.opacity=0,Xc.animate(a,"scale",{delay:450,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:450,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/pl"})]}),new tb({name:"pt-PT",x:862,y:250,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","pt-PT")}},$enabled:function(){var a=b["pt-PT"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["pt-PT"];a.opacity=0,Xc.animate(a,"scale",{delay:500,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:500,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/pt"})]}),new tb({name:"ru-RU",x:862,y:310,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","ru-RU")}},$enabled:function(){var a=b["ru-RU"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["ru-RU"];a.opacity=0,Xc.animate(a,"scale",{delay:550,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:550,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/ru"})]}),new tb({name:"sv-SV",x:862,y:370,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","sv-SV")}},$enabled:function(){var a=b["sv-SV"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["sv-SV"];a.opacity=0,Xc.animate(a,"scale",{delay:600,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:600,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/sv"})]}),new tb({name:"zh-CN",x:862,y:430,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","zh-CN")}},$enabled:function(){var a=b["zh-CN"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["zh-CN"];a.opacity=0,Xc.animate(a,"scale",{delay:650,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:650,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/zh-Hans"})]}),new tb({name:"ko-KR",x:862,y:490,width:213,height:49,$preload:["language/checkbox_01","language/checkbox_02"],on:{mousefocusclick:function(){id.events.trigger("changeLanguage","ko-KR")}},$enabled:function(){var a=b["ko-KR"];a.image="language/checkbox_02"},opacity:0,scale:.5,$showed:function(){var a=b["ko-KR"];a.opacity=0,Xc.animate(a,"scale",{delay:700,duration:500,from:.5,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:700,duration:100,from:0,to:1,easing:Vc.outBounce})},children:[new Lc({name:"NAME",x:0,y:0,width:213,height:49,$preload:"language/ko"})]})]});id=new W({name:"settings-languages",node:b,onShow:function(a,c){sc()?ed.show(function(a){jd.appendPartial(a.statusbar,lf,{title:"LANGUAGE_SCR_TITLE"}),Xc.setViewPartial(a.left,b),jd.appendPartial(a.toolbar,$f),c(a)}):c(b)},api:{languages:{enableLanguage:function(a){b.$.currentState;sc()?(Xc.setNodeStateRecursive(b,"disabled"),Xc.setNodeState(b.content.contentNode.scrollarea[a],"enabled")):(Xc.setNodeStateRecursive(b,"base"),Xc.setNodeStateRecursive(b,"showed"),Xc.setNodeState(b[a],"enabled"))}}}})});var jd;Bc.on("ready",function(){var a=new Kc({name:"voice",children:[new Kc({name:"voice_toggle",x:359,y:119,$enabled:function(){var a=b.voice.voice_toggle;a.enabled.opacity=1,a.disabled.opacity=0},$disabled:function(){var a=b.voice.voice_toggle;a.enabled.opacity=0,a.disabled.opacity=1},$showed:function(){var a=b.voice.voice_toggle;a.opacity=0,Xc.animate(a,"scale",{delay:300,duration:300,from:.2,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:300,duration:300,from:0,to:1,easing:Vc.linear})},children:[new Kc({name:"enabled",opacity:0,children:[new tb({name:"voice_on",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("disableVoice")}},children:[new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_on"}),new Lc({x:-2,y:-28,width:129,height:90,$preload:xc.REMOVE_OPTIONS_ANIMATION_FRAMES?"options/voice_01":["options/voice_03","options/voice_02","options/voice_01"],name:"ua98fa9cc",$showed:function(){var a=b.voice.voice_toggle.enabled.voice_on.ua98fa9cc;xc.REMOVE_OPTIONS_ANIMATION_FRAMES||Xc.animateImage(a,["options/voice_01","options/voice_02","options/voice_03"])}})]})]}),new Kc({name:"disabled",opacity:0,children:[new tb({name:"voice_off",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("enableVoice")}},children:[new Lc({x:-2,y:-28,width:129,height:90,$preload:"options/voice_off"}),new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_off"})]})]})]}),new Kc({children:[new nc({name:"text_voice",x:371,y:258,width:115,height:19,text:"OPTIONS_SCR_VOICE",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:"font",$showed:function(){var a=this;a.opacity=0,Xc.animate(a,"x",{delay:500,duration:300,from:a.x+4,to:a.x+0,easing:Vc.outBounce}),Xc.animate(a.parent,"y",{delay:500,duration:300,from:a.parent.y+-58,to:a.parent.y+0,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:500,duration:200,from:0,to:1,easing:Vc.linear})}})]})]}),b=new Kc({$showed:function(){Xc.playSound("options_screen_transition")},x:-512,y:-384,$portrait:{x:-256,y:-280},children:[new Kc({name:"sound_toggle",x:Ch?45:100,y:119,$enabled:function(){var a=b.sound_toggle;a.enabled.opacity=1,a.disabled.opacity=0},$disabled:function(){var a=b.sound_toggle;a.enabled.opacity=0,a.disabled.opacity=1},$showed:function(){var a=b.sound_toggle;a.opacity=0,Xc.animate(a,"scale",{delay:300,duration:300,from:.2,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:300,duration:300,from:0,to:1,easing:Vc.linear})},children:[new Kc({name:"enabled",opacity:0,children:[new tb({name:"sound_on",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("disableSound")}},children:[new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_on"}),new Lc({x:-7,y:-9,width:119,height:128,$preload:xc.REMOVE_OPTIONS_ANIMATION_FRAMES?"options/sound_01":["options/sound_03","options/sound_02","options/sound_01"],name:"u6761191",$showed:function(){var a=b.sound_toggle.enabled.sound_on.u6761191;xc.REMOVE_OPTIONS_ANIMATION_FRAMES||Xc.animateImage(a,["options/sound_01","options/sound_02","options/sound_03"])}})]})]}),new Kc({name:"disabled",opacity:0,children:[new tb({name:"sound_off",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("enableSound")}},children:[new Lc({x:-7,y:-9,width:119,height:128,$preload:"options/sound_off"}),new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_off"})]})]})]}),new Kc({children:[new nc({name:"text_sound",x:Ch?57:112,y:260,width:115,height:19,text:"OPTIONS_SCR_SOUND",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:"font",$showed:function(){var a=this;a.opacity=0,Xc.animate(a,"x",{delay:500,duration:300,from:a.x+136,to:a.x+0,easing:Vc.outBounce}),Xc.animate(a.parent,"y",{delay:500,duration:300,from:a.parent.y+-60,to:a.parent.y+0,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:500,duration:200,from:0,to:1,easing:Vc.linear})}})]}),Ch?a:new Kc,new Kc({name:"music_toggle",x:Ch?202:304,y:119,$enabled:function(){var a=b.music_toggle;a.enabled.opacity=1,a.disabled.opacity=0},$disabled:function(){var a=b.music_toggle;a.enabled.opacity=0,a.disabled.opacity=1},$showed:function(){var a=b.music_toggle;a.opacity=0,Xc.animate(a,"scale",{delay:300,duration:300,from:.2,to:1,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:300,duration:300,from:0,to:1,easing:Vc.linear})},children:[new Kc({name:"enabled",opacity:0,children:[new tb({name:"music_on",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("disableMusic")}},children:[new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_on"}),new Lc({x:6,y:-18,width:104,height:111,$preload:xc.REMOVE_OPTIONS_ANIMATION_FRAMES?"options/music_01":["options/music_03","options/music_02","options/music_01"],name:"u08185f1e",$showed:function(){var a=b.music_toggle.enabled.music_on.u08185f1e;xc.REMOVE_OPTIONS_ANIMATION_FRAMES||Xc.animateImage(a,["options/music_01","options/music_02","options/music_03"])}})]})]}),new Kc({name:"disabled",opacity:0,children:[new tb({name:"music_off",x:66.5,y:73.5,width:133,height:147,on:{mousefocusclick:function(){jd.events.trigger("enableMusic")}},children:[new Lc({x:6,y:-18,width:104,height:111,$preload:"options/music_off"}),new Lc({x:0,y:0,width:133,height:147,$preload:"options/under_off"})]})]})]}),new Kc({children:[new nc({name:"text_music",x:Ch?217:316,y:260,width:115,height:19,text:"OPTIONS_SCR_MUSIC",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:"font",$showed:function(){var a=this;a.opacity=0,Xc.animate(a,"x",{delay:500,duration:300,from:a.x+344,to:a.x+0,easing:Vc.outBounce}),Xc.animate(a.parent,"y",{delay:500,duration:300,from:a.parent.y+-60,to:a.parent.y+0,easing:Vc.outBounce}),Xc.animate(a,"opacity",{delay:500,duration:200,from:0,to:1,easing:Vc.linear})}})]}),new Kc({name:"safemode",x:71,y:301,$enabled:function(){var a=b.safemode;a.enabled.opacity=1,a.disabled.opacity=0},$disabled:function(){var a=b.safemode;a.enabled.opacity=0,a.disabled.opacity=1},$showed:function(){var a=b.safemode;a.opacity=0,Xc.animate(a,"scale",{delay:400,duration:200,from:.2,to:1,easing:Vc.linear}),Xc.animate(a,"opacity",{delay:400,duration:300,from:0,to:1,easing:Vc.linear})},children:[new Kc({name:"enabled",opacity:0,children:[new tb({name:"kids_on",x:204,y:51,width:408,height:102,$portrait:{y:100,width:530.4,height:132.6},$preload:"options/kids_safe_on",on:{mousefocusclick:function(){jd.events.trigger("disableSafeMode")}},children:[new nc({name:"text_on",x:-69,y:-20,width:300,height:40,text:"OPTIONS_SCR_KIDS_ON",textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"})]})]}),new Kc({name:"disabled",opacity:0,children:[new tb({name:"kids_off",x:204,y:51,width:408,height:102,$portrait:{y:100,width:530.4,height:132.6},$preload:"options/kids_safe_off",on:{mousefocusclick:function(){jd.events.trigger("enableSafeMode")}},children:[new nc({name:"text_off",x:-69,y:-20,width:300,height:40,text:"OPTIONS_SCR_KIDS_OFF",textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"})]})]})]}),new Kc({name:"toolbar",x:0,y:626}),new mc({name:"version",width:400,x:sc()?-30:4,y:sc()?630:ph-18,text:Qh,fontType:sc()?"author":"small",textColor:sc()?"rgba(255, 255, 255, 0.5)":"rgba(255, 255, 255, 0.3)"})]});jd=new W({name:"settings-nav",node:b,onShow:function(a,c){sc()?ed.show(function(a){jd.appendPartial(a.statusbar,lf,{title:"OPTIONS_SCR_TITLE"}),Xc.setViewPartial(a.left,b),jd.appendPartial(a.toolbar,ag),c(a)}):c(b)},api:{nav:{enableSound:function(){Xc.setNodeState(b.sound_toggle,"enabled")},disableSound:function(){Xc.setNodeState(b.sound_toggle,"disabled")},enableVoice:function(){Ch&&Xc.setNodeState(b.voice.voice_toggle,"enabled")},disableVoice:function(){Ch&&Xc.setNodeState(b.voice.voice_toggle,"disabled")},enableMusic:function(){Xc.setNodeState(b.music_toggle,"enabled")},disableMusic:function(){Xc.setNodeState(b.music_toggle,"disabled")},enableSafeMode:function(){Xc.setNodeState(b.safemode,"enabled")},disableSafeMode:function(){Xc.setNodeState(b.safemode,"disabled")}}}})});var kd;Bc.on("ready",function(){var a,b="place{}",c=new Kc({x:-512,y:-384,$portrait:{x:-256,y:-480},children:[new nc({name:"title_0",x:107,y:204,width:320,height:30,text:"PINCODE_SCR_ENTER",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",$showed:{opacity:0},$create:{opacity:0},$enter:{opacity:1},$portrait:{y:30,x:-40,width:534}}),new nc({name:"title_1",x:107,y:204,width:320,height:30,text:"PINCODE_SCR_CREATE",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",$showed:{opacity:0},$create:{opacity:1},$enter:{opacity:0},$portrait:{y:30,x:-40,width:534}}),new nc({name:"title_2",x:107,y:204,width:320,height:30,text:"PINCODE_SCR_RETYPE",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",$showed:{opacity:0},$confirm:{opacity:1},$create:{opacity:0},$portrait:{y:30,x:-40,width:534}}),new Kc({name:"elements",$portrait:{x:-105,y:-330},children:[new Kc({name:b.format(0),x:67*ad,y:302*ad,children:[new Lc({name:"frame",x:48*ad,y:48*ad,width:96*ad,height:96*ad,$preload:"elements/border_dotted"}),new Kc({name:"element",x:48*ad,y:48*ad})]}),new Kc({name:b.format(1),x:167*ad,y:302*ad,children:[new Lc({name:"frame",x:48*ad,y:48*ad,width:96*ad,height:96*ad,$preload:"elements/border_dotted"}),new Kc({name:"element",x:48*ad,y:48*ad})]}),new Kc({name:b.format(2),x:267*ad,y:302*ad,children:[new Lc({name:"frame",x:48*ad,y:48*ad,width:96*ad,height:96*ad,$preload:"elements/border_dotted"}),new Kc({name:"element",x:48*ad,y:48*ad})]}),new Kc({name:b.format(3),x:367*ad,y:302*ad,children:[new Lc({name:"frame",x:48*ad,y:48*ad,width:96*ad,height:96*ad,$preload:"elements/border_dotted"}),new Kc({name:"element",x:48*ad,y:48*ad})]})]}),new Ub({x:50,y:50,$portrait:{x:-730,y:120},on:{elementClick:function(a){kd.events.trigger("elementClick",a)}},children:[new Ob({name:"Human",x:609*ad,y:156*ad}),new Ob({name:"Air",x:712*ad,y:156*ad}),new Ob({name:"Earth",x:815*ad,y:156*ad}),new Ob({name:"Fire",x:609*ad,y:249*ad}),new Ob({name:"Life",x:712*ad,y:249*ad}),new Ob({name:"Metal",x:815*ad,y:249*ad}),new Ob({name:"Tree",x:609*ad,y:342*ad}),new Ob({name:"Water",x:712*ad,y:342*ad}),new Ob({name:"Fish",x:815*ad,y:342*ad}),new Ob({name:"Book",x:712*ad,y:435*ad})]})]});kd=new W({name:"settings-safeMode",onShow:function(b,d){ed.show(function(b){a=b,Xc.setViewPartial(a.left,c),sc()||cf.getNode({center:"PINCODE_TITLE"},function(b){Xc.setViewPartial(a.statusbar,b)}),pf.getNode(function(b){kd.appendPartial(b.button1,uf),Xc.setViewPartial(a.toolbar,b)}),kd.api.safeMode.clearElements(),d(a)})},api:{safeMode:{ELEMENTS_LENGTH:4,showToCreate:function(){Xc.setNodeStateRecursive(c,"create")},showToEnter:function(){Xc.setNodeStateRecursive(c,"enter")},showToConfirm:function(){Xc.setNodeStateRecursive(c,"showed"),Xc.setNodeStateRecursive(c,"confirm")},putElementInPlace:function(a,d){var e=c.elements[b.format(d)].element,a=new Ob({name:a});Xc.setViewPartial(e,a)},clearElements:function(){for(var a=0;a<kd.api.safeMode.ELEMENTS_LENGTH;a++)Xc.setViewPartial(c.elements[b.format(a)].element,null)},showAlert:function(){kd.appendPartial(a.alert,Cd,{message:"PINCODE_WRONG_CODE"}),Xc.setNodeStateRecursive(a.alert,"showed")}}}})});var ld;Bc.on("ready",function(){var a=new Kc({$showed:function(){Xc.playSound("credits_screen_transistion")},x:-512,y:-384,children:[new Kc({name:"right",x:513,y:82,$showed:function(){var b=a.right;Xc.animate(b,"opacity",{delay:400,duration:300,from:0,to:1,easing:Vc.linear})},children:[new Lc({name:"non_anim_paper",x:237,y:134,width:374,height:228,$preload:"credits/review_teaser",$portrait:{x:0,y:500}})]}),new Lc({name:"logo",x:400,y:133,width:200,height:80,$preload:xc.REMOVE_CREDITS?"credits/jb_logo":null,$portrait:{x:700,y:0}})]});ld=new W({name:"credits-owner",node:a})});var md;Bc.on("ready",function(){function a(){var a=new Kc({x:5e3,height:160,children:[new Lc({x:174,y:18,width:347,height:24,image:"interface/ornament_line"}),new nc({name:"quote",x:0,y:30,width:340,text:void 0,textColor:"rgba(94, 65, 48, 1)",textAlign:"left",fontType:"font",once:{render:function(){a.x=0,a.author.y=a.quote.height+a.quote.y-a.quote.height/5,a.height=a.author.y+a.author.height+50}}}),new nc({name:"author",x:10,y:100,width:330,height:20,text:void 0,textColor:"rgba(94, 65, 48, 1)",textAlign:"right",fontType:"author"})]});return a}var b,c,d,e=new Kc({$showed:function(){Xc.playSound("encyclopedia_open")},$base:{opacity:0},x:-512,y:-384,children:[new Kc({x:-18,y:36,children:[new Kc({name:"right",x:533,y:60,children:[new Lc({x:235,y:253,width:550,height:624,$preload:"interface/book_under_hole_right"}),b=new Wb({x:240,y:247,width:370,height:460,contentWidth:370,contentHeight:460,children:[c=new Kc({x:-185,y:-230,$showed:function(){Xc.playSound("element_info")},children:[new Lc({x:272,y:115,width:190,height:190,$preload:"interface/under_group",scale:.8}),new Lc({x:92,y:114,width:230,height:244,$preload:"interface/encyclopedia_paper_element",scale:.9}),new Kc({name:"group_placeholder",x:271,y:117,scale:.7}),new Kc({name:"element_placeholder",x:96,y:90}),new tb({name:"wiki",x:44,y:173,width:45,height:45,$preload:"interface/button_wikipedia_small",on:{mousefocusclick:function(){md.events.trigger("wikiButtonClicked")}},opacity:Bc.config.getAsBool("wiki_button_enabled",!0)?1:0})]}),d=new ub({x:-185,y:-70})]}),new Lc({x:235,y:253,width:550,height:624,$preload:"interface/book_hole_right"})]})]})]});md=new W({name:"encyclopedia-desc",node:e,api:{desc:{showElement:function(f){e.opacity=1;var g=c.element_placeholder;g.destroyChildren(),Xc.factoryNode(Nb,{name:f.id,parent:g});var h=c.group_placeholder;h.destroyChildren(),Xc.factoryNode($b,{name:f.group.id,parent:h}),d.destroyChildren(),f.quotes.forEach(function(b){var c=a();c.quote.changeTextDefinition(b.text),c.author.changeTextDefinition(b.author),d.appendChild(c)}),d.updatePositions(),b.contentNode.y=247,b.updateContent(),Engine.Loop.once("reflow",function(){b.contentNode.height=Math.max(d.height+d.y+360,b.height),b.updateContent()})}}}})});var nd;Bc.on("ready",function(){nd=rc(sc()?"center":"left")});var od;Bc.on("ready",function(){od=rc("center")});var pd;Bc.on("ready",function(){pd=rc(sc()?"center":"right")});var qd,rd="groups/sketch/{}";Bc.on("ready",function(){function a(a){var b=Object.create(null),c=[],e=Object.create(null),f=Object.create(null),g=0,h=new Kc({$left:{x:-339.5,y:sc()?-438:-288},$right:{x:36,y:sc()?-438:-288},$selectedElement:null,$elements:{},$reset:function(){g=0;for(var a in f)f[a]=0},$getGroupNode:function(c){return b[c]||(b[c]=rb.call(new $b({name:c,width:sc?218:168,height:sc?218:168,on:{mousefocusclick:function(){Xc.playSound("group_close"),qd.events.trigger("groupClick",{side:a})}}}))),b[c]},$getBlankElement:function(){return c[g]||(c[g]=rb.call(new Lc({width:96*ad,height:96*ad,image:"elements/not_opened_element"}))),c[g++]},$getElementNode:function(b){var c=b.id;return e[c]||(e[c]=[],f[c]=0),e[c][f[c]]||(e[c][f[c]]=rb.call(new Tb({element:b,name:b.id,on:{select:function(){Xc.playSound("element_click"),h.$.selectedElement=this,d.push(this),qd.events.trigger("elementSelect",{side:a,element:b})},blur:function(){Xc.playSound("element_click"),d.remove(this),qd.events.trigger("elementBlur",{side:a,element:b})}}}))),f[c]+=1,e[c][f[c]-1]},children:[new Lc({name:"group",width:sc()?240:190,height:sc()?240:190,$preload:"interface/under_group",$left:{x:sc()?15:0,y:sc()?420:120},$right:{x:sc()?293:308,y:sc()?420:120}}),new Lc({name:"sketch",width:237,height:251,image:null,$left:{x:0,y:362},$right:{x:308,y:362}}),new Kc({name:"elements",$left:{x:sc()?120:118.5,y:sc()?24:12},$right:{x:sc()?20:0,y:sc()?24:12},$one:{x:160,y:sc()?24:12},$two:{x:20,y:sc()?24:12}})]});return USE_MOBILE_IMAGES&&(h.sketch.scale=.75),Xc.setNodeStateRecursive(h,a),Xc.bindCustomMethodsRecursive(h),h}var b=sc()?6:5,c={left:a("left"),right:a("right")},d=[];qd=new W({name:"board-group",onShow:function(a,d){var e=a.group,f=a.groupNode,g=a.hasPairs,h=a.isFinal,i=c[a.side];i.$.reset(),Xc.setNodeStateRecursive(i,a.side);var j=i.$.getGroupNode(e.data.id);Xc.setViewPartial(i.group,j),i.sketch.image=xc.REMOVE_GROUP_SKETCHES?null:rd.format(e.data.id.toLowerCase());var k,l=[],m=null,n=e.chapter.elementsIterator,o=0;for(n.reset();k=n.next();)if(k.group===e.data){o%b===0&&(sc()?o>=b?l.push(m=Xc.factoryNode(_b,{$gap:[2],spacing:-5})):l.push(m=Xc.factoryNode(_b,{spacing:-5})):l.push(m=Xc.factoryNode(ub)));var p=i.$.getElementNode(k);m.appendChild(p,!1),p.setBorderType("solid"),(h||g)&&(g&&p.setBorderType(g),h&&p.setBorderType(h)),i.$.elements[k.id]=p,o++}if(a.showHiddenElements&&!sc())for(var q=0,r=e.getPossibleElements().length-o;r>q;q++)(q+o)%b===0&&l.push(m=Xc.factoryNode(ub)),m.appendChild(i.$.getBlankElement(),!0);sc()?"left"===a.side&&(l.reverse(),Xc.setNodeStateRecursive(i.elements,l.length>1?"two":"one")):"right"===a.side&&l.reverse();var s=Xc.factoryNode(jc,{children:l});if(i.elements.destroyChildren(),Xc.setViewPartial(i.elements,s),d(i),f){var t=f.getGlobalBoundingBox(),u=j.getGlobalBoundingBox();j.opacity=0,Uc({autoplay:!0,autodestroy:!0,animations:[Rc({target:j,property:"opacity",duration:10,from:0,to:1}),Rc({target:j,property:"x",duration:100,from:j.x-(u.x-t.x),to:j.x}),Rc({target:j,property:"y",duration:100,from:j.y-(u.y-t.y),to:j.y}),Rc({target:j,property:"scale",duration:100,from:t.h/u.h,to:1})]}),t.destroy(),u.destroy()}},api:{group:{getElementNode:function(a,b){return a.$.elements[b.id]},blurSelectedElementsAsFailed:function(){for(;d.length;)d[0].blurAsFailed()},blurSelectedElementsAsSuccess:function(){for(;d.length;)d[0].blurAsSuccess()},blurGroup:function(a){var b=a.$.selectedElement;b&&b.isSelected&&b.blur()}}}})});var sd,td={1:[[0,0]],2:[[0,0],[0,1]],3:[[0,0],[0,1],[0,2]],4:[[0,0],[0,1],[0,2],[0,3]],5:[[0,0],[0,1],[0,2],[1,.5],[1,1.5]],6:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]],7:[[0,0],[0,1],[0,2],[0,3],[1,.5],[1,1.5],[1,2.5]],8:[[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3]],9:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]],10:[[0,.5],[0,1.5],[0,2.5],[1,0],[1,1],[1,2],[1,3],[2,.5],[2,1.5],[2,2.5]],11:[[0,0],[0,1],[0,2],[0,3],[1,.5],[1,1.5],[1,2.5],[2,0],[2,1],[2,2],[2,3]],12:[[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3],[2,0],[2,1],[2,2],[2,3]],13:[[0,.5],[0,1.5],[0,2.5],[0,3.5],[1,0],[1,1],[1,2],[1,3],[1,4],[2,.5],[2,1.5],[2,2.5],[2,3.5]],14:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,.5],[1,1.5],[1,2.5],[1,3.5],[2,0],[2,1],[2,2],[2,3],[2,4]],15:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,0],[1,1],[1,2],[1,3],[1,4],[2,0],[2,1],[2,2],[2,3],[2,4]],16:[[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3],[2,0],[2,1],[2,2],[2,3],[3,0],[3,1],[3,2],[3,3]],17:[[.5,0],[0,1],[.5,2],[0,3],[.5,4],[1.5,0],[1,1],[1.5,2],[1,3],[1.5,4],[2.5,0],[2,1],[2.5,2],[2,3],[2.5,4],[3,1],[3,3]],18:[[.5,0],[0,1],[0,2],[0,3],[.5,4],[1.5,0],[1,1],[1,2],[1,3],[1.5,4],[2.5,0],[2,1],[2,2],[2,3],[2.5,4],[3,1],[3,2],[3,3]],19:[[1,0],[.5,1],[0,2],[.5,3],[1,4],[2,0],[1.5,1],[1,2],[1.5,3],[2,4],[3,0],[2.5,1],[2,2],[2.5,3],[3,4],[3.5,1],[3,2],[3.5,3],[4,2]],20:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,0],[1,1],[1,2],[1,3],[1,4],[2,0],[2,1],[2,2],[2,3],[2,4],[3,0],[3,1],[3,2],[3,3],[3,4]]},ud={1:[[0,0]],2:[[0,0],[0,1]],3:[[0,0],[0,1],[0,2]],4:[[0,0],[0,1],[0,2],[0,3]],5:[[0,0],[0,1],[0,2],[1,.5],[1,1.5]],6:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]],7:[[0,0],[0,1],[0,2],[0,3],[1,.5],[1,1.5],[1,2.5]],8:[[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3]],9:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,.5],[1,1.5],[1,2.5],[1,3.5]],10:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,0],[1,1],[1,2],[1,3],[1,4]],11:[[0,0],[0,1],[0,2],[0,3],[1,.5],[1,1.5],[1,2.5],[2,0],[2,1],[2,2],[2,3]],12:[[0,0],[0,1],[0,2],[0,3],[1,0],[1,1],[1,2],[1,3],[2,0],[2,1],[2,2],[2,3]],13:[[0,.5],[0,1.5],[0,2.5],[0,3.5],[1,0],[1,1],[1,2],[1,3],[1,4],[2,.5],[2,1.5],[2,2.5],[2,3.5]],14:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,.5],[1,1.5],[1,2.5],[1,3.5],[2,0],[2,1],[2,2],[2,3],[2,4]],15:[[0,0],[0,1],[0,2],[0,3],[0,4],[1,0],[1,1],[1,2],[1,3],[1,4],[2,0],[2,1],[2,2],[2,3],[2,4]],16:[[0,.5],[0,1.5],[0,2.5],[0,3.5],[0,4.5],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[2,.5],[2,1.5],[2,2.5],[2,3.5],[2,4.5]],17:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,.5],[1,1.5],[1,2.5],[1,3.5],[1,4.5],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5]],18:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5]],19:[[0,.5],[0,1.5],[0,2.5],[0,3.5],[0,4.5],[0,5.5],[1,0],[1,1],[1,2],[1,3],[1,4],[1,5],[1,6],[2,.5],[2,1.5],[2,2.5],[2,3.5],[2,4.5],[2,5.5]],20:[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[1,.5],[1,1.5],[1,2.5],[1,3.5],[1,4.5],[1,5.5],[2,0],[2,1],[2,2],[2,3],[2,4],[2,5],[2,6]]};Bc.on("ready",function(){function a(a){var c=Object.create(null),d=new Kc({width:sc()?350:409.6,height:sc()?700:480,$left:{x:sc()?-320:-256,y:-40,width:sc()?350:409.6},$right:{x:sc()?320:256,y:-40,width:sc()?350:409.6},$center:{x:0,y:-40,width:sc()?512:409.6},$getGroupNode:function(d){var e=d.data.id;return c[e]?c[e].init(e,d):c[e]=rb.call(new $b({group:d,name:e,width:b,height:b,on:{mousefocusclick:function(){Xc.playSound("group_open"),sd.events.trigger("groupClick",{side:a,group:d.data})}}})),c[e]},children:[new Kc({name:"container",children:[new Kc({name:"groups"})]})]});return Xc.setNodeStateRecursive(d,a,{permanent:!0}),d}var b=192,c={left:a("left"),right:a("right"),center:a("center")};sd=new W({name:"board-groups",onShow:function(a,d){var e=a.chapter,f=c[a.side],g=f.container,h=g.groups,i=[];for(var j in e.groups)e.groups[j].getElements().length&&i.push(e.groups[j]);Xc.setViewPartial(h,null);var k=td[i.length];sc()&&(k=ud[i.length]),i.forEach(function(a,c){var d=k[c],e=f.$.getGroupNode(a);e.x=d[0]*b,e.y=d[1]*b,h.appendChild(e)});var l=Xc.getNodeChildrenBoundingBox(h);h.x=-l.w/2+b/2,h.y=-l.h/2+b/2,g.width=l.w,g.height=l.h,l.destroy(),g.scale=Math.min(1,Math.min(f.height/g.height,f.width/g.width)),sc()&&("left"==a.side&&(h.x=b/2),"right"==a.side&&(h.x=-l.w+b/2)),d(f)},api:{groups:{getGroupNode:function(a,b){return a.container&&a.container.groups[b]}}}})});var vd;Bc.on("ready",function(){var a,b=new Kc({$showed:function(){},x:-532,y:-346,children:[new Lc({name:"game_background",x:523,y:312,width:1064,height:624,$base:{image:void 0}}),new Lc({name:"paper",x:528,y:351,width:499,height:561,$preload:sc()?null:"interface/paper_for_new_element"}),new Lc({name:"light",x:541,y:204,width:800,height:800,$preload:"interface/rays_light",$animation:null,$showed:function(){this.$.animation=Rc({autoplay:!0,autodestroy:!0,loop:!0,target:this,property:"rotation",duration:5e5,from:Math.deg2rad(3590),to:0})},$hidden:function(){this.$.animation.playing&&this.$.animation.stop()}}),new Kc({name:"reactions",x:532,y:120,$portrait:{y:20}}),new nc({name:"new_element",x:214,y:350,width:624,height:20,text:"REACTION_RESULT_NEW_ELEMENT",textColor:"rgba(255, 0, 0, 1)",textAlign:"center",fontType:"author",$base:{opacity:0},$singular:{opacity:1},$portrait:{y:330}}),new nc({name:"new_elements",x:214,y:350,width:624,height:20,text:"REACTION_RESULT_NEW_ELEMENT_PLURAL",textColor:"rgba(255, 0, 0, 1)",textAlign:"center",fontType:"author",$base:{opacity:0},$plural:{opacity:1},$portrait:{y:320}}),new Kc({name:"quote",y:400,$animation:null,$base:{x:275},$showed:function(){this.$.animation=Rc({autodestroy:!0,autoplay:!0,easing:Vc.inOutSine,loop:!0,target:this,property:"x",duration:4e3,reverse:!0,from:this.x-20,to:this.x+15})},$hidden:function(){this.$.animation.playing&&this.$.animation.stop()},children:[new mc({name:"text",x:65,y:0,width:390,height:0,text:"text",textColor:"rgba(94, 65, 48, 1)",textAlign:"left",fontType:(sc(),"font")}),new mc({name:"author",x:65,y:40,width:390,height:0,text:"author",textColor:"rgba(94, 65, 48, 1)",textAlign:"right",fontType:"author",opacity:1})]}),new Kc({name:"mouseArea",width:mh,height:nh,on:{mouseclick:function(){uf.events.trigger("click")}}})]});Xc.bindCustomMethodsRecursive(b),Engine.Loop.on("reflow",function(){b&&b.parent&&b.quote&&b.quote.author&&(b.quote.author.y=b.quote.text.height+b.quote.text.y,b.quote.height=b.quote.author.y+b.quote.author.height+50)}),vd=new W({name:"board-result",onShow:function(c,d){var e=this,f=c.results;ed.show(function(g){a=g,Xc.setViewPartial(a.left,b);var h=Xc.factoryNode(jc,{y:-64});b.reactions.destroyChildren(),Xc.setViewPartial(b.reactions,h),f.forEach(function(a){var b=Xc.factoryNode(ub,{spacing:64});Xc.factoryNode($b,{parent:b,name:a.group.id,width:128,height:128}),Xc.factoryNode(Nb,{parent:b,element:a,name:a.id}),h.appendChild(b)}),h.x-=h.width/2,e.appendPartial(a.toolbar,pf,null,function(a){e.appendPartial(a.button1,uf)}),d(a),USE_MOBILE_IMAGES||!c.chapter.data.resultBackgroundImage||sc()||(b.game_background.image=c.chapter.data.resultBackgroundImage),b.quote.text.text=c.quote?c.quote.text:"",b.quote.author.text=c.quote?c.quote.author:"",b.quote.text.height=0,b.quote.height=0,c.showNewElementText?(Xc.setNodeStateRecursive(b,f.length>1?"plural":"singular"),Xc.playSound("new_element"),Xc.playVoice("new_element")):(Xc.playSound("old_element"),Math.random()<.2&&Xc.playVoice("god_thanks"))})},api:{}})});var wd;Bc.on("ready",function(){function a(){return Bc.achievements[e++]}function b(b){var c=85;return new vb({achievement:a(),x:-100,y:c*b,textWidth:500,on:f})}function c(a){for(var c=[],d=0;a>d;++d)c.push(b(d));return c}var d,e=0,f={mousefocusclick:function(){wd.events.trigger("achievementClicked",this.parent.achievement)}},g=new Kc(sc()?{children:[new Wb({parent:this,name:"content",x:0,y:-25,width:640,height:790,children:[new Kc({name:"scrollarea",scale:1.3,children:c(24)})],$showed:function(){this.contentNode.scrollarea.y=-this.height/2+70,this.contentNode.height=2672.4,this.updateContent()}})]}:{$showed:function(){Xc.playSound("acheivements_screen_transition")},x:-387,y:-346,children:[new Kc({name:"left",x:47,y:86,children:[new Kc({name:"left_col1",x:0,y:0,children:[new vb({achievement:a(),x:0,y:0,on:f}),new vb({achievement:a(),x:0,y:85,on:f}),new vb({achievement:a(),x:0,y:170,on:f}),new vb({achievement:a(),x:0,y:255,on:f}),new vb({achievement:a(),x:0,y:340,on:f}),new vb({achievement:a(),x:0,y:425,on:f})]}),new Kc({name:"left_col2",x:230,y:0,children:[new vb({achievement:a(),x:0,y:0,on:f}),new vb({achievement:a(),x:0,y:85,on:f}),new vb({achievement:a(),x:0,y:170,on:f}),new vb({achievement:a(),x:0,y:255,on:f}),new vb({achievement:a(),x:0,y:340,on:f}),new vb({achievement:a(),x:0,y:425,on:f})]})]}),new Kc({name:"right",x:520,y:86,children:[new Kc({name:"right_col1",x:0,y:0,children:[new vb({achievement:a(),x:0,y:0,on:f}),new vb({achievement:a(),x:0,y:85,on:f}),new vb({achievement:a(),x:0,y:170,on:f}),new vb({achievement:a(),x:0,y:255,on:f}),new vb({achievement:a(),x:0,y:340,on:f}),new vb({achievement:a(),x:0,y:425,on:f})]}),new Kc({name:"right_col2",x:230,y:0,children:[new vb({achievement:a(),x:0,y:0,on:f}),new vb({achievement:a(),x:0,y:85,on:f}),new vb({achievement:a(),x:0,y:170,on:f}),new vb({achievement:a(),x:0,y:255,on:f}),new vb({achievement:a(),x:0,y:340,on:f}),new vb({achievement:a(),x:0,y:425,on:f})]})]})]});Xc.bindCustomMethodsRecursive(g),wd=new W({name:"achievements",onShow:function(a,b){var c=this;ed.show(function(a){d=a,Xc.setViewPartial(d.left,g),sc()?c.appendPartial(d.statusbar,lf,{title:"ACHIEVEMENTS_PROGRESS",titleFormat:[Bc.achievements.getActiveAchievementsLength(),Bc.achievements.length]}):c.appendPartial(d.statusbar,cf,{center:"ACHIEVEMENTS_PROGRESS",centerFormat:[Bc.achievements.getActiveAchievementsLength(),Bc.achievements.length]}),c.appendPartial(d.toolbar,pf,null,function(a){c.appendPartial(a.button1,uf)}),b(d)})},api:{achievements:{showLockedAchievementAlert:function(a){wd.appendPartial(d.alert,Dd,{title:a.name,message:a.description,image:{image:xc.REMOVE_LARGE_ACHIEVEMENTS?a.image:a.largeImage,width:xc.REMOVE_LARGE_ACHIEVEMENTS?100:152,height:xc.REMOVE_LARGE_ACHIEVEMENTS?100:152}}),Xc.setNodeStateRecursive(d.alert,"showed")},showSocialConfirm:function(a){wd.appendPartial(d.alert,Gd,{name:"achievement",title:a.name,message:a.description,image:{image:xc.REMOVE_LARGE_ACHIEVEMENTS?a.image:a.largeImage,width:xc.REMOVE_LARGE_ACHIEVEMENTS?100:152,height:xc.REMOVE_LARGE_ACHIEVEMENTS?100:152}}),Xc.setNodeStateRecursive(d.alert,"showed")}}}})});var xd;Bc.on("ready",function(){var a=new wb({children:[new Kc({x:-512,y:-384,children:[new Lc({name:"rays2",x:520,y:390,width:819,height:819,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS&&(this.image="main_menu/rays",Xc.animate(this,"rotation",{delay:0,duration:5e5,from:0,to:-62.657320146596426,easing:Vc.linear}))}}),new Lc({x:xc.REMOVE_ADVERTISING_BACKGROUNDS?520:508,y:403+(xc.REMOVE_ADVERTISING_BACKGROUNDS?-50:0),width:xc.REMOVE_ADVERTISING_BACKGROUNDS?585:1004,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?715:735,$showed:function(){this.image=xc.REMOVE_ADVERTISING_BACKGROUNDS?"quests_menu/god_vs_devil":"message_box/advertising_bkg"}}),new Lc({x:508,y:381,width:604,height:517,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS||(this.image="message_box/advertising_border")}}),new Lc({x:583,y:232,width:700,height:414,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS||(this.image="message_box/advertising_devil_vs_god")}}),new Kc({name:"box",x:20,y:50,children:[new nc({name:"desc_text",font:"font",x:290,y:xc.REMOVE_ADVERTISING_BACKGROUNDS?340:380,width:420,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?100:20,text:"QUEST_DEVIL_VS_GOD_ADVERTISING_MSG",textColor:"rgba(81, 43, 2, 1)",textAlign:"center",fontType:"font"}),new tb({name:"right",x:xc.REMOVE_ADVERTISING_BACKGROUNDS?750:738,y:xc.REMOVE_ADVERTISING_BACKGROUNDS?16:128,width:86,height:85,$showed:function(){this.image="message_box/close"},on:{mousefocusclick:function(){xd.events.trigger("BackButtonClicked")}}}),new tb({name:"left",x:491,y:487,width:241,height:73,$showed:function(){this.image="hint/button_big_green"},children:[new nc({name:"left_txt",font:"font",x:-83.5,y:-14.5,width:180,height:20,text:"QUEST_PRINCESS_ADVERTISING_BUTTON",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){xd.events.trigger("ShowButtonClicked")}}})]})]})]});Xc.bindCustomMethodsRecursive(a),xd=new W({name:"lost_advert",node:a,api:{}})});var yd;Bc.on("ready",function(){var a=new wb({children:[new Kc({x:-512,y:-384,children:[new Lc({name:"rays2",x:520,y:390,width:819,height:819,$showed:function(){this.image="main_menu/rays",Xc.animate(this,"rotation",{delay:0,duration:5e5,from:0,to:-62.657320146596426,easing:Vc.linear})}}),new Lc({name:"bkg",x:518,y:391+(xc.REMOVE_ADVERTISING_BACKGROUNDS?-50:0),width:xc.REMOVE_ADVERTISING_BACKGROUNDS?585:1005,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?715:721,$showed:function(){this.image=xc.REMOVE_ADVERTISING_BACKGROUNDS?"quests_menu/survivor":"message_box/robinzon_advertising_border"}}),new Kc({name:"box",x:20,y:50,children:[new nc({name:"desc_text",font:"font",x:294,y:337,width:420,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?100:20,text:"QUEST_ADVERTISING_MSG",textColor:"rgba(81, 43, 2, 1)",textAlign:"center",fontType:"font"}),new tb({name:"right",x:xc.REMOVE_ADVERTISING_BACKGROUNDS?750:751,y:xc.REMOVE_ADVERTISING_BACKGROUNDS?16:204,width:xc.REMOVE_ADVERTISING_BACKGROUNDS?86:68,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?85:60,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS?this.image="message_box/close":this.image="message_box/close_robinzon_advertising"},on:{mousefocusclick:function(){yd.events.trigger("BackButtonClicked")}}}),new tb({name:"left",x:502,y:500,width:241,height:73,$showed:function(){this.image="hint/button_big_green"},children:[new nc({name:"left_txt",font:"font",x:-83.5,y:-14.5,width:180,height:20,text:"QUEST_ADVERTISING_BUTTON",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){yd.events.trigger("ShowButtonClicked")}}})]})]})]});Xc.bindCustomMethodsRecursive(a),yd=new W({name:"lost_advert",node:a,api:{}})});var zd;Bc.on("ready",function(){var a=new wb({children:[new Kc({x:-512,y:-384,children:[new Lc({name:"rays2",x:520,y:390,width:819,height:819,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS&&(this.image="main_menu/rays",Xc.animate(this,"rotation",{delay:0,duration:5e5,from:0,to:-62.657320146596426,easing:Vc.linear}))}}),new Lc({x:508,y:403+(xc.REMOVE_ADVERTISING_BACKGROUNDS?-50:0),width:xc.REMOVE_ADVERTISING_BACKGROUNDS?585:1004,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?715:735,$showed:function(){this.image=xc.REMOVE_ADVERTISING_BACKGROUNDS?"quests_menu/princess":"message_box/advertising_bkg"}}),new Lc({x:508,y:381,width:604,height:517,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS||(this.image="message_box/advertising_border")}}),new Lc({x:583,y:232,width:700,height:414,$showed:function(){xc.REMOVE_ADVERTISING_BACKGROUNDS||(this.image="message_box/advertising_Save_the_princess")}}),new Kc({name:"box",x:20,y:50,children:[new nc({name:"desc_text",font:"font",x:290,y:xc.REMOVE_ADVERTISING_BACKGROUNDS?340:380,width:420,height:xc.REMOVE_ADVERTISING_BACKGROUNDS?100:20,text:"QUEST_PRINCESS_ADVERTISING_MSG",textColor:"rgba(81, 43, 2, 1)",textAlign:"center",fontType:"font"}),new tb({name:"right",x:738,y:xc.REMOVE_ADVERTISING_BACKGROUNDS?16:128,width:86,height:85,$showed:function(){this.image="message_box/close"},on:{mousefocusclick:function(){zd.events.trigger("BackButtonClicked")}}}),new tb({name:"left",x:491,y:487,width:241,height:73,$showed:function(){this.image="hint/button_big_green"},children:[new nc({name:"left_txt",font:"font",x:-83.5,y:-14.5,width:180,height:20,text:"QUEST_PRINCESS_ADVERTISING_BUTTON",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){zd.events.trigger("ShowButtonClicked")}}})]})]})]});Xc.bindCustomMethodsRecursive(a),zd=new W({name:"princess_advert",node:a,api:{}})});var Ad;Bc.on("ready",function(){var a="confirmed",b=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"message_field",x:-218,y:-134,children:[new nc({name:"message",x:0,y:0,width:435,height:80,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"author":"font"}),new nc({name:"message2",x:0,y:70,width:435,height:40,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"author":"font"})]}),new tb({name:"left",x:-107,y:90,width:212,height:86,$preload:"hint/button_big_blue",on:{mousefocusclick:function(){Ad.events.trigger(a),b.close()}},children:[new Lc({width:157.5,height:45,image:"hint/ad"})]}),new tb({name:"right",x:105,y:90,width:212,height:86,$preload:"hint/button_small_orange",on:{mousefocusclick:function(){Ad.events.trigger("closed"),b.close()}},children:[new nc({name:"right_text",x:-63,y:-27,width:120,height:48,text:"MESSAGEBOX_NO",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})]});Ad=new W({name:"alert-ad",node:b,onShow:function(c){a=null!=c.name?"{}Confirmed".format(c.name):"confirmed",c.messageFormat?b.content.message_field.message.format=c.messageFormat:b.content.message_field.message.format=null,b.content.message_field.message.changeTextDefinition(c.message),c.message2?b.content.message_field.message2.changeTextDefinition(c.message2):b.content.message_field.message2.changeTextDefinition("")}})});var Bd;Bc.on("ready",function(){function a(a){var b=Ab[a.active?"IMAGE_SRC":"LOCKED_IMAGE_SRC"].format(a.id),c=new Kc({children:[new Lc({name:"img_stand",x:66,y:126,width:131,height:51,$preload:"artifacts_menu/stand"}),new Lc({name:"img_a",x:66,y:77,width:131,height:153,image:b}),new Lc({name:"img_b1",x:75,y:157,width:138,height:46,image:"message_box/border_icon_01",children:[new nc({name:"aname",x:-39,y:-13,width:90,height:30,text:a.name,textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"small"})]})]});return a.active&&new Lc({parent:c,name:"img_check",x:28,y:154,width:21,height:18,image:"message_box/border_icon_02"}),c}var b,c,d=new wb({children:[new Kc({name:"dlg",x:-512,y:-354,children:[new Lc({name:"bkg",x:496,y:333,width:991,height:666,$portrait:{x:512,y:354,width:640,height:960},$preload:"shop/daily_bonus_big"}),new Lc({name:"abkg",x:518,y:331,width:535,height:222,$portrait:{x:512,y:354,width:390,height:420},$preload:"message_box/artifacts_bkg"}),new nc({name:"text1",x:149,y:83,width:700,height:48,text:"CONGRATULATIONS",textColor:"rgba(255, 182, 112, 1)",textAlign:"center",fontType:"medium",$portrait:{y:-35}}),c=new nc({name:"title",x:165,y:150,width:sc()?440:660,height:48,text:"YOU_DISCAVERY_EPISODE",format:[""],textColor:"rgba(143, 84, 21, 1)",textAlign:"center",fontType:sc()?"font":"medium",$portrait:{x:292,y:60}}),new nc({name:"text3",x:165,y:436,width:sc()?440:660,height:48,text:"FOR_CONTINUE_PLAYING",textColor:"rgba(143, 84, 21, 1)",textAlign:"center",fontType:sc()?"font":"medium",$portrait:{x:292,y:596}}),b=new Kc({name:"artifacts_content",x:60,width:812,y:220,$portrait:{x:130,width:640},$showed:function(){this.children.forEach(function(a,b,c){a.x=this.width/(c.length+1)*(b+1)},this)},$hidden:function(){this.destroyChildren()}})]}),new tb({name:"left",x:-104,y:168,width:241,height:73,$portrait:{y:368},$preload:"hint/button_big_green",on:{mousefocusclick:function(){Bd.events.trigger("showArtifactsButtonClick")}},children:[new nc({name:"txt",x:-120.5,y:-36.5,width:240,height:68,text:"FIND_ARTIFACTS",textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"author"})]}),new tb({name:"right",x:125,y:168,width:241,height:73,$portrait:{y:368},$preload:"hint/button_big_green",on:{mousefocusclick:function(){Bd.events.trigger("buyButtonClick",100)}},children:[new nc({name:"txt_skip",x:-110.5,y:-36.5,width:100,height:68,text:"SKIP_FOR_MANA",textColor:"rgba(0, 0, 0, 1)",textAlign:"right",fontType:"small"}),new Lc({name:"icon_ligh",x:10,y:1.75,width:31,height:39,$preload:"shop/lightning"}),new nc({name:"txt_mana",x:0,y:-54.75,width:100,height:100,text:"100",textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"medium"})]})]});Xc.bindCustomMethodsRecursive(d),Bd=new W({name:"alert-artifact",node:d,onShow:function(e,f){c.format[0]=Qc.tr(e.data.text),c.tr(),e.data.artifacts.forEach(function(c){var d=a(Bc.artifacts[c]);b.appendChild(d)}),f(d)}})});var Cd;Bc.on("ready",function(){var a="closed",b=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"message_field",x:-218,y:-134,children:[new nc({name:"message",x:0,y:0,width:435,height:150,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"middle",x:0,y:84,width:241,height:73,$preload:"hint/button_big_blue",on:{mousefocusclick:function(){Cd.events.trigger(a),b.close()}},children:[new nc({name:"middle_text",x:-67.5,y:-28.5,width:150,height:48,text:"DISMISS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})]});Cd=new W({name:"alert-base",node:b,onShow:function(c){a=null!=c.name?"{}Closed".format(c.name):"closed",b.content.message_field.message.changeTextDefinition(c.message)}})});var Dd;Bc.on("ready",function(){var a=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"icons",x:-237,y:-124,children:[new Lc({name:"icon",x:86,y:56,width:0,height:0,image:void 0}),new nc({name:"caption",x:180,y:-20,width:300,height:50,text:"",textColor:"rgba(103, 57, 15, 1)",textAlign:"left",fontType:sc()?"font":"medium"}),new nc({name:"desc",x:180,y:40,width:300,height:100,text:"",textColor:"rgba(103, 57, 15, 1)",textAlign:"left",fontType:sc()?"author":"font"})]}),new tb({name:"middle",x:0,y:84,width:241,height:73,$preload:"hint/button_big_blue",on:{mousefocusclick:function(){a.close()}},children:[new nc({name:"middle_text",x:-67.5,y:-20,width:150,text:"DISMISS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]})]});Dd=new W({name:"alert-base-image",node:a,onShow:function(b){var c=a.content.icons;c.caption.changeTextDefinition(b.title),c.desc.changeTextDefinition(b.message),Object.merge(c.icon,b.image)}})});var Ed;Bc.on("ready",function(){var a="confirmed",b=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"message_field",x:-218,y:-134,children:[new nc({name:"message",x:0,y:0,width:435,height:80,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"author":"font"}),new nc({name:"message2",x:0,y:70,width:435,height:40,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"author":"font"}),new Lc({name:"lightning",x:190,y:140,width:31,height:39,$preload:"shop/lightning"}),new nc({name:"price",x:220,y:130,width:50,height:20,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"left",fontType:sc()?"author":"font"})]}),new tb({name:"left",x:-107,y:90,width:212,height:86,$preload:"hint/button_small_green",on:{mousefocusclick:function(){Ed.events.trigger(a),b.close()}},children:[new nc({name:"left_text",x:-63,y:-27,width:120,height:48,text:"MESSAGEBOX_YES",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]}),new tb({name:"right",x:105,y:90,width:212,height:86,$preload:"hint/button_small_orange",on:{mousefocusclick:function(){Ed.events.trigger("closed"),b.close()}},children:[new nc({name:"right_text",x:-63,y:-27,width:120,height:48,text:"MESSAGEBOX_NO",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})]});Ed=new W({name:"alert-buy",node:b,onShow:function(c){a=null!=c.name?"{}Confirmed".format(c.name):"confirmed",c.messageFormat?b.content.message_field.message.format=c.messageFormat:b.content.message_field.message.format=null,b.content.message_field.message.changeTextDefinition(c.message),c.message2?b.content.message_field.message2.changeTextDefinition(c.message2):b.content.message_field.message2.changeTextDefinition(""),b.content.message_field.price.changeTextDefinition(c.price)}})});var Fd;Bc.on("ready",function(){var a="confirmed",b=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"message_field",x:-218,y:-134,children:[new nc({name:"message",x:0,y:0,width:435,height:150,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"left",x:-107,y:90,width:212,height:86,$preload:"hint/button_small_green",on:{mousefocusclick:function(){Fd.events.trigger(a),b.close()}},children:[new nc({name:"left_text",x:-63,y:-25,width:120,height:48,text:"MESSAGEBOX_YES",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"right",x:105,y:90,width:212,height:86,$preload:"hint/button_small_orange",on:{mousefocusclick:function(){Fd.events.trigger("closed"),b.close()}},children:[new nc({name:"right_text",x:-63,y:-25,width:120,height:48,text:"MESSAGEBOX_NO",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]})]});Fd=new W({name:"alert-confirm",node:b,onShow:function(c){a=null!=c.name?"{}Confirmed".format(c.name):"confirmed",b.content.message_field.message.changeTextDefinition(c.message)}})});var Gd;Bc.on("ready",function(){var a="confirmed",b=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"icons",x:-237,y:-124,children:[new Lc({name:"icon",x:86,y:56,width:0,height:0,image:void 0}),new nc({name:"caption",x:180,y:-20,width:300,height:50,text:"",textColor:"rgba(103, 57, 15, 1)",textAlign:"left",fontType:"medium"}),new nc({name:"desc",x:180,y:40,width:300,height:100,text:"",textColor:"rgba(103, 57, 15, 1)",textAlign:"left",fontType:"font"})]}),new nc({x:-150,y:-20,width:300,height:100,text:"MESSAGEBOX_SHARE_ACHIEVEMENT",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"}),new tb({name:"left",x:-107,y:90,width:212,height:86,$preload:"hint/button_small_green",on:{mousefocusclick:function(){Gd.events.trigger(a),b.close()}},children:[new nc({name:"left_text",x:-63,y:-20,width:120,text:"MESSAGEBOX_YES",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]}),new tb({name:"right",x:105,y:90,width:212,height:86,$preload:"hint/button_small_orange",on:{mousefocusclick:function(){b.close()}},children:[new nc({name:"right_text",x:-63,y:-20,width:120,text:"MESSAGEBOX_NO",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]})]});Gd=new W({name:"alert-confirm-social-image",node:b,onShow:function(c){a=null!=c.name?"{}Confirmed".format(c.name):"confirmed";var d=b.content.icons;d.caption.changeTextDefinition(c.title),d.desc.changeTextDefinition(c.message),Object.merge(d.icon,c.image)}})});var Hd;Bc.on("ready",function(){function a(a){f.content.spin.textFree.opacity=+a,f.content.spin.textPaid.opacity=+!a,f.content.spin.textPrice.opacity=+!a,f.content.spin.mana.opacity=+!a}function b(a){f.content.rewards.mana1.amount.text=a.mana1,f.content.rewards.mana2.amount.text=a.mana2,f.content.rewards.mana3.amount.text=a.mana3}var c,d=!1,e={_CHEST_:"message_box/icon_chest_sign",no_pairs:"message_box/icon_dotted_border_sign",mana:"message_box/icon_energy_sign",no_reaction:"message_box/icon_gray_border_sign",1:"message_box/icon_hint_1_sign",2:"message_box/icon_hint_2_sign",3:"message_box/icon_hint_3_sign",no_repeat:"message_box/icon_not_repeat_sign",_SPIN_:"message_box/icon_reset",_JACKPOT_:"message_box/icon_star"},f=new wb({children:[new Lc({name:"redTapeLeft",x:-290,y:-220,width:115,height:125,$preload:"message_box/red_tape_down_flipped",$portrait:{scale:.8,y:-340,x:-270}}),new Lc({name:"redTapeRight",x:290,y:-220,width:115,height:125,$preload:"message_box/red_tape_down",$portrait:{scale:.8,y:-340,x:270}}),new Lc({name:"bkg",y:50,width:Math.round(892.5),height:Math.round(625.5),$preload:"message_box/dialog",$portrait:{width:640,height:910}}),new Kc({name:"redTapeUp",y:-240,children:[new Lc({name:"redTape",width:595,height:175,$preload:"message_box/red_tape_up",$portrait:{scale:.8}}),new nc({name:"text",x:-297.5,y:-115,width:595,height:175,text:"SHOP_WHEEL_TITLE",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium",$portrait:{y:-105}})],$portrait:{y:-350}}),new Kc({name:"stars",x:120,y:-100,scale:.9,$portrait:{scale:1,y:185,x:-100},children:[new Lc({name:"star1",x:0,y:0,width:95,height:95,$preload:"message_box/star_empty",opacity:.3,$state0:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state1:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10},$state2:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10},$state3:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10}}),new Lc({name:"star2",x:95,y:0,width:95,height:95,$preload:"message_box/star_empty",opacity:.3,$state0:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state1:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state2:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10},$state3:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10}}),new Lc({name:"star3",x:190,y:0,width:95,height:95,$preload:"message_box/star_empty",opacity:.3,$state0:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state1:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state2:function(){this.image="message_box/star_empty",this.opacity=.3,this.y=0},$state3:function(){this.image="message_box/star_full",this.opacity=1,this.y=sc()?0:10}})]}),new Kc({name:"rewards",x:0,y:0,$portrait:{y:265,x:-250,scale:.8},children:[new Kc({name:"mana3",x:110,y:0,$portrait:{y:0,x:0},children:[new Lc({name:"star1",x:0,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new Lc({name:"star2",x:47,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new Lc({name:"star3",x:94,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new mc({name:"amount",x:105,y:-28,width:100,height:50,text:"10000",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"medium"}),new Lc({name:"mana",x:215,y:0,width:135,height:145,$preload:"message_box/energy_card",scale:.3})]}),new Kc({name:"mana2",x:110,y:45,$portrait:{y:0,x:230},children:[new Lc({name:"star2",x:47,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new Lc({name:"star3",x:94,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new mc({name:"amount",x:105,y:-28,width:100,height:50,text:"1000",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"medium"}),new Lc({name:"mana",x:215,y:0,width:135,height:145,$preload:"message_box/energy_card",scale:.3})]}),new Kc({name:"mana1",x:110,y:90,$portrait:{y:0,x:410},children:[new Lc({name:"star3",x:94,y:0,width:95,height:95,$preload:"message_box/star_full",scale:.5}),new mc({name:"amount",x:105,y:-28,width:100,height:50,text:"100",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"medium"}),new Lc({name:"mana",x:215,y:0,width:135,height:145,$preload:"message_box/energy_card",scale:.3})]})]}),new Kc({name:"countdown",x:-10,y:80,$portrait:{y:260,x:-217.5},children:[new nc({name:"message",x:0,y:0,width:435,height:150,text:"FORTUNE_SPIN_FREE",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:(sc(),"font"),timer:null,$hidden:function(){this.timer&&this.timer.stop()},$showed:function(){function b(){var b=1e3*Bc.fortune.remainingTimeBeforeFreeSpin(),d=Math.floor(b/36e5),e=Math.floor((b-36e5*d)/6e4),f=Math.floor((b-36e5*d-6e4*e)/1e3);c.opacity=!!(b>0),0>=b&&(c.timer.stop(),a(!0));var g="{}"+Qc.tr("FORMAT_TIME_HOUR")+" {}"+Qc.tr("FORMAT_TIME_MINUTE")+" {}"+Qc.tr("FORMAT_TIME_SECOND");c.format=[g.format(d,e,f)],c.changeTextDefinition("FORTUNE_SPIN_FREE")}var c=this;Bc.fortune.haveFreeSpin()?this.opacity=0:(b(),void 0===this.timer?this.timer=new Jc({autoplay:!0,duration:1/0,loop:!0,delay:1e3,on:{step:function(){b()}}}):this.timer.play())}})]}),new tb({name:"spin",x:205,y:240,width:228.4,height:179*.4,$preload:"message_box/btn_green",$locked:function(){this.image="message_box/btn_grey",a(!0)},$unlocked:function(){this.image="message_box/btn_green",a(Bc.fortune.haveFreeSpin())},$showed:function(){a(Bc.fortune.haveFreeSpin())},on:{mousefocusclick:function(){d||(Bc.fortune.spin()?(d=!0,Xc.setNodeStateRecursive(f.content.spin,"locked"),Xc.setNodeStateRecursive(f.content.countdown,"showed")):Hd.api.showNoManaAlert())}},$portrait:{scale:1.3,y:420,x:0},children:[new nc({name:"textFree",x:-114.2,y:-28.5,width:228.4,height:48,text:"FORTUNE_SPIN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium",opacity:0}),new nc({name:"textPaid",x:-160,y:-28.5,width:228.4,height:48,text:"FORTUNE_SPIN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium",opacity:0}),new mc({name:"textPrice",x:-165,y:-30,width:228.4,height:48,text:"100500",textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"medium",opacity:0}),new Lc({name:"mana",x:85,y:-5,width:135,height:145,$preload:"message_box/energy_card",scale:.3,opacity:0})]}),new Xb({name:"fortune",x:-130,y:50,$portrait:{y:-100,x:0}}),new tb({name:"close",x:Math.round(446.25)-86/1.2,y:-Math.round(312.75)+40+86/1.4,width:86,height:85,$preload:"message_box/close",on:{mousefocusclick:function(){Bc.fortune.getJackpotState()>0?(Xc.setNodeStateRecursive(f.content.stars,"state0"),Bc.fortune.applyJackpot()):(Hd.events.trigger("closed"),f.close())}},$portrait:{scale:1.2,y:-320,x:260}}),new Kc({name:"alert"})]});Hd=new W({name:"alert-fortune",node:f,onShow:function(a){f.content.spin.textPrice.text=Bc.fortune.getSpinPrice(),b(Bc.fortune.getJackpot()),Xc.setNodeStateRecursive(f.content.stars,"state"+Bc.fortune.getJackpotState()),c=Bc.fortune.getRandomSlots();for(var d=0,g=8;g>0;g--){var h=c[d];d++,h.uiName="slot"+g,f.content.fortune.wheel[("slot"+g).toString()].setImage(e[h.name]),f.content.fortune.wheel[("slot"+g).toString()].setAmount(h.amount)}},api:{showReward:function(a){f&&(Hd.appendPartial(f.content.alert,Pd,a),Xc.setNodeStateRecursive(f.content.alert,"showed"))},showNoManaAlert:function(){Hd.appendPartial(f.content.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(f.content.alert,"showed")},setStarsState:function(a){f&&(Xc.setNodeStateRecursive(f.content.stars,"state"+a),Hd.api.animate(f.content.stars))},spin:function(){var a=Bc.fortune.getWinnerSlot(c),b=Math.random()>.5?.3*Math.random():Math.random()*-.3;Xc.animate(f.content.fortune.wheel,"rotation",{duration:2e3,loop:!1,from:0*(Math.PI/180),to:2160*(Math.PI/180),easing:Vc.linear}),setTimeout(function(){Xc.animate(f.content.fortune.wheel,"rotation",{duration:8e3,loop:!1,from:0,to:4320*(Math.PI/180)-f.content.fortune.wheel[a.uiName].rotation-b,easing:Vc.outSine})},2e3),setTimeout(function(){d=!1,Xc.setNodeStateRecursive(f.content.spin,"unlocked"),Bc.fortune.processReward(a)},1e4)},animate:function(a){var b=function(b,c,d){Xc.animate(a,"opacity",{duration:200,from:b,to:c,on:{end:function(){d&&d(c,b)}}})};b(1,0,b),setTimeout(function(){b(1,0,b)},400)}}})});var Id;Bc.on("ready",function(){var a=null,b=new wb({children:[new Lc({name:"bkg",width:oh,height:ph,image:void 0,children:[new Lc({name:"area",width:oh-200,height:ph,image:void 0,on:{mouseclick:function(){Bc.promo.onClose(),b.close(),Bc.promo.openLink("fullscreen",a)}}})]}),new Lc({name:"logo",width:0,height:0,image:void 0}),new tb({name:"open",x:340,y:275,width:256,height:164,$portrait:{x:0,y:350},$preload:"message_box/ad_button",on:{mousefocusclick:function(){Bc.promo.onClose(),b.close(),Bc.promo.openLink("fullscreen",a)}},children:[new nc({name:"middle_text",x:-77.5,y:-20,width:150,text:"MESSAGEBOX_DOWNLOAD",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:(sc(),"font")})]}),new tb({name:"close",x:oh/2-50,y:-ph/2+50,width:100,height:100,$portrait:{x:oh/2-50,y:-ph/2+50},$preload:"message_box/ad_close",on:{mousefocusclick:function(){b.close(),Bc.promo.onClose()}}}),new nc({name:"text",x:-500,y:265,width:500,height:50,$portrait:{width:400,x:-180,y:-350},text:"The power of creation is in your hands! In this addictive, ALL ages, puzzle game!",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:(sc(),"font"),opacity:0})]});Id=new W({name:"alert-fullscreen-promo",node:b,onShow:function(c){var d=Fc.getById(c.fullscreen_promo_logo_image),e=.85*oh,f=e/d.width*d.height,g={};g.width=e,g.height=f,g.image=c.fullscreen_promo_logo_image;var h={};h.image=c.fullscreen_promo_background_image,Object.merge(b.content.bkg,h),Object.merge(b.content.logo,g),a=c.promo_link,b.content.text.changeTextDefinition(c.body)}})});var Jd;Bc.on("ready",function(){function a(a,b,d){Xc.factoryNode(Lc,{parent:c,width:138,height:130,image:a,children:[Xc.factoryNode(nc,{name:"amount",font:"font",x:-5,y:4,width:60,height:48,text:b,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"}),Xc.factoryNode(nc,{name:"amount",font:"font",x:52,y:-65,width:380,height:130,text:d,textColor:"rgba(57, 33, 11, 1)",textAlign:"left",fontType:"author"})]})}function b(){Xc.factoryNode(Lc,{parent:c,width:138,height:130,image:"shop/energy_sign2_big",children:[Xc.factoryNode(Lc,{name:"amount",x:26,y:36,width:44,height:19,image:"interface/energy_infinity"}),Xc.factoryNode(nc,{name:"amount",font:"font",x:-190,y:40,width:380,height:130,text:"SHOP_MANA_DESC",textColor:"rgba(57, 33, 11, 1)",textAlign:"center",fontType:"medium"})]})}var c,d,e={1:{image:"shop/hint_1_sign",description:"SHOP_HINT1_DESC"},2:{image:"shop/hint_2_sign",description:"SHOP_HINT2_DESC"},3:{image:"shop/hint_3_sign",description:"SHOP_HINT3_DESC"},no_pairs:{image:"shop/dotted_border_sign",description:"SHOP_DOTTED_DESC"},no_reaction:{image:"shop/gray_border_sign",description:"SHOP_GRAY_DESC"},no_repeat:{image:"shop/not_repeat_sign",description:"SHOP_NO_REPEAT_DESC"}},f=new wb({children:[new Kc({x:-306,y:-254,children:[new Lc({name:"bkg",x:301,y:215,width:602,height:530,$preload:"message_box/dialog_happy"}),new Kc({x:120,y:250,children:[c=new ub({spacing:-30})]}),d=new nc({name:"message",font:"font",x:(sc(),76),y:(sc(),20),width:(sc(),450),height:122,text:"SHOP_INAPP_SUCCESS_MESSAGE",textColor:"rgba(57, 33, 11, 1)",textAlign:"center",fontType:"medium"}),new tb({name:"right",x:559,y:4,width:86,height:85,$preload:"message_box/close",on:{mousefocusclick:function(){Jd.events.trigger("closed"),f.close()}}})]})]});Xc.bindCustomMethodsRecursive(f),Jd=new W({name:"alert-inapp",node:f,onShow:function(d,g){c.destroyChildren();var h,i,j=0,k=[];h=Bc.manaShop.bank.getBoxById(d.id),Bc.manaShop._bonuses.forEach(function(a){a&&(i=a.bank.getBoxById(d.id))});for(var l=0;l<h.length;l++){var m=h[l];j+=m.amount}if(i)for(var l=0;l<i.length;l++){var m=i[l];"mana"===m.type?j+=m.amount:k.push(Object.merge({amount:m.amount},e[m.name]))}if(j!==1/0){a("shop/energy_sign2",j,"SHOP_MANA_DESC");for(var l=0;l<k.length;l++){var n=k[l];a(n.image,n.amount,n.description)}c.x=0,c.y=-c.height/2}else b(),c.x=190,c.y=-c.height/2-30;g(f)}})});var Kd;Bc.on("ready",function(){var a=new wb({children:[new Kc({name:"godPortrait",x:0,y:-260,opacity:sc()?1:0,children:[new Lc({name:"body",width:413,height:434,$preload:"message_box/god_stars_01"})]}),new Lc({name:"bkg",width:570,height:700,$portrait:{y:100},$preload:"message_box/t9_dialog"}),new Kc({name:"god",x:-325,y:-60,opacity:sc()?0:1,children:[new Lc({name:"body",width:355,height:430,$preload:"message_box/god_stars_02"}),new Lc({name:"hand",x:-22,y:170,width:271,height:386,$preload:"message_box/godhand_stars_03"})]}),new nc({name:"title",x:-230,y:-240,$portrait:{y:-140},width:460,height:40,text:"TUT_GLOW_END_SECOND_GAME",textColor:"rgba(145, 90, 58, 1)",textAlign:"center",fontType:"medium"}),new Kc({name:"light",y:-120,$portrait:{y:-20},children:[new Lc({name:"bkg",width:295,height:102,$preload:"message_box/penta_sign"}),new lc({name:"status",x:-90,y:-10,scale:1.4})]}),new Kc({name:"button1",x:80,$portrait:{y:100},children:[new nc({name:"text1",x:-300,y:-36.5,width:100,height:73,text:"+4",textColor:"rgba(189, 87, 5, 1)",textAlign:"center",fontType:"medium"}),new nc({name:"text2",x:-220,y:-36.5,width:100,height:73,text:"MESSAGEBOX_BLITZ_REACTIONS",textColor:"rgba(75, 21, 3, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"line",x:-80,y:40,width:400,height:8,$preload:"interface/line"}),new tb({name:"btn",width:241,height:73,$preload:"hint/button_big_green",$showed:function(){cb()>=Bc.config.getAsInt("price_shop_light1",200)?this.image="hint/button_big_green":this.image="hint/button_big_gray"},on:{mousefocusclick:function(){cb()>=Bc.config.getAsInt("price_shop_light1",200)&&(Kd.events.trigger("buy"),a.close())}},children:[new mc({name:"text",x:-120.5,y:-36.5,width:241,height:73,text:Bc.config.getAsInt("price_shop_light1",200),textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"lightning",x:70,y:0,width:135,height:145,scale:.25,$preload:"message_box/energy_card"})]})]}),new Kc({name:"button2",x:80,y:100,$portrait:{y:200},children:[new Lc({name:"infinity",x:-249,y:4,width:35,height:15,$preload:"interface/energy_infinity"}),new nc({name:"text2",x:-220,y:-36.5,width:100,height:73,text:"MESSAGEBOX_BLITZ_REACTIONS",textColor:"rgba(75, 21, 3, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"line",x:-80,y:40,width:400,height:8,$preload:"interface/line"}),new tb({name:"btn",width:241,height:73,$preload:"hint/button_big_green",$showed:function(){cb()>=Bc.config.getAsInt("price_shop_light3",3500)?this.image="hint/button_big_green":this.image="hint/button_big_gray"},on:{mousefocusclick:function(){cb()>=Bc.config.getAsInt("price_shop_light3",3500)&&(Kd.events.trigger("buyFull"),a.close())}},children:[new mc({name:"text",x:-120.5,y:-36.5,width:241,height:73,text:Bc.config.getAsInt("price_shop_light3",3500),textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"lightning",x:70,y:0,width:135,height:145,scale:.25,$preload:"message_box/energy_card"})]})]}),new Kc({name:"button3",x:80,y:200,$portrait:{y:300},children:[new nc({name:"text1",x:-300,y:-36.5,width:100,height:73,text:"+1",textColor:"rgba(189, 87, 5, 1)",textAlign:"center",fontType:"medium"}),new nc({name:"text2",x:-220,y:-36.5,width:100,height:73,text:"MESSAGEBOX_BLITZ_REACTIONS",textColor:"rgba(75, 21, 3, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"line",x:-80,y:40,width:400,height:8,$preload:"interface/line"}),new tb({name:"btn",width:241,height:73,$preload:"hint/button_big_blue",on:{mousefocusclick:function(){Kd.events.trigger("closed"),a.close()}},children:[new nc({name:"text",x:-115,y:-36.5,width:241,height:73,text:"HINT_DLG_BUY_HINT",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font",timer:null,$hidden:function(){this.timer&&this.timer.stop()},$showed:function(){function a(){var a=1e3*Sa(),c=Math.floor(a/36e5),d=Math.floor((a-36e5*c)/6e4),e=Math.floor((a-36e5*c-6e4*d)/1e3);if(a>0){var f="";c>0&&(f+="{h}"+Qc.tr("FORMAT_TIME_HOUR")+" "),d>0&&(f+="{m}"+Qc.tr("FORMAT_TIME_MINUTE")+" "),e>0&&(f+="{s}"+Qc.tr("FORMAT_TIME_SECOND")),b.changeTextDefinition(f.format({h:c,m:d,s:e}))}else b.changeTextDefinition("HINT_DLG_BUY_HINT")}var b=this;a(),void 0===this.timer?this.timer=new Jc({autoplay:!0,duration:1/0,loop:!0,delay:1e3,on:{step:function(){a()}}}):this.timer.play()}})]})]}),Bc.config.getAsBool("light_for_ad",!1)?new Kc({name:"button4",x:80,y:300,$portrait:{y:400},children:[new nc({name:"text1",x:-300,y:-36.5,width:100,height:73,text:"+"+Bc.config.getAsInt("light_for_ad_reward",1),textColor:"rgba(189, 87, 5, 1)",textAlign:"center",fontType:"medium"}),new nc({name:"text2",x:-220,y:-36.5,width:100,height:73,text:"MESSAGEBOX_BLITZ_REACTIONS",textColor:"rgba(75, 21, 3, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"line",x:-80,y:40,width:400,height:8,$preload:"interface/line"}),new tb({name:"btn",width:241,height:73,$preload:"hint/button_big_blue",$showed:function(){var a=this;Bc.ads.isAdAvailable(h.REWARDED_AD,function(b){b?a.image="hint/button_big_blue":a.image="hint/button_big_gray"})},on:{mousefocusclick:function(){Bc.ads.isAdAvailable(h.REWARDED_AD,function(b){b&&Bc.ads.showAd(h.REWARDED_AD,function(){Kd.events.trigger("ad"),a.close()})})}},children:[new nc({name:"text",x:-60.25,y:-36.5,width:120.5,height:73,text:"SHOP_BONUS_DESC_WATCHVIDEO",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font_portraint_multiline_button"}),new Lc({name:"viewads",x:75,y:0,width:50,height:50,$preload:"shop_money/sign_viewads"})]})]}):new Kc]});Kd=new W({name:"alert-light",node:a,onShow:function(b){a.content.light.status.setLightPowerType(Ua()),a.content.light.status.setLightPower(0),a.content.light.status.setLightPowerCounter(0,$a()),Bc.config.getAsBool("light_for_ad",!1)&&(a.content.button1.y=sc()?60:-40,a.content.button2.y=sc()?140:40,a.content.button3.y=sc()?220:120,a.content.button4.y=sc()?300:200)},api:{updateLightPower:function(b){a&&(a.content.light.status.setLightPower(b),a.content.light.status.setLightPowerCounter(Za(),$a()))},updateLightPowerType:function(b){a&&(a.content.light.status.setLightPowerType(b),a.content.light.status.setLightPowerCounter(Za(),$a()))},updateLightPowerCounter:function(b,c){a&&a.content.light.status.setLightPowerCounter(b,c)}}})});var Ld;Bc.on("ready",function(){var a,b,c,d=new wb({children:[new Kc({x:-306,y:-254,children:[new Lc({name:"bkg",x:302,y:259,width:604,height:517,$preload:"message_box/alert_border"}),new Kc({x:0,y:0,children:[new Lc({x:282,y:105,width:524,height:400,$preload:"message_box/mission_rays",$base:{scale:0},$showed:function(){Xc.animate(this,"scale",{duration:5e3,loop:!0,reverse:!0,from:.4,to:1,easing:Vc.inOutSine})}}),b=new Kc({x:290,y:105})]}),new Kc({x:300,y:350,children:[a=new jc]}),c=new nc({name:"message",font:"font",x:sc()?95:145,y:sc()?140:145,width:sc()?403:303,height:122,$portrait:{x:95,y:140,width:403},text:"MISSION_ELEMENT_DESC",format:["abc"],textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"}),new nc({font:"font",x:sc()?90:140,y:sc()?220:215,width:sc()?420:320,height:90,$portrait:{x:90,y:220,width:420},text:"MISSION_ELEMENT_REWARD",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"}),new tb({name:"middle",x:298,y:452,width:241,height:73,$preload:"hint/button_big_blue",on:{mousefocusclick:function(){Ld.events.trigger("closed"),d.close()}},children:[new nc({name:"middle_text",font:"font",x:-67.5,y:-23,width:150,height:48,text:"MESSAGEBOX_CONTINUE",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]})]})]});Xc.bindCustomMethodsRecursive(d),Ld=new W({name:"alert-mission",node:d,onShow:function(e,f){var g=e.mission;a.destroyChildren(),b.destroyChildren(),Xc.factoryNode(Nb,{parent:b,name:g.element.id}),c.format[0]=g.element.text,c.changeTextDefinition("reward"===e.type?"MISSION_ELEMENT_CONGRATULATION":"MISSION_ELEMENT_DESC"),g.reward.hint&&Xc.factoryNode(Lc,{parent:a,width:138,height:130,image:"shop/hint_{}_sign".format(g.reward.hint.type.name),children:[Xc.factoryNode(nc,{name:"amount",font:"font",x:0,y:1,width:50,height:48,text:g.reward.hint.amount,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]}),Xc.factoryNode(Lc,{parent:a,width:138,height:130,image:"shop/energy_sign2",children:[Xc.factoryNode(nc,{name:"amount",font:"font",x:0,y:4,width:50,height:48,text:g.reward.mana,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]}),a.x=-a.width/2,f(d)}})});var Md;Bc.on("ready",function(){var a=null,b=new wb({children:[new Kc({name:"dialog",x:-15,y:-50,$portrait:{x:0,y:0},children:[new Lc({name:"bkg",width:979,height:598,$preload:"message_box/news_dialog_body",$portrait:{width:622,height:878}}),new Lc({name:"picture",x:sc()?0:-200,y:sc()?-70:50,width:100,height:100,image:void 0}),new nc({name:"title",x:-250,y:-277,width:500,height:150,$portrait:{y:-460},text:void 0,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:(sc(),"medium")}),new nc({name:"message",x:30,y:-320,width:400,height:598,$portrait:{x:-180,y:-100},text:void 0,textColor:sc()?"rgba(122, 10, 9, 1)":"rgba(0, 50, 101, 1)",textAlign:"left",fontType:sc()?"author":"font"}),new tb({name:"button_ok",x:235,y:180,width:300,height:150,$preload:"message_box/big_btn",$portrait:{x:0,y:390},on:{mousefocusclick:function(){Xc.openLink(a.link)}},children:[new nc({name:"text",x:-125,y:-80,width:250,height:150,text:void 0,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"button_left",x:-450,y:40,width:100,height:115,$preload:"message_box/arrow_left",$portrait:{x:-260,y:0},on:{mousefocusclick:function(){Md.changeNews(Bc.news.getPrevNews(a.id))}}}),new tb({name:"button_right",x:480,y:40,width:100,height:115,$preload:"message_box/arrow_right",$portrait:{x:260,y:0},on:{mousefocusclick:function(){Md.changeNews(Bc.news.getNextNews(a.id))}}}),new tb({name:"close",x:450,y:-200,width:86,height:85,$preload:"message_box/close",$portrait:{x:250,y:-320},on:{mousefocusclick:function(){b.close()}}})]})]});Md=new W({name:"alert-news",node:b,onShow:function(a){this.update(a.news)},update:function(c){a=c;var d={};d.width=393,d.height=408,d.image=a.image,Object.merge(b.content.dialog.picture,d),b.content.dialog.title.text=a.title,b.content.dialog.message.text=a.text,b.content.dialog.button_ok.text.text=a.button,setTimeout(function(){b.content.dialog.button_left.opacity=Bc.news.hasPrevNews(a.id)?1:0,b.content.dialog.button_right.opacity=Bc.news.hasNextNews(a.id)?1:0},1)},changeNews:function(a){var b=this;this.hideNews(function(){b.showNews(a)})},showNews:function(a,c){this.update(a);var d=300;Xc.animate(b.content.dialog.title,"opacity",{from:0,to:1,duration:d}),Xc.animate(b.content.dialog.message,"opacity",{from:0,to:1,duration:d}),Xc.animate(b.content.dialog.button_ok.text,"opacity",{from:0,to:1,duration:d});var e=Xc.animate(b.content.dialog.picture,"opacity",{from:0,to:1,duration:d});e.on("end",function(){c&&c()})},hideNews:function(a){var c=300;Xc.animate(b.content.dialog.title,"opacity",{from:1,to:0,duration:c}),Xc.animate(b.content.dialog.message,"opacity",{from:1,to:0,duration:c}),Xc.animate(b.content.dialog.button_ok.text,"opacity",{from:1,to:0,duration:c});var d=Xc.animate(b.content.dialog.picture,"opacity",{from:1,to:0,duration:c});d.on("end",function(){a&&a()})}})});var Nd;Bc.on("ready",function(){var a=new wb({children:[new Kc({name:"node",x:-384,y:-424,children:[new Lc({name:"bkg",x:388,y:396,width:609,height:578,$preload:"message_box/dialog_god"}),new Kc({name:"message_field",x:195,y:444,children:[new nc({name:"message",font:"font",x:0,y:0,width:380,height:0,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"})]}),new tb({name:"left",x:121,y:531,width:92,height:51,image:"message_box/button_yes",opacity:0,children:[new nc({name:"left_text",font:"font",x:-35,y:-17.5,width:70,height:30,text:"Yes",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"})]}),new tb({name:"right",x:384,y:531,width:92,height:51,opacity:0,image:"message_box/button_yes",children:[new nc({name:"right_text",font:"font",x:-35,y:-17.5,width:70,height:30,text:"No",textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:"font"})]}),new tb({name:"middle",x:384,y:583,width:227,height:69,$preload:"interface/button_big_orange",on:{mousefocusclick:function(){a.close()}},children:[new nc({name:"middle_text",font:"font",x:-138.5,y:-45,width:284,height:86,text:"CONTINUE",textColor:"rgba(78, 26, 0, 1)",textAlign:"center",fontType:"font"})]}),new Lc({name:"icon",x:375,y:372,width:120,height:86})]})]});Xc.bindCustomMethodsRecursive(a),Nd=new W({name:"alert-puzzle",node:a,onShow:function(b){a.content.node.message_field.message.changeTextDefinition(b.message),a.content.node.icon.image=b.image}})});var Od;Bc.on("ready",function(){var a="download",b="upload",c=new wb({children:[new Lc({name:"bkg",width:595,height:417,$preload:"message_box/dialog"}),new Kc({name:"message_field",x:-218,y:-134,children:[new nc({name:"message",x:0,y:0,width:435,height:150,text:void 0,textColor:"rgba(103, 57, 15, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"left",x:-107,y:90,width:212,height:86,$preload:"hint/button_small_green",on:{mousefocusclick:function(){Od.events.trigger(a),c.close()}},children:[new nc({name:"left_text",x:-63,y:-25,width:120,height:48,text:"MESSAGEBOX_DOWNLOAD",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]}),new tb({name:"right",x:105,y:90,width:212,height:86,$preload:"hint/button_small_orange",on:{mousefocusclick:function(){Od.events.trigger(b),c.close()}},children:[new nc({name:"right_text",x:-63,y:-25,width:120,height:48,text:"MESSAGEBOX_UPLOAD",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"font":"medium"})]})]});Od=new W({name:"alert-confirm",node:c,onShow:function(d){a=null!=d.name?"{}Download".format(d.name):"download",b=null!=d.name?"{}Upload".format(d.name):"upload",c.content.message_field.message.format=[d.date],c.content.message_field.message.changeTextDefinition("MESSAGEBOX_HAVE_SAVED_PROGRESS")}})});var Pd;Bc.on("ready",function(){function a(a,c,d){Xc.factoryNode(Lc,{parent:b,width:138,height:130,image:a,children:[Xc.factoryNode(nc,{name:"amount",font:"font",x:0,y:4,width:50,height:48,text:c,textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"}),Xc.factoryNode(nc,{name:"amount",font:"font",x:52,y:-65,width:380,height:130,text:d,textColor:"rgba(57, 33, 11, 1)",textAlign:"left",fontType:"author"})]})}var b,c,d={1:{image:"shop/hint_1_sign",description:"SHOP_HINT1_DESC"},2:{image:"shop/hint_2_sign",description:"SHOP_HINT2_DESC"},3:{image:"shop/hint_3_sign",description:"SHOP_HINT3_DESC"},no_pairs:{image:"shop/dotted_border_sign",description:"SHOP_DOTTED_DESC"},no_reaction:{image:"shop/gray_border_sign",description:"SHOP_GRAY_DESC"},no_repeat:{image:"shop/not_repeat_sign",description:"SHOP_NO_REPEAT_DESC"},mana:{image:"shop/energy_sign2",description:"SHOP_MANA_DESC"}},e=new wb({children:[new Kc({x:-306,y:-254,children:[new Lc({name:"bkg",x:301,y:215,width:602,height:530,$preload:"message_box/dialog_happy"}),new Kc({x:120,y:250,children:[b=new ub({spacing:-30})]}),c=new nc({name:"message",font:"font",x:(sc(),76),y:(sc(),20),width:(sc(),450),height:122,text:"SHOP_BONUS_MESSAGEBOX_VIEWOFFERS",textColor:"rgba(57, 33, 11, 1)",textAlign:"center",fontType:"medium"}),new tb({name:"right",x:559,y:4,width:86,height:85,$preload:"message_box/close",on:{mousefocusclick:function(){Pd.events.trigger("closed"),e.close()}}})]})]});Xc.bindCustomMethodsRecursive(e),Pd=new W({name:"alert-reward",node:e,onShow:function(c,f){b.destroyChildren();for(var g=c.items,h=0;h<g.length;h++){var i=g[h],j=Object.merge({amount:i.amount},d[i.name]);a(j.image,j.amount,j.description)}b.x=0,b.y=-b.height/2,f(e)}})});var Qd;Bc.on("ready",function(){var a,b=new wb({children:[new ic({y:-50}),new Lc({name:"bkg",y:-50,width:701,height:768,$preload:"message_box/dialog_god2"}),a=new Kc({name:"dlg_inside",x:-361,y:-488,children:[new Kc({name:"content",x:243,y:302}),new nc({name:"msg",x:155,y:510,width:440,height:74,textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author"}),new tb({name:"middle",x:377,y:685,width:227,height:69,$preload:"interface/button_big_orange",on:{mousefocusclick:function(){b.close(),Qd.events.trigger("closed")}},children:[new nc({name:"middle_text",x:-140.5,y:-43.5,width:284,height:86,text:"CONTINUE",textColor:"rgba(78, 26, 0, 1)",textAlign:"center",fontType:"font"})]})]})]});b.contentInside=a.content,Qd=new W({name:"alert-winner",node:b,onShow:function(b){a.msg.format=b.message.format,a.msg.changeTextDefinition(b.message.text)}})});var Rd;Bc.on("ready",function(){Rd=new W({name:"alphabet",onShow:function(a,b){var c=this;ed.show(function(a){c.appendPartial(a.statusbar,lf,{title:"ALPHABET_SCR_TITLE"}),c.appendPartial(a.left,od).appendPartial(a.toolbar,qf),b(a)})},api:{nav:od.api.nav,desc:md.api.desc}})});var Sd;Bc.on("ready",function(){var a,b=new Kc({$showed:function(){Xc.playSound("gamemode_select")},children:[new Kc({name:"lines",x:-499,y:-319,$showed:function(){var a=b.lines;a.opacity=0,Xc.animate(a,"opacity",{delay:150,duration:200,from:0,to:1,easing:Vc.linear}),Xc.animate(a,"y",{delay:150,duration:200,from:a.y-85,to:a.y-0,easing:Vc.linear})},children:[new Ab({name:"artifacts",on:{artifactClick:function(a){Sd.events.trigger("artifactClick",a)}}})]}),new Kc({name:"leftDesc",x:-460}),new Kc({name:"rightDesc"})]});Sd=new W({name:"artifacts",onShow:function(c,d){var e=this;this.api.artifacts.hideDesc(),b.lines.artifacts.updateArtifacts(c),ed.show(function(c){a=c,Xc.setViewPartial(a.left,b),sc()?e.appendPartial(a.statusbar,lf,{title:"PLAYMENU_SCR_ARTIFACTS"}):e.appendPartial(a.statusbar,cf,{center:"PLAYMENU_SCR_ARTIFACTS"}),e.appendPartial(a.toolbar,pf,null,function(a){e.appendPartial(a.button1,uf).appendPartial(a.button5,zf),Bc.promo.hasUniverse()&&e.appendPartial(a.button3,Xf)}),d(a)})},api:{artifacts:{hideDesc:function(){var a=b.lines.artifacts,c=a.leftGroup,d=a.rightGroup;c.opacity=1,d.opacity=1,Xc.setViewPartial(b.leftDesc,null),Xc.setViewPartial(b.rightDesc,null)},showLeftDesc:function(a){this.hideDesc(),b.lines.artifacts.leftGroup.opacity=0,sc()&&(b.lines.artifacts.rightGroup.opacity=0),Xc.setViewPartial(b.rightDesc,null),Sd.appendPartial(b.leftDesc,Td,a)},showRightDesc:function(a){this.hideDesc(),b.lines.artifacts.rightGroup.opacity=0,sc()&&(b.lines.artifacts.leftGroup.opacity=0),Xc.setViewPartial(b.leftDesc,null),Sd.appendPartial(b.rightDesc,Td,a)},showDesc:function(a,b){var c=Math.floor(a/Ab.ITEMS_IN_COLUMN);sc()&&(c=0),0===c?this.showRightDesc(b):this.showLeftDesc(b)},showLockedElementAlert:function(){Sd.appendPartial(a.alert,Cd,{message:"ART_IS_LOCKED_MSG"}),Xc.setNodeStateRecursive(a.alert,"showed")}}}})});var Td;Bc.on("ready",function(){var a="slot_{}",b=new Kc({x:-22,y:-314,$portrait:{x:-300,y:-380,scale:1.2},children:[new Kc({name:"right",x:-9,y:-16,children:[new Kc({name:"header",x:130,y:15,children:[new Lc({x:125,y:105,width:280,height:190,$preload:"artifacts_menu/dark_under_artefact"}),new Kc({name:"artifact",x:61,y:20,children:[new Lc({name:"stand",x:66,y:131,width:131,height:51,$preload:"artifacts_menu/stand"}),new Lc({name:"icon",x:65.5,y:76.5,width:131,height:153})]})]}),new Kc({name:"slots",x:67,y:200,children:[new Kc({name:a.format(0),x:16,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65,height:65,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83})]}),new Lc({name:"plus_1",x:132,y:50,width:22,height:22,$preload:"artifacts_menu/plus"}),new Kc({name:a.format(1),x:150,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65,height:65,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83})]}),new Lc({name:"plus_2",x:266,y:50,width:22,height:22,$preload:"artifacts_menu/plus"}),new Kc({name:a.format(2),x:284,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65,height:65,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83})]})]}),new nc({name:"desc",x:40,y:294,width:447,height:180,text:"123",textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author"}),new Kc({name:"share_widget",x:160,y:490,children:[new tb({name:"wiki",x:96,y:32,width:64,height:64,$preload:"interface/button_wikipedia",on:{mousefocusclick:function(){Td.events.trigger("wikiButtonClicked")}},opacity:Bc.config.getAsBool("wiki_button_enabled",!0)?1:0})]})]})]});Td=new W({name:"artifacts-desc",node:b,onShow:function(c){b.right.header.artifact.icon.image="artifacts_menu/{}".format(c.id),b.right.desc.changeTextDefinition(c.desc);var d=b.right.slots;c.elements.forEach(function(b,c){var e=d[a.format(c)].element;e.destroyChildren(),new Nb({parent:e,name:b})})}})});var Ud;Bc.on("ready",function(){var a=new Kc({$showed:function(){Xc.playSound("howtoplay_screen_transition")},x:-512,y:-384,$portrait:{x:-614.4,y:-384*1.2,scale:1.2},children:[new Kc({name:"left_page",x:33,y:82,$page0:{opacity:1,x:280,y:100},$page1:{opacity:0,x:4e4,y:100},children:[new Lc({name:"left_help",x:244,y:286,width:495,height:567,$preload:xc.HELP_FRAGMENTED?null:"interface/help_artifact_left",opacity:0,$showed:function(){var b=a.left_page.left_help;Xc.animate(b,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})}}),new Lc({x:222,y:300,width:486,height:10,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_artifact_left_fragment_0":null,x:222,y:190,width:371,height:200}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_artifact_left_fragment_1":null,x:222,y:500,width:262,height:157}),new nc({x:15,y:20,width:440,height:50,text:"ART_HELP_P1_M1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",name:"u3e693d99",opacity:0,fontType:sc()?"font":"medium",$showed:function(){var b=a.left_page.u3e693d99;Xc.animate(b,"y",{delay:300,duration:400,from:b.y-140,to:b.y-0,easing:Vc.outSine}),Xc.animate(b,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})}}),new nc({x:15,y:300,width:440,height:50,text:"ART_HELP_P2_M1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",name:"ue03d6f54",opacity:0,fontType:sc()?"font":"medium",$showed:function(){var b=a.left_page.ue03d6f54;Xc.animate(b,"y",{delay:300,duration:400,from:b.y-80,to:b.y-0,easing:Vc.outSine}),Xc.animate(b,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})}})]}),new Kc({name:"right_page",x:519,y:82,$page0:{opacity:0,x:4e4,y:100},$page1:{opacity:1,x:280,y:100},children:[new Lc({name:"right_help",x:219,y:288,width:495,height:567,$preload:xc.HELP_FRAGMENTED?null:"interface/help_artifact_right",opacity:0,$showed:function(){var b=a.right_page.right_help;Xc.animate(b,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})}}),new Lc({x:222,y:300,width:486,height:10,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_artifact_right_fragment_0":null,x:222,y:190,width:405,height:146}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_artifact_right_fragment_1":null,x:222,y:500,width:451,height:159}),new nc({x:15,y:20,width:440,height:50,text:"ART_HELP_P3_M1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",name:"uda4cf04d",opacity:0,fontType:sc()?"font":"medium",$showed:function(){var b=a.right_page.uda4cf04d;Xc.animate(b,"y",{delay:300,duration:400,from:b.y-140,to:b.y-0,easing:Vc.outSine}),Xc.animate(b,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})}}),new nc({x:15,y:300,width:440,height:50,text:"ART_HELP_P4_M1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",name:"u6158027c",opacity:0,fontType:sc()?"font":"medium",$showed:function(){var b=a.right_page.u6158027c;Xc.animate(b,"y",{delay:300,duration:400,from:b.y-80,to:b.y-0,easing:Vc.outSine}),Xc.animate(b,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})}})]})]});Ud=new W({name:"artifacts-help",onShow:function(b,c){var d=this,e=b&&b.page;ed.show(function(b){Xc.setViewPartial(b.left,a),sc()?Xc.setViewPartial(b.statusbar,null):d.appendPartial(b.statusbar,cf,{center:"HELP_SCR_TITLE"}),d.appendPartial(b.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf),sc()&&0===e&&d.appendPartial(a.button5,Ff),Bc.promo.hasUniverse()&&d.appendPartial(a.button3,Xf)}),c(b),sc()&&(e?Xc.setNodeStateRecursive(a,"page1"):Xc.setNodeStateRecursive(a,"page0"))})}})});var Vd;Bc.on("ready",function(){function a(a){return{mousefocusclick:function(){Vd.events.trigger("buyButtonClicked",a)}}}function b(a){return{mousefocusclick:function(){Vd.events.trigger("useButtonClicked",a)}}}var c,d=new Kc({$showed:function(){Xc.playSound("gamemode_select")},x:sc()?-256:-495,y:-384,children:[new Kc({name:"hint1",x:0,y:85,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:300,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:300,duration:400,from:this.y-500,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"ART_HINT_DESC_FIFTY_FIFTY",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author"})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_arti_01",hintId:"artifacts_1"}),new Ib({name:"use",x:191,y:127,on:b("artifacts_1")}),new Hb({x:361,y:127,on:a({hint:"artifacts_1",message:"ART_MSG_BUY_FIFTY_FIFTY"}),hintId:"artifacts_1"})]}),new Kc({name:"hint2",x:0,y:250,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:200,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:200,duration:400,from:this.y-665,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:200,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"ART_HINT_DESC_SHOW_GROUP",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author"})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_arti_02",hintId:"artifacts_2"}),new Ib({name:"use",x:191,y:127,on:b("artifacts_2")}),new Hb({x:361,y:127,on:a({hint:"artifacts_2",message:"ART_MSG_BUY_SHOW_GROUP"}),hintId:"artifacts_2"})]}),new Kc({name:"hint3",x:0,y:415,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:100,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:100,duration:400,from:this.y-830,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"ART_HINT_DESC_SHOW_ELE",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author"})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_arti_03",hintId:"artifacts_3"}),new Ib({name:"use",x:191,y:127,on:b("artifacts_3")}),new Hb({x:361,y:127,on:a({hint:"artifacts_3",message:"ART_MSG_BUY_SHOW_ELE"}),hintId:"artifacts_3"})]})]});Xc.bindCustomMethodsRecursive(d),Bc.on("hintRecharged",function(){Vd.api.show(c)}),Vd=new W({name:"hints",node:d,api:{hints:{},show:function(a){if(c=a,null!=a)for(var b=0;b<a.length;++b){var e=a[b].amount,f="hint"+(b+1);e>0?(Xc.setNodeStateRecursive(d[f].icon,"active"),Xc.setNodeStateRecursive(d[f].use,"active")):a[b].canShowAd&&Xc.setNodeStateRecursive(d[f].use,"ad"),d[f].icon.remain.format=[e],d[f].icon.remain.changeTextDefinition("HINT1_DLG_REMAIN")}}}})});var Wd;Bc.on("ready",function(){var a=new Kc;Wd=new W({name:"artifacts-list",node:a})});var Xd;Bc.on("ready",function(){var a=new Kc;Xd=new W({name:"artifacts-nav",node:a})});var Yd;Bc.on("ready",function(){function a(a){return o.slots[m.format(a)].element}function b(a){return o.slots[m.format(a)].group}var c,d,e,f,g,i,j,k,l,m="slot_{}",n=3,o=new Kc({x:sc()?-256:-22,y:-314,children:[new Lc({x:250,y:115,width:280,height:190,$portrait:{y:65},$preload:"artifacts_menu/dark_under_artefact"}),new Kc({name:"artifact",x:180,y:50,$portrait:{y:0},children:[new Lc({name:"stand",x:66,y:131,width:131,height:51,$preload:"artifacts_menu/stand"}),new Lc({name:"icon",x:65.5,y:76.5,width:131,height:153})]}),new Kc({name:"slots",x:57,y:210,children:[new Kc({name:m.format(0),x:16,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65*ad,height:65*ad,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83}),new Kc({name:"group",x:8+49*.83,y:8+49*.83+70,scale:.3}),new Lc({name:"close",x:8,y:8,width:32,height:32,opacity:0,$preload:"artifacts_menu/close_element",$showed:{opacity:0},$occupied:{opacity:1},$free:{opacity:0}}),sc()?new nc({name:"tap",x:5,y:4,width:60*ad,height:65*ad,text:"HELP_SCR_TAP",textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author",$showed:{opacity:1},$occupied:{opacity:0},$free:{opacity:1}}):new Kc,new tb({x:65*ad/2,y:65*ad/2,width:65*ad,height:65*ad,on:{mousefocusclick:function(){Yd.events.trigger("slotSelected",0)}}})]}),new Lc({name:"plus_1",x:132,y:50,width:22,height:22,$preload:"artifacts_menu/plus"}),new Kc({name:m.format(1),x:150,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65*ad,height:65*ad,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83}),new Kc({name:"group",x:8+49*.83,y:8+49*.83+70,scale:.3}),new Lc({name:"close",x:8,y:8,width:32,height:32,opacity:0,$preload:"artifacts_menu/close_element",$showed:{opacity:0},$occupied:{opacity:1},$free:{opacity:0}}),sc()?new nc({name:"tap",x:5,y:4,width:60*ad,height:65*ad,text:"HELP_SCR_TAP",textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author",$showed:{opacity:1},$occupied:{opacity:0},$free:{opacity:1}}):new Kc,new tb({x:65*ad/2,y:65*ad/2,width:65*ad,height:65*ad,on:{mousefocusclick:function(){Yd.events.trigger("slotSelected",1)}}})]}),new Lc({name:"plus_2",x:266,y:50,width:22,height:22,$preload:"artifacts_menu/plus"}),new tb({name:m.format(2),x:284,y:0,children:[new Lc({name:"frame",x:49,y:49,width:65*ad,height:65*ad,$preload:"artifacts_menu/place_for_element"}),new Kc({name:"element",x:8+49*.83,y:8+49*.83,scale:.83}),new Kc({name:"group",x:8+49*.83,y:8+49*.83+70,scale:.3}),new Lc({name:"close",x:8,y:8,width:32,height:32,opacity:0,$preload:"artifacts_menu/close_element",$showed:{opacity:0},$occupied:{opacity:1},$free:{opacity:0}}),sc()?new nc({name:"tap",x:5,y:4,width:60*ad,height:65*ad,text:"HELP_SCR_TAP",textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author",$showed:{opacity:1},$occupied:{opacity:0},$free:{opacity:1}}):new Kc,new tb({x:65*ad/2,y:65*ad/2,width:65*ad,height:65*ad,on:{mousefocusclick:function(){Yd.events.trigger("slotSelected",2)}}})]})]}),new nc({name:"enigma",x:37,y:350,width:450,height:75,text:"",textColor:"rgba(79, 43, 21, 1)",textAlign:"center",fontType:"author"}),new nc({name:"attemptsText",x:-113,y:510,width:450,text:"ART_NUM_OF_ATTEMPTS",textColor:"rgba(31, 77, 67, 1)",textAlign:"right",fontType:sc()?"author":"small",$showSubmit:function(){this.changeTextDefinition("ART_NUM_OF_ATTEMPTS")},$showBuy:function(){this.changeTextDefinition("ART_TIME_FOR_RESET_ATTEMPTS")}}),i=new nc({name:"attempts",x:347,y:510,width:450,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:sc()?"author":"small"}),new Kc({name:"buttons",x:93,y:424,children:[new tb({name:"reset",x:58.5,y:42.5,width:75,height:75,$preload:["artifacts_menu/reset_button_d","artifacts_menu/reset_button"],$enabled:{image:"artifacts_menu/reset_button"},on:{mousefocusclick:function(){Yd.events.trigger("resetButtonClicked")}}}),j=new tb({name:"submit",x:241.5,y:40,width:234,height:80,$preload:["artifacts_menu/submit_button_d","artifacts_menu/submit_button"],$enabled:{image:"artifacts_menu/submit_button"},$showSubmit:function(){this.submitText.opacity=1,this.ad.opacity=0,this.submitText.changeTextDefinition("BTN_SUBMIT")},$showBuy:function(){var a=this;this.submitText.opacity=0,this.ad.opacity=0,Bc.config.getAsBool("attempts_rewarded_ads",!1)?Bc.ads.isAdAvailable(h.REWARDED_AD,function(b){if(b){var c=Bc.config.getAsInt("attempts_ads_acceleration_time",120)/60;a.ad.opacity=1,a.ad.text.text="-"+c+Qc.tr("FORMAT_TIME_MINUTE")}else a.submitText.opacity=1,a.submitText.changeTextDefinition("BTN_BUY_ATTEMPTS")}):(a.submitText.opacity=1,this.submitText.changeTextDefinition("BTN_BUY_ATTEMPTS"))},on:{mousefocusclick:function(){Yd.events.trigger("submitButtonClicked")}},children:[new nc({name:"submitText",x:-92.5,y:-12,width:180,height:20,text:"BTN_SUBMIT",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"}),new Kc({name:"ad",children:[new Lc({x:-70,name:"ad",image:"hint/ad_small",width:60,height:46}),new nc({name:"text",x:-82.5,y:-12,width:180,height:20,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]})]})]});Yd=new W({name:"artifacts-play",onShow:function(a,b){for(var h=this,i=a.artifact,j=0;n>j;j++)o.slots[m.format(j)].element.destroyChildren(),o.slots[m.format(j)].group.destroyChildren();ed.show(function(j){c=j,k=c.left,l=sc()?c.left:c.right,h.appendPartial(c.statusbar,df,{mana:a.mana},function(a){e=a}),sc()?h.appendPartial(c.statusbar,lf,{title:"ART_STATUSMAR_MSG_RIGHT"},function(a){f=a}):h.appendPartial(c.statusbar,cf,{left:"ART_STATUSMAR_MSG_LEFT",right:"ART_STATUSMAR_MSG_RIGHT"},function(a){f=a}),h.appendPartial(k,Vd,null,function(a){d=a}),h.appendPartial(c.toolbar,pf,null,function(a){h.appendPartial(a.button1,uf),h.appendPartial(a.button2,Af),h.appendPartial(a.button5,zf),Bc.promo.hasUniverse()&&h.appendPartial(a.button3,Xf)}),h.appendPartial(k,nd,null,function(a){g=a}),Xc.setViewPartial(l,o),o.artifact.icon.image="artifacts_menu/{}_glass".format(i.id),o.enigma.changeTextDefinition(i.enigma),b(c)})},api:{encyclopedia:nd.api.nav,showHints:function(a,b){Xc.setViewPartial(k,d),Xc.setNodeStateRecursive(d,"base"),Xc.setNodeStateRecursive(d,"showed"),Vd.api.show(a),sc()?lf.api.setTitle(" "):(Xc.setViewPartial(c.statusbar,e),df.api.updateMana(b))},hideHints:function(a){a=a||!sc(),Xc.setViewPartial(k,a?nd.node:o),Xc.setViewPartial(c.statusbar,f),sc()&&!a&&lf.api.setTitle("ART_STATUSMAR_MSG_RIGHT")},showBuyDialog:function(a,b,d){Yd.appendPartial(c.alert,Ed,{message:b,price:a.buyPrice,messageFormat:d}),Xc.setNodeStateRecursive(c.alert,"showed")},showNoManaAlert:function(){Yd.appendPartial(c.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(c.alert,"showed")},showEncyclopedia:function(){Xc.setViewPartial(k,nd.node),sc()&&lf.api.setTitle(" ")},hideEncyclopedia:function(){sc()&&(Xc.setViewPartial(k,o),lf.api.setTitle("ART_STATUSMAR_MSG_RIGHT"))},showBuyAttempts:function(a,b){Yd.appendPartial(c.alert,Ed,{message:"ART_BUY_ATTEMPTS_MSG",messageFormat:a,price:b}),Xc.setNodeStateRecursive(c.alert,"showed")},showGotoBank:function(){Bc.config.getAsBool("bank_button_enabled",!0)&&Bc.payments.isAvailable()?Yd.appendPartial(c.alert,Fd,{message:"MSG_NO_MANA"}):Yd.appendPartial(c.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(c.alert,"showed")},changeSubmitToBuy:function(){Xc.setNodeStateRecursive(o,"showBuy")},changeBuyToSubmit:function(){Xc.setNodeStateRecursive(o,"showSubmit")},setAttempts:function(a){i.changeTextDefinition(""+a)},setTimeToRecharge:function(a){a=Math.floor(a/1e3);var b=Math.floor(a/3600),c=Math.floor((a-3600*b)/60);i.text="{}h:{}m".format(b,c)},play:{SLOTS_LENGTH:n,appendElement:function(b,c){this.popElement(c);var d=a(c);Xc.factoryNode(Pb,{parent:d,name:b.id,element:b,on:{selected:function(){Yd.events.trigger("elementClicked",c)}}}),sc()&&Xc.setNodeStateRecursive(d.parent,"occupied")},popElement:function(b){var c=a(b);sc()&&Xc.setNodeStateRecursive(c.parent,"free"),c.destroyChildren()},appendElementGroup:function(a,c){var d=b(c);Xc.factoryNode($b,{parent:d,name:a})},toggleResetButton:function(a){var b=o.buttons.reset,c="enabled"!==b.$.currentState?"enabled":"base";void 0!==a&&(c=a?"enabled":"base"),Xc.setNodeState(b,c)},toggleSubmitButton:function(){var a=o.buttons.submit,b="enabled"!==a.$.currentState?"enabled":"base";Xc.setNodeState(a,b)},enableSubmitButton:function(){Xc.setNodeState(o.buttons.submit,"enabled")},disableSubmitButton:function(){Xc.setNodeState(o.buttons.submit,"base")},markAsFailed:function(){for(var a=0;n>a;a++)o.slots[m.format(a)].element.children[0].markAsFailed()},showWinnerAlert:function(a){Yd.appendPartial(c.alert,Qd,{message:{text:"ART_COMPLETE_MSG",format:[Qc.tr(a.name)]}},function(b){b.contentInside.destroyChildren(),Xc.factoryNode(Lc,{parent:b.contentInside,x:140,y:95,width:280,height:190,image:"artifacts_menu/dark_under_artefact"}),Xc.factoryNode(Kc,{parent:b.contentInside,name:"artifact",x:71,y:15,children:[Xc.factoryNode(Lc,{name:"stand",x:66,y:131,width:131,height:51,image:"artifacts_menu/stand"}),Xc.factoryNode(Lc,{name:"icon",x:65.5,y:76.5,width:131,height:153,image:"artifacts_menu/{}".format(a.id)})]}),Xc.setNodeStateRecursive(b,"showed")})}}}})});var Zd;Bc.on("ready",function(){function a(a){return new Gb({text:"+"+a.getAmount()})}function b(a){return new Eb({image:j[a.getInfo()],text:a.getAmount()})}function c(c){switch(c.type){case"mana":return a(c);case"hint":return b(c)}}function d(a,b,d){var e=new Fb({image:k[a.type],width:640,height:a.special?120:100,box:{price:b&&"undefined"!=b.price?b.price:a.price,oldPrice:b&&"undefined"!=b.price?a.price:"",id:a.id,special:a.special,currency:a.currency?a.currency:""}});if(e.on("buy",function(){Zd.events.trigger("buy",a)}),a.forEach(function(a){e.setAmount(a.getAmount())}),b){var f=new Cb({bonusPack:d});e.setBonus(f),b.forEach(function(a){f.addBonus(c(a))})}return e}function e(a){var b=new Db({width:640,height:100});return b.on("ad",function(){Zd.events.trigger("ad")}),b.setAmount(a),b}var f,g,h=new Kc({$showed:function(){Xc.playSound("store_screen_transition")},x:sc()?-320:-512,y:sc()?-480:-384,$portrait:{x:-370,y:-500,scale:1.35},children:[new Kc(sc()?{name:"container",children:[new Wb({name:"content",x:230,y:350,width:640,height:580,children:[g=new ub({name:"column",$refresh:function(){this.updatePositions(this.parent.parent.parent.height/2),this.y=-this.parent.parent.parent.height/2,this.parent.width=this.width,this.parent.height=this.height,this.parent.parent.parent.updateContent()}})]})]}:{name:"container",children:[new Wb({name:"content",x:230,y:335,width:640,height:520,children:[g=new ub({name:"column",$refresh:function(){this.updatePositions(this.parent.parent.parent.height/2),this.y=-this.parent.parent.parent.height/2,this.parent.width=this.width,this.parent.height=this.height,this.parent.parent.parent.updateContent()}})]}),new Kc({name:"right_page_scroll_field",x:519,y:86,children:[]})]})]});Xc.bindCustomMethodsRecursive(h);var i,j={hint_1:"shop/hint_1_sign",hint_2:"shop/hint_2_sign",hint_3:"shop/hint_3_sign",hint_no_pairs:"shop/dotted_border_sign",hint_no_reaction:"shop/gray_border_sign",hint_no_repeat:"shop/not_repeat_sign"},k={paper_bag:"shop_money/energy_slot_01",bag:"shop_money/energy_slot_02",box:"shop_money/energy_slot_03",suitcase:"shop_money/energy_slot_04",chest:"shop_money/energy_slot_05",infinity:"shop_money/energy_slot_infinity_01"};Zd=new W({name:"shop",onShow:function(a,b){var c=this;ed.show(function(j){f=j,Xc.setViewPartial(f.left,h),i=f.statusbar.$.lastPartial,sc()?c.appendPartial(f.statusbar,ef,a,function(a){}):c.appendPartial(f.statusbar,ef,a,function(a){}),c.appendPartial(f.toolbar,pf,null,function(a){c.appendPartial(a.button1,uf)}),b(f);var k,l=a.manaShop.bank.createIterator(),m=0,n=a.manaShop.createBonusIterator(),o=n.next();for(o&&ef.api.activateBonus(o);k=l.next();){n.reset();var p=d(k,o&&o.bank.getBoxById(k.id),o);g.appendChild(p),p.x=-500,Xc.animate(p,"x",{duration:100,delay:100*m,from:p.x,to:0}),m++}if(Bc.config.getAsBool("bank_rewarded_ads",!1)){var q=e(Bc.config.getAsInt("bank_ads_mana_reward",5)),r=0,s=0;sc()?(r=-500,g.appendChild(q)):(r=-1e3,s=180,q.y=57,h.container.right_page_scroll_field.appendChild(q)),q.x=r,Xc.animate(q,"x",{duration:100,delay:100*m,from:q.x,to:s})}Xc.setNodeStateRecursive(h,"refresh")}),Bc.remoteStorage.on("restoreOffer",this.onRestoreOffer)},onHide:function(a){Xc.setNodeStateRecursive(g,"remove"),Xc.removeChildren(g),f.statusbar.$.lastPartial=i,a&&a(),Bc.remoteStorage.off("restoreOffer",this.onRestoreOffer)},api:{board:{updateMana:function(a){ef.api.updateMana(a)},refresh:function(){Xc.setNodeStateRecursive(h,"refresh")},showBuyDialog:function(){Zd.appendPartial(f.alert,Fd,{message:"BUY_THIS_INAPP"}),Xc.setNodeStateRecursive(f.alert,"showed")},showSuccessDialog:function(a){f&&(Zd.appendPartial(f.alert,Jd,{id:a}),Xc.setNodeStateRecursive(f.alert,"showed"))},showBaseDialog:function(a){f&&(Zd.appendPartial(f.alert,Cd,a),Xc.setNodeStateRecursive(f.alert,"showed"))},showConfirmDialog:function(a){f&&(Zd.appendPartial(f.alert,Fd,a),Xc.setNodeStateRecursive(f.alert,"showed"))}}},onRestoreOffer:function(){Bc.remoteStorage.getRestoreOffer(function(a){"undefined"!=typeof a&&(Zd.appendPartial(f.alert,Od,{name:"bank",date:a.date}),Xc.setNodeStateRecursive(f.alert,"showed"))})}})});var $d;Bc.on("ready",function(){function a(a){cg.api.tutorial.visible(a),sc()&&v.center.$.onscreen&&(v.center.opacity=a?1:0)}var b,c,d,e,f,g,h,i,j,k,l,m={},n={},o=[],p={},q={},r=new Kc({opacity:0,$show:function(a){this.opacity=1,this.achievementBar.image=xc.REMOVE_SMALL_ACHIEVEMENTS?a.largeImage:a.image,this.description.changeTextDefinition(a.name)},$hide:{opacity:0},children:[new Lc({width:572,height:144,$preload:sc()?"achievements/paper_up":null}),new Lc({name:"achievementBar",$preload:"interface/button_find",width:76,height:76,x:sc()?-228:0,y:sc()?-10:0}),new nc({name:"description",x:sc()?-192:58,y:-30,width:sc()?384:600,height:40,text:"achievement",textColor:"rgba(255, 255, 255, 1)",textAlign:sc()?"center":"left",fontType:sc()?"font":"author"})]});Xc.bindCustomMethodsRecursive(r);var s=new Kc({opacity:0,$show:function(a){this.opacity=1},$hide:{opacity:0},children:[new Lc({width:572,height:144,$preload:sc()?"achievements/paper_up":null}),new Lc({name:"achievementBar",$preload:"artifacts_menu/lock_notif",width:76,height:76,x:sc()?-228:0}),new nc({name:"description",x:sc()?-192:58,y:-30,width:sc()?384:600,height:40,text:"ARTIFACT_NOTIF_MSG",textColor:"rgba(255, 255, 255, 1)",textAlign:sc()?"center":"left",fontType:sc()?"font":"author"})]});Xc.bindCustomMethodsRecursive(s);var t=new Kc({$show:function(){t.statusbar.opacity=0;var a=t.parent&&t.parent.children[0];a.opacity=1},children:[new Lc({name:"statusbar",x:49,y:-352,width:1074,height:40,opacity:0,$preload:sc()?null:"interface/up_board_2"}),new Kc({name:"mgr",x:-1e4,y:sc()?-442:-341,width:1074,height:40,children:[],$registered:{},$register:function(a,b){this.$.registered[a]=b,this.appendChild(b)},$start:function(a,b){Xc.playSound("gamemode_select");var c=this.$.registered[Object.getPrototypeOf(a).constructor.name];void 0!==c&&Xc.setNodeState(c,"show",a);var d=this,e=this.parent.parent&&this.parent.parent.children[0];Xc.stopAnimations(this),this.callback=b,this.x=-1e3,sc()&&(this.y=-2e3),null!=e&&(Xc.animate(e,"opacity",{from:1,to:0}),Xc.animate(this.parent.statusbar,"opacity",{from:0,to:1}),sc()?(d.x=0,Xc.animate(this,"y",{delay:1,from:-2e3,to:-413,duration:1e3,on:{end:function(){Xc.setNodeState(d,"goback")}}})):Xc.animate(this,"x",{delay:1,from:-1e3,to:-250,duration:1e3,on:{end:function(){Xc.setNodeState(d,"goback")}}}))},$goback:function(){var a=this,b=this.parent.parent&&this.parent.parent.children[0];null!=b&&Xc.animate(this,sc()?"y":"x",{delay:4e3,from:sc()?-413:-250,to:sc()?-2e3:-1e3,duration:500,on:{end:function(){Xc.setNodeState(a,"end"),Xc.animate(b,"opacity",{from:0,to:1}),Xc.animate(a.parent.statusbar,"opacity",{from:1,to:0});var c=a.callback;a.callback=null,c()}}})},$end:function(){this.x=-1e5,sc()&&(this.y=-2e3),this.children.forEach(function(a){Xc.setNodeState(a,"hide")})}})]});Xc.bindCustomMethodsRecursive(t),t.mgr.$.register(Z.prototype.constructor.name,r),t.mgr.$.register(_.prototype.constructor.name,s);var u=new Kc({x:0,y:sc()?-452:-341,width:1024,height:40,opacity:0,children:[new nc({name:"description",x:-512,y:-20,width:1024,height:40,text:"HINT2_TITLE",textColor:Engine.Color(255,0,0,1),textAlign:"center",fontType:"author"})],$start:function(){var a=this,b=this.parent.children[0];0!==b.opacity&&Xc.animate(b,"opacity",{to:0}),Xc.animate(this,"opacity",{to:1}),th.once("mousedown",this.$.goback);var c=0,d=50;void 0===this.colorTimer&&(this.colorTimer=new Jc({autoplay:!0,duration:250,loop:!0,delay:d,on:{step:function(){c+=d,c=c>255?255:0>c?0:c,a.description.textColor=Engine.Color(255,c,c,1)},loop:function(){d=-d}}}))},$goback:function(){var a=this.parent.children[0];Xc.animate(a,"opacity",{to:1}),Xc.animate(this,"opacity",{to:0})}});Xc.bindCustomMethodsRecursive(u);var v={left:new Kc({children:[new Kc({name:"content"})]}),right:new Kc({children:[new Kc({name:"content"})]}),center:new Kc({children:[new Kc({name:"content"})]}),alphabet:new Kc({children:[new Kc({name:"content"})]})};sc()||(new Lc({parent:v.left,name:"alphabetButton",x:-446,y:-282,$preload:["interface/button_find","interface/button_close"],width:32,height:32,$active:{image:"interface/button_close"},$inactive:{image:"interface/button_find"},on:{mousefocusclick:function(){$d.events.trigger("alphabetButtonClicked","left")}}}),new Lc({parent:v.right,name:"alphabetButton",x:441,y:-282,$preload:["interface/button_find","interface/button_close"],width:32,height:32,$active:{image:"interface/button_close"},$inactive:{image:"interface/button_find"},on:{mousefocusclick:function(){$d.events.trigger("alphabetButtonClicked","right")}}})),$d=new W({name:"board",onHide:function(a){Xc.setViewPartial(b.center,null),a&&a()},onShow:function(p,q){var r=this,s=p.chapter;Xc.setMusicPlaylist("Game"),ed.show(function(w){b=w,Xc.setViewPartial(b.left,v.left),Xc.setViewPartial(b.right,v.right),Xc.setViewPartial(b.center,v.center),r.appendPartial(b.statusbar,p.statusbarView,{mana:p.mana,lightPower:p.lightPower,lightPowerType:p.lightPowerType,chapter:s}),b.statusbar.appendChild(t),t.$.show(),b.statusbar.appendChild(u),r.appendPartial(b.toolbar,pf,null,function(a){c=a,r.appendPartial(a.button1,uf,null,function(a){d=a}).appendPartial(a.button1,Uf,null,function(a){e=a}).appendPartial(sc()?a.button3:a.button2,s.progress>=1?Gf:Af).appendPartial(sc()?a.button2:a.button3,Tf).appendPartial(a.button4,Df),sc()&&Tf.api.updateMana(p.mana)});var x=["interface/rays_light","interface/paper_for_new_element","interface/under_group","elements/not_opened_element","interface/pentagram_01_1","interface/penta_light","shop/hint_1_sign","shop/hint_2_sign","shop/hint_3_sign","shop/dotted_border_sign","shop/gray_border_sign","shop/not_repeat_sign","shop/purchased_frame","shop/button_disabled","shop/button_sell","shop/button_buy","message_box/close","hint/button_big_green","main_menu/rays","hint/button_big_green","message_box/advertising_bkg","message_box/advertising_border","message_box/advertising_Save_the_princess","message_box/close","hint/button_big_green"];xc.REMOVE_ADVERTISING_BACKGROUNDS?(x.push("quests_menu/survivor"),x.push("quests_menu/princess"),x.push("quests_menu/god_vs_devil")):(x.push("message_box/robinzon_advertising_border"),x.push("message_box/close_robinzon_advertising"),x.push("message_box/advertising_bkg"),x.push("message_box/advertising_border"),x.push("message_box/advertising_devil_vs_god"),x.push("message_box/advertising_bkg"),x.push("message_box/advertising_border"),x.push("message_box/advertising_Save_the_princess")),xc.REMOVE_BACKGROUND_DECORATORS||x.push("interface/pentagram_place");for(var y in s.groups)y&&x.push(rd.format(y.toLowerCase()));b.preload.appendChild(new Kc({opacity:0,$preload:x})),q(b),!xc.REMOVE_BACKGROUND_DECORATORS&&s.data.boardBackgroundImage&&(b.background.image=s.data.boardBackgroundImage),r.appendPartial(b.left,we,null,function(a){f=a,Xc.setViewPartial(b.left,v.left)}),sc()||r.appendPartial(b.left,Ce,s,function(a){g=a,Xc.setViewPartial(b.left,v.left)}),r.appendPartial(v.left.content,nd,null,function(a){n.left=a,nd.api.nav.setAlphabet({alphabet:$c.getChapterAlphabet(s),elements:$c.getChapterElementsByLetters(s)})}),sc()||r.appendPartial(v.right.content,pd,null,function(a){n.right=a,pd.api.nav.setAlphabet({alphabet:$c.getChapterAlphabet(s),elements:$c.getChapterElementsByLetters(s)})}),r.appendPartial(v.left.content,sd,{chapter:s,side:"left"},function(a){m.left=a}),r.appendPartial(v.right.content,sd,{chapter:s,side:"right"},function(a){m.right=a}),sc()&&(v.right.opacity=0,v.left.opacity=0,v.center.$.onscreen=!0,v.center.opacity=1,r.appendPartial(v.center.content,sd,{chapter:s,side:"center"},function(a){m.center=a})),r.appendPartial(b.overlay,cg,null,function(b){h=b,a(!0)}),r.appendPartial(b.right,ve,null,function(a){i=a,Xc.setViewPartial(b.right,v.right)}),r.appendPartial(b.alert,yd,null,function(a){j=a,Xc.setViewPartial(b.alert,null)}),r.appendPartial(b.alert,zd,null,function(a){k=a,Xc.setViewPartial(b.alert,null)}),r.appendPartial(b.alert,xd,null,function(a){l=a,Xc.setViewPartial(b.alert,null)}),o.clear(),$d.events.trigger("ready")})},api:{board:{LEFT:"left",RIGHT:"right",CENTER:"center",activateElement:function(a,b){var c=p[a],b=qd.api.group.getElementNode(c,b);b.select()},blurElement:function(a,b){var c=p[a],b=qd.api.group.getElementNode(c,b);b&&b.isSelected&&b.blur()},showGroup:function(a,b,e){sc()&&("center"===a&&(a="left"),v.right.opacity=1,v.left.opacity=1,v.center.opacity=0,v.center.$.onscreen=!1);var f=sd.api.groups;o.push(a),$d.appendPartial(v[a].content,qd,{side:a,showHiddenElements:e?!!e.showHiddenElements:!1,group:b,hasPairs:e.hasPairs,isFinal:e.isFinal,groupNode:f.getGroupNode(v[a].content.children[0],b.data.id)},function(b){p[a]=b}),Xc.setViewPartial(c.button1,d),Xc.setNodeStateRecursive(c.button1,"visible")},hideGroup:function(a){qd.api.group.blurGroup(v[a].content.children[0]),o.remove(a),Xc.setViewPartial(v[a].content,m[a]),sc()&&!o.length&&(v.left.opacity=0,v.right.opacity=0,v.center.opacity=1,v.center.$.onscreen=!0),o.length||(Xc.setViewPartial(c.button1,e),Xc.setNodeStateRecursive(c.button1,"visible"))},showRevertToolbarButton:function(){var a=b.toolbar.children[0].button3;sc()&&(a=b.toolbar.children[0].button2),$d.appendPartial(a,Sf),Xc.setNodeStateRecursive(a,"showed")},showHelpToolbarButton:function(a,c){a=a||zf;var d=b.toolbar.children[0].button5;c&&(d=sc()?b.statusbar.children[0].help:d),$d.appendPartial(d,a),Xc.setNodeStateRecursive(d,"showed")},showHints:function(c){Xc.setViewPartial(b.left,f),Xc.setNodeStateRecursive(f,"base"),Xc.setNodeStateRecursive(f,"showed"),we.api.show(c),a(!1)},hideHints:function(){Xc.setNodeStateRecursive(f,"hidden"),Xc.setViewPartial(b.left,v.left),a(!0)},showLog:function(){Xc.setViewPartial(b.left,g),Xc.setNodeStateRecursive(g,"base"),Xc.setNodeStateRecursive(g,"showed"),a(!1)},hideLog:function(){Xc.setViewPartial(b.left,v.left),a(!0)},showAlphabet:function(b){Xc.setNodeState(v[b].alphabetButton,"active"),q[b]=v[b].content.children[0],Xc.setViewPartial(v[b].content,n[b]),a(!1)},hideAlphabet:function(b){Xc.setViewPartial(v[b].content,q[b]),Xc.setNodeState(v[b].alphabetButton,"inactive"),a(!0)},showItem:function(a,b){Xc.setNodeState(t.mgr,"start",a,b)},showPlanetToolbarButton:function(){var a=sc()?c.button5:c.button6;$d.appendPartial(a,Hf),Xc.setNodeStateRecursive(a,"showed"),pf.api.toolbar.resizeTo(sc()?5:6)},showFortuneToolbarButton:function(){return},showTutorial:function(a){Xc.setViewPartial(b.overlay,h),cg.api.tutorial.show(a)},hideTutorial:function(a){cg.api.tutorial.hide(a)},showReward:function(a){$d.appendPartial(b.alert,Pd,{items:a}),Xc.setNodeStateRecursive(b.alert,"showed")},showPuzzleComplete:function(a){$d.appendPartial(b.alert,Nd,{message:a.data.winMsg,image:a.data.winIcon}),Xc.setNodeStateRecursive(b.alert,"showed")},showBuyUndo:function(a,c){$d.appendPartial(b.alert,Ed,{message:"PUZ_BUY_UNDO_MSG",messageFormat:a,price:c}),Xc.setNodeStateRecursive(b.alert,"showed")},showAdUndo:function(a){$d.appendPartial(b.alert,Ad,{message:"PUZ_AD_UNDO_MSG",messageFormat:a}),Xc.setNodeStateRecursive(b.alert,"showed")},showNothingUndo:function(){$d.appendPartial(b.alert,Cd,{message:"PUZ_NOTING_UNDO"}),Xc.setNodeStateRecursive(b.alert,"showed")},showGotoBank:function(){Bc.config.getAsBool("bank_button_enabled",!0)&&Bc.payments.isAvailable()?$d.appendPartial(b.alert,Fd,{message:"MSG_NO_MANA"}):$d.appendPartial(b.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(b.alert,"showed")},showHint1:function(c){sc()?Xc.setViewPartial(b.center,i):Xc.setViewPartial(b.right,i),ve.api.show(c),a(!1)},hideHint1:function(){sc()?Xc.setViewPartial(b.center,v.center):Xc.setViewPartial(b.right,v.right),a(!0)},showHint2:function(){Xc.setNodeState(u,"start")},showAdvertQuestLost:function(){Xc.setViewPartial(b.alert,j),Xc.setNodeStateRecursive(b.alert,"showed")},hideAdvert:function(){Xc.setNodeStateRecursive(b.alert,"hidden"),Xc.setViewPartial(b.alert,null)},showAdvertQuestPrincess:function(){Xc.setViewPartial(b.alert,k),Xc.setNodeStateRecursive(b.alert,"showed")},showAdvertQuestGodEvil:function(){Xc.setViewPartial(b.alert,l),Xc.setNodeStateRecursive(b.alert,"showed")},showPuzzleDeadEnd:function(){$d.appendPartial(b.alert,Cd,{name:"puzzleDeadEnd",message:"HINT_PUZZLE_DEADEND"}),Xc.setNodeStateRecursive(b.alert,"showed")},updateMana:function(a){sc()?Tf.api.updateMana(a):ff.api.board.updateMana(a)},showFullscreenPromo:function(){if($d&&b){var a=Bc.promo.get("fullscreen");a&&($d.appendPartial(b.alert,Id,a),Xc.setNodeStateRecursive(b.alert,"showed"),Bc.promo.sendStats("fullscreen","show",a.promo_link))}},showFortune:function(){$d.appendPartial(b.fortune,Hd,{}),Xc.setNodeStateRecursive(b.fortune,"showed")},showLightAlert:function(){$d.appendPartial(b.light,Kd,{}),Xc.setNodeStateRecursive(b.light,"showed")},switchUniverseButton:function(a){var b=sc()?Df:zf,d=a?b:Xf,e=sc()?c.button4:c.button5;Xc.animate(e.children[0],"scale",{duration:300,from:1,to:0,easing:Vc.linear,on:{end:function(){Xc.setViewPartial(e,null),$d.appendPartial(e,d),a||d.api.update(),e.children[0].opacity=1,e.children[0].scale=0,Xc.animate(e.children[0],"scale",{duration:300,from:0,to:1,easing:Vc.linear})}}})}},group:qd.api.group,groups:sd.api.groups}})});var _d;Bc.on("ready",function(){var a,b=new Kc({x:-532,y:-346,$portrait:{y:-426},children:[new Lc({name:"paper",x:528,y:351,width:499,height:561,$preload:sc()?null:"interface/paper_for_new_element"}),new Lc({name:"reaction_place",x:512,y:476,width:970,height:400,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/pentagram_place"}),new Lc({name:"reaction_pentagram",x:531,y:460,width:205,height:80,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/pentagram_01_1"}),new Kc({name:"reaction",x:4,y:66,children:[new Lc({name:"reaction_light",x:526,y:242,width:512,height:664,$preload:"interface/penta_light"})]}),new Kc({name:"elements",x:532,y:296})]});Xc.bindCustomMethodsRecursive(b),_d=new W({name:"board-result-intro",onShow:function(c,d){Xc.playSound("flight"),ed.show(function(e){function f(){_d.events.trigger("animationEnd")}function g(){h.destroyChildren(),c.results.forEach(function(a,b,c){var d=Xc.factoryNode(Nb,{name:a.id,element:a,parent:h}),e=128*(b-c.length/2)+64;0!==e&&d.animate("x",e,1e3),Xc.async.wait(1e3,f)})}a=e,Xc.setViewPartial(a.left,b);var h=b.elements;h.destroyChildren(),c.ingredients.forEach(function(a){Xc.factoryNode(Qb,{name:a.id,element:a,parent:h})}),Xc.setNodeStateRecursive(h,"showed"),h.children[0].animationTimer.on("stop",function(){c.results.length>1?g():f()}),d(a)})},api:{}})});var ae;Bc.on("ready",function(){var a,b=[new Lb({name:"episode_1",title:"TREE_MAIN_GAME_BASIC",desc:"TREE_MAIN_GAME_BASIC_DESC",image:"tree_main_game/btn_beginning",chapter:Bc.chapters.getChapterById("episode_1"),hideUnlock:!0,on:dd.node.$.createListeners(Bc.chapters.getChapterById("episode_1"))}),new Lb({name:"episode_2",title:"TREE_MAIN_GAME_TECHNOLOGY",desc:"TREE_MAIN_GAME_TECHNOLOGY_DESC",image:"tree_main_game/btn_technology",chapter:Bc.chapters.getChapterById("episode_2"),hideUnlock:!0,on:dd.node.$.createListeners(Bc.chapters.getChapterById("episode_2"))}),new Lb({name:"episode_3",title:"TREE_MAIN_GAME_MODERN",desc:"TREE_MAIN_GAME_MODERN_DESC",image:"tree_main_game/btn_modernage",chapter:Bc.chapters.getChapterById("episode_3"),hideUnlock:!0,on:dd.node.$.createListeners(Bc.chapters.getChapterById("episode_3"))}),new Lb({name:"episode_4",title:"TREE_MAIN_GAME_MAGIC",desc:"TREE_MAIN_GAME_MAGIC_DESC",image:"tree_main_game/btn_worldofmagic",chapter:Bc.chapters.getChapterById("episode_4"),hideUnlock:!0,on:dd.node.$.createListeners(Bc.chapters.getChapterById("episode_4"))})];ae=new W({name:"chapters-episodes",onShow:function(c,d){dd.show(function(c){a=c,c.$.setContentChildren(b),c.$.setPromoChildren(Bc.promo.getPromoChapterNode()),d(c),c.$.updateContent()})},api:{chapters:dd.api.chapters,showAlert:function(){ae.appendPartial(a.alert,Cd,{message:"PASS_PREV_EPISODE_TO_UNLOCK"}),Xc.setNodeStateRecursive(a.alert,"showed")},showArtifactAlert:function(b){ae.appendPartial(a.alert,Bd,b),Xc.setNodeStateRecursive(a.alert,"showed")},showCompletedEpisodeConfirm:function(){ae.appendPartial(a.alert,Fd,{name:"completedEpisode",message:"TREE_MAIN_GAME_CLICKED_COMPLETED_EPISODE"}),Xc.setNodeStateRecursive(a.alert,"showed")},showResetEpisodeConfirm:function(){ae.appendPartial(a.alert,Fd,{name:"resetEpisode",message:"MESSAGEBOX_RESET_CONFIRM"}),Xc.setNodeStateRecursive(a.alert,"showed")}}})});var be;Bc.on("ready",function(){var a=[new Lb({name:"valentines_day",title:"PUZZLES_SCR_LOVE",desc:"PUZZLES_SCR_LOVE_DESC",image:"puzzles_menu/valentines_day",chapter:Bc.chapters.getChapterById("puzzle_lovebow"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_lovebow"))}),new Lb({name:"snow",title:"PUZZLES_SCR_SNOW",desc:"PUZZLES_SCR_SNOW_DESC",image:"puzzles_menu/snow",chapter:Bc.chapters.getChapterById("puzzle_snow"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_snow"))}),new Lb({name:"christmas_tree",title:"PUZZLES_SCR_XMASTREE",desc:"PUZZLES_SCR_XMASTREE_DESC",image:"puzzles_menu/christmas_tree",chapter:Bc.chapters.getChapterById("puzzle_xmastree"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_xmastree"))}),new Lb({name:"ice_cream",title:"PUZZLES_SCR_ICECREAM",desc:"PUZZLES_SCR_ICECREAM_DESC",image:"puzzles_menu/ice_cream",chapter:Bc.chapters.getChapterById("puzzle_3"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_3"))}),new Lb({name:"flower",title:"PUZZLES_SCR_FLOWER",desc:"PUZZLES_SCR_FLOWER_DESC",image:"puzzles_menu/flower",chapter:Bc.chapters.getChapterById("puzzle_4"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_4"))}),new Lb({name:"locomotive",title:"PUZZLES_SCR_LOCOMOTIVE",desc:"PUZZLES_SCR_LOCOMOTIVE_DESC",image:"puzzles_menu/locomotive",chapter:Bc.chapters.getChapterById("puzzle_1"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_1"))}),new Lb({name:"skyscraper",title:"PUZZLES_SCR_SKYSCRAPER",desc:"PUZZLES_SCR_SKYSCRAPER_DESC",image:"puzzles_menu/skyscraper",chapter:Bc.chapters.getChapterById("puzzle_2"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_2"))}),new Lb({name:"firework",title:"PUZZLES_SCR_FIRECRACKER",desc:"PUZZLES_SCR_FIRECRACKER_DESC",image:"puzzles_menu/firework",chapter:Bc.chapters.getChapterById("puzzle_5"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_5"))}),new Lb({name:"tavern",title:"PUZZLES_SCR_TAVERN",desc:"PUZZLES_SCR_TAVERN_DESC",image:"puzzles_menu/tavern",chapter:Bc.chapters.getChapterById("puzzle_6"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_6"))})];"Android"===Engine.Device.platform.name&&a.splice(a.length-2,0,new Lb({name:"android",title:"PUZZLES_SCR_ANDROID",desc:"PUZZLES_SCR_ANDROID_DESC",image:"puzzles_menu/android",chapter:Bc.chapters.getChapterById("puzzle_7"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("puzzle_7"))})),be=new W({name:"chapters-puzzles",onShow:function(b,c){dd.show(function(b){b.$.setContentChildren(a),b.$.setPromoChildren(Bc.promo.getPromoChapterNode()),c(b),b.$.updateContent()})},api:dd.api.chapters})});var ce;Bc.on("ready",function(){var a=[new Lb({name:"quest_1",title:"QUESTS_SCR_RUN_SANTA",desc:"QUESTS_SCR_RUN_SANTA_DESC",image:"quests_menu/new_year",chapter:Bc.chapters.getChapterById("quest_1"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_1"))}),new Lb({name:"quest_2",title:"QUESTS_SCR_PRINCESS",desc:"QUESTS_SCR_PRINCESS_DESC",image:"quests_menu/princess",chapter:Bc.chapters.getChapterById("quest_2"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_2"))}),new Lb({name:"quest_3",title:"QUESTS_SCR_DEVIL_VS_GOD",desc:"QUESTS_SCR_DEVIL_VS_GOD_DESC",image:"quests_menu/god_vs_devil",chapter:Bc.chapters.getChapterById("quest_3"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_3"))}),new Lb({name:"quest_lost",title:"QUESTS_SCR_SURVIVOR",desc:"QUESTS_SCR_SURVIVOR_DESC",image:"quests_menu/survivor",chapter:Bc.chapters.getChapterById("quest_lost"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_lost"))}),new Lb({name:"quest_20th",title:"QUESTS_SCR_20TH",desc:"QUESTS_SCR_20TH_DESC",image:"quests_menu/20th",chapter:Bc.chapters.getChapterById("quest_20th"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_20th"))}),new Lb({name:"quest_egypt",title:"QUESTS_SCR_EGYPT",desc:"QUESTS_SCR_EGYPT_DESC",image:"quests_menu/Egypt",chapter:Bc.chapters.getChapterById("quest_egypt"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_egypt"))}),new Lb({name:"quest_qad",title:"QUESTS_SCR_QAD",desc:"QUESTS_SCR_QAD_DESC",image:"quests_menu/angel_demon",chapter:Bc.chapters.getChapterById("quest_qad"),on:dd.node.$.createListeners(Bc.chapters.getChapterById("quest_qad"))})];ce=new W({name:"chapters-quests",onShow:function(b,c){dd.show(function(b){b.$.setContentChildren(a),b.$.setPromoChildren(Bc.promo.getPromoChapterNode()),c(b),b.$.updateContent()})},api:dd.api.chapters})});var de;Bc.on("ready",function(){var a,b,c=!1;de=new W({name:"credits",onShow:function(b,c){ed.show(function(b){a=b,sc()||de.appendPartial(a.statusbar,gf),de.appendPartial(a.right,ld),de.appendPartial(a.toolbar,Yf),c(a)})},api:{hide:function(){c&&(c=!1,a.alert.destroyChildren())},credits:{changeTeamView:function(d){function e(a){return a[Object.keys(a).random()]}b&&Xc.restoreNodeRecursive(b.node),de.appendPartial(a.left,d),b=d,d.node.opacity=0,a.alert.destroyChildren();var f=Xc.factoryNode(Qb,{parent:a.alert,name:e(Bc.elements).id,x:sc()?50:-100,y:sc()?-200:-100});Xc.factoryNode(Qb,{parent:a.alert,name:e(Bc.elements).id,x:sc()?50:-100,y:sc()?-200:-100}),Xc.setNodeStateRecursive(a.alert,"showed"),c=!0,f.animationTimer.on("stop",function(){Xc.async.wait(100,function(){c&&(c=!1,a.alert.destroyChildren(),Xc.setNodeStateRecursive(d.node,"showed"),d.node.opacity=1)})})}}}})});var ee;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:172,y:197,width:288,height:349,$preload:xc.REMOVE_CREDITS?null:["credits/artist_anim_04","credits/artist_anim_03","credits/artist_anim_02","credits/artist_anim_01"],name:"u26601652",$showed:function(){var b=a.u26601652;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/artist_anim_01","credits/artist_anim_02","credits/artist_anim_03","credits/artist_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-40,y:0,name:"ud57ed20f",children:[new nc({name:"title",x:280,y:350,width:250,height:40,$portrait:{width:400},text:"CREDITS_ARTIST",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.ud57ed20f.title;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x+80,to:b.x+0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:310,y:400,width:250,height:40,text:"Pavel Barto",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.ud57ed20f.name1;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x+120,to:b.x+0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:260,y:415,$portrait:{y:420},width:250,height:40,text:"Alexander Jurgens",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.ud57ed20f.name2;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x+140,to:b.x+0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});ee=new W({name:"credits-team-artist",node:a})});var fe;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:172,y:197,width:288,height:349,$preload:xc.REMOVE_CREDITS?null:["credits/artist_anim_04","credits/artist_anim_01","credits/artist_anim_02","credits/artist_anim_03"],name:"u341b12f1",$showed:function(){var b=a.u341b12f1;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/artist_anim_01","credits/artist_anim_02","credits/artist_anim_03","credits/artist_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-40,y:0,name:"u47e7be6d",children:[new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_LEAD_ARTIST",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u47e7be6d.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:350,width:250,height:40,text:"Alexey Krivorotko",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u47e7be6d.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});fe=new W({name:"credits-ream-artistLead",node:a})});var ge;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:160,y:207,width:295,height:380,$preload:xc.REMOVE_CREDITS?null:["credits/gamedesigner_anim_04","credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03"],name:"ufd2d8213",$showed:function(){var b=a.ufd2d8213;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03","credits/gamedesigner_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_GAME_DESIGNER",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"Nick Kotlyarov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Anton Rybakov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Yaroslav Rudakov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name4",x:190,y:435,width:250,height:40,text:"Oleg Grebnev",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name4;b.opacity=0,Xc.animate(b,"x",{delay:400,duration:200,from:b.x- -210,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.linear})}})]});ge=new W({name:"credits-team-designer",node:a})});var he;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:171,y:216,width:286,height:387,$preload:xc.REMOVE_CREDITS?null:["credits/director_anim_04","credits/director_anim_01","credits/director_anim_02","credits/director_anim_03"],name:"uf74f66bd",$showed:function(){var b=a.uf74f66bd;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/director_anim_01","credits/director_anim_02","credits/director_anim_03","credits/director_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_ORIGINAL_IDEA",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:200,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"Anton Rybakov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:200,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Nick Kotlyarov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:200,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Yaroslav Rudakov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}})]});he=new W({name:"credits-team-idea",node:a})});var ie;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:161,y:205,width:265,height:365,$preload:xc.REMOVE_CREDITS?null:["credits/programmer_anim_04","credits/programmer_anim_01","credits/programmer_anim_02","credits/programmer_anim_03"],name:"u157f7fea",$showed:function(){var b=a.u157f7fea;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/programmer_anim_01","credits/programmer_anim_02","credits/programmer_anim_03","credits/programmer_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-50,y:0,name:"u07fa26f3",children:[new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_PROGRAMMER",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u07fa26f3.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"Vladimir Schmidthof",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u07fa26f3.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Alexey Zbritsky",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u07fa26f3.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Mihail Perepelkin",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u07fa26f3.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});ie=new W({name:"credits-team-programmer",node:a})});var je;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:161,y:205,width:265,height:365,$preload:xc.REMOVE_CREDITS?null:["credits/programmer_anim_04","credits/programmer_anim_01","credits/programmer_anim_02","credits/programmer_anim_03"],name:"u5d21b3a4",$showed:function(){var b=a.u5d21b3a4;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/programmer_anim_01","credits/programmer_anim_02","credits/programmer_anim_03","credits/programmer_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-50,y:0,name:"u37483d88",children:[new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_PROGRAMMER",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u37483d88.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"Alexey Dyadchanko",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u37483d88.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Alexander Gvozdikov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u37483d88.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Leonid Krot",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u37483d88.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name4",x:190,y:435,width:250,height:40,text:"Alexey Schekin-Gelmer",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u37483d88.name4;b.opacity=0,Xc.animate(b,"x",{delay:400,duration:200,from:b.x- -210,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:400,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});je=new W({name:"credits-team-programmer2",node:a})});var ke;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:169,y:220,width:281,height:396,$preload:xc.REMOVE_CREDITS?null:["credits/musician_anim_04","credits/musician_anim_01","credits/musician_anim_02","credits/musician_anim_03"],name:"u87e8f7ac",$showed:function(){var b=a.u87e8f7ac;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/musician_anim_01","credits/musician_anim_02","credits/musician_anim_03","credits/musician_anim_04"],{delay:250})}}),new Lc({name:"logo",x:380,y:68,width:259,height:96,$preload:xc.REMOVE_CREDITS?null:"credits/sm_logo"}),new Kc({x:-40,y:0,name:"u37ec5879",children:[new nc({name:"title",x:290,y:360,width:250,height:40,$portrait:{width:400},text:"CREDITS_SOUND",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u37ec5879.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:260,y:400,width:250,height:40,text:"Somatone Interactive",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u37ec5879.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -140,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});ke=new W({name:"credits-team-sound",node:a})});var le;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:160,y:207,width:295,height:380,$preload:xc.REMOVE_CREDITS?null:["credits/gamedesigner_anim_04","credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03"],name:"ub17754a6",$showed:function(){var b=a.ub17754a6;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03","credits/gamedesigner_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-30,y:40,name:"u0ce29ee4",children:[new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_SPECIAL_THANKS",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u0ce29ee4.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"Elegar Helfrid",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u0ce29ee4.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Oleg Grebnev",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u0ce29ee4.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Paul Baldwin",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.u0ce29ee4.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});le=new W({name:"credits-team-thanks",node:a})});var me;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:160,y:207,width:295,height:380,$preload:xc.REMOVE_CREDITS?null:["credits/gamedesigner_anim_04","credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03"],name:"u039c425d",$showed:function(){var b=a.u039c425d;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03","credits/gamedesigner_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-30,y:40,name:"ub947b45",children:[new nc({name:"title",x:310,y:320,width:250,height:40,$portrait:{width:400},text:"CREDITS_SPECIAL_THANKS",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.ub947b45.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name1",x:280,y:360,width:250,height:40,text:"",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.ub947b45.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -120,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name2",x:250,y:385,width:250,height:40,text:"Vladimir Kolesnikov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.ub947b45.name2;b.opacity=0,Xc.animate(b,"x",{delay:200,duration:200,from:b.x- -150,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:200,duration:100,from:0,to:1,easing:Vc.linear})}}),new mc({name:"name3",x:220,y:410,width:250,height:40,text:"Mik Chernomordikov",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"author",$showed:function(){var b=a.ub947b45.name3;b.opacity=0,Xc.animate(b,"x",{delay:300,duration:200,from:b.x- -180,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:300,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});me=new W({name:"credits-team-thanks2",node:a})});var ne;Bc.on("ready",function(){var a=new Kc({x:-497,y:-311,$portrait:{x:-300,y:-550},children:[new Lc({x:160,y:207,width:295,height:380,$preload:xc.REMOVE_CREDITS?null:["credits/gamedesigner_anim_04","credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03"],name:"uca78aa86",$showed:function(){var b=a.uca78aa86;xc.REMOVE_CREDITS||Xc.animateImage(b,["credits/gamedesigner_anim_01","credits/gamedesigner_anim_02","credits/gamedesigner_anim_03","credits/gamedesigner_anim_04"],{delay:250})}}),new Lc({name:"logo",x:385,y:60,width:200,height:80,$preload:xc.REMOVE_CREDITS?null:"credits/jb_logo"}),new Kc({x:-40,y:0,name:"u84159ed5",children:[new nc({name:"title",x:320,y:360,width:250,height:40,$portrait:{width:400},text:"CREDITS_TRANSLATE",textColor:"rgba(49, 44, 32, 1)",textAlign:"left",fontType:"font",$showed:function(){var b=a.u84159ed5.title;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -80,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}}),new nc({name:"name1",x:260,y:400,width:230,height:40,text:"Localization",textColor:"rgba(49, 44, 32, 1)",textAlign:"center",fontType:"author",$showed:function(){var b=a.u84159ed5.name1;b.opacity=0,Xc.animate(b,"x",{delay:100,duration:200,from:b.x- -140,to:b.x-0,easing:Vc.linear}),Xc.animate(b,"opacity",{delay:100,duration:100,from:0,to:1,easing:Vc.linear})}})]})]});ne=new W({name:"credits-team-translate",node:a})});var oe;Bc.on("ready",function(){oe=new W({name:"encyclopedia",onShow:function(a,b){var c=this;ed.show(function(a){c.appendPartial(a.statusbar,hf).appendPartial(a.left,nd).appendPartial(a.right,md).appendPartial(a.toolbar,Zf),b(a)})},api:{nav:nd.api.nav,desc:md.api.desc}})});var pe;Bc.on("ready",function(){var a=new Kc({$showed:function(){Xc.playSound("howtoplay_screen_transition")},x:-512,y:-384,$portrait:{x:-614.4,y:-384*1.2,scale:1.2},children:[new Lc({name:"bkg",x:512,y:384,width:1024,height:768,$preload:sc()?null:"interface/bkg_4_3_book"}),new Kc({name:"left_page",x:21,y:-37,$page0:{opacity:1,x:256,y:-37},$page1:{opacity:0,x:25600,y:-37},children:[new Lc({name:"help",x:250,y:389,width:422,height:527,opacity:0,$preload:xc.HELP_FRAGMENTED?null:"interface/help",$showed:function(){this.image=xc.HELP_FRAGMENTED?null:"interface/help",sc()?this.opacity=1:Xc.animate(this,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.linear})}}),new Kc({y:100,children:[new Lc({x:267,y:300,width:486,height:10,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({x:267,y:300,width:486,height:10,rotation:1.57075,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_0":null,x:140,y:190,width:181,height:167}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_1":null,x:380,y:150,width:207,height:141}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_2":null,x:140,y:480,width:147,height:155})]}),new Kc({children:[new nc({x:22,y:137,width:230,height:50,text:"HELP_SCR_TEXT1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-114,to:this.parent.y-0,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.linear}))}})]}),new Kc({children:[new nc({x:253,y:137,width:230,height:50,text:"HELP_SCR_TEXT2",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$portrait:{x:270},$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-114,to:this.parent.y-0,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.linear}))}})]}),new Kc({children:[new nc({x:22,y:412,width:230,height:50,text:"HELP_SCR_TEXT3",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-98,to:this.parent.y-0,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.linear}))}})]}),new Kc({children:[new nc({x:253,y:412,width:230,height:170,text:"HELP_SCR_TEXT4",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$portrait:{x:270},$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-98,to:this.parent.y-0,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.linear}))}})]}),new Kc({children:[new nc({x:253,y:570,width:230,height:20,text:"HELP_SCR_TEXT5",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$portrait:{x:270},$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-40,to:this.parent.y-0,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.linear}))}})]}),new Kc({name:"a1",x:155,y:255,children:[new Kc({name:"arrow",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:600,duration:400,from:this.x+80,to:this.x,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new Lc({x:18,y:3,width:55,height:21,$preload:"interface/arrow_l",$showed:{image:"interface/arrow_l"}})]}),new Kc({name:"arrow_text",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:600,duration:400,from:this.x+115,to:this.x+15,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new nc({x:15,y:-14,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({name:"a2",x:54,y:340,children:[new Kc({name:"arrow",opacity:0,$showed:function(){sc()?(this.opacity=1,this.x=this.x+30):(Xc.animate(this,"x",{delay:600,duration:400,from:this.x-70,to:this.x+30,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new Lc({x:28,y:3,width:55,height:21,$preload:"interface/arrow_r",$showed:{image:"interface/arrow_r"}})]}),new Kc({name:"arrow_text",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:600,duration:400,from:this.x-100,to:this.x,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new nc({x:-36,y:-14,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({name:"a3",x:332,y:292,children:[new Kc({name:"arrow",opacity:0,$showed:function(){sc()?(this.opacity=1,this.y=this.y+20):(Xc.animate(this,"y",{delay:600,duration:400,from:this.y+120,to:this.y+20,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new Lc({x:-3,y:17,width:18,height:50,$preload:"interface/arrow_u",$showed:{image:"interface/arrow_u"}})]}),new Kc({name:"arrow_text",opacity:0,$showed:function(){sc()?(this.opacity=1,this.y=this.y+70):(Xc.animate(this,"y",{delay:600,duration:400,from:this.y+170,to:this.y+70,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new nc({x:-38,y:-10,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({name:"a4",x:400,y:292,children:[new Kc({name:"arrow",opacity:0,$showed:function(){sc()?(this.opacity=1,this.y=this.y+20):(Xc.animate(this,"y",{delay:600,duration:400,from:this.y+120,to:this.y+20,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new Lc({x:-5,y:17,width:18,height:50,$preload:"interface/arrow_u",$showed:{image:"interface/arrow_u"}})]}),new Kc({name:"arrow_text",opacity:0,$showed:function(){sc()?(this.opacity=1,this.y=this.y+70):(Xc.animate(this,"y",{delay:600,duration:400,from:this.y+170,to:this.y+70,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.linear}))},children:[new nc({x:-33,y:-10,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]})]}),new Kc({name:"right_page",x:514,y:8,$page0:{opacity:0,x:25600,y:8},$page1:{opacity:1,x:276,y:8},children:[new Kc({x:0,y:0,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:600,duration:400,from:this.x- -100,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Lc({x:76,y:158,width:96,height:96,$preload:"elements/border_solid",$showed:{image:"elements/border_solid"}}),new nc({x:133,y:146,width:320,height:20,text:"HELP2_SCR_SOLID_FRAME",textColor:"rgba(84, 35, 4, 1)",textAlign:"left",fontType:"font"})]}),new Kc({x:0,y:218,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:700,duration:400,from:this.x- -100,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:700,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Lc({x:76,y:48,width:96,height:96,$preload:"elements/border_dotted",$showed:{image:"elements/border_dotted"}}),new nc({x:133,y:30,width:320,height:20,text:"HELP2_SCR_DOTTED_FRAME",textColor:"rgba(84, 35, 4, 1)",textAlign:"left",fontType:"font"})]}),new Kc({x:0,y:312,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"x",{delay:800,duration:400,from:this.x- -100,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:800,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Lc({x:76,y:48,width:96,height:96,$preload:"elements/border_gray",$showed:{image:"elements/border_gray"}}),new nc({x:133,y:34,width:320,height:20,text:"HELP2_SCR_GRAY_FRAME",textColor:"rgba(84, 35, 4, 1)",textAlign:"left",fontType:"font"})]}),new nc({x:10,y:535,width:460,height:20,text:"LAYOUT_HELP2_TEXT_ORANGE2",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:"font",opacity:0,$showed:function(){sc()?this.opacity=1:Xc.animate(this,"opacity",{delay:900,duration:400,from:0,to:1,easing:Vc.outSine})}})]})]});Xc.bindCustomMethodsRecursive(a),pe=new W({name:"episodes-help",onShow:function(b,c){var d=this,e=b&&b.page;ed.show(function(b){Xc.setViewPartial(b.left,a),sc()?d.appendPartial(b.statusbar,lf,{title:e?"HELP2_SCR_TITLE":"HELP1_SCR_TITLE"}):d.appendPartial(b.statusbar,cf,{center:"HELP_SCR_TITLE"}),d.appendPartial(b.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf),sc()&&(0===e?d.appendPartial(a.button5,Ff):1===e&&d.appendPartial(a.button2,Tf)),Bc.promo.hasUniverse()&&d.appendPartial(a.button3,Xf)}),c(b),sc()&&(e?Xc.setNodeStateRecursive(a,"page1"):Xc.setNodeStateRecursive(a,"page0"))})}})});var qe;Bc.on("ready",function(){function a(){this.children.forEach(function(a,b){sc()&&(a.x=-200),Xc.animate(a,"x",{delay:1200*b,duration:1200,from:0,to:mh+96,easing:Sc.Easing.outInCirc})})}var b={},c={},d=new bc({on:{end:function(){qe.events.trigger("animationsEnd")},showed:function(){Ch?Xc.playMusic("intro_1",{loop:!1}):Xc.setMusicPlaylist("Game")}},screenDelay:5e3,x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"teaser_wrapper",x:-231,y:-13,$portrait:{x:-720},children:[new nc({name:"caption",x:750,y:200,width:490,height:30,text:"TEASER1_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{y:20,textColor:"rgba(255, 255, 255, 1)"}}),b.description=new nc({name:"teaser_text",x:750,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}}),new nc({name:"skip",x:845,y:570,width:300,height:20,text:"TEASER1_SKIP",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"author",$portrait:{y:800,textColor:"rgba(255, 255, 255, 1)"}})]}),b.halo=new Lc({name:"halo",x:269.5,y:161.5,width:205,height:205,$preload:"interface/new_element",$showed:{image:"interface/new_element"},opacity:1,$portrait:{y:191.5}}),new Lc({name:"eye",x:273,y:161,width:92,height:92,$preload:"teaser/eye",$showed:{image:"teaser/eye"},$portrait:{y:191}}),b.elements=new Kc({x:130,y:285,opacity:0,$currentElement:0,$portrait:{y:315,x:50},$next:function(){var a=this.children[this.$.currentElement];Xc.animate(a,"opacity",{to:0}),Xc.animate(a,"y",{to:100});for(var b=++this.$.currentElement,c=b;c<this.children.length;c++)Xc.animate(this.children[c],"x",{delay:500,to:(98*(c-b)+98*b/2)*ad})},$showed:function(){this.$.currentElement=0,this.children.forEach(function(a,b){Xc.animate(a,"y",{loop:!0,delay:b%2*500+200*Math.random()|0,from:-7,to:7,reverse:!0,easing:Sc.Easing.outQuad,duration:500})},this)},children:[new Nb({name:"Earth",$base:{x:0,y:0,opacity:1}}),new Nb({name:"Water",$base:{x:98*ad,y:0,opacity:1}}),new Nb({name:"Fire",$base:{x:196*ad,y:0,opacity:1}}),new Nb({name:"Air",$base:{x:294*ad,y:0,opacity:1}})]}),b.earth=new Lc({x:263,y:536,width:408,height:163,opacity:0,$preload:["teaser/1/earth_03","teaser/1/earth_02","teaser/1/earth_01"],$showed:function(){Xc.animateImage(this,["teaser/1/earth_01","teaser/1/earth_02","teaser/1/earth_03"])},$portrait:{y:566}}),b.water=new Lc({x:312,y:535,width:222,height:106,opacity:0,$preload:["teaser/1/water_03","teaser/1/water_02","teaser/1/water_01"],$showed:function(){Xc.animateImage(this,["teaser/1/water_01","teaser/1/water_02","teaser/1/water_03"])},$portrait:{y:565}}),b.fire=new Lc({x:157,y:438,width:152,height:137,opacity:0,$preload:["teaser/1/fire_03","teaser/1/fire_02","teaser/1/fire_01"],$showed:function(){Xc.animateImage(this,["teaser/1/fire_01","teaser/1/fire_02","teaser/1/fire_03"])},$portrait:{y:468}}),b.air=new Lc({x:332,y:413,width:193,height:101,opacity:0,$preload:["teaser/1/air_03","teaser/1/air_02","teaser/1/air_01"],$showed:function(){Xc.animateImage(this,["teaser/1/air_01","teaser/1/air_02","teaser/1/air_03"])},$portrait:{y:443}}),b.hint=new Lc({name:"hint",x:371,y:164,width:116,height:116,$preload:"hint/hint_1_on",$showed:{image:"hint/hint_1_on"},opacity:0,$portrait:{y:194}}),b.equation=new Kc({name:"equation",x:122,y:247,opacity:0,$portrait:{y:277,x:60},children:[new Nb({name:"Fire",x:48*ad,y:58}),new Lc({name:"plus",x:103*ad,y:59,width:26,height:102,$preload:"interface/plus",$showed:{image:"interface/plus"}}),new Nb({name:"Earth",x:163*ad,y:58}),new Lc({name:"equals",x:220*ad,y:59,width:26,height:102,$preload:"interface/equal",$showed:{image:"interface/equal"}}),b.question=new Lc({name:"question",x:260*ad,y:55,width:109,height:109,$preload:"toolbar/help",$showed:{image:"toolbar/help"}})]}),b.flying1=new Kc({x:-48,y:338,$portrait:{y:368},opacity:0,$start:a,children:[new Nb({name:"Worm"}),new Nb({name:"Tree"}),new Nb({name:"Clay"}),new Nb({name:"Dolphin"})]}),b.flying2=new Kc({x:-48,y:338,$portrait:{y:368},opacity:0,$start:a,children:[new Nb({name:"Human"}),new Nb({name:"Boat"}),new Nb({name:"Car"}),new Nb({name:"Airplane"})]}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_1"),Xc.setNodeStateRecursive(b.description,"appear"),c.halo_rotate=b.halo.animate("rotation",-1.7453292519943295,5e3,{loop:!0})}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_2"),Xc.setNodeStateRecursive(b.description,"appear"),b.elements.opacity=1}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_3"),Xc.setNodeStateRecursive(b.description,"appear"),b.earth.opacity=1,b.elements.$.next()}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_4"),Xc.setNodeStateRecursive(b.description,"appear"),b.water.opacity=1,b.elements.$.next()}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_5"),Xc.setNodeStateRecursive(b.description,"appear"),b.fire.opacity=1,b.elements.$.next()}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_6"),Xc.setNodeStateRecursive(b.description,"appear"),b.air.opacity=1,b.elements.$.next()}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_7"),Xc.setNodeStateRecursive(b.description,"appear")}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_8"),Xc.setNodeStateRecursive(b.description,"appear"),b.hint.opacity=1}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_9"),Xc.setNodeStateRecursive(b.description,"appear"),b.hint.opacity=0,b.equation.opacity=1,c.question_scale=Xc.animate(b.question,"scale",{loop:!0,to:1.2,reverse:!0})}}),new cc({$active:function(){b.description.changeTextDefinition("TEASER1_10"),Xc.setNodeStateRecursive(b.description,"appear"),b.equation.opacity=0,c.question_scale.stop(),b.flying1.opacity=1,b.flying1.$.start()}}),new cc({delay:6500,$active:function(){b.description.changeTextDefinition("TEASER1_11"),Xc.setNodeStateRecursive(b.description,"appear"),b.flying1.opacity=0,b.flying2.opacity=1,b.flying2.$.start()}}),new cc({$active:function(){b.water.opacity=0,b.air.opacity=0,b.fire.opacity=0,b.earth.opacity=0,b.flying2.opacity=0,c.halo_rotate.stop()}})]});Xc.bindCustomMethodsRecursive(d),sc()&&Xc.setNodeStateRecursive(d,"portrait"),qe=new W({name:"episodes-intro1",node:d})});var re;Bc.on("ready",function(){var a,b={},c=new bc({on:{end:function(){re.events.trigger("animationsEnd")},showed:function(){Xc.playMusic("intro_2",{loop:!1})}},screenDelay:5e3,x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),a=new Kc({name:"teaser_wrapper",x:-234,y:50,children:[new Kc({name:"text",$portrait:{x:-486,y:-63},children:[new nc({name:"caption",x:750,y:200,width:490,height:30,text:"TEASER2_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{y:20,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:750,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}}),new nc({name:"skip",x:845,y:570,width:300,height:20,text:"TEASER1_SKIP",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"author",$portrait:{y:800,textColor:"rgba(255, 255, 255, 1)"}})]}),new Lc({name:"planet_big",x:509,y:401,width:332,height:361,$preload:"teaser/2/planet_big",$showed:{image:"teaser/2/planet_big"},opacity:0}),new Lc({name:"void_01",x:482,y:374,width:404,height:499,$preload:"teaser/2/void_01",$showed:{image:"teaser/2/void_01"},opacity:0}),new Lc({name:"void_02",x:500,y:375,width:408,height:400,$preload:"teaser/2/void_02",$showed:{image:"teaser/2/void_02"},opacity:0}),new Lc({name:"void_03",x:555,y:322,width:322,height:395,$preload:"teaser/2/void_03",$showed:{image:"teaser/2/void_03"},opacity:0}),new Lc({name:"void_04",x:485,y:368,width:399,height:442,$preload:"teaser/2/void_04",$showed:{image:"teaser/2/void_04"},opacity:0}),new Lc({name:"planet_small",x:452,y:528,width:148,height:167,$preload:"teaser/2/planet_small",$showed:{image:"teaser/2/planet_small"},opacity:0})]}),new cc({$active:function(){a.text.description.changeTextDefinition("TEASER2_1"),Xc.setNodeStateRecursive(a.text.description,"appear"),a.planet_big.opacity=1,b.rotate_big_planet=a.planet_big.animate("rotation",.4363323129985824,5e3)}}),new cc({delay:6e3,$active:function(){a.text.description.changeTextDefinition("TEASER2_2"),Xc.setNodeStateRecursive(a.text.description,"appear"),b.rotate_big_planet.playing&&b.rotate_big_planet.stop(),a.planet_big.opacity=0,a.void_01.opacity=1,a.planet_small.opacity=1,b.rotate_small_planet=a.planet_small.animate("rotation",-1.0471975511965976,6e3),b.move_small_planet=a.planet_small.animate("x",a.planet_small.x-78,6e3)}}),new cc({delay:5e3,$active:function(){a.text.description.changeTextDefinition("TEASER2_3"),Xc.setNodeStateRecursive(a.text.description,"appear"),b.rotate_small_planet.playing&&b.rotate_small_planet.stop(),b.move_small_planet.playing&&b.move_small_planet.stop(),a.void_01.opacity=0,a.planet_small.opacity=0,a.void_02.opacity=1,a.void_03.opacity=1,b.rotate_void_02=a.void_02.animate("rotation",-.4363323129985824,5e3)}}),new cc({delay:5e3,$active:function(){a.text.description.changeTextDefinition("TEASER2_4"),Xc.setNodeStateRecursive(a.text.description,"appear"),b.rotate_void_02.playing&&b.rotate_void_02.stop(),a.void_02.opacity=0,a.void_03.opacity=0,a.void_04.opacity=1}}),new cc({delay:5e3,$active:function(){a.text.description.changeTextDefinition("TEASER2_5"),Xc.setNodeStateRecursive(a.text.description,"appear")}}),new cc({$active:function(){a.void_04.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),re=new W({name:"episodes-intro2",node:c})});var se;Bc.on("ready",function(){var a={},b={},c=new bc({on:{end:function(){se.events.trigger("animationsEnd")},showed:function(){Xc.playMusic("intro_3",{loop:!1})}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"teaser_wrapper",x:-266,y:-49,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:775,y:200,width:490,height:30,text:"TEASER3_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:20,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:775,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}}),new nc({name:"skip",x:870,y:570,width:300,height:20,text:"TEASER1_SKIP",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"author",$portrait:{x:845,y:800,textColor:"rgba(255, 255, 255, 1)"}})]}),new Kc({name:"field",x:50,y:195,$portrait:{y:245},children:[a.dragon=new Lc({name:"dragon",x:339,y:190,width:161,height:99,opacity:0,$preload:["teaser/3/dragonanim_03","teaser/3/dragonanim_02","teaser/3/dragonanim_01"],$showed:function(){Xc.animateImage(this,["teaser/3/dragonanim_01","teaser/3/dragonanim_02","teaser/3/dragonanim_03"])}}),a.oops=new Lc({name:"oops",x:346,y:116,width:130,height:74,$preload:"teaser/3/oops",$showed:{image:"teaser/3/oops"},opacity:0}),a.techno=new Lc({name:"techno",x:131,y:221,width:217,height:371,$preload:"teaser/3/techno",$showed:{image:"teaser/3/techno"},opacity:0}),a.magic=new Lc({name:"magic",x:326,y:279,width:222,height:237,$preload:"teaser/3/magic",$showed:{image:"teaser/3/magic"},opacity:0}),a.zigzag=new Lc({name:"zigzag",x:236,y:344,width:83,height:115,opacity:0,$preload:["teaser/3/zigzag_03","teaser/3/zigzag_02","teaser/3/zigzag_01"],$showed:function(){Xc.animateImage(this,["teaser/3/zigzag_01","teaser/3/zigzag_02","teaser/3/zigzag_03"],{delay:500})}}),a.zigzag_left=new Lc({name:"zigzag_left",x:231,y:344,width:83,height:115,$preload:"teaser/3/zigzag_techno",$showed:{image:"teaser/3/zigzag_techno"},opacity:0}),a.zigzag_right=new Lc({name:"zigzag_right",x:241,y:344,width:83,height:115,$preload:"teaser/3/zigzag_magic",$showed:{image:"teaser/3/zigzag_magic"},opacity:0}),a.hands=new Lc({name:"hands",x:222,y:108,width:219,height:156,$preload:"teaser/3/hands",$showed:{image:"teaser/3/hands"},opacity:0})]}),a.halo=new Lc({name:"halo",x:269.5,y:161.5,width:205,height:205,$preload:"interface/new_element",$showed:{image:"interface/new_element"},opacity:1,$portrait:{y:211.5}}),new Lc({name:"eye",x:273,y:161,width:92,height:92,$preload:"teaser/eye",$showed:{image:"teaser/eye"},$portrait:{y:211}}),new cc({delay:6e3,$active:function(){a.description.changeTextDefinition("TEASER3_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.dragon.opacity=1,a.magic.opacity=1,a.techno.opacity=1,b.halo_rotate=a.halo.animate("rotation",-2.0943951023931953,6e3,{loop:!0})}}),new cc({delay:6e3,$active:function(){a.description.changeTextDefinition("TEASER3_2"),Xc.setNodeStateRecursive(a.description,"appear"),a.zigzag.opacity=1}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER3_3"),Xc.setNodeStateRecursive(a.description,"appear"),a.zigzag.opacity=0,a.zigzag_left.opacity=1,a.zigzag_right.opacity=1,b.move_zigzag_right=a.zigzag_right.animate("x",a.zigzag_right.x+40,5e3),b.move_magic=a.magic.animate("x",a.magic.x+40,5e3)}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER3_4"),Xc.setNodeStateRecursive(a.description,"appear"),b.move_zigzag_right.playing&&b.move_zigzag_right.stop(),b.move_magic.playing&&b.move_magic.stop(),a.magic.opacity=0,a.zigzag_right.opacity=0,a.oops.opacity=1}}),new cc({delay:3e3,$active:function(){a.description.changeTextDefinition("TEASER3_5"),Xc.setNodeStateRecursive(a.description,"appear"),a.oops.opacity=0,a.dragon.opacity=0}}),new cc({delay:8e3,$active:function(){a.description.changeTextDefinition("TEASER3_6"),Xc.setNodeStateRecursive(a.description,"appear"),a.techno.opacity=0,a.zigzag_left.opacity=0,a.hands.opacity=1,b.move_hands=a.hands.animate("y",a.hands.y+40,8e3)}}),new cc({$active:function(){b.halo_rotate.stop(),a.hands.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),se=new W({name:"episodes-intro3",node:c})});var te;Bc.on("ready",function(){var a={},b={},c=new bc({on:{end:function(){te.events.trigger("animationsEnd")},showed:function(){Xc.playMusic("intro_4",{loop:!1})}},screenDelay:6e3,x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"teaser_wrapper",x:-262,y:-51,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:775,y:200,width:490,height:30,text:"TEASER4_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:20,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:775,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}}),new nc({name:"skip",x:870,y:570,width:300,height:20,text:"TEASER1_SKIP",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"author",$portrait:{x:845,y:800,textColor:"rgba(255, 255, 255, 1)"}})]}),new Kc({name:"field",x:0,y:0,$portrait:{y:100},children:[a.magic=new Lc({name:"magic",x:273,y:358,width:395,height:408,$preload:"teaser/4/present_magic",$showed:{image:"teaser/4/present_magic"},opacity:0}),a.naughtiness=new Lc({name:"naughtiness",x:275,y:340,width:383,height:448,$preload:"teaser/4/naughtiness",$showed:{image:"teaser/4/naughtiness"},opacity:0}),a.evil=new Lc({name:"evil",x:274,y:343,width:407,height:528,$preload:"teaser/4/evil",$showed:{image:"teaser/4/evil"},opacity:0}),a.fight=new Lc({name:"fight",x:279,y:329,width:395,height:493,$preload:"teaser/4/fight",$showed:{image:"teaser/4/fight"},opacity:0})]}),a.halo=new Lc({name:"halo",x:269.5,y:161.5,width:205,height:205,$preload:"interface/new_element",$showed:{image:"interface/new_element"},opacity:1}),a.eye=new Lc({name:"eye",x:273,y:161,width:92,height:92,$preload:"teaser/eye",$showed:{image:"teaser/eye"}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER4_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.magic.opacity=1,b.rotate_halo=a.halo.animate("rotation",-1.7453292519943295,5e3,{loop:!0})}}),new cc({$active:function(){a.description.changeTextDefinition("TEASER4_2"),Xc.setNodeStateRecursive(a.description,"appear")}}),new cc({$active:function(){a.description.changeTextDefinition("TEASER4_3"),Xc.setNodeStateRecursive(a.description,"appear"),a.magic.opacity=0,a.naughtiness.opacity=1,b.rotate_halo.playing&&b.rotate_halo.stop(),a.eye.opacity=0,a.halo.opacity=0}}),new cc({delay:1e4,$active:function(){a.description.changeTextDefinition("TEASER4_4"),Xc.setNodeStateRecursive(a.description,"appear"),a.naughtiness.opacity=0,a.evil.opacity=1}}),new cc({$active:function(){a.description.changeTextDefinition("TEASER4_5"),Xc.setNodeStateRecursive(a.description,"appear"),a.evil.opacity=0,a.fight.opacity=1}}),new cc({$active:function(){a.fight.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),te=new W({name:"episodes-intro4",node:c})});var ue;Bc.on("ready",function(){var a=new Kc({$showed:function(){},x:-512,y:-384,$portrait:{x:-256},children:[new Lc({name:"bkg",x:512,y:384,width:oh,height:ph,$portrait:{x:256},$preload:xc.REMOVE_GAMEOVER?"interface/bkg_4_3_book":"gameover/bkg_game_over"}),new Lc({name:"endgame_bkg",x:508,y:373,width:972,height:620,$preload:xc.REMOVE_GAMEOVER?null:"gameover/end_game_bkg2"}),new Lc({name:"light",x:xc.REMOVE_GAMEOVER?290:350,y:xc.REMOVE_GAMEOVER?340:400,width:800,height:800,$preload:"interface/rays_light",$showed:function(){Xc.animate(this,"rotation",{delay:0,duration:5e4,from:0,to:6.283185307179586,easing:Vc.linear})},$portrait:{x:256,y:14}}),new Lc({name:"endgame_bkg2",x:344,y:390,width:593,height:586,$preload:xc.REMOVE_GAMEOVER?null:"gameover/end_game_bkg_god"}),new tb({name:"back",x:92,y:xc.REMOVE_GAMEOVER?700:643,width:sc()?150:109,height:sc()?150:109,$portrait:{x:-4,y:809},$preload:"toolbar/button_toolbar_2",$showed:function(){Xc.animate(this,"x",{delay:700,duration:100,from:this.x-137,to:this.x-0,easing:Vc.linear})},children:[new Lc({name:"button",x:0,y:0,width:sc()?150:109,height:sc()?150:109,$preload:"toolbar/back"})],on:{mousefocusclick:function(){ue.events.trigger("BackButtonClicked")}}}),new nc({name:"game_over",font:"font",x:xc.REMOVE_GAMEOVER?145:286,y:xc.REMOVE_GAMEOVER?320:358,width:290,height:80,text:"GAME_OVER_TEXT",textColor:"rgba(23, 104, 136, 1)",textAlign:"center",fontType:"medium",$portrait:{x:111,y:14}}),new nc({name:"play_but",font:"font",x:532,y:121,width:440,height:40,text:"GAMEOVER_ANY_PLAY",textColor:sc()?"rgba(23, 104, 136, 1)":"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium",$portrait:{x:36,y:164}}),new Kc({name:"button_2",x:642,y:230,$portrait:{x:116,scale:1.4,y:222},$showed:function(){sc()||Xc.animate(this,"x",{delay:1e3,duration:200,from:this.x- -858,to:this.x-20,easing:Vc.outSine})},children:[new tb({name:"item_TreeQuests",x:100,y:78,width:450,height:140,$preload:"play_menu/button_quests",children:[new nc({name:"text_quests",font:"font",x:-95,y:-25,width:270,height:40,text:"PLAYMENU_SCR_QUESTS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){ue.events.trigger("QuestsButtonClicked")}}})]}),new Kc({name:"button_3",x:671,y:340,$portrait:{x:116,scale:1.4,y:340*1.4-100},$showed:function(){sc()||Xc.animate(this,"x",{delay:1100,duration:200,from:this.x- -829,to:this.x-20,easing:Vc.outSine})},children:[new tb({name:"item_PuzzlesMenu",x:100,y:77,width:450,height:140,$preload:"play_menu/button_puzzles",children:[new nc({name:"text_puzzles",font:"font",x:-95,y:-25,width:270,height:40,text:"PLAYMENU_SCR_PUZZLES",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){ue.events.trigger("PuzzlesButtonClicked")}}})]}),new Kc({name:"button_4",x:694,y:448,$portrait:{x:116,scale:1.4,y:448*1.4-100},$showed:function(){sc()||Xc.animate(this,"x",{delay:1200,duration:200,from:this.x- -806,to:this.x-20,easing:Vc.outSine})},children:[new tb({name:"item_ArtifactsMenu",x:100,y:75,width:450,height:140,$preload:"play_menu/button_artifacts",children:[new nc({name:"text_artifacts",font:"font",x:-95,y:-25,width:270,height:40,text:"PLAYMENU_SCR_ARTIFACTS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})],on:{mousefocusclick:function(){ue.events.trigger("ArtifactsButtonClicked")}}})]}),sc()?new Kc:new nc({name:"text_unlock",font:"font",x:565,y:xc.REMOVE_GAMEOVER?660:632,width:400,height:40,text:"GAMEOVER_UPDATE_TEXT",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]});Xc.bindCustomMethodsRecursive(a),ue=new W({name:"gameover",node:a,api:{}})});var ve;Bc.on("ready",function(){var a=new Kc({x:sc()?-226:30,y:-284,children:[new Kc({name:"hint_wrapper",x:-30,y:0,children:[new nc({name:"title_text",font:"font",x:0,y:0,width:500,height:40,text:"HINT1_TITLE",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"glow",x:262,y:143,width:164,height:164,$preload:"interface/new_element",$showed:function(){Xc.stopAnimations(this),Xc.animate(this,"rotation",{delay:1,from:0,to:-3.1415,duration:3e3,loop:!0})}}),new Lc({name:"eye",x:262,y:143,width:92,height:92,$preload:"teaser/eye"}),new nc({name:"whatif",font:"font",x:0,y:215,width:500,height:40,text:"HINT1_WHATIF",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"e1",x:94,y:319,width:77,height:77,$preload:"interface/quest_in_hint",$showed:function(){Xc.stopAnimations(this),Xc.animate(this,"scale",{delay:1,from:1,to:.5,duration:300,loop:!0,reverse:!0})}}),new Lc({name:"plus",x:154,y:324,width:48,height:48,$preload:"interface/plus_in_hint"}),new Lc({name:"e2",x:219,y:319,width:77,height:77,$preload:"interface/quest_in_hint",$showed:function(){Xc.stopAnimations(this),Xc.animate(this,"scale",{delay:1,from:.5,to:1,duration:300,loop:!0,reverse:!0})}}),new Lc({name:"equals",x:289,y:324,width:48,height:48,$preload:"interface/equal_in_hint"}),new Kc({name:"result",x:383,y:328,width:0,height:0}),new nc({name:"but_how",font:"font",x:0,y:380,width:500,height:40,text:"HINT1_BUT_HOW",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font"}),new nc({name:"skip",font:"font",x:0,y:425,width:500,height:30,text:"TAP_TO_CONTINUE",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"}),new tb({x:250,y:300,width:sc()?2e3:500,height:sc()?2e3:600,on:{mousefocusclick:function(){ve.events.trigger("CloseButtonClicked")}}}),new Lc({name:"closeButton",x:440,y:0,width:32,height:32,$preload:sc()?null:"interface/button_close"})]})]});Xc.bindCustomMethodsRecursive(a),ve=new W({name:"hint1",node:a,api:{show:function(b){null!=b&&(Xc.setNodeStateRecursive(a,"showed"),a.hint_wrapper.whatif.format=[b.text],a.hint_wrapper.whatif.changeTextDefinition("HINT1_WHATIF"),a.hint_wrapper.result.destroyChildren(),a.hint_wrapper.result.appendChild(new Nb({name:b.id})))}}})});var we;Bc.on("ready",function(){function a(a){return{mousefocusclick:function(){we.events.trigger("buyButtonClicked",a)}}}function b(a){return{mousefocusclick:function(){we.events.trigger("useButtonClicked",a)}}}var c,d=new Kc({$showed:function(){Xc.playSound("gamemode_select")},x:sc()?-307.2:-495,y:sc()?-384*1.2:-384,scale:sc()?1.2:1,children:[new Kc({name:"hint1",x:0,y:85,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:300,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:300,duration:400,from:this.y-500,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"SHOP_HINT1_LONGDESC",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author"})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_1_on",hintId:"1"}),new Ib({name:"use",x:191,y:127,on:b("1"),hintId:"1"}),new Hb({name:"buy",x:361,y:127,on:a("1"),hintId:"1"})]}),new Kc({name:"hint2",x:0,y:250,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:200,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:200,duration:400,from:this.y-665,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:200,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"SHOP_HINT2_LONGDESC",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author"})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_2_on",hintId:"2"}),new Ib({name:"use",x:191,y:127,on:b("2"),hintId:"2"}),new Hb({name:"buy",x:361,y:127,on:a("2"),hintId:"2"})]}),new Kc({name:"hint3",x:0,y:415,opacity:0,$showed:function(){Xc.animate(this,"x",{delay:100,duration:400,from:this.x-17,to:this.x-0,easing:Vc.outSine}),Xc.animate(this,"y",{delay:100,duration:400,from:this.y-830,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})},children:[new Kc({x:0,y:0,children:[new Lc({x:274,y:93,width:357,height:7,$preload:"hint/line"}),new nc({name:"desc",x:110,y:7,width:347,height:80,text:"SHOP_HINT3_LONGDESC",textColor:"rgba(40, 48, 42, 1)",textAlign:"left",fontType:"author",format:[Bc.hints[3].buyAmount]})]}),new ac({name:"icon",x:63,y:64,hintIcon:"hint/hint_3_on",hintId:"3"}),new Ib({name:"use",x:191,y:127,on:b("3"),hintId:"3"}),new Hb({name:"buy",x:361,y:127,on:a("3"),hintId:"3"})]})]});Xc.bindCustomMethodsRecursive(d),Bc.on("hintRecharged",function(){we.api.show(c)}),we=new W({name:"hints",node:d,api:{hints:{},show:function(a){if(c=a,null!=a)for(var b=0;b<a.length;++b){var e=a[b].amount,f="hint"+(b+1);e>0?(Xc.setNodeStateRecursive(d[f].icon,"active"),Xc.setNodeStateRecursive(d[f].use,"active")):a[b].canShowAd&&Xc.setNodeStateRecursive(d[f].use,"ad"),d[f].icon.remain.format=[e],d[f].icon.remain.changeTextDefinition("HINT1_DLG_REMAIN")}}}})});var xe;Bc.on("ready",function(){var a=new Kc({children:[new Lc({name:"bg",x:xc.MERGE_HOME_SCREEN?0:30,y:(xc.MERGE_HOME_SCREEN,0),width:xc.MERGE_HOME_SCREEN?1024:1093,height:xc.MERGE_HOME_SCREEN?799:768,$preload:"main_menu/bkg_main_menu",$portrait:{x:0,y:0,width:oh,height:ph}}),new Kc({x:0,y:0}),new ic({x:-9,y:-94}),new Lc({name:"bg_home_screen",x:0,y:0,width:1024,height:768,scale:0,opacity:0,$preload:xc.MERGE_HOME_SCREEN?"main_menu/home_screen_bkg":null,$showed:function(){var b=a.bg_home_screen;Xc.fadeIn(b,{delay:300,duration:300}),b.scale=0,Xc.animate(b,"scale",{duration:800,to:1})},$hidden:function(){var b=a.bg_home_screen;Xc.fadeOut(b,{delay:400,duration:400})}}),new Lc({name:"redStar",x:10,y:-36,width:1008,height:787,opacity:0,scale:.5,$preload:xc.MERGE_HOME_SCREEN?null:"main_menu/star_color_red",$showed:function(){var b=a.redStar;Xc.fadeIn(b,{delay:300,duration:300}),Xc.async.waitOnNode(b,300,function(){})},$hidden:function(){var b=a.redStar;Xc.fadeOut(b,{delay:400,duration:400})}}),new Lc({name:"spaceCircle",x:-2,y:-7,width:1093,height:640,opacity:0,$preload:xc.MERGE_HOME_SCREEN?null:"main_menu/space_circle",$animation:null,$baseState:{opacity:0,scale:1},$showed:function(){var b=a.spaceCircle;b.$.animation=Rc({autodestroy:!0,loop:!0,target:b,property:"scale",duration:2300,reverse:!0,from:1,to:1.02}),Tc({autoplay:!0,autodestroy:!0,on:{end:function(){b.$.animation.play()}},animations:[Uc({animations:[Rc({target:b,property:"scale",duration:500,from:.5,to:1.05}),Rc({target:b,property:"opacity",duration:500,to:1})]}),Rc({target:b,property:"scale",duration:500,from:1.05,to:1})]})},$hidden:function(){var b=a.spaceCircle;b.$.animation.playing&&b.$.animation.stop(),Xc.fadeOut(b,{delay:400,duration:400})}}),new Lc({name:"god",x:51,y:-49,width:650,height:457,opacity:0,$portrait:{x:0},$preload:xc.MERGE_HOME_SCREEN?null:"main_menu/god",$baseState:{scale:1},$showed:function(){var b=a.god;Xc.animate(b,"y",{delay:500,duration:300,from:b.y+99,to:b.y}),Xc.animate(b,"opacity",{delay:500,duration:300,to:1})},$hidden:function(){var b=a.god;Xc.fadeOut(b,{delay:400,duration:400})}}),new Lc({name:"gameName",x:-21,y:Bc.config.getAsBool("xforce_chinese_logo",!1)?80:5,width:500,height:Bc.config.getAsBool("xforce_chinese_logo",!1)?231:114,opacity:0,scale:.5,$preload:xc.MERGE_HOME_SCREEN?null:"main_menu/name_of_game",$portrait:{x:0},$showed:function(){var b=a.gameName;Xc.fadeIn(b,{delay:400,duration:300})},$hidden:function(){var b=a.gameName;Xc.fadeOut(b,{delay:400,duration:400})}}),new Kc({name:"menu",children:[new tb({name:"settings",x:-205,y:191,width:166,height:166,opacity:0,scale:.4,$portrait:{width:200,height:200,y:210},$preload:"main_menu/options_button",on:{mousefocusclick:function(){xe.events.trigger("settingsClick")}},$showed:function(){var b=a.menu.settings;Xc.animate(b,"scale",{delay:800,duration:300,to:1}),Xc.animate(b,"opacity",{delay:800,duration:300,to:1}),Xc.async.waitOnNode(b,800,function(){Xc.animatePositionByCurve(b,{duration:300,points:[Hc(b.x-54,b.y-191),Hc(b.x-154,b.y-81),Hc(b.x,b.y)]})})},$hidden:function(){var b=a.menu.settings;Xc.fadeOut(b,{delay:100,duration:300})},children:[new Kc({name:"text",x:-93,y:62,opacity:0,$portrait:{y:72},$showed:function(){var b=a.menu.settings.text;Xc.animate(b,"y",{delay:1400,duration:300,from:b.y-26,to:b.y}),Xc.animate(b,"opacity",{delay:1400,duration:300,to:1})},children:[new nc({x:3,y:3,width:171,height:40,text:"MAINMENU_SCR_OPTIONS_BTN",textColor:"rgba(0, 0, 0, 0.39215686274509803)",textAlign:"center"}),new nc({width:171,height:40,text:"MAINMENU_SCR_OPTIONS_BTN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]}),new Lc({name:"underPlay",x:-13,y:211,width:285,height:285,$portrait:{width:360,height:360,x:7,y:261},scale:0,$preload:"main_menu/under_play_overlay",$animate:null,$showed:function(){var b=a.menu.underPlay;b.$.animation=Rc({autodestroy:!0,loop:!0,target:b,property:"scale",reverse:!0,from:1,to:.8}),Xc.animate(b,"scale",{delay:1100,duration:2e3,from:.5,to:1}),Xc.async.waitOnNode(b,3100,function(){b.$.animation&&b.$.animation.play()})},$hidden:function(){var b=a.menu.underPlay,c=b.$.animation;c&&(c.playing?c.stop():c.destroy(),b.$.animation=null),Xc.animate(b,"scale",{delat:100,duration:800,from:.8,to:0}),Xc.animate(b,"opacity",{delat:100,duration:300,from:1,to:0})}}),new tb({name:"play",x:-15,y:219,width:211,height:211,$portrait:{width:270,height:270,y:270,x:5},opacity:0,$preload:"main_menu/play_button",on:{mousefocusclick:function(){xe.events.trigger("playClick")}},$showed:function(){var b=a.menu.play;Xc.fadeIn(b,{delay:750,duration:300,scale:{from:.4,to:.7}}),Xc.async.waitOnNode(b,750,function(){Xc.animatePositionByCurve(b,{duration:300,points:[Hc(b.x-221,b.y-196),Hc(b.x-321,b.y-46),Hc(b.x,b.y)]})}),Xc.async.waitOnNode(b,1150,function(){Tc({autoplay:!0,autodestroy:!0,animations:[Rc({target:b,property:"scale",duration:300,from:.7,to:1.1}),Rc({target:b,property:"scale",duration:300,from:1.1,to:1})]})})},$hidden:function(){var b=a.menu.play;Xc.fadeOut(b,{delay:200,duration:300})},children:[new Kc({name:"text",x:-60.5,y:99.5,$portrait:{y:129.5},opacity:0,$showed:function(){var b=a.menu.play.text;Xc.animate(b,"y",{delay:1300,duration:200,from:b.y-85,to:b.y-10}),Xc.animate(b,"opacity",{delay:1300,duration:300,to:1})},children:[new nc({x:-12,y:3,width:145,height:40,text:"MAINMENU_SCR_PLAY_BTN",textColor:"rgba(0, 0, 0, 0.39215686274509803)",textAlign:"center"}),new nc({x:-15,y:0,width:145,height:40,text:"MAINMENU_SCR_PLAY_BTN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]}),new tb({name:"achievements",x:174,y:187,width:166,height:166,$preload:"main_menu/achievements_button",opacity:0,$portrait:{x:224,y:187,width:200,height:200},on:{mousefocusclick:function(){xe.events.trigger("achievementsClick")}},$showed:function(){var b=a.menu.achievements;Xc.animate(b,"scale",{delay:700,duration:300,from:.4,to:1}),Xc.animate(b,"opacity",{delay:700,duration:300,to:1}),Xc.async.waitOnNode(b,700,function(){Xc.animatePositionByCurve(b,{duration:300,points:[Hc(b.x-433,b.y-187),Hc(b.x-533,b.y-37),Hc(b.x,b.y)]})})},$hidden:function(){var b=a.menu.achievements;Xc.fadeOut(b,{delay:100,duration:300})},children:[new Kc({name:"text",x:-103,y:62,$portrait:{y:72},opacity:0,$showed:function(){var b=a.menu.achievements.text;Xc.animate(b,"y",{delay:1200,duration:200,from:b.y-8,to:b.y}),Xc.animate(b,"opacity",{delay:1200,duration:300,to:1})},children:[new nc({x:3,y:3,width:208,height:40,$portrait:{width:178,height:0},text:"ACHIVEMENTS",textColor:"rgba(0, 0, 0, 0.39215686274509803)",textAlign:"center"}),new nc({x:0,y:0,width:208,height:40,$portrait:{width:178,height:0},text:"ACHIVEMENTS",textColor:"rgba(255, 255, 255, 1)",textAlign:"center"})]})]}),new tb({name:"facebook",opacity:0,x:470,y:-346,width:61,height:61,$preload:"main_menu/facebook_button",on:{mousefocusclick:function(){xe.events.trigger("facebookClick")}},$showed:function(){var b=a.menu.facebook;!Bc.account.isConnected()&&Bc.config.getAsBool("account_enabled",!0)&&"facebook"===Bc.account.type&&(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:1}))},$hidden:function(){var b=a.menu.facebook;!Bc.account.isConnected()&&Bc.config.getAsBool("account_enabled",!0)&&"facebook"===Bc.account.type&&(b.opacity=1,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:1,to:0}))},$portrait:{x:oh/2-60,y:-ph/2+60,width:100,height:100},children:[new nc({x:-340,y:-30,width:300,height:61,$portrait:{x:-260,width:300,height:61,textAlign:"right",fontType:"author"},text:"LOGIN_TO_SAVE_PROGRESS",textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"author"})]}),new tb({name:"news",x:662,y:330,width:96,height:96,$preload:"main_menu/news_button",$portrait:{x:-oh/2+60,y:ph/2-60,opacity:0},on:{mousefocusclick:function(){var b=Bc.news.getLastNews();b&&(xe.appendPartial(a.alert,Md,{news:b}),Xc.setNodeStateRecursive(a.alert,"showed"))}},$showed:function(){var b=a.menu.news;Bc.news.getLastNews()&&(sc()?(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:1})):Xc.animate(b,"x",{delay:2e3,duration:200,from:b.x,to:b.x-204}))},$hidden:function(){var b=a.menu.news;Bc.news.getLastNews()&&(sc()?(b.opacity=1,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:1,to:0})):Xc.animate(b,"x",{duration:200,to:b.x+500}))}}),new tb({name:"sound_disable",opacity:0,x:-475,y:350,width:100,height:100,$preload:"toolbar/sound_off",on:{mousefocusclick:function(){xe.events.trigger("soundDisableClick")}},$showed:function(){var b=a.menu.sound_disable;Xc.audio.enabled&&(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:.4}))},$hidden:function(){var b=a.menu.sound_disable;Xc.audio.enabled&&(b.opacity=.4,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:.4,to:0}))},$portrait:{x:oh/2-55,y:ph/2-50,width:120,height:120}}),new tb({name:"sound_enable",opacity:0,x:-475,y:350,width:100,height:100,$preload:"toolbar/sound_on",on:{mousefocusclick:function(){xe.events.trigger("soundEnableClick")}},$showed:function(){var b=a.menu.sound_enable;Xc.audio.enabled||(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:.4}))},$hidden:function(){var b=a.menu.sound_enable;Xc.audio.enabled||(b.opacity=.4,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:.4,to:0}))},$portrait:{x:oh/2-55,y:ph/2-50,width:120,height:120}}),new tb({name:"fullscreen_enable",opacity:0,x:-410,y:350,width:46,height:46,$preload:"main_menu/scale_big_01",on:{mousefocusclick:function(){xe.events.trigger("fullscreenEnableClick")}},$showed:function(){var b=a.menu.fullscreen_enable;screenfull.enabled&&!screenfull.isFullscreen&&(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:1}))},$hidden:function(){var b=a.menu.fullscreen_enable;screenfull.enabled&&!screenfull.isFullscreen&&(b.opacity=1,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:1,to:0}))},$portrait:{x:oh/2-140,y:ph/2-50,width:70,height:70}}),new tb({name:"fullscreen_disable",opacity:0,x:-410,y:350,width:46,height:46,$preload:"main_menu/scale_big_02",on:{mousefocusclick:function(){xe.events.trigger("fullscreenDisableClick")}},$showed:function(){var b=a.menu.fullscreen_disable;screenfull.enabled&&screenfull.isFullscreen&&(b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:1}))},$hidden:function(){var b=a.menu.fullscreen_disable;screenfull.enabled&&screenfull.isFullscreen&&(b.opacity=1,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:1,to:0}))},$portrait:{x:oh/2-140,y:ph/2-50,width:70,height:70}}),Bc.config.getAsBool("xforce_facebook_chinese_button",!1)?new tb({name:"facebook_chinese_traditional",x:-365,y:350,width:150,height:40,$preload:"main_menu/facebook_chinese_traditional",$portrait:{x:-oh/2+120,y:ph/2-45,width:205,height:54},on:{mousefocusclick:function(){Xc.openLink("https://www.facebook.com/doodlegodh5/")}},$showed:function(){var b=a.menu.facebook_chinese_traditional;b.opacity=0,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:0,to:1})},$hidden:function(){var b=a.menu.facebook_chinese_traditional;b.opacity=1,Xc.animate(b,"opacity",{delay:2e3,duration:200,from:1,to:0})}}):new Kc,new tb({name:"promo",x:-809.5,y:-290,width:297.5,height:213*.85,image:void 0,$portrait:{x:-oh/2-207.5,y:-ph/2+100+10,width:207.5,height:200},on:{mousefocusclick:function(){Bc.promo.openLink("main_menu",a.menu.promo.url)}},$showed:function(){var b=a.menu.promo,c=Bc.promo.get("main_menu");c?(b.opacity=1,b.image=c.main_menu_promo_image,b.url=c.promo_link,b.type=c.type,Bc.promo.sendStats("main_menu","show",c.promo_link)):b.opacity=0,sc()?Xc.animate(b,"x",{delay:2e3,duration:200,from:b.x,to:b.x+207.5+103.75}):Xc.animate(b,"x",{delay:2e3,duration:200,from:b.x,to:b.x+297.5+148.75})},$hidden:function(){var b=a.menu.promo;sc()?Xc.animate(b,"x",{duration:200,to:b.x-207.5}):Xc.animate(b,"x",{duration:200,to:b.x-297.5})}})]}),new Kc({name:"alert"})]});xe=new W({name:"home",node:a,onShow:function(){Xc.setMusicPlaylist("Main"),Bc.remoteStorage.on("restoreOffer",this.onRestoreOffer)},onHide:function(a){a(),Bc.remoteStorage.off("restoreOffer",this.onRestoreOffer)},api:{showInappDialog:function(b){a&&(xe.appendPartial(a.alert,Jd,{id:b}),Xc.setNodeStateRecursive(a.alert,"showed"))},updateFacebookButton:function(b){a.menu.facebook.opacity=b?0:1},setFullscreen:function(b){a.menu.fullscreen_enable.opacity=b?0:1,a.menu.fullscreen_disable.opacity=b?1:0},setMute:function(b){a.menu.sound_enable.opacity=b?.4:0,a.menu.sound_disable.opacity=b?0:.4},showBaseDialog:function(b){a&&(xe.appendPartial(a.alert,Cd,b),Xc.setNodeStateRecursive(a.alert,"showed"))},showConfirmDialog:function(b){a&&(xe.appendPartial(a.alert,Fd,b),Xc.setNodeStateRecursive(a.alert,"showed"))},showDebug:function(b){if(a){var c=Bc.promo.getUniverse();console.info(c),lh.show({banners:c,backScreen:Sg})}},showFreshNews:function(){var b=Bc.news.getLastFreshNews();b&&(xe.appendPartial(a.alert,Md,{news:b}),Xc.setNodeStateRecursive(a.alert,"showed"))}},onRestoreOffer:function(){Bc.remoteStorage.getRestoreOffer(function(b){"undefined"!=typeof b&&(xe.appendPartial(a.alert,Od,{name:"home",date:b.date}),Xc.setNodeStateRecursive(a.alert,"showed"))})}})});var ye;Bc.on("ready",function(){var a,b,c=96,d=8,e=new Kc({children:[b=new Wb({name:"content",y:-25,width:640,height:770,children:[new Kc({name:"scrollarea"})]}),new dc({name:"player",y:310})]});ye=new W({name:"leaderboards",onShow:function(f,g){var h=this,i=f.entries,j=f.player,k=0,l=!1;console.info(f),Xc.removeChildren(b.contentNode.scrollarea);for(var m=i.length,n=0;m>n;n++){var o=new dc({}),p=i[n];o.setRank(p.getRank()),o.setScore(p.getScore()),o.setName(p.getName()),o.setImage(p.getPhoto()),p.getId()==j.getId()?(l=!0,o.setFlagOpacity(1)):o.setFlagOpacity(0),o.y=n*c,b.contentNode.scrollarea.appendChild(o)}b.contentNode.scrollarea.y=-b.height/2+c/2,b.contentNode.height=c*m,d>m&&(b.contentNode.scrollarea.y-=(d-m)*c),!l&&j&&(m>=d&&(b.contentNode.height=c*(m+1)),e.player.setFlagOpacity(1),e.player.setName(j.getName()),e.player.setScore(j.getScore()),e.player.setRank(j.getRank()),e.player.setImage(j.getPhoto()),k=1),setTimeout(function(){e.player.opacity=k},1),b.updateContent(),ed.show(function(b){a=b,Xc.setViewPartial(a.left,e),h.appendPartial(a.statusbar,lf,{title:"LEADERBOARDS"}),h.appendPartial(a.toolbar,pf,null,function(a){h.appendPartial(a.button1,uf).appendPartial(a.button5,Jf)}),g(a)})}})});var ze;Bc.on("ready",function(){var a,b={elements:"LEADERBOARD_UNLOCKED_ELEMENTS",groups:"LEADERBOARD_UNLOCKED_GROUPS",achievements:"LEADERBOARD_UNLOCKED_ACHIEVEMENTS",episodes:"LEADERBOARD_COMPLETED_EPISODES",quests:"LEADERBOARD_COMPLETED_QUESTS",puzzles:"LEADERBOARD_COMPLETED_PUZZLES",artifacts:"LEADERBOARD_COMPLETED_ARTIFACTS",allEpisodes:"LEADERBOARD_ALL_EPISODES_COMPLETED",allQuests:"LEADERBOARD_ALL_QUESTS_COMPLETED",allPuzzles:"LEADERBOARD_ALL_PUZZLES_COMPLETED"},c=new Kc({children:[new Lc({name:"profile",image:"leaderboards/profile_border",width:320,height:344,y:-230,children:[new Lc({name:"photo",image:void 0,x:17,y:-45,width:135,height:135}),new Lc({image:"leaderboards/ava_profile_border",x:17,y:-45,width:160,height:150}),new mc({name:"userName",text:"",width:200,height:96,x:-83,y:30,textAlign:"center",fontType:"font",textColor:"rgba(136, 45, 24, 1)"})]}),new Kc({name:"scoreInfo",y:-40,children:[]}),new nc({name:"totalScore",text:"LEADERBOARD_TOTAL_SCORE",width:640,height:33,x:-320,y:300,textAlign:"center",fontType:"medium",textColor:"rgba(255, 255, 255, 1)",format:[0]})]});ze=new W({name:"leaderboards-profile",onShow:function(d,e){var f=this,g=d.scoreData,h=d.totalScore,i=d.name,j=d.photo;c.profile.photo.image=j,c.profile.userName.text=i,Xc.removeChildren(c.scoreInfo);var k=0;for(var l in g){var d=g[l],m=d.count+"x"+d.rate+" = "+d.count*d.rate;c.scoreInfo.appendChild(new mc({name:l,text:Qc.tr(b[l])+m,width:640,height:30,x:-320,y:32*k,textAlign:"center",fontType:"font",textColor:"rgba(47, 10, 2, 1)"})),k++}c.totalScore.format=[h],c.totalScore.changeTextDefinition("LEADERBOARD_TOTAL_SCORE"),ed.show(function(b){a=b,Xc.setViewPartial(a.left,c),f.appendPartial(a.statusbar,lf,{title:"LEADERBOARDS"}),f.appendPartial(a.toolbar,pf,null,function(a){f.appendPartial(a.button1,uf)}),e(a)})}})});var Ae;Engine.on(Engine.PRELOAD,function(){var a=new Kc({x:-512,y:-384,zIndex:999,children:[new Lc({x:512,y:384,width:oh,height:ph,image:"splash/bkg_splash",$showed:{image:"splash/bkg_splash"},$hidden:function(){this.animate("opacity",{to:0})},$changed:function(){this.width=oh,this.height=ph}}),new Lc({x:512,y:384,width:600,height:600,image:"splash/dg_splash",$showed:{image:"splash/dg_splash"},$hidden:function(){this.animate("opacity",{to:0})}}),new Lc({x:sc()?330:140,y:sc()?-ph/2+384+80:70,width:220,height:88,image:"splash/jb_logo",$showed:{image:"splash/jb_logo"},$hidden:function(){this.animate("opacity",{to:0})}}),new Lc({name:"layout2",x:532,y:692,width:1,height:1,$preload:["splash/load_anim_07"],$showed:function(){Xc.animateImage(this,["splash/load_anim_07",null])}}),new Kc({name:"loading_bar",opacity:0,y:sc()?60+(ph-nh)/2:0,$changed:function(){this.y=sc()?60+(ph-nh)/2:0},children:[new Lc({name:"progress_background",x:512,y:724,width:450,height:50,$preload:"splash/loading_progressbar_01",$showed:{image:"splash/loading_progressbar_01"}}),new Kc({name:"progress_foreground",x:299,y:702,width:0,height:45,clip:!0,children:[new Lc({width:450,height:45,x:225,name:"content",$preload:"splash/loading_progressbar_02",$showed:{image:"splash/loading_progressbar_02"}})]})]})]});Xc.bindCustomMethodsRecursive(a);var b=0;Ae={show:function(){xh.appendChild(a),Xc.setNodeStateRecursive(a,"showed")},hide:function(){Xc.restoreNodeRecursive(a),a.loading_bar.animate("opacity",{from:1,to:0,duration:300,on:{end:function(){xh.removeChild(a)}}})},api:{setProgress:function(c){a.parent&&"number"==typeof c&&!isNaN(c)&&(c=Math.min(Math.max(c,0),1),a.loading_bar.loading||(new nc({parent:a.loading_bar,name:"loading",format:[0],x:212,y:679,width:600,textAlign:"center",textColor:"white",fontType:"small"}),a.loading_bar.loading.changeTextDefinition("INTRO_LOADING")),a.loading_bar.opacity=1,a.loading_bar.progress_foreground.width=433*c,c=Math.ceil(100*c),b!==c&&(a.loading_bar.loading.format[0]=c,a.loading_bar.loading.tr()),b=c)}}},Bc.on("orientationChanged",function(){Xc.setNodeStateRecursive(a,"changed")})});var Be;Engine.on(Engine.PRELOAD,function(){function a(){xh.removeChild(b)}var b=new Lc({parent:this,width:mh,height:nh,scale:.4,opacity:1,on:{mousefocus:function(a){a.propagate=!1}},$showed:function(){this.opacity=1},$hidden:function(){this.opacity=.5},children:[new Lc({width:47,height:49,originX:0,originY:41,x:73,y:-79.5,image:Zh.format("interface/arrow_02.png"),$showed:function(){this.$.animation||(this.$.animation=Tc({autoplay:!1,loop:!0,animations:[Rc({target:this,property:"rotation",from:0,to:2*-Math.PI,duration:5e3})]})),this.$.animation.playing||this.$.animation.play()},$hidden:function(){this.$.animation.playing&&this.$.animation.stop()}}),new Lc({width:44,height:76,originX:0,originY:50,x:73,y:-87.5,image:Zh.format("interface/arrow_01.png"),$showed:function(){this.$.animation||(this.$.animation=Tc({autoplay:!1,loop:!0,animations:[Rc({target:this,property:"rotation",from:0,to:2*-Math.PI,duration:1200})]})),this.$.animation.playing||this.$.animation.play()},$hidden:function(){this.$.animation.playing&&this.$.animation.stop()}}),new Lc({width:400,height:400,image:Zh.format("interface/waiting.png"),children:[]})]});Xc.bindCustomMethodsRecursive(b);var c=!0;Be={show:function(){c&&(c=!1,xh.appendChild(b),Xc.setNodeStateRecursive(b,"showed"))},hide:function(){c||(c=!0,Xc.setNodeStateRecursive(b,"hidden"),Xc.restoreNodeRecursive(b),a())}}});var Ce;Bc.on("ready",function(){function a(a){this.iterators=a}function b(a){if(i[a.id])return i[a.id];var b=0,c=new Kc({children:[new Nb({x:b+=96*ad/2,name:a.elements[0]}),new Lc({x:sc()?b=b+96*ad/2+4:81+96*ad/2-32,y:0,image:"interface/plus_in_hint",width:sc()?32:16,height:sc()?32:16}),new Nb({x:sc()?b=b+96*ad/2+4:98+96*ad/2,name:a.elements[1]}),new Lc({x:sc()?b=b+96*ad/2+4:197,image:"interface/equal_in_hint",width:sc()?32:16,height:sc()?32:16}),new Nb({x:sc()?b=b+96*ad/2+4:198+96*ad/2,name:a.results[0]})]});a.results[1]&&new Nb({parent:c,x:sc()?b=b+96*ad-20:283+96*ad/2,name:a.results[1]}),a.results[2]&&new Nb({parent:c,x:sc()?b=b+96*ad-20:368+96*ad/2,name:a.results[2]});var d=i[a.id]=new Kc({scale:sc()?.99:.8,height:sc()?120:80,$contentNode:c});return d}function c(a){return j[a.id]||(j[a.id]=new Kc({x:sc()?24:6,scale:sc()?1:.8,height:sc()?120:80,children:[new Lc({x:40,y:0,width:90,height:90,image:xc.REMOVE_SMALL_ACHIEVEMENTS?a.largeImage:a.image}),new nc({name:"description",x:sc()?110:90,y:sc()?-40:-20,width:sc()?500:365,height:sc()?80:40,text:a.name,textColor:"rgba(0, 0, 0, 1)",textAlign:"left",fontType:sc()?"font":"author"})]}))}a.prototype={getNext:function(){for(var a,b=this.iterators,c=0;c<b.length;++c)b[c].get()&&(a?a.get().timestamp>b[c].get().timestamp&&(a=b[c]):a=b[c]);return a?a.next():void 0}};var d,e=new n,f=new n,g=new a([e,f]),h=new Kc({x:sc()?-320:-531,y:sc()?-480:-288,$chapter:null,$reactionsNodes:[],$showed:function(){for(var a=this.$.chapter,d=this.$.reactionsNodes,i=h.content,j=i.contentNode,k=j.column;k.children.length>0;)k.removeChild(k.children[0]);d.clear(),e.reset(Bc.achievements.getHistory()),f.reset(a.history);for(var l=null;l=g.getNext();)if(l.reaction){var m=a.getReactionById(l.reaction);if(!Yc.get("safeMode")||!m.isAdult){var n=b(m);d.push(n),k.appendChild(n)}}else l.achievement&&k.appendChild(c(l.achievement));k.updatePositions(),k.x=-i.width/2,k.y=-i.height/2,j.width=i.width,j.height=k.height,i.updateContent()},children:[new Lc({x:275,y:252,width:550,height:624,$preload:sc()?null:"interface/book_under_hole_left"}),new Wb({name:"content",x:sc()?320:299,y:sc()?455:252,width:sc()?640:370,height:sc()?790:455,children:[new ub({name:"column"})],on:{scroll:function(a){for(var b=h.$.reactionsNodes,c=this.contentNode.y,d=b[0]?b[0].height:0,e=-c+.5*this.height-d,f=1.5*this.height-c+d,g=0,i=b.length;i>g;g++){var j=b[g];j.y>e&&j.y<f?j.appendChild(j.$.contentNode):j.removeChild(j.$.contentNode)}}}}),new Lc({x:275,y:252,width:550,height:624,$preload:sc()?null:"interface/book_hole_left"})]}),i={},j={};Xc.bindCustomMethodsRecursive(h),Ce=new W({name:"log",node:h,onShow:sc()?function(a,b){var c=this;h.$.chapter=a,ed.show(function(a){d=a,Xc.setViewPartial(d.left,h),c.appendPartial(d.statusbar,lf,{title:"LOG_SRC_TITLE"},function(a){}),c.appendPartial(d.toolbar,pf,null,function(a){c.appendPartial(a.button1,uf),c.appendPartial(a.button5,tf)}),b(d)})}:function(a){h.$.chapter=a},api:{log:{}}})});var De;Bc.on("ready",function(){var a=new Kc({$showed:function(){Xc.playSound("bank_screen_transition")},x:-512,y:-384,children:[new Kc({name:"left_page",x:6,y:67,children:[new ec({y:22,image:"shop_money/energy_slot_02",manaAmount:100,oldPrice:123,cost:100,fadeInDelay:1}),new ec({y:120,image:"shop_money/energy_slot_03",manaAmount:500,oldPrice:123,cost:500,fadeInDelay:100}),new ec({y:210,image:"shop_money/energy_slot_04",manaAmount:1e3,oldPrice:123,cost:500,fadeInDelay:200}),new ec({y:305,image:"shop_money/energy_slot_05",manaAmount:3e3,oldPrice:123,cost:500,fadeInDelay:300}),new ec({y:410,image:"shop_money/energy_slot_infinity_03",images:["shop_money/energy_slot_infinity_01","shop_money/energy_slot_infinity_02","shop_money/energy_slot_infinity_03"],oldPrice:123,cost:500,fadeInDelay:400})]}),new Kc({x:517,y:95,children:[new Lc({name:"stub_image",x:231,y:248,width:462,height:491,$preload:"shop_money/pic_in_bank"}),new Kc({children:[]})]})]});Xc.bindCustomMethodsRecursive(a),De=new W({name:"mana",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),b.showStatusbar&&(Xc.setViewPartial(e.statusbar,e.statusbar.$.lastPartial),W.imageManager.loadView(e.statusbar)),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e)})}})});var Ee;Bc.on("ready",function(){var a;Ee=new W({name:"menu",onShow:function(b,c){var d=this;Xc.setMusicPlaylist("Main"),ed.show(function(e){a=e,sc()||d.appendPartial(a.statusbar,kf,{mana:b.mana}),d.appendPartial(a.left,hd).appendPartial(a.toolbar,_f),sc()||d.appendPartial(a.right,gd),Xc.playSound("gamemodes_screen_transition"),c(a)})},api:{nav:hd.api.nav,episodes:fd.api.episodes,showAlert:function(){Ee.appendPartial(a.alert,Cd,{message:"PASS_PREV_EPISODE_TO_UNLOCK"}),Xc.setNodeStateRecursive(a.alert,"showed")},showArtifactAlert:function(b){Ee.appendPartial(a.alert,Bd,b),Xc.setNodeStateRecursive(a.alert,"showed")},showCompletedEpisodeConfirm:function(){Ee.appendPartial(a.alert,Fd,{name:"completedEpisode",message:"TREE_MAIN_GAME_CLICKED_COMPLETED_EPISODE"}),Xc.setNodeStateRecursive(a.alert,"showed")},showResetEpisodeConfirm:function(){Ee.appendPartial(a.alert,Fd,{name:"resetEpisode",message:"MESSAGEBOX_RESET_CONFIRM"}),Xc.setNodeStateRecursive(a.alert,"showed")},updateMana:function(a){sc()||kf.api.updateMana(a)}}})});var Fe;Bc.on("ready",function(){function a(a){var b=new tb(Object.merge({x:-80,width:115,height:115,$preload:"planet/mission_border",$mission:null,$base:function(){var a=this.$.mission&&this.$.mission.element;this.opacity=!!a,a&&(this.element.icon.image=Nb.ASSET_ID.format(a),this.element.text.text=a.text)},$showed:function(){Xc.animate(this,"x",{delay:400,duration:200,from:-80,to:58})},$hidden:function(){Xc.animate(this,"x",{delay:200,duration:200,from:58,to:-80})},on:{mousefocusclick:function(){Fe.events.trigger("missionClicked",b.$.mission),i.$.missionId===b.$.mission.element.id&&Xc.setNodeState(i,"hide")}},children:[new Kc({name:"element",children:[new Lc({name:"icon",width:60,height:45}),new mc({name:"text",font:"font",x:-48,y:20,width:96,textAlign:"center",textColor:"rgba(49, 44, 32, 1)",fontType:"verysmall"})]})]},a));return b}function b(a){if(j.opacity=0,a.length){var b=a[0],d=b.x+g.contentNode.body.x,e=b.y+g.contentNode.body.y;u.set(d,e),s=Math.atan2(d,-e),t=g.flickable.height/2-g.flickable.height*u.length/g.contentNode.body.y,g.flickable.contentNode.x=g.flickable.width/2,v.play(),Xc.async.wait(1e3,function(){c(a)})}}function c(a){if(a.length){var c=a[0];a.shift(),j.x=c.x,j.y=c.y,j.scale=8,j.opacity=0,Xc.animate(j,"rotation",{duration:1e3,from:0,to:3}),Xc.animate(j,"scale",{duration:1e3,from:8,to:.8}),Xc.animate(j,"opacity",{duration:100,from:0,to:1,on:{end:function(){Xc.animate(j,"opacity",{duration:100,delay:800,to:0})}}}),Xc.async.wait(700,function(){c.blink()}),a.length?Xc.async.wait(3500,function(){b(a)}):Xc.async.wait(2500,function(){x.length&&d(x[0])})}}function d(a){Fe.appendPartial(o.alert,Ld,{type:"reward",mission:a}),Xc.setNodeStateRecursive(o.alert,"base"),Xc.setNodeStateRecursive(o.alert,"showed"),Ld.events.once("closed",function(){x.shift(),x.length&&Xc.async.wait(1e3,function(){Xc.setNodeStateRecursive(o.alert,"hidden"),Xc.setViewPartial(o.alert,null),x.length&&d(x[0])})})}var e,f,g,h,i,j,k,l,m=0,n=0,o=new Kc({children:[new Kc({x:-512,y:-512,width:1024,height:1024,on:{mousefocus:function(a){Bc.mouse.ignoreNextMouseUp=!0,Engine.now()-n>600&&Engine.now()-m<350&&(Math.abs(g.contentNode.scale-1)>1e-4,n=Engine.now()),m=Engine.now(),a.propagate=!1},mousefocusclick:function(a){a&&(a.propagate=!1)}}}),new Kc({$preload:["message_box/alert_border","message_box/mission_rays","hint/button_big_blue","shop/energy_sign2","shop/hint_1_sign","shop/hint_2_sign","shop/hint_3_sign"]}),new Lc({name:"bkg",width:oh,height:ph,$preload:"planet/bkg1_256"}),new Lc({name:"parallax_far",x:-256,y:-384,width:1536,height:1536,$preload:"planet/bkg2_512",$portrait:{x:-128,y:-192}}),new Lc({name:"parallax_near",x:-256,y:-384,width:1536,height:1536,$preload:"planet/bkg3_1024",$portrait:{x:-128,y:-192}}),g=new fc({name:"planet",elements:[new gc({name:"water-background",x:718,y:782,width:1103,height:1126,$preload:"planet/images/water"}),new gc({name:"pena",x:605,y:588,width:398,height:641,$preload:"planet/images/pena"}),new gc({name:"plankton",x:783,y:908,width:217,height:201,$preload:"planet/images/plankton"}),new gc({name:"earth-background",x:750,y:735,width:1207,height:1254,$preload:"planet/images/earth"}),new gc({name:"fire",x:1213,y:594,width:298,height:527,$preload:"planet/images/fire"}),new gc({name:"grass",x:735,y:346,width:518,height:282,$preload:"planet/images/grass"}),new gc({name:"ice",x:863,y:265,width:556,height:245,$preload:"planet/images/ice"}),new gc({name:"sand",x:871,y:712,width:331,height:221,$preload:"planet/images/sand"}),new gc({name:"tree",x:300,y:584,width:261,height:422,$preload:"planet/images/tree"}),new gc({name:"swamp",x:752,y:648,width:171,height:156,$preload:"planet/images/swamp"}),new gc({name:"skyscraper",x:552,y:1108,width:210,height:235,$preload:"planet/images/skyscraper"}),new gc({name:"airplane",x:652,y:1184,width:47,height:45,$preload:"planet/images/airplane"}),new gc({name:"bird",x:511,y:189,width:57,height:49,$preload:"planet/images/bird"}),new gc({name:"clay",x:1023,y:891,width:115,height:108,$preload:"planet/images/clay"}),new gc({name:"sun",x:386,y:268,width:262,height:250,$preload:"planet/images/sun"}),new gc({name:"whale",x:482,y:702,width:99,height:168,$preload:"planet/images/whale"}),new gc({name:"arable",x:762,y:551,width:150,height:61,$preload:"planet/images/arable"}),new gc({name:"wheat",x:782,y:545,width:111,height:51,$preload:"planet/images/wheat"}),new gc({name:"reed",x:724,y:630,width:77,height:120,$preload:"planet/images/reed"}),new gc({name:"palm",x:695,y:782,width:213,height:115,$preload:"planet/images/palm"}),new gc({name:"human",x:600,y:451,width:36,height:46,$preload:"planet/images/human"}),new gc({name:"flower",x:715,y:378,width:385,height:138,$preload:"planet/images/flower"}),new gc({name:"hut",x:660,y:579,width:84,height:84,$preload:"planet/images/hut"}),new gc({name:"boat",x:613,y:632,width:59,height:39,$preload:"planet/images/boat"}),new gc({name:"sunflower",x:411,y:392,width:114,height:111,$preload:"planet/images/sunflower"}),new gc({name:"dinosaur",x:432,y:454,width:111,height:147,$preload:"planet/images/dinosaur"}),new gc({name:"dolphin",x:501,y:583,width:89,height:115,$preload:"planet/images/dolphin"}),new gc({name:"egg",x:927,y:777,width:48,height:46,$preload:"planet/images/egg"}),new gc({name:"stone",x:660,y:267,width:129,height:48,$preload:"planet/images/stone"}),new gc({name:"fern",x:878,y:784,width:105,height:125,$preload:"planet/images/fern"}),new gc({name:"house",x:701,y:338,width:94,height:79,$preload:"planet/images/house"}),new gc({name:"mushroom",x:684,y:653,width:42,height:51,$preload:"planet/images/mushroom"}),new gc({name:"octopus",x:474,y:847,width:65,height:101,$preload:"planet/images/octopus"}),new gc({name:"livestock",x:587,y:394,width:104,height:54,$preload:"planet/images/livestock"}),new gc({name:"blood",x:952,y:347,width:60,height:32,$preload:"planet/images/blood"}),new gc({name:"butterfly",x:881,y:357,width:45,height:42,$preload:"planet/images/butterfly"}),new gc({name:"lizard",x:990,y:781,width:79,height:53,$preload:"planet/images/lizard"}),new gc({name:"turtle",x:570,y:869,width:87,height:70,$preload:"planet/images/turtle"}),new gc({name:"apple",x:273,y:504,width:102,height:66,$preload:"planet/images/apple"}),new gc({name:"treant",x:298,y:682,width:87,height:88,$preload:"planet/images/treant"}),new gc({name:"storm",x:661,y:995,width:236,height:219,$preload:"planet/images/storm"}),new gc({name:"locomotive",x:829,y:1047,width:376,height:216,$preload:"planet/images/locomotive"}),new gc({name:"rocket",x:324,y:1243,width:233,height:181,$preload:"planet/images/rocket"}),new gc({name:"astronaut",x:201,y:1209,width:87,height:87,$preload:"planet/images/astronaut"}),new gc({name:"UFO",x:1226,y:171,width:154,height:221,$preload:"planet/images/ufo"}),new gc({name:"alien",x:1274,y:184,width:93,height:73,$preload:"planet/images/alien"}),new gc({name:"animal",x:1093,y:513,width:43,height:43,$preload:"planet/images/animal"}),new gc({name:"dust",x:946,y:710,width:200,height:150,$preload:"planet/images/dust"}),new gc({name:"poison",x:689,y:655,width:25,height:43,$preload:"planet/images/poison"}),new gc({name:"bricks",x:987,y:889,width:72,height:64,$preload:"planet/images/bricks"}),new gc({name:"limestone",x:878,y:423,width:134,height:54,$preload:"planet/images/limestone"}),new gc({name:"book",x:633,y:467,width:36,height:39,$preload:"planet/images/book"}),new gc({name:"wood",x:656,y:753,width:45,height:42,$preload:"planet/images/wood"}),new gc({name:"glass",x:902,y:656,width:78,height:52,$preload:"planet/images/glass"}),new gc({name:"cement",x:346,y:686,width:52,height:70,$preload:"planet/images/cement"}),new gc({name:"ceramics",x:571,y:440,width:32,height:44,$preload:"planet/images/ceramics"}),new gc({name:"wool",x:635,y:420,width:37,height:30,$preload:"planet/images/wool"}),new gc({name:"meat",x:693,y:426,width:31,height:53,$preload:"planet/images/meat"}),new gc({name:"milk",x:659,y:405,width:28,height:19,$preload:"planet/images/milk"}),new gc({name:"tools",x:581,y:570,width:56,height:47,$preload:"planet/images/tools"}),new gc({name:"metal",x:1117,y:376,width:86,height:49,$preload:"planet/images/metal"}),new gc({name:"coal",x:815,y:1207,width:86,height:66,$preload:"planet/images/coal"}),new gc({name:"seeds",x:810,y:643,width:52,height:28,$preload:"planet/images/seeds"}),new gc({name:"fabric",x:516,y:817,width:60,height:63,$preload:"planet/images/fabric"}),new gc({name:"paper",x:773,y:656,width:57,height:38,$preload:"planet/images/paper"}),new gc({name:"manure",x:534,y:411,width:41,height:42,$preload:"planet/images/manure"}),new gc({name:"saltpetre",x:591,y:246,width:70,height:33,$preload:"planet/images/saltpetre"}),new gc({name:"sulfur",x:836,y:604,width:51,height:40,$preload:"planet/images/sulfur"}),new gc({name:"tobacco",x:843,y:324,width:58,height:31,$preload:"planet/images/tobacco"}),new gc({name:"flour",x:782,y:563,width:52,height:43,$preload:"planet/images/flour"}),new gc({name:"dough",x:644,y:671,width:28,height:33,$preload:"planet/images/dough"}),new gc({name:"bread",x:757,y:699,width:49,height:42,$preload:"planet/images/bread"}),new gc({name:"spirit",x:928,y:307,width:45,height:43,$preload:"planet/images/spirit"}),new gc({name:"beer",x:907,y:327,width:30,height:30,$preload:"planet/images/beer"}),new gc({name:"cigarette",x:827,y:290,width:27,height:51,$preload:"planet/images/cigarette"}),new gc({name:"feather",x:894,y:394,width:40,height:28,$preload:"planet/images/feather"}),new gc({name:"alcoholic",x:804,y:705,width:67,height:52,$preload:"planet/images/alcoholic"}),new gc({name:"assassin",x:525,y:1044,width:43,height:60,$preload:"planet/images/assassin"}),new gc({name:"hero",x:589,y:1196,width:61,height:147,$preload:"planet/images/hero"}),new gc({name:"hunter",x:259,y:582,width:50,height:54,$preload:"planet/images/hunter"}),new gc({name:"corpse",x:928,y:256,width:40,height:29,$preload:"planet/images/corpse"}),new gc({name:"warrior",x:230,y:747,width:52,height:53,$preload:"planet/images/warrior"}),new gc({name:"pena1",x:440,y:656,width:90,height:135,$preload:"planet/images/pena1"}),new gc({name:"pena3",x:866,y:960,width:62,height:98,$preload:"planet/images/pena3"}),new gc({name:"pena2",x:576,y:604,width:132,height:115,$preload:"planet/images/pena2"}),new gc({name:"lava",x:987,y:615,width:303,height:246,$preload:"planet/images/lava"}),new gc({name:"fish",x:788,y:479,width:160,height:87,$preload:"planet/images/fish"}),new gc({name:"steam",x:963,y:470,width:209,height:123,$preload:"planet/images/steam"}),new gc({name:"ash",x:1324,y:499,width:210,height:340,$preload:"planet/images/ash"}),new gc({name:"planet_glow",x:750,y:749,width:1386,height:1387,$preload:"planet/images/planet_glow"}),new gc({name:"cloud_01",x:773,y:168,width:355,height:113,$preload:"planet/images/cloud_01"}),new gc({name:"cloud_02",x:759,y:142,width:191,height:100,$preload:"planet/images/cloud_02"}),new gc({name:"cloud_03",x:755,y:183,width:501,height:233,$preload:"planet/images/cloud_03"}),new gc({name:"cloud_04",x:687,y:184,width:466,height:184,$preload:"planet/images/cloud_04"}),j=new Lc({name:"spiral",x:0,y:0,width:128,height:128,opacity:0,$preload:"particles/spiral_3_480"})]}),new Kc({name:"ui",children:[h=new Kc({x:-496,y:-320,$portrait:{x:-314},children:[a({y:58}),a({y:170}),a({y:282}),a({y:394})]}),i=new oc({name:"tutorialNewMission",x:-200,y:-260,opacity:0,$display:-1,missionId:"",$positions:sc()?[{x:-50,y:-260},{x:-50,y:-150},{x:-50,y:-40},{x:-50,y:70}]:[{x:-200,y:-260},{x:-200,y:-150},{x:-200,y:-40},{x:-200,y:70}],$showed:function(){this.opacity=0,this.$.display>=0&&(this.y=this.$.positions[this.$.display].y,Xc.setNodeStateRecursive(this,"show"))},$show:function(){this.text.changeTextDefinition("NEW_MISSION_AVAILABLE"),this.x=700,this.opacity=1,this.left.$.active();var a=this;Xc.animate(a,"x",{duration:1e3,from:600,to:this.$.positions[this.$.display].x,easing:Vc.inOutSine,on:{end:function(){Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})}}})},$hidden:function(){this.$.hide()},$hide:function(){this.$.display=-1,this.$.missionId="",this.opacity=0,Xc.stopAnimations(this)}}),l=new Kc({$hide:{opacity:1,y:-500},$show:function(){this.opacity=0,this.y=0,Xc.animate(l,"opacity",{to:1,duration:1500})},children:[e=new Kc({name:"statusbar",x:0,y:12,$showed:function(){this.y=-64,Xc.animate(this,"opacity",{duration:200,from:0,to:1}),Xc.animate(this,"y",{duration:400,from:-64,to:12})},$hidden:function(){Xc.animate(this,"opacity",{duration:200,from:1,to:0}),Xc.animate(this,"y",{duration:400,from:12,to:-64})}})]}),new Kc({$showed:function(){this.y=70,Xc.animate(this,"opacity",{duration:200,from:0,to:1}),Xc.animate(this,"y",{duration:400,from:70,to:0})},$hidden:function(){Xc.animate(this,"opacity",{duration:1e3,from:1,to:0}),Xc.animate(this,"y",{duration:1e3,from:0,to:70})},children:[k=new Kc({$hide:{opacity:0},$show:function(){k.opacity=1,k.y=1e3,Xc.animate(k,"y",{to:0,duration:1500})},children:[f=new Kc({name:"toolbar",y:626,$portrait:{y:736}}),new Kc({y:200,$portrait:{x:50,y:300},children:[new oc({name:"tutorialHint1",x:-255,y:0,opacity:0,$showed:function(){Bc.planet.firstTime&&Xc.setNodeStateRecursive(this,"show")},$show:function(){this.text.changeTextDefinition("PLANET_HINT1"),this.opacity=1,this.down.$.active();var a=this;Xc.animate(a,"y",{duration:300,from:-5,to:5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hidden:function(){this.$.hide()},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}})]})]})]})]}),new Kc({name:"alert"}),new Kc({name:"fortune"})]});Xc.bindCustomMethodsRecursive(o);var p,q=1,r=new Jc({type:"vsync",loop:!0,on:{step:function(){g.rotate(q/100)}}}),s=0,t=0,u=new Hc(0,0),v=new Jc({type:"vsync",duration:2e3,delay:17,on:{step:function(){for(var a=this.stepprogress;a>0;)g.contentNode.rotation-=.08*(g.contentNode.rotation-s),g.flickable.contentNode.y-=.08*(g.flickable.contentNode.y-t*g.scale),a-=20}}}),w=new Jc({type:"vsync",duration:6e3,delay:50,on:{step:function(){var a=p.shift();a&&a.blink&&a.blink({force:!0})},stop:function(){Xc.setNodeState(k,"show"),Xc.setNodeState(l,"show"),p.clear(),y=!1}}}),x=[],y=!1;th.on("mouseup",function(a){r&&r.playing&&r.stop(),y&&(y=!1,Fe.events.trigger("skipIntro"))}),Fe=new W({name:"planet",node:o,onShow:function(a){Xc.setMusicPlaylist("Game");var b=this;j.opacity=0;var c=ed.node;Xc.setViewPartial(e,c.statusbar.$.lastPartial),setTimeout(function(){Xc.setNodeStateRecursive(e,"planet")},0),W.imageManager.loadView(e),b.appendPartial(f,pf,null,function(a){b.appendPartial(a.button1,If),b.appendPartial(a.button2,wf),Bc.promo.hasUniverse()?b.appendPartial(a.button3,Xf):Bc.config.getAsInt("fortune_enabled",0)&&b.appendPartial(a.button3,yf),b.appendPartial(a.button4,Vf),b.appendPartial(a.button5,Wf),setTimeout(function(){Xc.setNodeStateRecursive(a,"lineoff")})}),wf.events.on("click",function(){0!=g.contentNode.rotation&&g.contentNode.animate("rotation",0,500),g.flickable.horizontalContinuous.stop(),g.flickable.verticalContinuous.stop(),g.flickable.contentNode.x!=g.flickable.width/2&&g.flickable.contentNode.animate("x",g.flickable.width/2,500),g.flickable.contentNode.y!=g.flickable.height/2&&g.flickable.contentNode.animate("y",g.flickable.height/2,500),.5!=g.contentNode.scale&&g.contentNode.animate("scale",.5,500),g.blink()}),Vf.events.on("mousedown",function(){q=1,r.play()}).on("mouseup",function(){r.pause()}),Wf.events.on("mousedown",function(){q=-1,r.play()}).on("mouseup",function(){r.pause()});for(var d=0,k=eb.MAX_VISIBLE;k>d;d++){var l=a.missions[d];h.children[d].$.mission=l,null!=l&&Bc.planet.newMission===l.element.id&&(i.$.missionId=l.element.id,i.$.display=d,Bc.planet.newMission=null)}var m=1,n=1;Bc.mouse.events.on("rotatestart",function(a){n=g.contentNode.rotation,g.flickable.enabled=!1}),Bc.mouse.events.on("rotateend",function(a){g.flickable.enabled=!0}),Bc.mouse.events.on("rotatemove",function(a){g.contentNode.rotation=n-Math.deg2rad(a.rotation)}),Bc.mouse.events.on("pinchstart",function(a){m=g.zoom}),Bc.mouse.events.on("pinchmove",function(a){g.zoom=Math.min(Math.max(m*a.scale,.4),1.8)})},onHide:function(a){y=!1,r.stop(),v.stop(),w.stop(),p=null,x.clear(),Bc.mouse.events.off("rotatestart"),Bc.mouse.events.off("rotateend"),Bc.mouse.events.off("rotatemove"),Bc.mouse.events.off("pinchstart"),Bc.mouse.events.off("pinchmove"),a()},api:{planet:{blinkElements:function(a){if(Array.isArray(a)){g.contentNode.rotation=g.contentNode.rotation%Math.PI;var c=g.bodyNode;a=a.map(function(a){return c[a.toLowerCase()]}),a=a.filter(function(a){return a}),a.forEach(function(a){a.opacity=0}),b(a)}},showMissionAlert:function(a){Fe.appendPartial(o.alert,Ld,{type:"desc",mission:a}),Xc.setNodeStateRecursive(o.alert,"base"),Xc.setNodeStateRecursive(o.alert,"showed")},showPlanet:function(){Xc.animate(g.flickable.contentNode,"scale",{duration:1500,from:0,to:1})},showAllElements:function(){Xc.stopAnimation(g.flickable.contentNode,"scale"),Bc.once("loadingStopped",function(){g.contentNode.rotation=0,p=g.elements.map(function(a){return a.blink?(Fh&&a.preload(),a):void 0}),g.flickable.contentNode.y=g.flickable.height/2,Xc.animate(g.flickable.contentNode,"y",{duration:8e3,from:g.flickable.height/2,to:1.4*g.flickable.height,easing:Vc.outSine}),g.flickable.contentNode.animate("scale",{duration:400,from:.1,to:.7,on:{end:function(){w.play(),y=!0,g.flickable.contentNode.animate("scale",{duration:2e3,to:1.1,easing:Vc.outSine})}}}),g.rotationAnimation.play()}),Xc.setNodeState(k,"hide"),Xc.setNodeState(l,"hide")},showWinnerAlert:function(a){x.indexOf(a)<0&&x.push(a)},showFortune:function(){Fe.appendPartial(o.fortune,Hd,{}),Xc.setNodeStateRecursive(o.fortune,"showed")}}}})});var Ge;Bc.on("ready",function(){var a,b=new Kc({$showed:function(){Xc.playSound("howtoplay_screen_transition")},x:-512,y:-384,$portrait:{x:-614.4,y:-300,scale:1.2},children:[new Kc({name:"left",x:15,y:61,$page0:{opacity:1,x:256,y:-37},$page1:{opacity:0,x:25600,y:-37},children:[new Lc({name:"left_help",x:259,y:293,width:495,height:567,opacity:0,$preload:xc.HELP_FRAGMENTED?null:"interface/help_puzzle_left",$showed:function(){this.image=xc.HELP_FRAGMENTED?null:"interface/help_puzzle_left",Xc.animate(this,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})}}),new Lc({x:267,y:300,width:486,height:10,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({x:267,y:300,width:486,height:10,rotation:1.57075,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_0":null,x:140,y:190,width:181,height:167}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_1":null,x:370,y:150,width:207,height:141}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_2":null,x:140,y:480,width:147,height:155}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_left_fragment_3":null,x:370,y:480,width:149,height:78}),new Kc({children:[new nc({x:28,y:36,width:220,height:50,text:"PUZ_HELP_LP1_T1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-156,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({name:"a1",x:46,y:199,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"y",{delay:600,duration:400,from:this.y- -100,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Kc({name:"arrow0",x:24,y:0,children:[new Lc({name:"arrow",x:22,y:25,width:18,height:50,$preload:"interface/arrow_u",$showed:{image:"interface/arrow_u"}}),new nc({name:"text",x:-16,y:40,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({name:"a2",x:163,y:111,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"y",{delay:600,duration:400,from:this.y-100,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Kc({name:"arrow1",x:0,y:0,children:[new Lc({name:"arrow",x:22,y:60,width:18,height:50,$preload:"interface/arrow_d",$showed:{image:"interface/arrow_d"}}),new nc({name:"text",x:-16,y:6,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({children:[new nc({x:265,y:36,width:220,height:50,text:"PUZ_HELP_LP1_T2",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-156,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({name:"a3",x:278,y:205,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"y",{delay:600,duration:400,from:this.y- -94,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Kc({name:"arrow0",x:24,y:0,children:[new Lc({name:"arrow",x:22,y:25,width:18,height:50,$preload:"interface/arrow_u",$showed:{image:"interface/arrow_u"}}),new nc({name:"text",x:-16,y:40,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({name:"a4",x:350,y:205,opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this,"y",{delay:600,duration:400,from:this.y- -94,to:this.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:600,duration:400,from:0,to:1,easing:Vc.outSine}))},children:[new Kc({name:"arrow0",x:24,y:0,children:[new Lc({name:"arrow",x:22,y:25,width:18,height:50,$preload:"interface/arrow_u",$showed:{image:"interface/arrow_u"}}),new nc({name:"text",x:-16,y:40,width:70,height:24,text:"HELP_SCR_TAP",textColor:"rgba(45, 16, 154, 1)",textAlign:"center",fontType:"author"})]})]}),new Kc({children:[new nc({x:28,y:320,width:220,height:50,text:"PUZ_HELP_LP1_T3",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-100,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({children:[new nc({x:265,y:320,width:220,height:50,text:"PUZ_HELP_LP1_T4",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-100,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]})]}),new Kc({name:"right",x:493,y:61,$page1:{opacity:1,x:256,y:-37},$page0:{opacity:0,x:25600,y:-37},children:[new Lc({name:"right_help",x:255,y:295,width:495,height:567,opacity:0,$preload:"interface/help_puzzle_right",$showed:function(){this.image="interface/help_puzzle_right",Xc.animate(this,"opacity",{delay:100,duration:400,from:0,to:1,easing:Vc.outSine})}}),new Lc({x:267,y:300,width:486,height:10,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({x:267,y:300,width:486,height:10,rotation:1.57075,$preload:xc.HELP_FRAGMENTED?"interface/line":null}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_right_fragment_0":null,x:140,y:220,width:197,height:93}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_right_fragment_1":null,x:140,y:510,width:149,height:62}),new Lc({$preload:xc.HELP_FRAGMENTED?"interface/help_puzzle_right_fragment_2":null,x:375,y:475,width:201,height:194}),new Kc({children:[new nc({x:28,y:36,width:220,height:50,text:"PUZ_HELP_RP1_T1",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-156,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({children:[new nc({x:265,y:66,width:220,height:50,text:"PUZ_HELP_RP1_T2",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-156,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({children:[new nc({x:28,y:320,width:220,height:50,text:"PUZ_HELP_RP1_T3",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-100,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),new Kc({children:[new nc({x:265,y:320,width:220,height:50,text:"PUZ_HELP_RP1_T4",textColor:"rgba(84, 35, 4, 1)",textAlign:"center",fontType:sc()?"author":"font",opacity:0,$showed:function(){sc()?this.opacity=1:(Xc.animate(this.parent,"y",{delay:300,duration:400,from:this.parent.y-100,to:this.parent.y-0,easing:Vc.outSine}),Xc.animate(this,"opacity",{delay:300,duration:400,from:0,to:1,easing:Vc.outSine}))}})]}),a=new Lc({x:375,y:470,width:60,height:45})]})]});Xc.bindCustomMethodsRecursive(b),Ge=new W({name:"puzzles-help",onShow:function(c,d){var e=this,f=c&&c.page;ed.show(function(g){Xc.setViewPartial(g.left,b),sc()?e.appendPartial(g.statusbar,lf,{title:f?"HELP2_SCR_TITLE":"HELP1_SCR_TITLE"}):e.appendPartial(g.statusbar,cf,{center:"HELP_SCR_TITLE"}),e.appendPartial(g.toolbar,pf,null,function(a){e.appendPartial(a.button1,uf),sc()&&0===f&&e.appendPartial(a.button5,Ff)}),a.image=Nb.ASSET_ID.format(c.finalElement),d(g),sc()&&(f?Xc.setNodeStateRecursive(b,"page1"):Xc.setNodeStateRecursive(b,"page0"))})}})});var He;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-527,y:sc()?-480:-346,children:[new Lc({name:"bkg",x:501,y:284,width:1002,height:587,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_new_year",$showed:{image:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_new_year"},children:[new Kc({name:"gifts",x:-650,y:-330,$portrait:{x:-1150,y:-330},children:[new Lc({name:"cthulhu_01",x:995,y:213,width:158,height:185,$preload:["quests_progress/presents/cthulhu_01","quests_progress/presents/cthulhu_02"],$showed:{image:"quests_progress/presents/cthulhu_01"},$active:{image:"quests_progress/presents/cthulhu_02"}}),new Lc({name:"dragon_01",x:1052,y:389,width:180,height:129,$preload:["quests_progress/presents/dragon_01","quests_progress/presents/dragon_02"],$showed:{image:"quests_progress/presents/dragon_01"},$active:{image:"quests_progress/presents/dragon_02"}}),new Lc({name:"drakula_01",x:1048,y:303,width:180,height:134,$preload:["quests_progress/presents/drakula_01","quests_progress/presents/drakula_02"],$showed:{image:"quests_progress/presents/drakula_01"},$active:{image:"quests_progress/presents/drakula_02"}}),new Lc({name:"elvis_01",x:809,y:229,width:137,height:167,$preload:["quests_progress/presents/elvis_01","quests_progress/presents/elvis_02"],$showed:{image:"quests_progress/presents/elvis_01"},$active:{image:"quests_progress/presents/elvis_02"}}),new Lc({name:"emperor_01",x:909,y:530,width:116,height:159,$preload:["quests_progress/presents/emperor_01","quests_progress/presents/emperor_02"],$showed:{image:"quests_progress/presents/emperor_01"},$active:{image:"quests_progress/presents/emperor_02"}}),new Lc({name:"hero_01",x:904,y:175,width:111,height:174,$preload:["quests_progress/presents/hero_01","quests_progress/presents/hero_02"],$showed:{image:"quests_progress/presents/hero_01"},$active:{image:"quests_progress/presents/hero_02"}}),new Lc({name:"newton_01",x:772,y:401,width:167,height:114,$preload:["quests_progress/presents/newton_01","quests_progress/presents/newton_02"],$showed:{image:"quests_progress/presents/newton_01"},$active:{image:"quests_progress/presents/newton_02"}}),new Lc({name:"nostradamus_01",x:754,y:318,width:172,height:154,$preload:["quests_progress/presents/nostradamus_01","quests_progress/presents/nostradamus_02"],$showed:{image:"quests_progress/presents/nostradamus_01"},$active:{image:"quests_progress/presents/nostradamus_02"}}),new Lc({name:"robot_01",x:823,y:486,width:144,height:158,$preload:["quests_progress/presents/robot_01","quests_progress/presents/robot_02"],$showed:{image:"quests_progress/presents/robot_01"},$active:{image:"quests_progress/presents/robot_02"}}),new Lc({name:"zombie_01",x:1003,y:484,width:132,height:165,$preload:["quests_progress/presents/zombie_01","quests_progress/presents/zombie_02"],$showed:{image:"quests_progress/presents/zombie_01"},$active:{image:"quests_progress/presents/zombie_02"}})]}),new nc({name:"title",x:-373,y:-11.5,width:345,height:66,textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$base:function(){this.changeTextDefinition("QUEST1_PROGRESS_OBJECTIVES")},$finished:function(){this.changeTextDefinition("QUEST1_COMPLETE")},$portrait:{x:-420,y:400}})]})]});Xc.bindCustomMethodsRecursive(a),He=new W({name:"quests-quest_1-help",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=a.bkg.gifts,g=!0,h=0,i=0;for(h=0;h<b.toUnlock.length;++h){var j=f.children[h],k=b.toUnlock[h],l=!1;l="string"==typeof k?b.elements[k]?!0:!1:k.every(function(a){return b.elements[a]?!0:!1}),l?(i++,Xc.setNodeState(j,"active")):g=!1}Yc.get("safeMode")?a.bkg.gifts.robot_01.opacity=0:a.bkg.gifts.robot_01.opacity=1,cf.node.center.format=[Math.round(100*b.progress)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS"),g&&Xc.setNodeState(a.bkg.title,"finished")})}})});var Ie;Bc.on("ready",function(){var a,b=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){Ie.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"teaser_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_Q1_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),a=new Kc({name:"teaser_wrapper",x:-140,y:-25,$portrait:{y:100},children:[new Lc({name:"screen_1",x:419,y:358,width:377,height:415,$preload:"teaser/q1/screen_01",$showed:{image:"teaser/q1/screen_01"},opacity:0}),new Lc({name:"screen_2",x:410,y:375,width:334,height:513,$preload:"teaser/q1/screen_02",$showed:{image:"teaser/q1/screen_02"},opacity:0}),new Lc({name:"screen_3",x:410,y:375,width:334,height:513,$preload:"teaser/q1/screen_03",$showed:{image:"teaser/q1/screen_03"},opacity:0}),new Lc({name:"screen_4",x:406,y:348,width:367,height:405,$preload:"teaser/q1/screen_04_",$showed:{image:"teaser/q1/screen_04_"},opacity:0})]}),new cc({delay:6e3,$active:function(){b.teaser_wrapper.description.changeTextDefinition("TEASER_Q1_1"),Xc.setNodeStateRecursive(b.teaser_wrapper.description,"appear"),a.screen_1.opacity=1,Xc.playVoice("quest_1_1")}}),new cc({delay:3e3,$active:function(){b.teaser_wrapper.description.changeTextDefinition("TEASER_Q1_2"),Xc.setNodeStateRecursive(b.teaser_wrapper.description,"appear"),Xc.playVoice("quest_1_2"),a.screen_1.opacity=0,a.screen_2.opacity=1}}),new cc({delay:2e3,$active:function(){b.teaser_wrapper.description.changeTextDefinition("TEASER_Q1_3"),Xc.setNodeStateRecursive(b.teaser_wrapper.description,"appear"),Xc.playVoice("quest_1_3"),a.screen_2.opacity=0,a.screen_3.opacity=1}}),new cc({delay:4e3,$active:function(){b.teaser_wrapper.description.changeTextDefinition("TEASER_Q1_4"),Xc.setNodeStateRecursive(b.teaser_wrapper.description,"appear"),Xc.playVoice("quest_1_4"),a.screen_3.opacity=0,a.screen_4.opacity=1}}),new cc({$active:function(){a.screen_4.opacity=0}})]});Xc.bindCustomMethodsRecursive(b),Ie=new W({name:"quests-quest_1-intro",node:b})});var Je;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-532,y:sc()?-480:-346,children:[new Lc({name:"bkg",x:501,y:284,width:1002,height:587,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_save_princess",$showed:{image:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_save_princess"},children:[new Lc({name:"map",x:266,y:13,width:384,height:384,$portrait:{x:-245,y:100},$preload:"quests_progress/princess/quest_map",$showed:{image:"quests_progress/princess/quest_map"},children:[new Lc({name:"cross_00_1",x:-64,y:131,width:48,height:48,$preload:["quests_progress/princess/cross_big_01","quests_progress/princess/cross_big_02"],$showed:{image:"quests_progress/princess/cross_big_01"},$active:{image:"quests_progress/princess/cross_big_02"}}),new Lc({name:"cross_01_1",x:-11,y:134,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_02_1",x:49,y:132,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_03_1",x:100,y:123,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_04_1",x:136,y:100,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_05_1",x:130,y:61,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_06_1",x:77,y:53,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_07_1",x:31,y:47,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_08_1",x:-7,y:19,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_09_1",x:-46,y:-22,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_10_1",x:-82,y:-56,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_11_1",x:-139,y:-61,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_12_1",x:-143,y:-109,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_13_1",x:-92,y:-135,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_14_1",x:-29,y:-110,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_15_1",x:-7,y:-65,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_16_1",x:37,y:-21,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_17_1",x:90,y:-11,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_18_1",x:130,y:-51,width:24,height:24,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_small_01"},$active:{image:"quests_progress/princess/cross_small_02"}}),new Lc({name:"cross_19_1",x:136,y:-105,width:48,height:48,$preload:["quests_progress/princess/cross_small_01","quests_progress/princess/cross_small_02"],$showed:{image:"quests_progress/princess/cross_big_01"},$active:{image:"quests_progress/princess/cross_big_02"}})]})]}),new nc({name:"title",x:130,y:282,width:320,height:66,textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",format:[0],$base:function(){this.changeTextDefinition("QUEST2_PROGRESS_OBJECTIVES")},$finished:function(){this.changeTextDefinition("QUEST2_COMPLETE")},$portrait:{x:100,y:660}})]});Xc.bindCustomMethodsRecursive(a),Je=new W({name:"quests-quest_2-help",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=a.bkg.map,g=!1,h=b.progress,i=f.children.length-1,j=h*i,k=0;for(Xc.setNodeState(f.children[0],"active"),k=1;k<Math.floor(j+1);++k)k<f.children.length&&Xc.setNodeState(f.children[k],"active");cf.node.center.format=[Math.round(100*h)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS"),h>=1&&(g=!0),g&&Xc.setNodeState(a.title,"finished")})}})});var Ke;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){Ke.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_Q2_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-140,y:9,$portrait:{y:100},children:[a.abduction=new Lc({name:"abduction",x:414,y:365,width:408,height:510,$preload:"teaser/q2/abduction_bkg",$showed:{image:"teaser/q2/abduction_bkg"},children:[a.dragon=new Lc({name:"dragon",x:-24,y:-176,width:383,height:217,$preload:"teaser/q2/abduction_dragon",$showed:{image:"teaser/q2/abduction_dragon"}}),a.crown=new Lc({name:"crown",x:-86,y:-52,width:20,height:20,$preload:"teaser/q2/abduction_crown",$showed:{image:"teaser/q2/abduction_crown"}}),a.king=new Lc({name:"king",x:91,y:72,width:281,height:293,$preload:"teaser/q2/abduction_king",$showed:{image:"teaser/q2/abduction_king"}})]}),a.band=new Lc({name:"band",x:397,y:351,width:383,height:472,$preload:"teaser/q2/band_bkg",$showed:{image:"teaser/q2/band_bkg"},opacity:0,children:[a.arm=new Lc({name:"arm",x:5,y:-145,width:163,height:163,$preload:"teaser/q2/band_arm",$showed:{image:"teaser/q2/band_arm"}}),a.fire=new Lc({x:11,y:31,width:163,height:163,$preload:["teaser/q2/band_fire_03","teaser/q2/band_fire_02","teaser/q2/band_fire_01"],$showed:function(){Xc.animateImage(this,["teaser/q2/band_fire_01","teaser/q2/band_fire_02","teaser/q2/band_fire_03"])}}),a.hoop=new Lc({x:126,y:202,width:82,height:82,$preload:["teaser/q2/band_hoop_03","teaser/q2/band_hoop_02","teaser/q2/band_hoop_01"],$showed:function(){Xc.animateImage(this,["teaser/q2/band_hoop_01","teaser/q2/band_hoop_02","teaser/q2/band_hoop_03"])}})]})]}),new cc({$active:function(){a.description.changeTextDefinition("TEASER_Q2_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.abduction.opacity=1,Xc.playVoice("quest_2_1"),b.scale_dragon=a.dragon.animate("scale",.88,5e3),b.move_dragon=Uc({animations:[Rc({target:a.dragon,property:"x",to:a.dragon.x+-30,duration:5e3}),Rc({target:a.dragon,property:"y",to:a.dragon.y+-17,duration:5e3})]}),b.scale_king=a.king.animate("scale",.96,5e3),b.move_king=Uc({animations:[Rc({target:a.king,property:"x",to:a.king.x+-10,duration:5e3}),Rc({target:a.king,property:"y",to:a.king.y+-5.6499999999999995,duration:5e3})]}),b.move_crown=a.crown.animate("y",a.crown.y+20,5e3)}}),new cc({$active:function(){a.description.changeTextDefinition("TEASER_Q2_2"),Xc.setNodeStateRecursive(a.description,"appear"),Xc.playVoice("quest_2_2"),b.scale_dragon.playing&&b.scale_dragon.stop(),b.move_dragon.playing&&b.move_dragon.stop(),b.scale_king.playing&&b.scale_king.stop(),b.move_king.playing&&b.move_king.stop(),b.move_crown.playing&&b.move_crown.stop(),a.abduction.opacity=0,a.band.opacity=1,a.arm.opacity=1,a.fire.opacity=1,a.hoop.opacity=1,a.arm.originX=167-a.arm.width/2,a.arm.originY=150-a.arm.height/2,b.arm_rotate=a.arm.animate("rotation",-.08726646259971647,1e3,{from:0,loop:!0,reverse:!0})}}),new cc({$active:function(){b.arm_rotate.stop(),a.hoop.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),Ke=new W({name:"quests-quest_2-intro",node:c})});var Le;Bc.on("ready",function(){var a=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){Le.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_Q2_FIN_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-171,y:-10,children:[new Lc({name:"bkg",x:451,y:376,width:408,height:510,$preload:"teaser/q2/win_bkg",$showed:{image:"teaser/q2/win_bkg"}}),new Lc({name:"princess",x:363,y:431,width:204,height:293,$preload:"teaser/q2/win_princess",$showed:{image:"teaser/q2/win_princess"}})]}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_Q2_FIN_1"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_Q2_FIN_2"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}})]});Xc.bindCustomMethodsRecursive(a),Le=new W({name:"quests-quest_2-intro-finish",node:a})});var Me;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({name:"bkg",x:606,y:395,width:1252,height:734,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_20th",$showed:{image:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_20th"}}),new Kc({name:"progress",x:528,y:67,$portrait:{x:50,y:50},children:[new Lc({name:"bkg2",x:243,y:280,width:486,height:486,$preload:"quests_progress/20th/progress_bkg",$showed:{image:"quests_progress/20th/progress_bkg"}}),new Lc({name:"pos_00",x:334,y:425,width:104,height:97,$preload:["quests_progress/20th/1900_normal","quests_progress/20th/1900_complete"],$showed:{image:"quests_progress/20th/1900_normal"},$active:{image:"quests_progress/20th/1900_complete"}}),new Lc({name:"pos_01",x:388,y:256,width:100,height:90,$preload:["quests_progress/20th/1910_normal","quests_progress/20th/1910_complete"],$showed:{image:"quests_progress/20th/1910_normal"},$active:{image:"quests_progress/20th/1910_complete"}}),new Lc({name:"pos_02",x:339,y:115,width:100,height:87,$preload:["quests_progress/20th/1920_normal","quests_progress/20th/1920_complete"],$showed:{image:"quests_progress/20th/1920_normal"},$active:{image:"quests_progress/20th/1920_complete"}}),new Lc({name:"pos_03",x:184,y:77,width:92,height:82,$preload:["quests_progress/20th/1930_normal","quests_progress/20th/1930_complete"],$showed:{image:"quests_progress/20th/1930_normal"},$active:{image:"quests_progress/20th/1930_complete"}}),new Lc({name:"pos_04",x:63,y:174,width:88,height:78,$preload:["quests_progress/20th/1940_normal","quests_progress/20th/1940_complete"],$showed:{image:"quests_progress/20th/1940_normal"},$active:{image:"quests_progress/20th/1940_complete"}}),new Lc({name:"pos_05",x:83,y:296,width:84,height:72,$preload:["quests_progress/20th/1950_normal","quests_progress/20th/1950_complete"],$showed:{image:"quests_progress/20th/1950_normal"},$active:{image:"quests_progress/20th/1950_complete"}}),new Lc({name:"pos_06",x:173,y:357,width:77,height:68,$preload:["quests_progress/20th/1960_normal","quests_progress/20th/1960_complete"],$showed:{image:"quests_progress/20th/1960_normal"},$active:{image:"quests_progress/20th/1960_complete"}}),new Lc({name:"pos_07",x:277,y:307,width:73,height:63,$preload:["quests_progress/20th/1970_normal","quests_progress/20th/1970_complete"],$showed:{image:"quests_progress/20th/1970_normal"},$active:{image:"quests_progress/20th/1970_complete"}}),new Lc({name:"pos_08",x:241,y:194,width:69,height:59,$preload:["quests_progress/20th/1980_normal","quests_progress/20th/1980_complete"],$showed:{image:"quests_progress/20th/1980_normal"},$active:{image:"quests_progress/20th/1980_complete"}}),new Lc({name:"pos_09",x:193,y:244,width:64,height:53,$preload:["quests_progress/20th/1990_normal","quests_progress/20th/1990_complete"],$showed:{image:"quests_progress/20th/1990_normal"},$active:{image:"quests_progress/20th/1990_complete"}})]}),new nc({name:"title",x:130,y:282,width:300,height:66,text:"QUEST20TH_PROGRESS_OBJECTIVES",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",format:[0],$base:function(){this.changeTextDefinition("QUEST20TH_PROGRESS_OBJECTIVES")},$finished:function(){this.changeTextDefinition("QUEST20TH_COMPLETE")},$portrait:{x:0,y:700,width:560}})]});Xc.bindCustomMethodsRecursive(a),Me=new W({name:"quests-quest_20th-help",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=b.decades,g=0,h=1;f.forEach(function(c){var d=b.groups[c];d&&d.getElements().length&&d.getElements().length===d.getPossibleElements().length&&(Xc.setNodeState(a.progress.children[h],"active"),g++),h++});var i=g===f.length;cf.node.center.format=[Math.round(100*b.progress)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS"),i&&Xc.setNodeState(a.title,"finished")})}})});var Ne;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Ne.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_20TH_1_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-162,y:-6,$portrait:{y:100},children:[new Lc({name:"planet",x:421,y:375,width:406,height:456,$preload:"teaser/20th/20th_planet",$showed:{image:"teaser/20th/20th_planet"}}),a.god=new Lc({name:"god",x:570,y:186,width:187,height:170,$preload:"teaser/20th/20th_god",$showed:{image:"teaser/20th/20th_god"}}),a.baloon=new Lc({name:"baloon",x:353,y:276,width:72,height:102,$preload:"teaser/20th/20th_baloon",$showed:{image:"teaser/20th/20th_baloon"}}),a.plane=new Lc({name:"plane",x:579,y:341,width:137,height:52,$preload:"teaser/20th/20th_plane",$showed:{image:"teaser/20th/20th_plane"}})]}),new cc({delay:6e3,$active:function(){a.description.changeTextDefinition("TEASER_20TH_1_1"),Xc.setNodeStateRecursive(a.description,"appear"),Xc.playVoice("quest_5_1"),b.move_god=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.god,property:"x",to:a.god.x+1.7999999999999998,duration:2e3}),Rc({target:a.god,property:"y",to:a.god.y+-1.7999999999999998,duration:2e3})]}),b.move_plane_1=a.plane.animate("x",a.plane.x+4.8,750,{loop:!0,reverse:!0}),b.move_plane_2=a.plane.animate("y",a.plane.y-1.8,1500,{loop:!0,reverse:!0}),b.move_baloon=a.baloon.animate("y",a.baloon.y+-1.8,1500,{loop:!0,reverse:!0})}}),new cc({delay:5e3,$active:function(){b.move_god.stop(),b.move_plane_1.stop(),b.move_plane_2.stop(),b.move_baloon.stop(),a.description.changeTextDefinition("TEASER_20TH_1_2"),Xc.setNodeStateRecursive(a.description,"appear"),Xc.playVoice("quest_5_2")}}),new cc({delay:100})]});Xc.bindCustomMethodsRecursive(c),Ne=new W({name:"quests-quest_20th-intro",node:c})});var Oe;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Oe.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_20TH_2_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-162,y:-6,$portrait:{y:100},children:[new Lc({name:"bkg",x:433,y:350,width:407,height:505,$preload:"teaser/20th/20th_end_screen",$showed:{image:"teaser/20th/20th_end_screen"}}),a.questions=new Lc({x:427,y:349,width:166,height:166,$preload:["teaser/20th/20th_question_anim_01","teaser/20th/20th_question_anim_02","teaser/20th/20th_question_anim_03"],$showed:function(){Xc.animateImage(this,["teaser/20th/20th_question_anim_01","teaser/20th/20th_question_anim_02","teaser/20th/20th_question_anim_03"])}})]}),new cc({delay:7e3,$active:function(){a.description.changeTextDefinition("TEASER_20TH_2_1"),Xc.setNodeStateRecursive(a.description,"appear"),b.questions_move=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.questions,property:"x",to:a.questions.x+2.8,duration:2333}),Rc({target:a.questions,property:"y",to:a.questions.y+-2.8,duration:2333})]})}}),new cc({delay:5e3,$active:function(){b.questions_move.stop(),a.description.changeTextDefinition("TEASER_20TH_2_2"),Xc.setNodeStateRecursive(a.description,"appear")}}),new cc({delay:10})]});Xc.bindCustomMethodsRecursive(c),Oe=new W({name:"quests-quest_20th-intro-finish",node:c})});var Pe;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-532,y:sc()?-480:-346,children:[new Lc({name:"screen",x:767,y:317,width:491,height:414,$preload:"quests_progress/god_vs_devil/percent_screen",$showed:{image:"quests_progress/god_vs_devil/percent_screen"},$portrait:{x:256}}),new Lc({name:"arrow",x:766,y:381,width:90,height:230,$preload:"quests_progress/god_vs_devil/percent_arrow",$showed:{image:"quests_progress/god_vs_devil/percent_arrow"},originX:1,originY:79,$setProgress:function(a){this.rotation=-Math.PI/4+Math.PI/2*a},$portrait:{x:300}}),new nc({name:"title",x:130,y:282,width:300,height:66,textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",format:[0],$base:function(){this.changeTextDefinition("QUEST3_PROGRESS_OBJECTIVES")},$finished:function(){this.changeTextDefinition("QUEST3_COMPLETE")},$portrait:{x:0,width:560,y:660}})]});Xc.bindCustomMethodsRecursive(a),Pe=new W({name:"quests-quest_3-help",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=b.progress;f>=1&&Xc.setNodeState(a.title,"finished"),Xc.setNodeState(a.arrow,"setProgress",1-f),cf.node.center.format=[Math.round(100*f)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS")})}})});var Qe;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){Qe.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_Q3_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-165,y:-10,$portrait:{y:100},children:[a.scene_01=new Kc({name:"scene_01",x:266,y:114,opacity:0,children:[a.scene_01_devil=new Lc({name:"scene_01_devil",x:172,y:236,width:344,height:471,$preload:"teaser/q3/scene_01_devil",$showed:{image:"teaser/q3/scene_01_devil"}}),a.scene_01_element_01=new Lc({name:"scene_01_element_01",x:321,y:189,width:82,height:78,$preload:"teaser/q3/scene_01_element_01",$showed:{image:"teaser/q3/scene_01_element_01"}}),a.scene_01_element_02=new Lc({name:"scene_01_element_02",x:300,y:121,width:68,height:71,$preload:"teaser/q3/scene_01_element_02",$showed:{image:"teaser/q3/scene_01_element_02"}}),a.scene_01_element_03=new Lc({name:"scene_01_element_03",x:288,y:86,width:51,height:51,$preload:"teaser/q3/scene_01_element_03",$showed:{image:"teaser/q3/scene_01_element_03"}})]}),a.scene_02=new Kc({name:"scene_02",x:228,y:108,opacity:0,children:[a.scene_02_devil=new Lc({name:"scene_02_devil",x:109,y:408,width:203,height:175,$preload:"teaser/q3/scene_02_devil",$showed:{image:"teaser/q3/scene_02_devil"}}),a.scene_02_element_01=new Lc({name:"scene_02_element_01",x:218,y:243,width:115,height:115,$preload:"teaser/q3/scene_02_element_01",$showed:{image:"teaser/q3/scene_02_element_01"}}),a.scene_02_element_02=new Lc({name:"scene_02_element_02",x:279,y:279,width:115,height:115,$preload:"teaser/q3/scene_02_element_02",$showed:{image:"teaser/q3/scene_02_element_02"}}),a.scene_02_element_03=new Lc({name:"scene_02_element_03",x:378,y:277,width:115,height:115,$preload:"teaser/q3/scene_02_element_03",$showed:{image:"teaser/q3/scene_02_element_03"}}),a.scene_02_god=new Lc({name:"scene_02_god",x:284,y:134,width:285,height:268,$preload:"teaser/q3/scene_02_god",$showed:{image:"teaser/q3/scene_02_god"}})]})]}),new cc({$active:function(){a.description.changeTextDefinition("TEASER_Q3_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.scene_01.opacity=1,Xc.playVoice("quest_3_1"),b.move_1_1=a.scene_01_element_01.animate("y",a.scene_01_element_01.y+-30,5e3),b.move_1_2=a.scene_01_element_02.animate("y",a.scene_01_element_02.y+-25,5e3),b.move_1_3=a.scene_01_element_03.animate("y",a.scene_01_element_03.y+-20,5e3)}}),new cc({$active:function(){a.description.changeTextDefinition("TEASER_Q3_2"),Xc.setNodeStateRecursive(a.description,"appear"),Xc.playVoice("quest_3_2"),b.move_1_1.playing&&b.move_1_1.stop(),b.move_1_2.playing&&b.move_1_2.stop(),b.move_1_3.playing&&b.move_1_3.stop(),a.scene_01.opacity=0,a.scene_02.opacity=1,b.move_2_1=a.scene_02_element_01.animate("y",a.scene_02_element_01.y+15,5e3),b.move_2_2=a.scene_02_element_02.animate("y",a.scene_02_element_02.y+15,5e3),b.move_2_3=a.scene_02_element_03.animate("y",a.scene_02_element_03.y+15,5e3)}}),new cc({$active:function(){a.scene_02.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),Qe=new W({name:"quests-quest_3-intro",node:c})});var Re;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({name:"bkg2",x:757,y:342,width:398,height:389,$preload:"quests_progress/egypt/progress_border",$showed:{image:"quests_progress/egypt/progress_border"},$portrait:{x:259,y:392}}),new Kc({name:"progress",x:528,y:67,$portrait:{x:30,y:117},$setProgress:function(a){for(var b=this.children,c=b.length,d=Math.floor(c*a),e=0;c>e;e++)this.children[e].opacity=d>e?1:0},children:[new Lc({name:"progress_01",x:104,y:128,width:65,height:76,$preload:"quests_progress/egypt/progress_01",$showed:{image:"quests_progress/egypt/progress_01"},$base:{opacity:0}}),new Lc({name:"progress_02",x:169,y:131,width:65,height:71,$preload:"quests_progress/egypt/progress_02",$showed:{image:"quests_progress/egypt/progress_02"},$base:{opacity:0}}),new Lc({name:"progress_03",x:217,y:132,width:46,height:69,$preload:"quests_progress/egypt/progress_03",$showed:{image:"quests_progress/egypt/progress_03"},$base:{opacity:0}}),new Lc({name:"progress_04",x:262,y:132,width:57,height:69,$preload:"quests_progress/egypt/progress_04",$showed:{image:"quests_progress/egypt/progress_04"},$base:{opacity:0}}),new Lc({name:"progress_05",x:326,y:130,width:83,height:72,$preload:"quests_progress/egypt/progress_05",$showed:{image:"quests_progress/egypt/progress_05"},$base:{opacity:0}}),new Lc({name:"progress_06",x:383,y:130,width:42,height:72,$preload:"quests_progress/egypt/progress_06",$showed:{image:"quests_progress/egypt/progress_06"},$base:{opacity:0}}),new Lc({name:"progress_07",x:375,y:201,width:54,height:75,$preload:"quests_progress/egypt/progress_07",$showed:{image:"quests_progress/egypt/progress_07"},$base:{opacity:0}}),new Lc({name:"progress_08",x:315,y:206,width:60,height:65,$preload:"quests_progress/egypt/progress_08",$showed:{image:"quests_progress/egypt/progress_08"},$base:{opacity:0}}),new Lc({name:"progress_09",x:258,y:206,width:58,height:65,$preload:"quests_progress/egypt/progress_09",$showed:{image:"quests_progress/egypt/progress_09"},$base:{opacity:0}}),new Lc({name:"progress_10",x:202,y:206,width:61,height:64,$preload:"quests_progress/egypt/progress_10",$showed:{image:"quests_progress/egypt/progress_10"},$base:{opacity:0}}),new Lc({name:"progress_11",x:135,y:206,width:81,height:65,$preload:"quests_progress/egypt/progress_11",$showed:{image:"quests_progress/egypt/progress_11"},$base:{opacity:0}}),new Lc({name:"progress_12",x:77,y:206,width:44,height:65,$preload:"quests_progress/egypt/progress_12",$showed:{image:"quests_progress/egypt/progress_12"},$base:{opacity:0}}),new Lc({name:"progress_13",x:95,y:278,width:74,height:85,$preload:"quests_progress/egypt/progress_13",$showed:{image:"quests_progress/egypt/progress_13"},$base:{opacity:0}}),new Lc({name:"progress_14",x:151,y:285,width:39,height:71,$preload:"quests_progress/egypt/progress_14",$showed:{image:"quests_progress/egypt/progress_14"},$base:{opacity:0}}),new Lc({name:"progress_15",x:201,y:284,width:55,height:72,$preload:"quests_progress/egypt/progress_15",$showed:{image:"quests_progress/egypt/progress_15"},$base:{opacity:0}}),new Lc({name:"progress_16",x:255,y:284,width:54,height:72,$preload:"quests_progress/egypt/progress_16",$showed:{image:"quests_progress/egypt/progress_16"},$base:{opacity:0}}),new Lc({name:"progress_17",x:315,y:284,width:67,height:72,$preload:"quests_progress/egypt/progress_17",$showed:{image:"quests_progress/egypt/progress_17"},$base:{opacity:0}}),new Lc({name:"progress_18",x:376,y:284,width:55,height:72,$preload:"quests_progress/egypt/progress_18",$showed:{image:"quests_progress/egypt/progress_18"},$base:{opacity:0}}),new Lc({name:"progress_19",x:369,y:355,width:66,height:75,$preload:"quests_progress/egypt/progress_19",$showed:{image:"quests_progress/egypt/progress_19"},$base:{opacity:0}}),new Lc({name:"progress_20",x:303,y:358,width:63,height:68,$preload:"quests_progress/egypt/progress_20",$showed:{image:"quests_progress/egypt/progress_20"},$base:{opacity:0}}),new Lc({name:"progress_21",x:245,y:359,width:53,height:66,$preload:"quests_progress/egypt/progress_21",$showed:{image:"quests_progress/egypt/progress_21"},$base:{opacity:0}}),new Lc({name:"progress_22",x:186,y:359,width:64,height:67,$preload:"quests_progress/egypt/progress_22",$showed:{image:"quests_progress/egypt/progress_22"},$base:{opacity:0}}),new Lc({name:"progress_23",x:140,y:359,width:36,height:68,$preload:"quests_progress/egypt/progress_23",$showed:{image:"quests_progress/egypt/progress_23"},$base:{opacity:0}}),new Lc({name:"progress_24",x:82,y:393,width:87,height:135,$preload:"quests_progress/egypt/progress_24",$showed:{image:"quests_progress/egypt/progress_24"},$base:{opacity:0}})]}),new nc({name:"title",x:130,y:282,width:300,height:66,textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",format:[0],$base:function(){this.changeTextDefinition("QUESTEGYPT_PROGRESS_OBJECTIVES")},$finished:function(){this.changeTextDefinition("QUESTEGYPT_COMPLETE")},$portrait:{x:0,width:560,y:700}})]});Xc.bindCustomMethodsRecursive(a),Re=new W({name:"quests-quest_egypt-help",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=b.progress;Xc.setNodeState(a.progress,"setProgress",f),cf.node.center.format=[Math.round(100*f)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS"),a.title.format[0]=0,f>=1&&Xc.setNodeState(a.title,"finished")})}})});var Se;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Se.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"QUESTS_SCR_EGYPT",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"teaser_text",x:519,y:350,width:440,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-162,y:-6,$portrait:{y:100},children:[a.god=new Lc({name:"god",x:328,y:227,width:223,height:212,$preload:"teaser/egypt/god",$showed:{image:"teaser/egypt/god"},opacity:0,scale:.1}),a.bubble=new Lc({name:"bubble",x:508,y:176,width:220,height:163,$preload:"teaser/egypt/bubble",$showed:{image:"teaser/egypt/bubble"},opacity:0,scale:0}),a.land=new Lc({x:432,y:470,width:408,height:223,opacity:0,$preload:["teaser/egypt/land_01","teaser/egypt/land_02","teaser/egypt/land_03"],$showed:function(){Xc.animateImage(this,["teaser/egypt/land_01","teaser/egypt/land_02","teaser/egypt/land_03"])}}),new Kc({x:455,y:264,children:[a.sun=new Lc({x:82,y:82,width:164,height:164,opacity:0,$preload:["teaser/egypt/sun_01","teaser/egypt/sun_02","teaser/egypt/sun_03"],$showed:function(){Xc.animateImage(this,["teaser/egypt/sun_01","teaser/egypt/sun_02","teaser/egypt/sun_03"])}})]})]}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.sun.opacity=1,a.land.opacity=1}}),new cc({delay:1e4,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_2"),Xc.setNodeStateRecursive(a.description,"appear"),a.god.opacity=1,a.bubble.opacity=1,a.god.animate("scale",1,{easing:Sc.Easing.inOutSine}),Xc.animate(a.bubble,"scale",{to:1,easing:Sc.Easing.inOutSine,delay:1e3}),b.move_god=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.god,property:"x",to:a.god.x+3,duration:3333}),Rc({target:a.god,property:"y",to:a.god.y+-3,duration:3333})]})}}),new cc({$active:function(){b.move_god.stop(),a.bubble.opacity=0,a.god.opacity=0,a.land.opacity=0,a.sun.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),Se=new W({name:"quests-quest_egypt-intro",node:c})});var Te;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Te.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"QUESTS_SCR_EGYPT",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"teaser_text",x:529,y:350,width:440,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-162,y:-6,$portrait:{y:100},children:[a.landscape=new Lc({name:"landscape",x:431,y:349,width:408,height:472,$preload:"teaser/egypt/landscape",$showed:{image:"teaser/egypt/landscape"},opacity:0}),a.boat=new Lc({name:"boat",x:325,y:421,width:166,height:207,$preload:"teaser/egypt/boat",$showed:{image:"teaser/egypt/boat"},opacity:0}),new Kc({x:480,y:74,children:[a.sun=new Lc({x:82,y:82,width:164,height:164,opacity:0,$preload:["teaser/egypt/sun_03","teaser/egypt/sun_02","teaser/egypt/sun_01"],$showed:function(){Xc.animateImage(this,["teaser/egypt/sun_01","teaser/egypt/sun_02","teaser/egypt/sun_03"])}})]}),a.water=new Lc({x:427,y:449,width:467,height:231,opacity:0,$preload:["teaser/egypt/water_01","teaser/egypt/water_02","teaser/egypt/water_03"],$showed:function(){Xc.animateImage(this,["teaser/egypt/water_01","teaser/egypt/water_02","teaser/egypt/water_03"])}})]}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_3"),Xc.setNodeStateRecursive(a.description,"appear"),a.sun.opacity=1,a.landscape.opacity=1,a.water.opacity=1,a.boat.opacity=1,b.mode_boat=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.boat,property:"x",to:a.boat.x+1.5,duration:2500}),Rc({target:a.boat,property:"y",to:a.boat.y+-.5,duration:2500})]})}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_4"),Xc.setNodeStateRecursive(a.description,"appear")}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_5"),Xc.setNodeStateRecursive(a.description,"appear")}}),new cc({delay:5e3,$active:function(){a.description.changeTextDefinition("TEASER_EGYPT_6"),Xc.setNodeStateRecursive(a.description,"appear")}}),new cc({$active:function(){b.mode_boat.stop(),a.water.opacity=0,a.landscape.opacity=0,a.boat.opacity=0,a.sun.opacity=0}})]});Xc.bindCustomMethodsRecursive(c),Te=new W({name:"quests-quest_egypt-intro-finish",node:c})});var Ue;Bc.on("ready",function(){var a=new Kc({x:sc()?-256:-512,y:sc()?-480:-384,children:[new Kc({name:"ongoing",x:0,y:0,opacity:0,$active:{opacity:1},$portrait:{x:-490},children:[new Lc({name:"bkg",x:481,y:322,width:1002,height:587,$preload:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_robinzon",$showed:{image:xc.REMOVE_BACKGROUND_DECORATORS?null:"interface/bkg_robinzon"}}),new Kc({name:"progress",x:511,y:89,children:[new Lc({name:"bkg2",x:240,y:265,width:480,height:456,$preload:"quests_progress/lost/progress_bkg",$showed:{image:"quests_progress/lost/progress_bkg"}}),new Lc({name:"pos_0",x:248,y:432,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_1",x:282,y:402,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_2",x:340,y:368,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_3",x:299,y:328,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_4",x:252,y:297,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_5",x:222,y:271,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_6",x:202,y:227,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_7",x:251,y:201,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_8",x:308,y:195,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_9",x:340,y:183,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_10",x:362,y:156,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}}),new Lc({name:"pos_11",x:348,y:127,width:107,height:119,$preload:"quests_progress/lost/progress_survivor",$showed:{image:"quests_progress/lost/progress_survivor"},opacity:0,$active:{opacity:1}})]}),new nc({name:"objectives",x:90,y:286,width:353,height:66,text:"QUESTLOST_PROGRESS_OBJECTIVES",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$portrait:{x:492,width:560,y:700}})]}),new Kc({name:"complete_killed",x:0,y:0,opacity:0,$active:{opacity:1},$portrait:{x:-490},children:[new Lc({name:"img",x:758,y:334,width:412,height:498,$preload:"quests_progress/lost/murder",$showed:{image:"quests_progress/lost/murder"}}),new nc({name:"complete",x:115,y:286,width:300,height:66,text:"QUESTLOST_COMPLETE_KILLED",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$portrait:{x:492,width:560,y:700}})]}),new Kc({name:"complete_torture",x:0,y:0,opacity:0,$active:{opacity:1},$portrait:{x:-490},children:[new Lc({name:"img",x:757,y:342,width:409,height:514,$preload:"quests_progress/lost/torture",$showed:{image:"quests_progress/lost/torture"}}),new nc({name:"complete",x:90,y:286,width:300,height:66,text:"QUESTLOST_COMPLETE_TORTURE",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$portrait:{x:492,width:560,y:700}})]}),new Kc({name:"complete_success",x:0,y:0,opacity:0,$active:{opacity:1},$portrait:{x:-490},children:[new Lc({name:"img",x:766,y:341,width:427,height:512,$preload:"quests_progress/lost/happy_end",$showed:{image:"quests_progress/lost/happy_end"}}),new nc({name:"complete",x:90,y:286,width:300,height:66,text:"QUESTLOST_COMPLETE_SUCCESS",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$portrait:{x:492,width:560,y:700}})]})]});Xc.bindCustomMethodsRecursive(a),Ue=new W({name:"quests-quest_qad-lost",onShow:function(b,c){var d=this;ed.show(function(e){Xc.setViewPartial(e.left,a),sc()||this.appendPartial(e.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),d.appendPartial(e.toolbar,pf,null,function(a){d.appendPartial(a.button1,uf)}),c(e);var f=b.progress;if(1>f){var g=a.ongoing.progress.children.length-2,h=f*g,i=Math.floor(h)+1;Xc.setNodeState(a.ongoing,"active"),Xc.setNodeState(a.ongoing.progress.children[i],"active"),cf.node.center.format=[Math.round(100*f)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS")}else switch(cf.node.center.format=null,cf.node.center.changeTextDefinition(b.progressLabel),b.lastRemeberedElementName){case"Salvation_lost":Xc.setNodeState(a.complete_success,"active");break;case"Death":Xc.setNodeState(a.complete_killed,"active");break;case"Torture":Xc.setNodeState(a.complete_torture,"active")}})}})});var Ve;Bc.on("ready",function(){var a={},b={},c=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Ve.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_QLOST_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"teaser_text",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-135,y:-6,$portrait:{x:-160,y:100},children:[new Lc({name:"bkg",x:415,y:326,width:387,height:435,$preload:"teaser/lost/intro_static",$showed:{image:"teaser/lost/intro_static"}}),a.wave1=new Lc({name:"wave1",x:405,y:504,width:395,height:255,$preload:"teaser/lost/intro_wave_01",$showed:{image:"teaser/lost/intro_wave_01"}}),a.wave2=new Lc({name:"wave2",x:341,y:525,width:252,height:150,$preload:"teaser/lost/intro_wave_02",$showed:{image:"teaser/lost/intro_wave_02"}})]}),new cc({$active:function(){a.description.changeTextDefinition("TEASER_QLOST_1"),Xc.setNodeStateRecursive(a.description,"appear"),Xc.playVoice("quest_4_1"),b.move_wave1=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.wave1,property:"x",to:a.wave1.x+7,duration:5e3}),Rc({target:a.wave1,property:"y",to:a.wave1.y+-7,duration:5e3})]}),b.move_wave2=Uc({autoplay:!0,loop:!0,reverse:!0,animations:[Rc({target:a.wave2,property:"x",to:a.wave2.x+-7,duration:5e3}),Rc({target:a.wave2,property:"y",to:a.wave2.y+7,duration:5e3})]})}}),new cc({$active:function(){b.move_wave1.stop(),b.move_wave2.stop()}})]});Xc.bindCustomMethodsRecursive(c),Ve=new W({name:"quests-quest_lost-intro",node:c})});var We;Bc.on("ready",function(){var a=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){We.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_QLOST_KNIFE_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Lc({name:"bkg",x:273,y:344,width:360,height:402,$preload:"teaser/lost/knife",$showed:{image:"teaser/lost/knife"},$portrait:{y:450}}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_QLOST_KNIFE_1"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_QLOST_KNIFE_1"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}})]});Xc.bindCustomMethodsRecursive(a),We=new W({name:"quests-quest_lost-intro-finish-knife",node:a})});var Xe;Bc.on("ready",function(){var a=new bc({screenDelay:1e4,$showed:function(){},on:{end:function(){Xe.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"TEASER_QLOST_MAP_CAPTION",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Lc({name:"bkg",x:268,y:345,width:375,height:476,$preload:"teaser/lost/map",$showed:{image:"teaser/lost/map"},$portrait:{y:450}}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_QLOST_MAP_1"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}}),new cc({$active:function(){a.text_wrapper.description.changeTextDefinition("TEASER_QLOST_MAP_1"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}})]});Xc.bindCustomMethodsRecursive(a),Xe=new W({name:"quests-quest_lost-intro-finish-map",node:a})});var Ye;Bc.on("ready",function(){var a,b,c=new Kc({x:sc()?-256:-532,y:sc()?-480:-346,children:[new Kc({$portrait:{x:-512,y:200},children:[new Lc({name:"bkg",x:760,y:333,width:500,height:500,$preload:"quests_progress/qad/bkg_progress",$showed:{image:"quests_progress/qad/bkg_progress"}}),a=new Lc({name:"angel",x:653,y:489,width:220,height:250,$preload:"quests_progress/qad/angel",$showed:{image:"quests_progress/qad/angel"},$setProgress:function(a){var b=this;this.y=489-200*a,Xc.animate(b,"y",{duration:1200,from:b.y+3,to:b.y-3,easing:Vc.inOutSine,loop:!0,reverse:!0}),Xc.animate(b,"x",{duration:1200,from:b.x-3,to:b.x+3,easing:Vc.inOutSine,loop:!0,reverse:!0})},children:[new mc({name:"count_text",width:80,height:40,x:-39,y:-11,text:"0/25",textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"medium"})]}),b=new Lc({name:"demon",x:890,y:489,width:220,height:250,$preload:"quests_progress/qad/demon",$showed:{image:"quests_progress/qad/demon"},$setProgress:function(a){var b=this;this.y=489-200*a,Xc.animate(b,"y",{duration:1200,from:b.y+3,to:b.y-3,easing:Vc.inOutSine,loop:!0,reverse:!0}),Xc.animate(b,"x",{duration:1200,from:b.x+3,to:b.x-3,easing:Vc.inOutSine,loop:!0,reverse:!0})},children:[new mc({name:"count_text",width:80,height:40,x:-39,y:-11,text:"0/25",textColor:"rgba(0, 0, 0, 1)",textAlign:"center",fontType:"medium"})]})]}),new nc({name:"title",x:130,y:282,width:300,height:66,text:"TEASER_QAD_3",textColor:"rgba(48, 38, 25, 1)",textAlign:"center",fontType:"font",$base:function(){this.changeTextDefinition("TEASER_QAD_3")},$finished:function(){this.changeTextDefinition("QUESTQAD_COMPLETE")},$portrait:{y:100,x:0,width:560}})]});Xc.bindCustomMethodsRecursive(c),Ye=new W({name:"quests-quest_qad-help",onShow:function(d,e){var f=this;ed.show(function(g){Xc.setViewPartial(g.left,c),sc()||this.appendPartial(g.statusbar,cf,{center:"STATUS_BAR_PROGRESS"}),f.appendPartial(g.toolbar,pf,null,function(a){f.appendPartial(a.button1,uf)}),e(g);var h=d.progress>=1;Xc.setNodeState(a,"setProgress",d.angel/d.angelMax),a.count_text.text=""+d.angel+"/"+d.angelMax,Xc.setNodeState(b,"setProgress",d.devil/d.devilMax),b.count_text.text=""+d.devil+"/"+d.devilMax,cf.node.center.format=[Math.round(100*d.progress)],cf.node.center.changeTextDefinition("STATUS_BAR_PROGRESS"),h&&Xc.setNodeState(c.title,"finished")})}})});var Ze;Bc.on("ready",function(){var a={},b=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){Ze.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"QUESTS_SCR_QAD",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),a.description=new nc({name:"teaser_text",x:525,y:350,width:450,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-140,y:-25,$portrait:{y:100},children:[a.screen_1=new Lc({name:"screen_1",x:415,y:368,width:420,height:460,$preload:"teaser/qad/teaser1_1",$showed:{image:"teaser/qad/teaser1_1"}}),a.screen_2=new Lc({name:"screen_2",x:415,y:368,width:420,height:460,$preload:"teaser/qad/teaser1_2",$showed:{image:"teaser/qad/teaser1_2"},$base:{opacity:0}}),a.screen_3=new Lc({name:"screen_3",x:411,y:260,width:450,height:240,$preload:"teaser/qad/teaser1_3_a_d",$showed:{image:"teaser/qad/teaser1_3_a_d"},$base:{opacity:0}}),a.lizard=new Lc({name:"lizard",x:394,y:521,width:130,height:120,$preload:"teaser/qad/teaser1_3_lizard",$showed:{image:"teaser/qad/teaser1_3_lizard"},$base:{opacity:0},$show:function(){this.opacity=1},$hide:function(){Xc.animate(this,"opacity",{duration:400,from:1,to:0,easing:Vc.linear}).on("end",function(){a.tyrannosaur.$.show()})}}),a.tyrannosaur=new Lc({name:"tyrannosaur",x:390,y:519,width:130,height:120,$preload:"teaser/qad/teaser1_3_tyrannosaur",$showed:{image:"teaser/qad/teaser1_3_tyrannosaur"},$base:{opacity:0},$show:function(){Xc.animate(this,"opacity",{duration:400,from:0,to:1,easing:Vc.linear}).on("end",function(){a.whoosh.$.hide(),a.left_hand.$.move()})},$hide:function(){Xc.animate(this,"opacity",{duration:300,from:1,to:0,easing:Vc.linear})}}),a.rabbit=new Lc({name:"rabbit",x:400,y:518,width:130,height:120,$preload:"teaser/qad/teaser1_3_rabbit",$showed:{image:"teaser/qad/teaser1_3_rabbit"},$base:{opacity:0},$show:function(){Xc.animate(this,"opacity",{duration:300,from:0,to:1,easing:Vc.linear})}}),a.left_hand=new Lc({name:"left_hand",x:241,y:360,width:90,height:90,$preload:"teaser/qad/teaser1_3_a_hand",$showed:{image:"teaser/qad/teaser1_3_a_hand"},$base:{opacity:0},$show:function(){this.opacity=1},$move:function(){var b=this;Xc.animate(this,"rotation",{duration:500,from:0,to:.5235987755982988,easing:Vc.linear}),Xc.animate(this,"x",{duration:500,from:241,to:263,easing:Vc.linear}),Xc.animate(this,"y",{duration:500,from:360,to:370,easing:Vc.linear}),Xc.async.wait(600,function(){a.whoosh.$.show(),a.tyrannosaur.$.hide(),Xc.animate(b,"rotation",{duration:500,from:.5235987755982988,to:0,easing:Vc.linear}),Xc.animate(b,"x",{duration:500,from:263,to:241,easing:Vc.linear}),Xc.animate(b,"y",{duration:500,from:370,to:360,easing:Vc.linear})}),Xc.async.wait(1100,function(){a.rabbit.$.show()}),Xc.async.wait(1300,function(){a.whoosh.$.hide()})}}),a.right_hand=new Lc({name:"right_hand",x:570.5,y:360.5,width:95,height:105,$preload:"teaser/qad/teaser1_3_d_hand",$showed:{image:"teaser/qad/teaser1_3_d_hand"},$base:{opacity:0},$move:function(){a.lizard.$.show(),a.left_hand.$.show();var b=this;Xc.animate(this,"rotation",{duration:500,from:0,to:-.5235987755982988,easing:Vc.linear}),Xc.animate(this,"x",{duration:500,from:570.5,to:541.5,easing:Vc.linear}),Xc.animate(this,"y",{duration:500,from:360.5,to:374.5,easing:Vc.linear}),Xc.async.wait(600,function(){a.whoosh.$.show(),a.lizard.$.hide(),Xc.animate(b,"rotation",{duration:500,from:-.5235987755982988,to:0,easing:Vc.linear}),Xc.animate(b,"x",{duration:500,from:541.5,to:570.5,easing:Vc.linear}),Xc.animate(b,"y",{duration:500,from:374.5,to:360.5,easing:Vc.linear})})}}),a.whoosh=new Kc({name:"whoosh",x:276,y:397,$base:{opacity:0},$show:function(){this.opacity=1},$hide:function(){this.opacity=0},children:[new Lc({x:130,y:115,width:260,height:230,$preload:["teaser/qad/teaser1_3_splash1","teaser/qad/teaser1_3_splash2"],$showed:function(){Xc.animateImage(this,["teaser/qad/teaser1_3_splash1","teaser/qad/teaser1_3_splash2"])}})]})]}),new cc({delay:4e3,$active:function(){a.description.changeTextDefinition("TEASER_QAD_1"),Xc.setNodeStateRecursive(a.description,"appear"),a.screen_1.opacity=1}}),new cc({delay:4e3,$active:function(){a.description.changeTextDefinition("TEASER_QAD_2"),Xc.setNodeStateRecursive(a.description,"appear"),a.screen_1.opacity=0,a.screen_2.opacity=1}}),new cc({delay:6e3,$active:function(){a.description.changeTextDefinition("TEASER_QAD_3"),Xc.setNodeStateRecursive(a.description,"appear"),a.screen_2.opacity=0,a.screen_3.opacity=1,a.right_hand.opacity=1,a.right_hand.$.move()}}),new cc({$active:function(){a.screen_3.opacity=0,a.right_hand.opacity=0,a.left_hand.opacity=0,a.rabbit.opacity=0,a.tyrannosaur.opacity=0,a.lizard.opacity=0,a.whoosh.opacity=0}})]});Xc.bindCustomMethodsRecursive(b),Ze=new W({name:"quests-quest_qad-intro",node:b})});var $e;Bc.on("ready",function(){var a=new bc({screenDelay:5e3,$showed:function(){},on:{end:function(){$e.events.trigger("animationsEnd")}},x:sc()?-256:-512,y:sc()?-480:-384,children:[new Lc({x:sc()?256:512,y:sc()?480:384,width:oh,height:ph,$preload:"interface/bkg_4_3_book",$showed:{image:"interface/bkg_4_3_book"}}),new Kc({name:"text_wrapper",x:0,y:0,$portrait:{x:-720,y:-13},children:[new nc({name:"caption",x:509,y:193,width:490,height:30,text:"QUESTS_SCR_QAD",textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"medium",$portrait:{x:750,y:30,textColor:"rgba(255, 255, 255, 1)"}}),new nc({name:"description",x:509,y:350,width:490,height:64,text:void 0,textColor:"rgba(22, 34, 32, 1)",textAlign:"center",fontType:"font",$portrait:{x:750,y:860,textColor:"rgba(255, 255, 255, 1)"},$appear:function(){sc()&&this.animate("x",{duration:500,from:-200,to:750,easing:Sc.Easing.outInCirc})}})]}),new Kc({name:"teaser_wrapper",x:-140,y:-25,children:[new Lc({name:"screen_1",x:430,y:375,width:400,height:450,$preload:"teaser/qad/teaser2_1",$showed:{image:"teaser/qad/teaser2_1"}})]}),new cc({delay:5e3,$active:function(){a.text_wrapper.description.changeTextDefinition("QUESTQAD_COMPLETE"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}}),new cc({delay:5e3,$active:function(){a.text_wrapper.description.changeTextDefinition("QUESTQAD_COMPLETE"),Xc.setNodeStateRecursive(a.text_wrapper.description,"appear")}})]});Xc.bindCustomMethodsRecursive(a),$e=new W({name:"quests-quest_qad-intro-finish",node:a})});var _e;Bc.on("boot",function(){var a=new Kc({children:[new Lc({name:"bkg",image:"rotate/rotate_bkg",$showed:function(){this.width=2e3,this.height=2e3}}),new Lc({name:"icon",image:"rotate/rotate_icon",$showed:function(){this.width=sc()?402.5:315,this.height=sc()?366.25:333}})]});Xc.bindCustomMethodsRecursive(a),sc()&&Xc.setNodeStateRecursive(a,"portrait"),_e={show:function(){wh.appendChild(a),Xc.setNodeStateRecursive(a,"showed")},hide:function(){Xc.restoreNodeRecursive(a),wh.removeChild(a)}}});var af;Bc.on("ready",function(){af=new W({name:"settings",onShow:function(a,b){ed.show(function(a){af.appendPartial(a.statusbar,nf),af.appendPartial(a.left,jd),af.appendPartial(a.right,id),af.appendPartial(a.toolbar,bg),b(a)})},api:{nav:jd.api.nav,languages:id.api.languages}})});var bf;Bc.on("ready",function(){function a(){return{buy:function(a){bf.events.trigger("buy",a)},sell:function(a){bf.events.trigger("sell",a)}}}function b(){var a=this.hint.remainingTime;Xc.setNodeStateRecursive(this,"disabled"),a||this.hint.amount>0&&this.hint.sellable?Xc.setNodeStateRecursive(this,"active"):this.hint.isAffordable()?Xc.setNodeStateRecursive(this,"active"):this.hint.duration>0&&this.hint.rewardedAds&&Xc.setNodeStateRecursive(this,"ad")}function c(a){return a.exclude?!1:!0}var d,e={shop_hint1:new kc({hint:Bc.hints[1],image:"shop/hint_1_sign",title:"SHOP_HINT1_TITLE",description:"SHOP_HINT1_DESC",longDescription:"SHOP_HINT1_LONGDESC",price:"price_shop_hint1",buyMessage:"SHOP_HINT1_BUY",y:-200,positionY:0,delay:400,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),shop_hint2:new kc({hint:Bc.hints[2],image:"shop/hint_2_sign",title:"SHOP_HINT2_TITLE",description:"SHOP_HINT2_DESC",longDescription:"SHOP_HINT2_LONGDESC",price:"price_shop_hint2",buyMessage:"SHOP_HINT2_BUY",y:-200,positionY:102,delay:300,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),shop_hint3:new kc({hint:Bc.hints[3],image:"shop/hint_3_sign",title:"SHOP_HINT3_TITLE",description:"SHOP_HINT3_DESC",longDescription:"SHOP_HINT3_LONGDESC",price:"price_shop_hint3",buyMessage:"SHOP_HINT3_BUY",y:-200,positionY:204,delay:200,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),shop_dotted:new kc({hint:Bc.hints.no_pairs,image:"shop/dotted_border_sign",title:"SHOP_DOTTED_TITLE",description:"SHOP_DOTTED_DESC",longDescription:"SHOP_DOTTED_LONGDESC",price:"price_shop_dotted",buyMessage:"SHOP_DOTTED_BUY",sellMessage:"SHOP_DOTTED_SELL",y:-200,positionY:306,delay:100,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),shop_grey:new kc({hint:Bc.hints.no_reaction,image:"shop/gray_border_sign",title:"SHOP_GRAY_TITLE",description:"SHOP_GRAY_DESC",longDescription:"SHOP_GRAY_LONGDESC",price:"price_shop_gray",buyMessage:"SHOP_GRAY_BUY",sellMessage:"SHOP_GRAY_SELL",y:-200,positionY:408,delay:0,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),shop_no_repeat:new kc({hint:Bc.hints.no_repeat,image:"shop/not_repeat_sign",title:"SHOP_NO_REPEAT_TITLE",description:"SHOP_NO_REPEAT_DESC",longDescription:"SHOP_NO_REPEAT_LONGDESC",price:"price_shop_no_repeat",buyMessage:"SHOP_NO_REPEAT_BUY",sellMessage:"SHOP_NO_REPEAT_SELL",y:-200,positionY:0,delay:500,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)}}),light_1:new kc({hint:Bc.hints.light_1,image:"shop/light1_sign",title:"SHOP_LIGHT1_TITLE",description:"SHOP_LIGHT1_DESC",longDescription:"SHOP_LIGHT1_LONGDESC",descriptionFormat:[Bc.config.getAsInt("light_1_reactions",10)],price:"price_shop_light1",buyMessage:"SHOP_LIGHT1_BUY",sellMessage:"SHOP_CONFIRM_PURCHASE_WORST_PENTAGRAM",y:-200,positionY:102,delay:400,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)},exclude:!Bc.config.getAsBool("light_enabled",!1)}),light_2:new kc({hint:Bc.hints.light_2,image:"shop/light2_sign",title:"SHOP_LIGHT2_TITLE",description:"SHOP_LIGHT2_DESC",longDescription:"SHOP_LIGHT2_LONGDESC",descriptionFormat:[Bc.config.getAsInt("light_2_reactions",20)],price:"price_shop_light2",buyMessage:"SHOP_LIGHT2_BUY",sellMessage:"SHOP_CONFIRM_PURCHASE_WORST_PENTAGRAM",y:-200,positionY:204,delay:300,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)},exclude:!Bc.config.getAsBool("light_enabled",!1)}),light_3:new kc({hint:Bc.hints.light_3,image:"shop/light3_sign",title:"SHOP_LIGHT3_TITLE",description:"SHOP_LIGHT3_DESC",longDescription:"SHOP_LIGHT3_LONGDESC",price:"price_shop_light3",buyMessage:"SHOP_LIGHT3_BUY",sellMessage:"SHOP_LIGHT3_SELL",y:-200,positionY:306,delay:200,$portrait:{width:640,height:170,x:-240},on:a(),$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},$refresh:function(){b.call(this)},exclude:!Bc.config.getAsBool("light_enabled",!1)}),fortune:new Kc({y:-200,positionY:408,delay:100,$portrait:{width:640,height:170,x:-240},$showed:function(){if(!sc()){var a=this;this.y=-200,Xc.animate(this,"y",{delay:a.delay,duration:100,from:-200,to:a.positionY,easing:Vc.linear}),Xc.animate(this,"opacity",{delay:a.delay,duration:100,from:0,to:1,easing:Vc.linear})}},children:[new tb({name:"icon",x:59,y:56,$preload:"shop/wheel_fortune",width:138,height:130,$portrait:{width:168,height:160,x:20}}),new nc({name:"title",x:115,y:11,width:235,height:20,text:"SHOP_WHEEL_TITLE",textColor:"rgba(21, 18, 14, 1)",textAlign:"left",fontType:"author",format:[""]}),new nc({name:"description",x:115,y:65,width:235,height:20,text:"SHOP_WHEEL_DESC",textColor:sc()?"rgba(150, 41, 0, 1)":"rgba(150, 105, 54, 1)",textAlign:"left",fontType:"author"}),new Kc({name:"button",x:-42,y:-5,children:[new tb({name:"buy",x:454,y:61,width:107,height:82,image:"shop/button_timer",$portrait:{width:107*1.6,height:82*1.6,x:484},on:{mouseclick:function(){uf.events.trigger("click"),$d.api.board.showFortune()}},children:[new nc({name:"buy_text",x:-41.5,y:-5,width:80,height:30,text:"FORTUNE_SPIN",textColor:"rgba(248, 228, 0, 1)",textAlign:"center",fontType:"author"})]}),new nc({name:"price",x:437,y:37,width:50,height:20,$portrait:{x:467,y:30},text:"0",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]})]})},f=[e.shop_hint1,e.shop_hint2,e.shop_hint3,e.shop_dotted,e.shop_grey],g=[e.shop_no_repeat,e.light_1,e.light_2,e.light_3],h=[e.shop_hint1,e.shop_hint2,e.shop_hint3,e.shop_dotted,e.shop_grey,e.shop_no_repeat,e.light_1,e.light_2,e.light_3];if(f=f.filter(c),g=g.filter(c),h=h.filter(c),Bc.config.getAsInt("fortune_enabled",0)&&(g.push(e.fortune),h.push(e.fortune)),f.length<5)for(var i=g.splice(0,5-f.length),j=0;j<i.length;j++)f.push(i[j]);for(var k=400,j=0;j<f.length;j++){var l=f[j];l.positionY=102*j,l.delay=k,k-=100}k=500;for(var j=0;j<g.length;j++){var l=g[j];l.positionY=102*j}var m=new Kc({$showed:function(){Xc.playSound("store_screen_transition")},x:sc()?-320:-512,y:sc()?-480:-384,$portrait:{x:-320,y:-480},children:[new Kc(sc()?{children:[new Wb({name:"content",x:320,y:455,width:640,height:790,children:[new ub({name:"column",children:h,$refresh:function(){this.updatePositions(this.parent.parent.parent.height/2),this.y=-this.parent.parent.parent.height/2-60,this.parent.width=this.width,this.parent.height=this.height,this.parent.parent.parent.updateContent()}})]})]}:{children:[new Kc({name:"left_page_scroll_field",x:32,y:86,children:f}),new Kc({name:"right_page_scroll_field",x:519,y:86,children:g})]})]});Xc.bindCustomMethodsRecursive(m),bf=new W({name:"shop",onShow:function(a,b){var c=this;ed.show(function(e){d=e,Xc.setViewPartial(d.left,m),sc()?c.appendPartial(d.statusbar,of,a,function(a){}):(Xc.setViewPartial(d.statusbar,d.statusbar.$.lastPartial),W.imageManager.loadView(d.statusbar)),c.appendPartial(d.toolbar,pf,null,function(a){c.appendPartial(a.button1,uf),Bc.promo.hasUniverse()&&c.appendPartial(a.button3,Xf)}),b(d),Xc.setNodeStateRecursive(m,"refresh")})},api:{board:{refresh:function(){Xc.setNodeStateRecursive(m,"refresh")},showBuyDialog:function(a,b){bf.appendPartial(d.alert,Ed,{message:b,price:a.buyPrice,messageFormat:[a.buyAmount]}),Xc.setNodeStateRecursive(d.alert,"showed")},showSellDialog:function(a,b){bf.appendPartial(d.alert,Ed,{message:b,price:a.sellPrice.toString()}),Xc.setNodeStateRecursive(d.alert,"showed")},showNoManaAlert:function(){bf.appendPartial(d.alert,Cd,{message:"SHOP_NO_MANA"}),Xc.setNodeStateRecursive(d.alert,"showed")},highlight:function(a){Xc.setNodeStateRecursive(m,"highlight",a)},show:function(){Xc.setNodeStateRecursive(m,"showed")}}}})});var cf;Bc.on("ready",function(){var a=new Kc({x:-512,y:-384,$portrait:{y:-480},children:[new Lc({x:549,y:32,width:1074,height:40,$preload:sc()?null:"interface/up_board_2",$portrait:function(){}}),new nc({name:"left",x:126,y:15,width:320,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new nc({name:"right",x:594,y:15,width:320,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new nc({name:"center",x:360,y:15,width:320,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font",$portrait:{y:40,height:90}})]});cf=new W({name:"statusbar",node:a,onShow:function(b){a.left.format=b.leftFormat,a.left.changeTextDefinition(b.left),a.right.format=b.rightFormat,a.right.changeTextDefinition(b.right),a.center.format=b.centerFormat,a.center.changeTextDefinition(b.center)}})});var df;Bc.on("ready",function(){var a=new Kc({x:-502,y:-372,children:[new Lc({name:"status_bar_bkg",x:561,y:20,width:1074,height:40,$preload:"interface/up_board_2"}),new Kc({name:"mana",x:512,y:0,children:[new Kc({name:"glow",x:0,y:17,width:146,height:54,children:[new Kc({name:"group",x:0,y:-15,children:[new nc({name:"mana",x:-320,y:-9,width:300,height:50,text:"SHOP_AVAILABLE_MANA",textColor:"white",textAlign:"right",fontType:"font"}),new Lc({name:"icon",x:0,y:21,width:31,height:39,$preload:"shop/lightning"}),new Lc({name:"infinity",x:35,y:19,width:35,height:15,$preload:"interface/energy_infinity"}),new nc({name:"value",x:15,y:-9,width:100,height:50,text:"1",textColor:"white",textAlign:"left",fontType:"font"})]})]})]})]});Xc.bindCustomMethodsRecursive(a),df=new W({name:"statusbar-board",onShow:function(b,c){a.mana.glow.group.value.text=b.mana,setTimeout(function(){a.mana.glow.group.value.opacity=b.mana==1/0?0:1,a.mana.glow.group.infinity.opacity=b.mana==1/0?1:0},10),c(a)},api:{updateMana:function(b){b&&(a.mana.glow.group.value.text=b,a.mana.glow.group.value.opacity=b==1/0?0:1,a.mana.glow.group.infinity.opacity=b==1/0?1:0)}}})});var ef;Bc.on("ready",function(){var a,b,c,d=new Kc(sc()?{x:-320,y:-480,children:[new Lc({x:320,y:60,width:586,height:10,$preload:"interface/line"}),new Lc({name:"icon",x:511,y:33,width:31,height:39,$preload:"shop/lightning"}),new nc({name:"you_have",x:160,y:15,width:320,height:30,text:"SHOP_YOU_HAVE",textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"font"}),b=new nc({name:"mana",x:536,y:15,width:100,height:30,text:"{0}",format:[0],textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"}),c=new Lc({name:"infinity",x:546,y:30,width:35,height:15,$preload:"interface/energy_infinity",opacity:0}),new Kc({name:"bonus",x:10,y:0,children:[new Lc({name:"icon",x:82.5*.7,y:25,image:"shop_money/action_box_wide",width:165*.7,height:77,children:[a=new nc({x:-145,name:"text",width:300,text:"180d23h",textColor:"yellow",textAlign:"center",fontType:"author"})]}),new nc({name:"promoText",x:165*.7,y:5,width:250,height:50,text:"BANK_ACTION_FULL_MSG",textColor:"white",textAlign:"left",fontType:"author"})]})]}:{x:-502,y:-372,children:[new Lc({name:"status_bar_bkg",x:561,y:20,width:1074,height:40,$preload:"interface/up_board_2"}),new Kc({name:"bonus",x:10,y:0,children:[new Lc({name:"icon",x:82.5*.7,y:20,image:"shop_money/action_box_wide",width:165*.7,height:77,children:[a=new nc({x:-145,name:"text",width:300,text:"180d23h",textColor:"yellow",textAlign:"center",fontType:"author"})]}),new nc({name:"promoText",x:165*.7,y:-5,width:300,height:50,text:"BANK_ACTION_FULL_MSG",textColor:"white",textAlign:"left",fontType:"font"})]}),new Kc({name:"mana",x:512,y:0,children:[new Kc({name:"glow",x:0,y:17,width:146,height:54,children:[new Kc({name:"group",x:0,y:-15,children:[new nc({name:"mana",x:-320,y:-9,width:300,height:50,text:"SHOP_AVAILABLE_MANA",textColor:"white",textAlign:"right",fontType:"font"}),new Lc({name:"icon",x:0,y:21,width:31,height:39,$preload:"shop/lightning"}),b=new nc({name:"value",x:15,y:-9,width:100,height:50,text:"1",textColor:"white",textAlign:"left",fontType:"font"}),c=new Lc({name:"infinity",x:35,y:18,width:35,height:15,$preload:"interface/energy_infinity",opacity:0})]})]})]})]});Xc.bindCustomMethodsRecursive(d),ef=new W({name:"statusbar-bank",onShow:function(a,e){b.text=a.mana;var f=a.mana==1/0;setTimeout(function(){b.opacity=Number(!f),c.opacity=Number(f)}),d.bonus.opacity=0,e(d)},api:{updateMana:function(a){if(a){b.text=a;var d=a==1/0;setTimeout(function(){b.opacity=Number(!d),c.opacity=Number(d)})}},activateBonus:function(b){d.bonus.opacity=1;var c=b.remainingTime/36e5|0,e=Math.floor(c/24),f=c-24*e;a.text="{}d {}h".format(e,f)}}})});var ff;Bc.on("ready",function(){function a(a){(Bc.hints[a].duration&&Bc.hints[a].remainingTime>0||!Bc.hints[a].duration&&Bc.hints[a].amount>0)&&Xc.setNodeStateRecursive(this,"active")}var b=new Kc({x:-512,y:-372,$portrait:{x:-320,y:-480},children:[new Lc({name:"status_bar_bkg",x:561,y:20,width:1074,height:40,$preload:sc()?null:"interface/up_board_2"}),new nc({name:"progress",x:30,y:-2,width:400,height:50,text:"STATUS_BAR_ELEMENTS",format:[4,249],textColor:"white",textAlign:"left",fontType:"font",$portrait:{x:160,y:-4,textAlign:"right",fontType:"medium"}}),new nc({name:"groups_counter",x:235,y:-2,width:200,height:50,text:"STATUS_BAR_GROUPS",format:[4,26],textColor:"white",textAlign:"left",fontType:"font",$portrait:{x:360,y:18,textAlign:"right",fontType:"medium"}}),new Lc({x:320,y:60,width:586,height:10,$preload:sc()?"interface/line":null}),new Kc({name:"help",x:40,y:30,$portrait:{y:35}}),new Kc({name:"alphabet",x:600,y:30}),new lc({name:"lightPowerStatus",x:595,y:20,opacity:Bc.config.getAsBool("light_enabled",!1)?1:0,$portrait:{x:100,y:22}}),new tb({name:"status_bar_energy",x:775,y:22,width:80,height:80,opacity:Bc.config.getAsBool("light_enabled",!1)?1:0,$portrait:{x:275,y:22},$preload:"interface/plus_energy",on:{mousefocusclick:function(){ff.events.trigger("manaButtonClicked")}}}),new Kc(sc()?{children:[new Lc({name:"alphabetButton",x:600,y:30,$preload:"toolbar/alook",width:100,height:100,opacity:1,$planet:{opacity:0},on:{mousefocusclick:function(){ff.events.trigger("alphabetButtonClicked","left")}}})]}:{name:"icons",x:390,y:-22,children:[new tb({name:"no_repeat",x:40,y:40,width:80,height:80,$preload:"interface/border_norepeat",$base:{opacity:.5},$active:{opacity:1},$showed:function(){a.call(this,this.name)},$ready:function(){this.$.flashAnimation||(this.$.flashAnimation=qb.call(Rc({target:this,property:"opacity",from:1,to:0,duration:200,reverse:!0,on:{end:function(){this.target.opacity=1}}}),{loops:2}))},$flash:function(){this.$.ready();var a=this.$.flashAnimation;a.playing&&a.stop(),a.play()},on:{mousefocusclick:function(){ff.events.trigger("HintButtonClicked")}}}),new tb({name:"no_reaction",x:94,y:40,width:80,height:80,$preload:"interface/border_finish",$base:{opacity:.5},$active:{opacity:1},$showed:function(){a.call(this,this.name)},on:{mousefocusclick:function(){ff.events.trigger("HintButtonClicked")}}}),new tb({name:"no_pairs",x:148,y:40,width:80,height:80,$preload:"interface/border_dotted",$base:{opacity:.5},$active:{opacity:1},$showed:function(){a.call(this,this.name)},on:{mousefocusclick:function(){ff.events.trigger("HintButtonClicked")}}})]}),new Kc({name:"mana",x:865,y:0,children:[new Lc({name:"glow",x:43,y:17,width:146,height:54,$preload:"interface/glow_under_energy",children:[new Kc({name:"group",x:25,y:-15,children:[new Lc({name:"icon",x:-20,y:23,width:31,height:39,$preload:"shop/lightning"}),new Lc({name:"infinity",x:15,y:22,width:35,height:15,$preload:"interface/energy_infinity",$showed:function(){var a=cb()==1/0,b=this;setTimeout(function(){b.opacity=Number(a)})}}),new nc({name:"value",x:-7,y:-6,width:58,height:50,text:"1",textColor:"white",textAlign:"left",fontType:"font",$showed:function(){var a=this,b=this.parent,c=cb()==1/0;setTimeout(function(){b.x=20-5*(a.text+"").length,a.opacity=Number(!c)})}}),new tb({x:80,y:20,image:"interface/plus_energy",width:80,height:80,on:{mousefocusclick:function(){ff.events.trigger("bankButtonClicked")}},opacity:Bc.config.getAsBool("bank_button_enabled",!0)&&Bc.payments.isAvailable()?1:0})]})]})]})]});Xc.bindCustomMethodsRecursive(b),ff=new W({name:"statusbar-board",onShow:function(a,c){b.mana.glow.group.value.text=a.mana;var d=a.mana==1/0;setTimeout(function(){b.mana.glow.group.value.opacity=Number(!d),b.mana.glow.group.infinity.opacity=Number(d)}),b.lightPowerStatus.setLightPowerType(Ua()),b.lightPowerStatus.setLightPower(Wa()),b.lightPowerStatus.setLightPowerCounter(Za(),$a()),c(b)},api:{board:{showCounter:function(a){b.progress.changeTextDefinition("STATUS_BAR_ELEMENTS"),b.groups_counter.changeTextDefinition("STATUS_BAR_GROUPS"),b.progress.format[0]=a.elements.visible,b.progress.format[1]=a.elements.length,b.progress.tr(),b.groups_counter.format[0]=a.groups.visible,b.groups_counter.format[1]=a.groups.length,b.groups_counter.tr()},showProgress:function(a){b.progress.changeTextDefinition("STATUS_BAR_PROGRESS"),b.groups_counter.changeTextDefinition(""),b.progress.format[0]=100*a|0,b.progress.tr()},flashRepetitions:function(){b.icons&&Xc.setNodeState(b.icons.no_repeat,"flash")},activateHint:function(a){if(b.icons){var c=b.icons[a.name];null!=c&&Xc.setNodeState(c,"active")}},deactivateHint:function(a){if(b.icons){var c=b.icons[a.name];null!=c&&Xc.setNodeState(c,"base")}},updateMana:function(a){b.mana.glow.group.value.text=a;var c=a==1/0;setTimeout(function(){b.mana.glow.group.value.opacity=Number(!c),b.mana.glow.group.infinity.opacity=Number(c)})},updateLightPower:function(a){b&&(b.lightPowerStatus.setLightPower(a),b.lightPowerStatus.setLightPowerCounter(Za(),$a()))},updateLightPowerType:function(a){b&&(b.lightPowerStatus.setLightPowerType(a),b.lightPowerStatus.setLightPowerCounter(Za(),$a()))},updateLightPowerCounter:function(a,c){b&&b.lightPowerStatus.setLightPowerCounter(a,c)}}}})});var gf;Bc.on("ready",function(){gf=new W({name:"statusbar-credits",onShow:function(a,b){cf.getNode({left:"MAINMENU_SCR_CREDITS_BTN",right:"CREDITS_HEADER_RIGHT"},function(a){b(a)})}})});var hf;Bc.on("ready",function(){hf=new W({name:"statusbar-encyclopedia",onShow:function(a,b){cf.getNode({center:"PLAYMENU_SCR_ENCYCLOPEDIA"},function(a){b(a)})}})});var jf;Bc.on("ready",function(){var a=new Kc({x:-320,y:-480,children:[new Lc({x:320,y:60,width:586,height:10,$preload:"interface/line"}),new nc({name:"title",x:0,y:0,width:640,height:60,text:"LOG_SRC_TITLE",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"medium"})]});Xc.bindCustomMethodsRecursive(a),jf=new W({name:"statusbar-log",node:a,onShow:function(b,c){c(a)}})});var kf;Bc.on("ready",function(){var a=new Kc({x:-512,y:-384,$portrait:{y:-480},children:[new Lc({x:549,y:32,width:1074,height:40,$preload:sc()?null:"interface/up_board_2",$portrait:function(){}}),new nc({name:"left",x:126,y:15,width:320,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new nc({name:"right",x:544,y:15,width:320,height:30,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Kc({name:"mana",x:865,y:12,children:[new Lc({name:"glow",x:43,y:17,width:146,height:54,$preload:"interface/glow_under_energy",children:[new Kc({name:"group",x:25,y:-15,children:[new Lc({name:"icon",x:-20,y:23,width:31,height:39,$preload:"shop/lightning"}),new Lc({name:"infinity",x:15,y:22,width:35,height:15,$preload:"interface/energy_infinity"}),new nc({name:"value",x:-7,y:-6,width:58,height:50,text:"1",textColor:"white",textAlign:"left",fontType:"font",$showed:function(){var a=this,b=this.parent;setTimeout(function(){b.x=20-5*(a.text+"").length})}}),new tb({x:80,y:20,image:"interface/plus_energy",width:80,height:80,on:{mousefocusclick:function(){kf.events.trigger("bankButtonClicked")}},opacity:Bc.config.getAsBool("bank_button_enabled",!0)&&Bc.payments.isAvailable()?1:0})]})]})]})]});kf=new W({name:"statusbar-menu",node:a,onShow:function(b){a.left.format=b.leftFormat,a.left.changeTextDefinition(b.left),a.right.format=b.rightFormat,a.right.changeTextDefinition(b.right),a.mana.glow.group.value.text=b.mana,setTimeout(function(){a.mana.glow.group.value.opacity=b.mana==1/0?0:1,a.mana.glow.group.infinity.opacity=b.mana==1/0?1:0},10)},api:{updateMana:function(b){a.mana.glow.group.value.text=b,a.mana.glow.group.value.opacity=b==1/0?0:1,a.mana.glow.group.infinity.opacity=b==1/0?1:0}}})});var lf;Bc.on("ready",function(){var a=new Kc({x:-320,y:-480,children:[new Lc({x:320,y:60,width:586,height:10,$preload:"interface/line"}),new nc({name:"title",x:0,y:0,width:640,height:60,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]});Xc.bindCustomMethodsRecursive(a),lf=new W({name:"statusbar-portrait",node:a,onShow:function(b,c){b&&b.title&&(a.title.format=b.titleFormat,a.title.changeTextDefinition(b.title)),c(a)},api:{setTitle:function(b){a.title.changeTextDefinition(b)}}})});var mf;Bc.on("ready",function(){var a=new Kc(sc()?{x:-320,y:-480,children:[new Lc({x:320,y:60,width:586,height:10,$preload:"interface/line"}),new nc({name:"target",x:0,y:15,width:390,height:30,text:"PUZ_TARGET_MSG_PORTRAIT",format:[""],textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"font"}),new Lc({name:"element",x:430,y:32,width:60,height:45}),new nc({name:"progress",x:474,y:15,width:320,height:30,text:"STATUS_BAR_PROGRESS_PUZZLE_PORTRAIT",format:[0],textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"}),sc()?new Lc({name:"alphabetButton",x:600,y:30,$preload:"toolbar/alook",width:100,height:100,opacity:1,$planet:{opacity:0},on:{mousefocusclick:function(){mf.events.trigger("alphabetButtonClicked","left")}}}):new Kc]}:{x:-512,y:-384,children:[new Lc({x:549,y:32,width:1074,height:40,$preload:"interface/up_board_2"}),new nc({name:"target",x:126,y:15,width:320,height:30,text:"PUZ_TARGET_MSG",format:[""],textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"}),new Lc({name:"element",x:500,y:32,width:60,height:45}),new nc({name:"progress",x:594,y:15,width:320,height:30,text:"STATUS_BAR_PROGRESS_PUZZLE",format:[0],textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"font"})]});Xc.bindCustomMethodsRecursive(a),mf=new W({name:"statusbar-puzzle",node:a,onShow:function(b,c){var d=b.chapter,e=d.getPossibleElements()[d.data.finalElement];a.target.format[0]=e.text,a.progress.format[0]=100*d.progress|0,a.target.tr(),a.progress.tr(),a.element.image=Nb.ASSET_ID.format(e),c(a)}})});var nf;Bc.on("ready",function(){nf=new W({name:"statusbar-settings",onShow:function(a,b){cf.getNode({left:"OPTIONS_SCR_TITLE",right:"LANGUAGE_SCR_TITLE"},function(a){b(a)})}})});var of;Bc.on("ready",function(){var a=new Kc({x:-320,y:-480,children:[new Lc({x:320,y:60,width:586,height:10,$preload:"interface/line"}),new nc({name:"title",x:30,y:15,width:320,height:30,text:"SHOP_SCR_TITLE",textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"}),new Lc({name:"icon",x:431,y:33,width:31,height:39,$preload:"shop/lightning"}),new nc({name:"you_have",x:80,y:15,width:320,height:30,text:"SHOP_YOU_HAVE",textColor:"rgba(255, 255, 255, 1)",textAlign:"right",fontType:"font"}),new nc({name:"mana",x:456,y:15,width:100,height:30,text:"{0}",format:[0],textColor:"rgba(255, 255, 255, 1)",textAlign:"left",fontType:"font"}),new Lc({name:"infinity",x:466,y:30,width:35,height:15,$preload:"interface/energy_infinity",opacity:0}),new tb({x:576,y:30,image:"interface/plus_energy",width:80,height:80,on:{mousefocusclick:function(){of.events.trigger("bankButtonClicked")}},opacity:Bc.config.getAsBool("bank_button_enabled",!0)&&Bc.payments.isAvailable()?1:0})]});Xc.bindCustomMethodsRecursive(a),of=new W({name:"statusbar-shop",node:a,onShow:function(b,c){this.api.updateMana(b.mana),c(a)},api:{updateMana:function(b){a.mana.format[0]=b,a.mana.tr();var c=b==1/0;setTimeout(function(){a.mana.opacity=Number(!c),a.infinity.opacity=Number(c)})}}})});var pf;Bc.on("ready",function(){var a=new Kc({children:[new Lc({x:3,y:-312,width:640,height:124,$preload:sc()?null:"interface/planet_slots"}),new Kc({name:"button1",x:-255,y:-312}),new Kc({name:"button2",x:-127,y:-312}),new Kc({name:"button3",x:1,y:-312}),new Kc({name:"button4",x:129,y:-312}),new Kc({name:"button5",x:257,y:-312}),new Kc({name:"button6",x:385,y:-312}),new Lc({x:0,y:-365,width:586,height:10,$portrait:{image:"interface/line"},$lineoff:{opacity:0}})]});pf=new W({name:"toolbar",node:a,onShow:function(){this.api.toolbar.resizeTo(5),Xc.setViewPartial(a.button1,null),Xc.setViewPartial(a.button2,null),Xc.setViewPartial(a.button3,null),Xc.setViewPartial(a.button4,null),Xc.setViewPartial(a.button5,null),Xc.setViewPartial(a.button6,null)},api:{toolbar:{resizeTo:function(b){a.x=128*-(b-5)/2}}}})});var qf;Bc.on("ready",function(){qf=new W({name:"toolbar-alhabet",onShow:function(a,b){pf.getNode(function(a){qf.appendPartial(a.button1,uf),b(a)})}})});var rf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/achievements",$portrait:function(){this.fg.width=109,this.fg.height=109},on:{mousefocusclick:function(){rf.events.trigger("click")}}});rf=new W({name:"toolbar-button-achievements",node:a})});var sf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/advertisement",on:{mousefocusclick:function(){sf.events.trigger("click")}}});sf=new W({name:"toolbar-button-advertisement",node:a})});var tf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/alook",on:{mousefocusclick:function(){tf.events.trigger("click")}}});tf=new W({name:"toolbar-button-alook",node:a})});var uf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/back",on:{mousefocusclick:function(){uf.events.trigger("click")}}});uf=new W({name:"toolbar-button-back",node:a})});var vf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/shop_money",on:{mousefocusclick:function(){vf.events.trigger("click")}}});vf=new W({name:"toolbar-button-bank",node:a})});var wf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/camera",on:{mousefocusclick:function(){wf.events.trigger("click")}}});wf=new W({name:"toolbar-button-camera",node:a})});var xf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/credits",on:{mousefocusclick:function(){xf.events.trigger("click")}}});xf=new W({name:"toolbar-button-credits",node:a})});var yf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/wheel_fortune",$portrait:function(){this.fg.width=109,this.fg.height=109},on:{mousefocusclick:function(){yf.events.trigger("click")}}});yf=new W({name:"toolbar-button-fortune",node:a})});var zf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/help",$portrait:function(){this.fg.width=109,this.fg.height=109},on:{mousefocusclick:function(){zf.events.trigger("click")}}});zf=new W({name:"toolbar-button-help",node:a})});var Af;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/double_hint_on",on:{mousefocusclick:function(){Af.events.trigger("click")}}});Af=new W({name:"toolbar-button-hints",node:a})});var Bf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/language",$portrait:function(){this.fg.width=109,this.fg.height=109},on:{mousefocusclick:function(){Bf.events.trigger("click")}}});Bf=new W({name:"toolbar-button-language",node:a})});var Cf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/leaderboards",on:{mousefocusclick:function(){Cf.events.trigger("click")}}});Cf=new W({name:"toolbar-button-leaderboards",node:a})});var Df;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/log",on:{mousefocusclick:function(){Df.events.trigger("click")}}});Df=new W({name:"toolbar-button-log",node:a})});var Ef;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/shop_money",on:{mousefocusclick:function(){Ef.events.trigger("click")}}});Ef=new W({name:"toolbar-button-mana",node:a})});var Ff;Bc.on("ready",function(){if(sc()){var a=new Jb({buttonImage:"toolbar/next",on:{mousefocusclick:function(){Ff.events.trigger("click")}}});Ff=new W({name:"toolbar-button-next",node:a})}});var Gf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/next_epizod",on:{mousefocusclick:function(){Gf.events.trigger("click")}}});Gf=new W({name:"toolbar-button-next-episode",node:a})});var Hf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/planet",$portrait:function(){this.fg.width=109,this.fg.height=109},on:{mousefocusclick:function(){Hf.events.trigger("click")}}});Hf=new W({name:"toolbar-button-planet",node:a})});var If;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/book",on:{mousefocusclick:function(){If.events.trigger("click")}}});If=new W({name:"toolbar-button-play",node:a})});var Jf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/btn_profile",on:{mousefocusclick:function(){Jf.events.trigger("click")}}});Jf=new W({name:"toolbar-button-profile",node:a})});var Kf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_new_year",on:{mousefocusclick:function(){Kf.events.trigger("click")}}});Kf=new W({name:"toolbar-button-quests-quest_1",node:a})});var Lf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_princess",on:{mousefocusclick:function(){Lf.events.trigger("click")}}});Lf=new W({name:"toolbar-button-quests-quest_2",node:a})});var Mf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_20th",on:{mousefocusclick:function(){Mf.events.trigger("click")}}});Mf=new W({name:"toolbar-button-quests-quest_20th",node:a})});var Nf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_devilvsgod",on:{mousefocusclick:function(){Nf.events.trigger("click")}}});Nf=new W({name:"toolbar-button-quests-quest_3",node:a})});var Of;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_20th",on:{mousefocusclick:function(){Of.events.trigger("click")}}});Of=new W({name:"toolbar-button-quests-quest_egypt",node:a})});var Pf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_robinzon",on:{mousefocusclick:function(){Pf.events.trigger("click")}}});Pf=new W({name:"toolbar-button-quests-quest_lost",node:a})});var Qf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/quest_angel_vs_demon",on:{mousefocusclick:function(){Qf.events.trigger("click")}}});Qf=new W({name:"toolbar-button-quests-quest_qad",node:a})});var Rf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/reset",on:{mousefocusclick:function(){Rf.events.trigger("click")}}});Rf=new W({name:"toolbar-button-reset",node:a})});var Sf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/undo",on:{mousefocusclick:function(){Sf.events.trigger("click")}}}),b=new nc({parent:a,x:-45,y:20,width:90,text:"",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:"author"});Sf=new W({name:"toolbar-button-revert",node:a,api:{revert:{activate:function(){a.activate()},deactivate:function(){a.deactivate()},setAmount:function(a){b.changeTextDefinition(a.toString())}}}})});var Tf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/shop",$portrait:{y:-10},on:{mousefocusclick:function(){Tf.events.trigger("click")}},children:[sc()?new Kc({name:"mana",children:[new Lc({x:-35,y:50,image:"shop/lightning",width:31,height:39}),new Lc({name:"infinity",x:0,y:47,width:35,height:15,$preload:"interface/energy_infinity",opacity:0}),new nc({name:"text",x:-20,y:20,width:200,height:50,text:"",textColor:"white",textAlign:"left",fontType:"author",$showed:function(){}})]}):new Kc]});Tf=new W({name:"toolbar-button-shop",node:a,api:{updateMana:function(b){a.mana&&(a.mana.text.text=b);var c=b==1/0;setTimeout(function(){a.mana.text.opacity=Number(!c),a.mana.infinity.opacity=Number(c)})}}})});var Uf;Bc.on("ready",function(){var a=new Jb({buttonImage:"toolbar/menu",on:{mousefocusclick:function(){Uf.events.trigger("click")}}});Uf=new W({name:"toolbar-button-stop",node:a})});var Vf;Bc.on("ready",function(){var a=new Jb({buttonImage:"planet/button_rotate_01",on:{mousedown:function(){Vf.events.trigger("mousedown")},mouseup:function(){Vf.events.trigger("mouseup")}}});Vf=new W({name:"toolbar-button-turnLeft",node:a})});var Wf;Bc.on("ready",function(){var a=new Jb({buttonImage:"planet/button_rotate_02",on:{mousedown:function(){Wf.events.trigger("mousedown")},mouseup:function(){Wf.events.trigger("mouseup")}}});Wf=new W({name:"toolbar-button-turnRight",node:a})});var Xf;Bc.on("ready",function(){var a=sc()?[{image:"toolbar/du",bkg:!1,text:!1},{image:"toolbar/du_02",bkg:!1,text:!1},{image:"toolbar/du_03",bkg:!1,text:!1},{image:"toolbar/du_04",bkg:!1,text:!1},{image:"toolbar/du_05",bkg:!1,text:!1}]:[{image:"main_menu/go_mobile",bkg:!1,text:!0},{image:"toolbar/du_02",bkg:!0,text:!1},{image:"toolbar/du_03",bkg:!0,text:!1},{image:"toolbar/du_04",bkg:!0,text:!1},{image:"toolbar/du_05",bkg:!0,text:!1}],b=new Jb({buttonImage:sc()?"toolbar/du":"main_menu/go_mobile",bgDisabled:!0,on:{mousefocusclick:function(){Xf.events.trigger("click")}},onShowed:function(){Xf.api.update()}});new nc({name:"universeText",parent:b,font:"font",x:-50,y:10,width:100,height:50,text:"MAINMENU_SCR_UNIVERSE_BTN",textColor:"rgba(255, 255, 255, 1)",textAlign:"center",fontType:sc()?"author":"small",$portrait:{y:20,opacity:0}}),Xf=new W({name:"toolbar-button-universe",node:b,api:{update:function(){var c=a[Math.round(Math.random()*(a.length-1))];b.fg.image=c.image,b.bg.opacity=+c.bkg,b.universeText.opacity=+c.text}}})});var Yf;Bc.on("ready",function(){Yf=new W({name:"toolbar-credits",onShow:function(a,b){pf.getNode(function(a){Yf.appendPartial(a.button1,uf),b(a)})}})});var Zf;Bc.on("ready",function(){Zf=new W({name:"toolbar-encyclopedia",onShow:function(a,b){pf.getNode(function(a){Zf.appendPartial(a.button1,uf),Bc.promo.hasUniverse()&&Zf.appendPartial(a.button3,Xf),b(a)})}})});var $f;Bc.on("ready",function(){$f=new W({name:"toolbar-language",onShow:function(a,b){pf.getNode(function(a){$f.appendPartial(a.button1,uf),b(a)})}})});var _f;Bc.on("ready",function(){_f=new W({name:"toolbar-menu",onShow:function(a,b){pf.getNode(function(a){_f.appendPartial(a.button1,uf),sc()&&(Bc.config.getAsBool("leaderboard_enabled",!1)&&_f.appendPartial(a.button3,Cf),_f.appendPartial(a.button5,rf)),Bc.promo.hasUniverse()&&_f.appendPartial(a.button3,Xf),b(a)})}})});var ag;Bc.on("ready",function(){ag=new W({name:"toolbar-nav-settings",onShow:function(a,b){pf.getNode(function(a){ag.appendPartial(a.button1,uf).appendPartial(a.button2,xf).appendPartial(a.button5,Bf),b(a)})}})});var bg;Bc.on("ready",function(){bg=new W({name:"toolbar-settings",onShow:function(a,b){pf.getNode(function(a){bg.appendPartial(a.button1,uf),b(a)})}})});var cg;Bc.on("ready",function(){var a=new Kc({x:0,y:0,children:[new oc({name:"tutorialOpenGroupLeft",x:-50,y:15,$portrait:{x:200,y:50},opacity:0,$show:function(){if(this.text.changeTextDefinition("TUTORIAL_TAP_GROUP_TO_EXPAND"),this.opacity=1,this.left.$.active(),sc()){var a=ed.node.center;a&&a.children[0]&&a.children[0]&&0===a.children[0].opacity?this.x=-50:this.x=200}var b=this;Xc.animate(b,"x",{duration:300,from:b.x-5,to:b.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialOpenGroupRight",x:50,y:-100,$portrait:{y:-130},opacity:0,$show:function(){this.text.changeTextDefinition("TUTORIAL_TAP_GROUP_TO_EXPAND"),this.opacity=1,this.right.$.active();var a=this;Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialCloseGroupLeft",x:-100,y:-150,$portrait:{y:0},opacity:0,$show:function(){this.text.changeTextDefinition("TUTORIAL_TAP_GROUP_TO_COLLAPSE"),this.opacity=1,this.left.$.active();var a=this;Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialCloseGroupRight",x:120,y:-150,opacity:0,$portrait:{y:0},$show:function(){this.text.changeTextDefinition("TUTORIAL_TAP_GROUP_TO_COLLAPSE"),this.opacity=1,this.right.$.active();var a=this;Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialSelectElementLeft",x:20,y:-210,opacity:0,$portrait:{x:-120,y:150},$show:function(){var a=this;this.text.changeTextDefinition("TUTORIAL_TAP_ELEMENT"),this.opacity=1,sc()?(this.up.$.active(),Xc.animate(a,"y",{duration:300,from:a.y-5,to:a.y+5,easing:Vc.inOutSine,loop:!0,reverse:!0})):(this.left.$.active(),Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0}))},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialSelectElementRight",x:-20,y:-210,$portrait:{x:120,y:150},opacity:0,$show:function(){var a=this;this.text.changeTextDefinition("TUTORIAL_TAP_ELEMENT"),this.opacity=1,sc()?(this.up.$.active(),Xc.animate(a,"y",{duration:300,from:a.y-5,to:a.y+5,easing:Vc.inOutSine,loop:!0,reverse:!0})):(this.right.$.active(),Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0}))},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialSearch",x:-260,y:-280,$portrait:{x:120,y:-430},opacity:0,$show:function(){this.text.changeTextDefinition("HINT_DLG_USE_SEACRH"),this.opacity=1,sc()?this.right.$.active():this.left.$.active();var a=this;Xc.animate(a,"x",{duration:300,from:a.x-5,to:a.x+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialHintRecharged",x:-260,y:-280,$portrait:{x:120,y:-430},opacity:0,$show:function(){sc()?(this.x=ed.node.toolbar.children[0].button3.x+ed.node.toolbar.children[0].x+50,this.y=ed.node.toolbar.children[0].button3.y+ed.node.toolbar.y-110):(this.x=ed.node.toolbar.children[0].button2.x+ed.node.toolbar.children[0].x,this.y=ed.node.toolbar.children[0].button2.y+ed.node.toolbar.y-110),this.text.changeTextDefinition("HINT_RECHARGED"),this.opacity=1,this.down.$.active();var a=this;Xc.animate(a,"y",{duration:300,from:a.y-5,to:a.y+5,easing:Vc.inOutSine,loop:!0,reverse:!0}),setTimeout(function(){Xc.setNodeStateRecursive(a,"hide")},2e3)},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialUseHint",x:-260,y:-280,$portrait:{x:120,y:-430},opacity:0,$show:function(){sc()?(this.x=ed.node.toolbar.children[0].button3.x+ed.node.toolbar.children[0].x+50,this.y=ed.node.toolbar.children[0].button3.y+ed.node.toolbar.y-110):(this.x=ed.node.toolbar.children[0].button2.x+ed.node.toolbar.children[0].x,this.y=ed.node.toolbar.children[0].button2.y+ed.node.toolbar.y-110),this.text.changeTextDefinition("HINT_DLG_USE_HINT_2"),this.opacity=1,this.down.$.active();var a=this;Xc.animate(a,"y",{duration:300,from:a.y-5,to:a.y+5,easing:Vc.inOutSine,loop:!0,reverse:!0})},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}}),new oc({name:"tutorialUseHintTemp",x:-260,y:-280,$portrait:{x:120,y:-430},opacity:0,$show:function(){sc()?(this.x=ed.node.toolbar.children[0].button3.x+ed.node.toolbar.children[0].x+50,this.y=ed.node.toolbar.children[0].button3.y+ed.node.toolbar.y-110):(this.x=ed.node.toolbar.children[0].button2.x+ed.node.toolbar.children[0].x,this.y=ed.node.toolbar.children[0].button2.y+ed.node.toolbar.y-110),this.text.changeTextDefinition("HINT_DLG_USE_HINT_2"),this.opacity=1,this.down.$.active();var a=this;Xc.animate(a,"y",{duration:300,from:a.y-5,to:a.y+5,easing:Vc.inOutSine,loop:!0,reverse:!0}),setTimeout(function(){Xc.setNodeStateRecursive(a,"hide")},2e3)},$hide:function(){this.opacity=0,Xc.stopAnimations(this)}})]});Xc.bindCustomMethodsRecursive(a),cg=new W({name:"tutorial",node:a,api:{tutorial:{visible:function(b){a.opacity=b?1:0},show:function(b){"all"===b?Xc.setNodeStateRecursive(a,"show"):Xc.setNodeStateRecursive(a[b],"show")},hide:function(b){"all"===b?Xc.setNodeStateRecursive(a,"hide"):Xc.setNodeStateRecursive(a[b],"hide")}}}})});var dg;Bc.on("ready",function(){function a(a,b){return new Kc({name:"child"+b,y:0,zIndex:b,children:[new Lc({$preload:"universe/shadow",width:567,height:123,y:215}),new Lc({$preload:a.main_button_image,width:558,height:361,on:{mouseclick:function(){f.scrollview.setClicked(b)}}})]})}var b,c,d,e=!1,f=new Kc({$updateContent:function(){f.scrollview.updatePositions(),f.scrollview.updateContent()},children:[new Lc({name:"bg",x:0,y:0,width:1024,height:768,$preload:"universe/bkg",$portrait:{x:0,y:0,width:oh,height:ph}}),new Lc({width:oh,height:119,y:ph/2-100,$preload:"universe/btn_place",$portrait:{width:oh,height:205,y:300}}),new qc({name:"scrollview",width:oh,height:500,cellWidth:oh/2,y:-150,$portrait:{y:-250},useAutoSelectX:!0,useScrollByClick:!0}),new Jb({x:-oh/2+80,y:ph/2-100,buttonImage:"toolbar/back",$portrait:{x:-oh/2+70,y:ph/2-70},on:{mousefocusclick:function(){uf.events.trigger("click")}}}),new tb({name:"leftButton",x:-oh/2+200,y:ph/2-250,width:81,height:99,$preload:"universe/arrow_left_normal",$portrait:{x:-250,y:60},on:{mouseclick:function(){dg.api.scrollLeft()}}}),new tb({name:"rightButton",x:oh/2-200,y:ph/2-250,width:81,height:99,$preload:"universe/arrow_right_normal",$portrait:{x:250,y:60},on:{mouseclick:function(){dg.api.scrollRight()}}}),new mc({name:"gameName",x:-250,y:70,width:500,height:128,text:"",textColor:"white",textAlign:"center",fontType:"universe",fontName:"font_universe",$portrait:{y:-10,x:-187,width:400}}),new tb({name:"store1",x:-130,y:282,width:220,height:92,scale:0,$portrait:{y:268},on:{mousefocusclick:function(){var a=d[b].store_button_link1;Bc.promo.openLink("universe",a)}}}),new tb({name:"store2",x:130,y:282,width:220,height:92,scale:0,$portrait:{y:268},on:{mousefocusclick:function(){var a=d[b].store_button_link2;Bc.promo.openLink("universe",a)}}})]});f.contentNode=f.scrollview.contentNode,f.scrollview.on("mousefocus",function(){e||(e=!0,dg.api.hideStoreButtons())}),f.scrollview.on("autoselected",function(a){e&&(e=!1,b=a.index,f.currentX=a.targetX,dg.api.updateView(),dg.api.updateScrollButtons(),dg.api.showStoreButtons())}),dg=new W({name:"universe",node:f,onShow:function(c){Xc.setViewPartial(f.contentNode,null);for(var e=0;e<c.banners.length;e++){var g=a(c.banners[e],e);f.contentNode.appendChild(g)}f.$.updateContent(),c.banners.length>0&&(b=0,f.currentSlot=b,f.currentX=-oh/2*(b-1),d=c.banners,f.scrollview._scrollTo(f.currentX,0),setTimeout(function(){dg.api.updateView(),dg.api.updateScrollButtons(),dg.api.showStoreButtons()},100))},api:{scrollLeft:function(){c&&c.playing||(b--,0>b?b++:(dg.api.hideStoreButtons(),dg.api.scrollToCurrent()),f.currentSlot=b)},scrollRight:function(){c&&c.playing||(b++,f.contentNode.children.length-1<b?b--:(dg.api.hideStoreButtons(),dg.api.scrollToCurrent()),f.currentSlot=b)},hideStoreButtons:function(){Xc.animate(f.store1,"scale",{duration:100,to:0,from:1,easing:Vc.linear}),Xc.animate(f.store2,"scale",{duration:100,to:0,from:1,easing:Vc.linear})},showStoreButtons:function(){Xc.animate(f.store1,"scale",{duration:300,to:1,from:0,easing:Vc.outBounce}),Xc.animate(f.store2,"scale",{duration:300,to:1,from:0,easing:Vc.outBounce})},hideGameName:function(){Xc.animate(f.gameName,"opacity",{duration:100,to:0,from:1,easing:Vc.linear})},showGameName:function(){Xc.animate(f.gameName,"opacity",{duration:300,to:1,from:0,easing:Vc.linear})},updateScrollButtons:function(){0==b?f.leftButton.opacity=0:f.leftButton.opacity=1,b==f.contentNode.children.length-1?f.rightButton.opacity=0:f.rightButton.opacity=1},scrollToCurrent:function(){dg.api.updateScrollButtons();var a=-oh/2*(b-1);f.currentX!==a&&(Xc.animate(f,"currentX",{duration:300,to:a,from:f.currentX,easing:Vc.linear,on:{end:function(){f.scrollview._scrollTo(a,0),dg.api.updateView(),dg.api.showStoreButtons()}}}),c=new Engine.Timer({type:"vsync",autoplay:!0,duration:300,on:{step:function(){f.scrollview._scrollTo(f.currentX,0)}}}))},updateView:function(){d[b]&&(f.gameName.text=d[b].game_name,f.store1.image=d[b].store_button_image1,f.store2.image=d[b].store_button_image2,f.store2.image?(f.store1.x=-130,f.store2.x=130):f.store1.x=0,Bc.promo.sendStats("universe","show",d[b].store_button_link1),Bc.promo.sendStats("universe","show",d[b].store_button_link2))}}})});var eg,fg=new X({name:"achievements",onShow:function(a){var b=this;wd.show(null,function(){var c=wd.api.achievements;b.listen(uf.events).on("click",function(){a.backScreen.show(a.backOpts)}),b.listen(wd.events).on("achievementClicked",function(a){a.active?c.showLockedAchievementAlert(a):c.showLockedAchievementAlert(a)}),b.listen(Gd.events).on("achievementConfirmed",function(){console.log("CONFIRMED")})})}}),gg=(new X({name:"advert",onShow:function(a){var b=null,c=this;switch(a.advertType){case"quest_lost":b=zd;break;case"quest_2":b=zd}b.show({},function(){c.listen(b.events).on("ShowButtonClicked",function(){_g.show()}),c.listen(b.events).on("BackButtonClicked",function(){Jg.show(a.boardOpts)})})}}),new X({name:"alphabet",onShow:function(a){var b=this;Rd.show(function(){var c;b.listen(uf.events).on("click",function(){Jg.show(Object.merge(a.boardOpts,{selectLeftGroup:a.selectedLeftGroup,selectRightGroup:a.selectedRightGroup}),{})}),b.listen(od.events).on("selectedChanged",function(b){var d=b.element;c=d,Jg.show(Object.merge(a.boardOpts,{selectElements:[d],selectLeftGroup:a.selectedLeftGroup,selectRightGroup:a.selectedRightGroup}),{})}),Rd.api.nav.setAlphabet({alphabet:$c.getChapterAlphabet(Bc.currentChapter),elements:$c.getChapterElementsByLetters(Bc.currentChapter)})})}})),hg=new X({name:"artifacts",onShow:function(){var a=this;Sd.show(Bc.artifacts,function(){var b=Sd.api.artifacts,c=!1,d=null;a.listen(Xf.events).on("click",function(){var a=Bc.promo.getUniverse();lh.show({banners:a,backScreen:hg})}),a.listen(uf.events).on("click",function(){c?(c=!1,b.hideDesc()):Xg.show()}),a.listen(zf.events).on("click",function(){ig.show({backScreen:hg})}),a.listen(Sd.events).on("artifactClick",function(a){a.artifact&&(d=a.artifact,a.artifact.visible?a.artifact.active?(c=!0,b.showDesc(a.i,a.artifact)):kg.show(a.artifact):b.showLockedElementAlert())}),a.listen(Td.events).on("wikiButtonClicked",function(){Xc.openLink(Zc.data.links[d.id])})})}}),ig=new X({name:"artifacts-help",onShow:function(a){function b(){c.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:ig,backOpts:a})}),c.listen(uf.events).on("click",function(){switch(d){case 0:d=0,a.backScreen.show(a.opts);break;case 1:d=0,Ud.show({page:0},b)}}),Ff&&c.listen(Ff.events).on("click",function(){d=1,Ud.show({page:1},b)})}var c=this,d=0;Ud.show({page:0},b)}}),jg={listeners:[],on:function(a,b,c){this.listeners.push({event:b,obj:a,handler:c}),a.on(b,c)},off:function(){for(;this.listeners.length;){var a=this.listeners.pop();a.obj.off(a.event,a.handler)}}},kg=new X({name:"artifacts-play",onShow:function(a){var b=this,c=2;Yd.show({artifact:a,mana:Yc.get("mana")},function(){function d(){(Bc.artifacts.attempts<=0||-1===f())&&q.play.enableSubmitButton()}function e(){Bc.artifacts.attempts>0&&f()>=0&&q.play.disableSubmitButton()}function f(){for(var a=0;a<r.length;a++)if(!r[a])return a;return-1}function g(){for(var a=0;a<r.length;a++)if(r[a])return a;return-1}function i(a){var b=-1===f();q.play.popElement(a),r[a]=null,b&&e(),g()<0&&q.play.toggleResetButton(!1)}function j(a){var b=-1===g(),c=f();s>=0&&(r[s]&&i(s),c=s),-1!==c&&(r[c]=a.id,q.play.appendElement(a,c),b&&q.play.toggleResetButton(!0),-1===f()&&d())}function k(a){t=!1,q.hideHints(a)}function l(){return[Bc.hints.artifacts_1,Bc.hints.artifacts_2,Bc.hints.artifacts_3]}function m(a){a>0?q.setAttempts(""+Bc.artifacts.attempts+"/"+Bc.config.getAsInt("artifacts_attempts_amount",100)):q.setTimeToRecharge(Bc.artifacts.timeToRecharge)}function n(){e(),q.changeBuyToSubmit(),m(Bc.artifacts.attempts)}function o(){d(),q.changeSubmitToBuy(),m(Bc.artifacts.attempts)}function p(){if(Bc.artifacts.attempts<=0){q.setTimeToRecharge(Bc.artifacts.timeToRecharge);var a=Bc.artifacts.timeToRecharge;0>=a&&(Bc.artifacts.attempts=Bc.config.getAsInt("artifacts_attempts_amount",100))}}var q=Yd.api,r=Object.seal(Array.apply(null,new Array(q.play.SLOTS_LENGTH))),s=-1,t=!1,u=!1,v=null;b.listen(Vd.events).on("buyButtonClicked",function(a){v=Bc.hints[a.hint],v.isAffordable()?q.showBuyDialog(v,a.message,[v.buyAmount]):q.showNoManaAlert()}),b.listen(Ed.events).on("confirmed",function(){v&&(v.buy(),Vd.api.show(l()),df.api.updateMana(Yc.get("mana"))),v=null}),b.listen(Vd.events).on("useButtonClicked",function(a){if(Bc.hints[a].checkAmount()){var b=!1;switch(v=Bc.hints[a],a){case"artifacts_1":b=!0,c>1&&v.use();break;case"artifacts_2":u||v.use();break;case"artifacts_3":f()>=0&&v.use()}k(b)}else Bc.hints[a].canShowAd&&Bc.ads.showAd(h.REWARDED_AD,function(){Bc.hints[a].accelerateRecharge(1e3*Bc.config.getAsInt("hint_ads_acceleration_time",180)),q.hideHints(),q.showHints(l(),Yc.get("mana"))})}),b.listen(uf.events).on("click",function(){t?k():hg.show()}),b.listen(Af.events).on("click",function(){t=!t,t?q.showHints(l(),Yc.get("mana")):q.hideHints()});var w=$c.getEpisodesAlphabet(),x=$c.getEpisodesElementsByLetters();q.encyclopedia.setAlphabet({alphabet:w,elements:x}),b.listen(nd.events).on("selectedChanged",function(a){var b=a.element;a.blur(),j(b),sc()&&q.hideEncyclopedia()}),b.listen(Yd.events).on("elementClicked",function(a){i(a),-1===g()&&q.play.toggleResetButton(!1)}),b.listen(Yd.events).on("resetButtonClicked",function(){if(-1!==g()){q.play.toggleResetButton(!1);for(var a=-1;-1!==(a=g());)i(a)}}),b.listen(Yd.events).on("submitButtonClicked",function(){function b(){var a=Bc.config.getAsInt("price_attempts",100);cb()>=a?q.showBuyAttempts([Bc.config.getAsInt("artifacts_attempts_amount",100)],a):q.showGotoBank()}if(Bc.artifacts.attempts<=0)return void(Bc.config.getAsBool("attempts_rewarded_ads",!1)?Bc.ads.isAdAvailable(h.REWARDED_AD,function(a){a?Bc.ads.showAd(h.REWARDED_AD,function(){Bc.artifacts.accelerateRecharge(1e3*Bc.config.getAsInt("attempts_ads_acceleration_time",120)),p()}):b()}):b());if(-1===f()){Bc.artifacts.attempts--;var c=a.elements.clone().sort(),d=r.clone().sort(),e=c+""==d+"";e?(q.play.showWinnerAlert(a),a.active=!0):q.play.markAsFailed()}}),b.listen(Qd.events).on("closed",function(){hg.show()}),b.listen(zf.events).on("click",function(){ig.show({backScreen:kg,opts:a})}),b.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:kg,backOpts:a})}),b.listen(Yd.events).on("slotSelected",function(a){sc()&&(r[a]?i(a):(s=a,q.showEncyclopedia()))}),b.listen(Ed.events).on("confirmed",function(){Bc.artifacts.attempts<=0&&(bb(cb()-Bc.config.getAsInt("price_attempts",100)),Bc.artifacts.attempts=Bc.config.getAsInt("artifacts_attempts_amount",100))}),b.listen(Fd.events).on("confirmed",function(){lg.show({backScreen:kg,backOpts:a},{instantSwitch:!0})}),jg.off(),jg.on(Bc,"hintUsed",function(b){switch(b.name){case"artifacts_1":c=0,Object.keys(x).forEach(function(b){x[b].forEach(function(d){a.elements.indexOf(d.id)>=0||c++%2===0&&(x[b].remove(d),0===x[b].length&&(delete x[b],w=w.filter(function(a){return a[0]!=b?!0:!1})))})}),q.encyclopedia.setAlphabet({alphabet:w,elements:x});break;case"artifacts_2":var d=0,e=ra.getChaptersElements(ra.getChaptersByType(na));a.elements.forEach(function(a){q.play.appendElementGroup(e[a].group.id,d++)}),u=!0;break;case"artifacts_3":if(f()>=0){var g=a.elements.slice(0);r.forEach(function(a){if(a){var b=g.indexOf(a);b>=0&&g.splice(b,1)}}),s=-1,j(Bc.elements[g.shift()])}}}),jg.on(Bc,"artifactsAttemptsChanged",m),jg.on(Bc,"artifactsAttemptsFull",function(a){n()}),jg.on(Bc,"artifactsAttemptsEmpty",function(a){o()}),Bc.artifacts.attempts>0?n():o(),m(Bc.artifacts.attempts),p(),eg=setInterval(p,1e3)})},onHide:function(){jg.off(),clearInterval(eg)}});Bc.on("manaChanged",function(a){Zd&&Zd.api.board.updateMana(a)});var lg=new X({name:"bank",onShow:function(a){var b=this,c=function(){Bc.remoteStorage.applyRemote(function(){Zd.api.board.showBaseDialog({name:"bankDownloadSuccess",message:"MESSAGEBOX_CLOUD_REPLACE_SUCCESS"})},function(){Zd.api.board.showConfirmDialog({name:"bankDownloadFail",message:"MESSAGEBOX_CLOUD_DOWNLOAD_ERROR"})})},d=function(){Bc.remoteStorage.cloneLocal(function(){Zd.api.board.showBaseDialog({name:"bankUploadSuccess",message:"MESSAGEBOX_CLOUD_UPLOAD_SUCCESS"})},function(){Zd.api.board.showConfirmDialog({name:"bankUploadFail",message:"MESSAGEBOX_CLOUD_UPLOAD_ERROR"})})},e=Bc.manaShop;e.removeExpiredBonuses(),Zd.show({manaShop:e,mana:cb()},function(){var f;b.listen(ff.events).on("HintButtonClicked",function(){Zd.api.board.show()}),b.listen(uf.events).on("click",function(){Bc.payments.onCloseBankScreen(),a.backScreen.show(Object.merge(a.backOpts,{showHints:!1}),{instantSwitch:!0})}),b.listen(Ef.events).on("click",function(){Wg.show(a)}),b.listen(Zd.events).on("buy",function(a){return Bc.config.getAsBool("account_enabled",!0)&&!Bc.account.isConnected()?void Zd.api.board.showConfirmDialog({name:"bankLogin",message:"BANK_LOGIN_REQUIRED"}):(Bc.stats.send(Bc.stats.events.STAT_INAPP_CLICK,{amount:a.id}),"undefined"!=typeof ga&&a.id&&ga("send","event","sku_"+a.id,"inapp_click"),f=a.id,void Bc.payments.buy(a.sku,function(){Zd.api.board.showSuccessDialog(f),Bc.stats.send(Bc.stats.events.STAT_INAPP_BUY,{amount:a.id}),"undefined"!=typeof ga&&a.id&&ga("send","event","sku_"+a.id,"inapp_buy")}))}).on("ad",function(){Bc.ads.showAd(h.REWARDED_AD,function(){bb(cb()+Bc.config.getAsInt("bank_ads_mana_reward",5))})}),b.listen(Cd.events).on("closed",function(){}),b.listen(Fd.events).on("confirmed",function(){e.purchase(f)}).on("closed",function(){}),b.listen(Od.events).on("bankDownload",function(){c()}).on("bankUpload",function(){d()}),b.listen(Cd.events).on("bankDownloadSuccessClosed",function(){location.reload()}),b.listen(Fd.events).on("bankDownloadFailConfirmed",function(){setTimeout(function(){c()},500)}).on("bankUploadFailConfirmed",function(){setTimeout(function(){d()},500)}).on("bankLoginConfirmed",function(){Bc.account.login()})},!0),Zd&&Zd.onRestoreOffer.call(Zd)}});Bc.on("ready",function(){Bc.on("achievementUnlocked",function(a){ng.showItem(a)}),Bc.on("artifactUnlocked",function(a){ng.showItem(a)}),Bc.conditions.events.on("Action",function(a){mg.executeNow(a)}),Bc.on("manaChanged",function(a){$d.api.board.updateMana(a)}),Bc.on("lightPowerChanged",function(a){ff.api.board.updateLightPower(a),Kd.api.updateLightPower(a)}),Bc.on("lightPowerTypeChanged",function(a){ff.api.board.updateLightPowerType(a),Kd.api.updateLightPowerType(a)}),Bc.on("undoChanged",function(a){Sf.api.revert.setAmount(a)}),Bc.on("chapterChanged",function(){sg=!0}),Bc.on("chapterStop",function(){sg=!0}),Bc.on("lightPowerDepleted",function(){$d.api.board.showLightAlert()})});var mg={opts:null,action:null,onAdvert:function(a){switch(a){case"quest_lost":$d.api.board.showAdvertQuestLost();break;case"quest_2":$d.api.board.showAdvertQuestPrincess();break;case"quest_3":$d.api.board.showAdvertQuestGodEvil()}},onChapterComplete:function(a){if(a instanceof oa)$d.api.board.showPuzzleComplete(a);else{var b=mg.opts;Ng.show({cutscene:"finish_"+a.id,boardOpts:b},{instantSwitch:!0})}},onElementsUnlocked:function(a){var b,c=mg.opts;a.length&&(b=a.map(function(a){return Bc.currentChapter.getElementById(a)})),Kg.show({chapter:Bc.currentChapter,results:b,boardOpts:c,isNew:!0},{instantSwitch:!0})},onItemUnlocked:function(a){var b=null,c=mg.opts;switch(a){case"Map":b="show_map";break;case"Knife":b="show_knife"}null!==b&&Ng.show({cutscene:b,boardOpts:c},{instantSwitch:!0})},onTutorial:function(a){switch(a.action){case"show":$d.api.board.showTutorial(a.name);break;case"hide":$d.api.board.hideTutorial(a.name)}},execute:function(){if(mg.action){var a=mg.action;mg.opts;switch(a.action){case"chapterComplete":return void mg.onChapterComplete(a.chapter);case"elementsUnlocked":return void mg.onElementsUnlocked(a.elements);case"itemUnlocked":return void mg.onItemUnlocked(a.item);case"advert":mg.onAdvert(a.advertType)}}},executeNow:function(a){switch(a.message){case"tutorial":mg.onTutorial(a)}}},ng={pendingRequests:[],itemOnScreen:!1,flush:function(){this.showNextItem()},showItem:function(a){a&&this.pendingRequests.push(a)},showNextItem:function(){if(this.pendingRequests.length>0&&!this.itemOnScreen){var a=this;this.itemOnScreen=!0,$d.api.board.showItem(this.pendingRequests.pop(),function(){a.itemOnScreen=!1,a.showNextItem()})}}},og=5,pg=0,qg=0,rg=null,sg=!0,tg=null,ug=0,vg=0,wg=5e3,xg=15e3,yg=5,zg=null,Ag=3e4,Bg=1e4,Cg=!1,Dg=0,Eg=0,Fg=!1,Gg=function(){for(var a in Bc.hints){var b=Bc.hints[a];b.forRewardedAds&&!b.rechargeNotified&&b.canShowAds&&(b.rechargeNotified=!0,$d.api.board.showTutorial("tutorialHintRecharged"))}ug+=wg,ug>=xg&&(ug=0,$d.api.board.showTutorial("tutorialUseHint"))},Hg=function(){clearInterval(zg),$d.api.board.switchUniverseButton(Cg),Cg=!Cg,zg=setInterval(Hg,Cg?Bg:Ag)},Ig=function(){$d.api.board.hideTutorial("tutorialUseHint"),ug=0},Jg=new X({name:"board",onShow:function(a){var b=this;Bc.currentChapter=a.chapter,a&&null==a.deactivateOnMatch&&(a.deactivateOnMatch=!1);var c=$d.api.board,d=$d.api.group,e=a.chapter.initialized;e||(a.chapter.addStartElements(a.chapter.data.startElements),a.chapter.initialized=!0);var f=a.statusbarView||ff;$d.show({chapter:a.chapter,mana:Yc.get("mana"),lightPower:Wa(),lightPowerType:Ua(),statusbarView:f},function(){function g(b){b.group instanceof La&&(b.group=a.chapter.getGroupById(b.group.id));var d,e;(Bc.currentChapter instanceof na||Bc.currentChapter instanceof pa)&&(d=Bc.hints.no_pairs.remainingTime>0?"hasPair":null,e=Bc.hints.no_reaction.remainingTime>0?"final":null),c.showGroup(b.side,b.group,{showHiddenElements:a.showHiddenElements,hasPairs:d,isFinal:e}),b.group.newElements=0,v["center"==b.side?"left":b.side]=b.group,Bc.trigger("groupOpened",{group:b.group,side:b.side})}function i(b){var c=b.element;if(w.push(c),x[b.side]=c,Bc.trigger("elementSelected",{element:c,side:b.side}),2===w.length){var e=w.map(function(a){return a.id}),f=a.chapter.getReactionByElements(e);f&&f.isAdult&&Yc.get("safeMode")&&(f=null);var g=w.clone();if((Bc.currentChapter instanceof na||Bc.currentChapter instanceof pa)&&f&&Bc.hints.no_repeat.amount>0&&Bc.currentChapter.historyMap.hasOwnProperty(f.id)&&(ff.api.board.flashRepetitions(),f=null),f){if(Za()<=0)return void Bc.trigger("lightPowerDepleted");d.blurSelectedElementsAsSuccess(),Object.clear(v);var h=!1;f.results.clone();h=a.chapter.applyReaction(f),Bc.trigger("matchedReaction",f);var i=f.results.map(function(b){return a.chapter.getElementById(b)});Kg.show({chapter:a.chapter,ingredients:g,results:i,boardOpts:a,isNew:h},{instantSwitch:!0}),vg=0,h&&Bc.config.getAsBool("light_enabled",!1)&&Xa(),h&&(Dg++,Eg++),Eg>=Bc.config.getAsInt("fullscreen_promo_reactions_need",15)&&(Eg=0,Fg=!0),Dg%Bc.config.getAsInt("ads_successful_reactions_need",20)===0&&Bc.trigger("adsSuccessfulReactions")}else d.blurSelectedElementsAsFailed(),Bc.trigger("elementReactionFailed",w),Xc.playSound("wrong_click"),0===og?(Xc.playVoice("miss"),og=Math.floor(10*Math.random())+5):og--,pg++,pg===yg&&(pg=0,$d.api.board.showTutorial("tutorialUseHintTemp")),qg++,qg%Bc.config.getAsInt("ads_failed_reactions_need",20)===0&&Bc.trigger("adsFailedReactions")}}function j(a){w.remove(a.element),Bc.trigger("elementBlured",{element:a.element,side:a.side}),w[a.side]=null}function k(){Bc.trigger("chapterStop",Bc.currentChapter),Bc.currentChapter=null,a.sourceScreen.show(a.sourceScreenOpts)}function l(){if(y=!y){sc()&&(n(),c.hideHint1());var a=[Bc.hints[1],Bc.hints[2],Bc.hints[3]];c.showHints(a)}else c.hideHints()}function m(){y&&(y=!1,c.hideHints())}function n(){for(var a in v)v[a]&&(c.hideGroup(a),Bc.trigger("groupClosed",{group:v[a],side:a}),v[a]=null)}function o(){n(),kh.show({boardOpts:a},{instantSwitch:!0})}function p(){n(),lg.show({backScreen:Jg,backOpts:a},{instantSwitch:!0})}function q(){Fg&&(Fg=!1,$d.api.board.showFullscreenPromo())}switch(rg&&Bc.off("hintUsed",rg),rg=function(a){if(Bc.currentChapter){var b=Bc.currentChapter.getPossibleReactions();if(b.length>0){var c=b[Math.floor(Math.random()*b.length)];switch(a.name){case"1":for(var d=0;Bc.currentChapter.elements[c.results[d]];)d++;sc()&&n(),$d.api.board.showHint1(Bc.currentChapter.getPossibleElementById(c.results[d]));break;case"2":n(),g({side:"left",group:Bc.currentChapter.getPossibleElementById(c.elements[0]).group}),g({side:"right",group:Bc.currentChapter.getPossibleElementById(c.elements[1]).group}),$d.api.board.showHint2();break;case"3":var e=Bc.currentChapter.getPossibleElementById(c.elements[0]),f=Bc.currentChapter.getPossibleElementById(c.elements[1]);n(),g({side:"left",group:e.group}),g({side:"right",group:f.group}),Xc.async.wait(500,function(){i({side:"left",element:e}),i({side:"right",element:f})})}}}},Bc.on("hintUsed",rg),a.statusbarTextType){case"progress":f.api.board.showProgress(a.chapter.progress);break;case"counter":f.api.board.showCounter({elements:{visible:_c.getElementsLength(),length:_c.getPossibleElementsLength()},groups:{visible:_c.getGroupsWithElementsLength(),length:_c.getGroupsLength()}})}if(a.introView&&!e)return a.introView.show(),void b.listen(a.introView.events).on("animationsEnd",function(){var b=a.chapter.data.startResults;b&&b.length?(b=b.map(function(b){return a.chapter.getElementById(b)}),Kg.show({chapter:a.chapter,results:b,boardOpts:a,isNew:!0})):"episode_1"===a.chapter.id?Yg.show({boardOpts:a,showAllElements:!0},{showLoading:Fh}):Jg.show(a)});switch(a.statusbarTextType){case"progress":f.api.board.showProgress(a.chapter.progress);break;case"counter":f.api.board.showCounter({elements:{visible:_c.getElementsLength(),length:_c.getPossibleElementsLength()},groups:{visible:_c.getGroupsWithElementsLength(),length:_c.getGroupsLength()}})}if(b.listen(we.events).on("useButtonClicked",function(b){if(Bc.hints[b].checkAmount()){if(a.chapter instanceof oa&&0===Bc.currentChapter.getPossibleReactions().length)return void c.showPuzzleDeadEnd();Bc.hints[b].use()&&l()}else Bc.hints[b].canShowAd?Bc.ads.showAd(h.REWARDED_AD,function(){Bc.hints[b].accelerateRecharge(1e3*Bc.config.getAsInt("hint_ads_acceleration_time",180)),m(),l()}):o()}).on("buyButtonClicked",function(a){o()}),b.listen(ve.events).on("CloseButtonClicked",function(){c.hideHint1()}),b.listen(f.events).on("HintButtonClicked",o).on("manaButtonClicked",o).on("alphabetButtonClicked",function(){x.left&&($d.api.board.blurElement("left",x.left),x.left=null),x.right&&($d.api.board.blurElement("right",x.right),x.right=null),gg.show({boardOpts:a,selectedLeftGroup:v.left,selectedRightGroup:v.right})}),b.listen(yd.events).on("ShowButtonClicked",function(){_g.show()}),b.listen(yd.events).on("BackButtonClicked",function(){c.hideAdvert()}),b.listen(zd.events).on("ShowButtonClicked",function(){_g.show()}),b.listen(zd.events).on("BackButtonClicked",function(){c.hideAdvert()}),b.listen(xd.events).on("ShowButtonClicked",function(){_g.show()}),b.listen(xd.events).on("BackButtonClicked",function(){c.hideAdvert()}),Bc.trigger("chapterStart",Bc.currentChapter),!a.showHints){var r=Bc.conditions.popAction();if(r&&(mg.opts=a,mg.action=r,Xc.async.wait(1,mg.execute),void 0===r.quit||r.quit===!0))return}Bc.achievements.check(),ng.flush();var s=!1;for(var t in Bc.hints)if(Bc.hints.hasOwnProperty(t)){var u=Bc.hints[t];u.remainingTime>0&&(ff.api.board.activateHint(u),s=!0)}s&&sg&&(sg=!1,(Bc.currentChapter instanceof na||Bc.currentChapter instanceof pa)&&Bc.currentChapter.pairedElements.refresh(Bc.currentChapter.getPossibleReactions()));var v={},w=[],x={left:null,right:null};b.listen(sd.events).on("groupClick",g),b.listen(qd.events).on("groupClick",function(a){c.hideGroup(a.side),Bc.trigger("groupClosed",{group:v[a.side],side:a.side}),v[a.side]=null}),b.listen(Uf.events).on("click",function(){k(),Bc.trigger("stopButtonClicked")}),b.listen(uf.events).on("click",function(){n()});var y=!1;b.listen(Af.events).on("click",l),b.listen(Gf.events).on("click",function(){Bc.currentChapter instanceof na?(Bc.trigger("chapterStop",Bc.currentChapter),Bc.currentChapter=null,Xg.show({showNextEpisode:a.chapter.id})):(Bc.trigger("nextEpisodeButtonClicked"),k())}),a.showHints&&$d.events.once("ready",o);var z=a.helpView||zf;b.listen(z.events).on("click",function(){n(),a.helpScreen.show({boardOpts:a,chapter:a.chapter})}),b.listen(Kd.events).on("ad",function(){Ya(Bc.config.getAsInt("light_for_ad_reward",1))}),b.listen(Kd.events).on("buy",function(){bb(cb()-Bc.config.getAsInt("price_shop_light1",200)),Ya(4)}),b.listen(Kd.events).on("buyFull",function(){Bc.hints.light_3.buy()}),b.listen(Tf.events).on("click",o),b.listen(ff.events).on("bankButtonClicked",p),b.listen(Ed.events).on("confirmed",function(){bb(cb()-Bc.config.getAsInt("shop_undo_price",10)),ob(pb()+Bc.config.getAsInt("initgame_params_undo",10))}),b.listen(Ad.events).on("confirmed",function(){Bc.ads.showAd(h.REWARDED_AD,function(){ob(pb()+Bc.config.getAsInt("initgame_params_undo",10))})}),b.listen(Fd.events).on("confirmed",p),b.listen(Sf.events).on("click",function(){var b=a.chapter.history.last();if(!b)return void $d.api.board.showNothingUndo();var c=pb();if(c>0){ob(--c);var d=a.chapter.getReactionById(b.reaction),e=d.results.map(function(b){return a.chapter.getElementById(b)}),f=d.elements.map(function(b){return a.chapter.getPossibleElementById(b)});a.chapter.revertLastAction(),Kg.show({chapter:a.chapter,ingredients:e,results:f,boardOpts:a,isNew:!1})}else{var g=Bc.config.getAsInt("shop_undo_price",10);cb()>=g?$d.api.board.showBuyUndo([Bc.config.getAsInt("initgame_params_undo",10)],g):Bc.config.getAsBool("undo_rewarded_ads",!1)?Bc.ads.isAdAvailable(h.REWARDED_AD,function(a){a?$d.api.board.showAdUndo([Bc.config.getAsInt("initgame_params_undo",10)]):$d.api.board.showGotoBank()}):$d.api.board.showGotoBank()}}),a.allowReversing&&(c.showRevertToolbarButton(),Sf.api.revert.setAmount(pb()),a.chapter.history.length||Sf.api.revert.deactivate()),c.showHelpToolbarButton(a.helpView,a.chapter instanceof na);var A={left:!1,right:!1};b.listen($d.events).on("alphabetButtonClicked",function(a){A[a]?c.hideAlphabet(a):c.showAlphabet(a),A[a]=!A[a]}),b.listen(nd.events).on("selectedChanged",function(a){a.blur();var b=a.element;x.left&&($d.api.board.blurElement("left",x.left),x.left=null),c.hideAlphabet("left"),A.left=!1,g({side:"left",group:b.group}),$d.api.board.activateElement("left",b)}),b.listen(pd.events).on("selectedChanged",function(a){a.blur();var b=a.element;x.right&&($d.api.board.blurElement("right",x.right),x.right=null),c.hideAlphabet("right"),A.right=!1,g({side:"right",group:b.group}),$d.api.board.activateElement("right",b)}),b.listen(qd.events).on("elementSelect",i).on("elementBlur",j);var B=!1;b.listen(Df.events).on("click",function(){sc()?Vg.show({boardOpts:a,selectedLeftGroup:v.left,selectedRightGroup:v.right}):(B?c.hideLog():c.showLog(),B=!B)}),b.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:Jg,backOpts:a})}),a.showPlanet&&(c.showPlanetToolbarButton(),b.listen(Hf.events).on("click",function(){n(),Yg.show({boardOpts:a},{showLoading:Fh})})),sc()||(c.showFortuneToolbarButton(),b.listen(yf.events).on("click",function(){c.showFortune()})),setTimeout(function(){a.selectElements?a.selectLeftGroup?(g({side:"left",group:a.selectLeftGroup}),g({side:"right",group:a.selectElements[0].group}),$d.api.board.activateElement("right",a.selectElements[0])):(g({side:"left",group:a.selectElements[0].group}),a.selectRightGroup&&g({side:"right",group:a.selectRightGroup}),$d.api.board.activateElement("left",a.selectElements[0])):(a.selectLeftGroup&&g({side:"left",group:a.selectLeftGroup}),a.selectRightGroup&&g({side:"right",group:a.selectRightGroup})),a.selectElements=null,a.selectLeftGroup=null,a.selectRightGroup=null},0),Za()<=0&&Bc.trigger("lightPowerDepleted"),Bc.trigger("boardShown"),xg=Bc.config.getAsInt("no_action_hint_frequency",15e3),yg=Bc.config.getAsInt("failed_reactions_hint_frequency",5),tg=setInterval(Gg,wg),Ag=Bc.config.getAsInt("universe_button_timer_frequency",3e4),Bg=Bc.config.getAsInt("universe_button_show_time",1e4),Bc.promo.hasUniverse()&&(zg=setInterval(Hg,Ag)),$d.events.once("ready",q),th.on("mousedown",Ig)})},onHide:function(){clearInterval(tg),clearInterval(zg),Cg=!1,ug=0,th.off("mousedown",Ig)}}),Kg=new X({name:"board-result",onShow:function(a){function b(){vd.show({chapter:a.chapter,results:a.results,quote:e,showNewElementText:a.isNew},function(){c.listen(uf.events).on("click",function(){if(a.boardOpts.showPlanet&&a.isNew){for(var b=[],c=0,d=a.results.length;d>c;c++)Bc.planet.elements[a.results[c].id]&&b.push(a.results[c].id);if(b.length)return void Yg.show({boardOpts:a.boardOpts,blinkElements:b},{showLoading:Fh})}Bc.trigger("adsAfterResult"),Jg.show(a.boardOpts)})},!0)}var c=this,d=a.results.random().quotes,e=d&&d.random();a.ingredients?_d.show({ingredients:a.ingredients,results:a.results},function(){c.listen(_d.events).on("animationEnd",b)},!0):b()}}),Lg=new X({name:"episodes",onShow:function(a){var b=this,c=a.view;c.show(function(){b.listen(uf.events).on("click",function(){Xg.show()}),b.listen(vf.events).on("click",function(){lg.show({backScreen:Lg,backOpts:{view:a.view}},{instantSwitch:!0})});var d=!1;b.listen(Rf.events).on("click",function(){d?c.api.hideResetButtons():c.api.showResetButtons(),d=!d}),b.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:Lg,backOpts:{view:a.view}})});var e=null;b.listen(dd.events).on("resetButtonClicked",function(a){e=a,c.api.showConfirm(a)}),b.listen(Fd.events).on("confirmed",function(){e.reset(),c.api.updateProgress(e),c.api.hideResetButtons(),d=!d});var f;b.listen(dd.events).on("play",function(b){var d=a.boardOpts;if("function"==typeof d&&(d=d(b)),Yc.get("safeMode")&&b.data.adult)c.api.showAdultAlert();else if(b.isUnlocked())b instanceof oa&&Bc.trigger("startPuzzle"),Jg.show(Object.merge({chapter:b,sourceScreen:Lg,sourceScreenOpts:a},d));else if(f=b,Bc.config.getAsBool("unlock_quest_by_inapp",!1))c.api.showBuyAlert(b);else{var e=b.getUnlockPrice();e>cb()&&Bc.config.getAsBool("chapters_rewarded_ads",!1)?Bc.ads.isAdAvailable(h.REWARDED_AD,function(a){a?c.api.showAdAlert(b):c.api.showLockedAlert(b)}):c.api.showLockedAlert(b)}}).on("moregames",function(){Xc.openLink(Hh)}),b.listen(Ed.events).on("confirmed",function(){f&&Yc.get("mana")>=f.getUnlockPrice()?(bb(Yc.get("mana")-f.getUnlockPrice()),f.unlock(),Lg.show(a)):c.api.showNoManaAlert()}).on("closed",function(){}),b.listen(Ad.events).on("confirmed",function(){Bc.ads.showAd(h.REWARDED_AD,function(){f.unlock(),Lg.show(a)})}),b.listen(Fd.events).on("BuyConfirmed",function(){Bc.stats.send(Bc.stats.events.STAT_INAPP_CLICK,{amount:f.id}),"undefined"!=typeof ga&&f.id&&ga("send","event","sku_"+f.id,"inapp_click"),Bc.payments.buy(f.id,function(){Lg.show(a),Bc.stats.send(Bc.stats.events.STAT_INAPP_BUY,{amount:f.id}),"undefined"!=typeof ga&&f.id&&ga("send","event","sku_"+f.id,"inapp_buy")})})})}}),Mg=new X({name:"credits",$currentTeamView:0,$teamViews:[],$timer:new Jc({type:"vsync",delay:5e3,duration:1/0,$showNextTeamView:function(){var a=Mg.$.teamViews[Mg.$.currentTeamView];de.api.credits.changeTeamView(a),Mg.$.currentTeamView++,Mg.$.currentTeamView%=Mg.$.teamViews.length},on:{play:function(){this.$.showNextTeamView()},step:function(){this.$.showNextTeamView()}}}),onShow:function(){var a=this;de.show(function(){Mg.$.timer.play(),a.listen(uf.events).on("click",function(){Sg.show()})})},onHide:function(){Mg.$.currentTeamView=0,Mg.$.timer.stop(),de.api.hide()}});Bc.on("ready",function(){Mg.$.teamViews.push(he,ge,fe,ee,ie,je,ne,le,me,ke)});var Ng=new X({name:"cutscene",onShow:function(a){var b=null;switch(a.cutscene){case"show_map":b=Xe;break;case"show_knife":b=We;break;case"finish_quest_2":b=Le;break;case"finish_quest_20th":b=Oe;break;case"finish_quest_egypt":b=Te;break;case"finish_quest_qad":b=$e;break;case"finish_quest_1":return void ah.show({boardOpts:a.boardOpts});case"finish_quest_3":return void dh.show({boardOpts:a.boardOpts});case"finish_quest_lost":return void fh.show({boardOpts:a.boardOpts});case"finish_episode_1":case"finish_episode_2":case"finish_episode_3":return void Jg.show(a.boardOpts);case"finish_episode_4":return void Rg.show({boardOpts:a.boardOpts})}b.show({},function(){var c=function(){Jg.show(a.boardOpts),b.events.off("animationsEnd",c)};b.events.on("animationsEnd",c)})}}),Og=new X({name:"encyclopedia",onShow:function(){var a=this,b=ra.getChaptersByType(pa);Object.merge(b,ra.getChaptersByType(oa)),b.episode_1=Bc.chapters.getChapterById("episode_1");for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];!d.initialized&&(d.isUnlocked()||d instanceof na)&&d.addStartElements(d.data.startElements)}oe.show(function(){var b;a.listen(Xf.events).on("click",function(){var a=Bc.promo.getUniverse();lh.show({banners:a,backScreen:Og})}),a.listen(uf.events).on("click",function(){Xg.show()}),a.listen(xf.events).on("click",function(){Mg.show()}),a.listen(nd.events).on("selectedChanged",function(a){var c=a.element;b=c,oe.api.desc.showElement(c)}),a.listen(md.events).on("wikiButtonClicked",function(){var a=Zc.data.links[b.id];Xc.openLink(a)});var c=$c.getChaptersAlphabet(),d=$c.getChaptersElementsByLetters();oe.api.nav.setAlphabet({alphabet:c,elements:d})})}}),Pg=new X({name:"menu",onShow:function(a){function b(d,f){var h=d.data.artifacts.map(function(a){return Bc.artifacts[a]}),i=h.every(function(a){return a.active});c.listen(Bd.events).on("showArtifactsButtonClick",function(){hg.show()}).on("buyButtonClick",function(a){Yc.get("mana")<a?Wg.show():(bb(Yc.get("mana")-a),h.forEach(function(a){a.active=!0}),b(d))});var j;f&&(j={instantSwitch:!0}),i?Jg.show({chapter:d,sourceScreen:Pg,sourceScreenOpt:a,showHiddenElements:!0,helpScreen:Qg,introView:g[d.id],statusbarTextType:"counter",showPlanet:!0},j):e.showArtifactAlert(d)}var c=this,d=!1,e=ae.api,f=Ee.api.episodes,g={episode_1:qe,episode_2:re,episode_3:se,episode_4:te};ae.show(function(){function g(a,c){q=a;var d=j[j.indexOf(a.id)+1],f=a.progress;k[a.id]?k[d]&&f>=1?e.showCompletedEpisodeConfirm():b(a,c):e.showAlert()}var h=!1;c.listen(Rf.events).on("click",function(){h?e.chapters.hideResetButtons():e.chapters.showResetButtons(),h=!h});var i=null;c.listen(dd.events).on("resetButtonClicked",function(a){i=a,e.showResetEpisodeConfirm()}),c.listen(Xf.events).on("click",function(){var a=Bc.promo.getUniverse();lh.show({banners:a,backScreen:Pg})}),c.listen(Ee.events).on("mainGameClick",function(){Pg.show({},{instantSwitch:!0})}).on("questsClick",function(){_g.show({},{instantSwitch:!0})}).on("puzzlesClick",function(){Zg.show({},{instantSwitch:!0})}).on("artifactsClick",function(){hg.show()}).on("encyclopediaClick",function(){Og.show()}),c.listen(uf.events).on("click",function(){Xg.show()}),c.listen(vf.events).on("click",function(){lg.show({backScreen:Pg,backOpts:{}},{instantSwitch:!0})});for(var j=f.EPISODES,k={},l=!1,m=0;m<j.length;m++){var n=Bc.chapters.getChapterById(j[m]),o=0===m?!0:Bc.chapters.getChapterById(j[m]).isUnlocked()||Bc.chapters.getChapterById(j[m-1]).progress>=1;if(!o)break;n.unlock(),f.activateEpisode(n.id),k[n.id]=!0;var p=n.progress;1>p&&(f.setProgress(n.id,p),l||(f.promoteEpisode(n.id),l=!0))}var q=null;if(c.listen(dd.events).on("play",function(a){g(a)}),c.listen(Fd.events).on("completedEpisodeConfirmed",function(){b(q)}),c.listen(Fd.events).on("resetEpisodeConfirmed",function(){i.reset(),e.chapters.updateProgress(i)}),c.listen(fd.events).on("resetButtonClicked",function(a){q=a=Bc.chapters.getChapterById(a),e.showResetEpisodeConfirm(),Ee.api.episodes.hideResetButtons(),d=!d}),a&&a.showNextEpisode){var r=j[j.indexOf(a.showNextEpisode)+1];r&&g(r,!0)}})}}),Qg=new X({name:"episodes-help",onShow:function(a){function b(){c.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:Qg,backOpts:a})}),c.listen(uf.events).on("click",function(){switch(d){case 0:d=0,Jg.show(a.boardOpts);break;case 1:d=0,pe.show({page:0},b)}}),Ff&&c.listen(Ff.events).on("click",function(){d=1,pe.show({page:1},b)}),Tf&&c.listen(Tf.events).on("click",function(){kh.show(a)})}var c=this,d=0;pe.show({page:0},b,!0)}}),Rg=new X({name:"gameover",onShow:function(a){var b=this;ue.show({},function(){b.listen(ue.events).on("ArtifactsButtonClicked",function(){hg.show()}),b.listen(ue.events).on("PuzzlesButtonClicked",function(){Zg.show()}),b.listen(ue.events).on("QuestsButtonClicked",function(){_g.show()}),b.listen(ue.events).on("BackButtonClicked",function(){Jg.show(a.boardOpts)})})}}),Sg=(new X({name:"hints",onShow:function(){var a=this;we.show(function(){a.listen(uf.events).on("click",function(){Sg.show()})})}}),new X({name:"home",onShow:function(){var a=this,b=function(){Bc.remoteStorage.applyRemote(function(){xe.api.showBaseDialog({name:"homeDownloadSuccess",message:"MESSAGEBOX_CLOUD_REPLACE_SUCCESS"})},function(){xe.api.showConfirmDialog({name:"homeDownloadFail",message:"MESSAGEBOX_CLOUD_DOWNLOAD_ERROR"})})},c=function(){Bc.remoteStorage.cloneLocal(function(){xe.api.showBaseDialog({name:"homeUploadSuccess",message:"MESSAGEBOX_CLOUD_UPLOAD_SUCCESS"})},function(){xe.api.showConfirmDialog({name:"homeUploadFail",message:"MESSAGEBOX_CLOUD_UPLOAD_ERROR"})})};xe.show(null,function(){a.listen(xe.events).on("settingsClick",function(){Xc.setNodeStateRecursive(xe.node,"hidden"),hh.show()}).on("playClick",function(){var a=document.getElementById("silenceMusic");a&&a.paused&&a.play(),Xc.setNodeStateRecursive(xe.node,"hidden"),Xg.show(),Bc.trigger("playButtonClicked")}).on("creditsClick",function(){Xc.setNodeStateRecursive(xe.node,"hidden"),Mg.show()}).on("achievementsClick",function(){Xc.setNodeStateRecursive(xe.node,"hidden"),fg.show({backScreen:Sg})}).on("facebookClick",function(){Bc.account.login(function(a){xe.api.updateFacebookButton(a)})}).on("fullscreenEnableClick",function(){screenfull.enabled&&screenfull.request(rh.div)}).on("fullscreenDisableClick",function(){screenfull.enabled&&screenfull.exit()}).on("soundDisableClick",function(){xe.api.setMute(!0),Bc.trigger("muteOn")}).on("soundEnableClick",function(){xe.api.setMute(!1),Bc.trigger("muteOff")}),a.listen(Od.events).on("homeDownload",function(){b()}).on("homeUpload",function(){c()}),a.listen(Cd.events).on("homeDownloadSuccessClosed",function(){location.reload()}),a.listen(Fd.events).on("homeDownloadFailConfirmed",function(){setTimeout(function(){b()},500)}).on("homeUploadFailConfirmed",function(){setTimeout(function(){c()},500)});var d=Bc.conditions.getConditionByChapterId(Xh);d.isTutorialCompleted()&&xe.api.showFreshNews()}),Bc.payments.check(function(a){a.forEach(function(a){-1==a.indexOf("quest")&&xe.api.showInappDialog(a),Bc.stats.send(Bc.stats.events.STAT_INAPP_BUY,{amount:a}),"undefined"!=typeof ga&&a&&ga("send","event","sku_"+a,"inapp_buy")})}),xe&&xe.onRestoreOffer.call(xe)}})),Tg=new X({name:"leaderboards",onShow:function(a){var b=this;Bc.leaderboards.getEntries(function(c){Bc.leaderboards.getPlayerEntry(function(d){ye.show({player:d,entries:c},function(){b.listen(uf.events).on("click",function(){a.backScreen.show(a.backOpts,{instantSwitch:!0})}),b.listen(Jf.events).on("click",function(){Ug.show()})})})})}}),Ug=new X({name:"leaderboards-profile",onShow:function(a){var b=this,c=Bc.leaderboards.getScoreData(),d=Bc.leaderboards.calculateScore(),e=Bc.account.name,f=Bc.account.photo;ze.show({name:e,photo:f,scoreData:c,totalScore:d},function(){b.listen(uf.events).on("click",function(){Tg.show({backScreen:Xg})})})}}),Vg=new X({name:"log",onShow:function(a){var b=this;Ce.show(a.boardOpts.chapter,function(){b.listen(uf.events).on("click",function(){Jg.show(Object.merge(a.boardOpts,{selectLeftGroup:a.selectedLeftGroup,selectRightGroup:a.selectedRightGroup}),{})}),b.listen(tf.events).on("click",function(){gg.show(a,{})})})}}),Wg=new X({name:"mana",onShow:function(a){var b=this;De.show({showStatusbar:!!a},function(){b.listen(ff.events).on("HintButtonClicked",function(){Jg.show(Object.merge(a.boardOpts,{showHints:!0}))}),b.listen(uf.events).on("click",function(){a&&a.boardOpts?kh.show(a):Xg.show()})})}});Bc.on("ready",function(){Bc.on("manaChanged",function(a){Ee.api.updateMana(a)})});var Xg=new X({name:"menu",onShow:function(a){function b(a,d){var f=a.data.artifacts.map(function(a){return Bc.artifacts[a]}),h=f.every(function(a){return a.active});c.listen(Bd.events).on("showArtifactsButtonClick",function(){hg.show()}).on("buyButtonClick",function(c){Yc.get("mana")<c?Wg.show():(bb(Yc.get("mana")-c),f.forEach(function(a){a.active=!0}),b(a))});var i;d&&(i={instantSwitch:!0}),h?Jg.show({chapter:a,sourceScreen:Xg,showHiddenElements:!0,helpScreen:Qg,introView:g[a.id],statusbarTextType:"counter",showPlanet:!0},i):e.showArtifactAlert(a)}var c=this,d=!1,e=Ee.api,f=e.episodes,g={episode_1:qe,episode_2:re,episode_3:se,episode_4:te};Bc.config.getAsBool("leaderboard_enabled",!1)&&Bc.leaderboards.updateScore(),Ee.show({mana:cb()},function(){function g(a,c){o=a=Bc.chapters.getChapterById(a);var d=h[h.indexOf(a.id)+1],f=a.progress;i[a.id]?i[d]&&f>=1?e.showCompletedEpisodeConfirm():b(a,c):e.showAlert()}sc()&&e.nav.select("mainGame"),c.listen(Ee.events).on("mainGameClick",function(){Pg.show({},{instantSwitch:!0})}).on("questsClick",function(){_g.show({},{instantSwitch:!0})}).on("puzzlesClick",function(){Zg.show({},{instantSwitch:!0})}).on("artifactsClick",function(){hg.show()}).on("encyclopediaClick",function(){Og.show()}),c.listen(uf.events).on("click",function(){Sg.show()}),c.listen(kf.events).on("bankButtonClicked",function(){lg.show({backScreen:Xg,backOpts:{}},{instantSwitch:!0})}),c.listen(rf.events).on("click",function(){fg.show({backScreen:Xg})}),c.listen(Cf.events).on("click",function(){Tg.show({backScreen:Xg})}),c.listen(Rf.events).on("click",function(){d?Ee.api.episodes.hideResetButtons():Ee.api.episodes.showResetButtons(),d=!d}),c.listen(Xf.events).on("click",function(){var a=Bc.promo.getUniverse();lh.show({banners:a,backScreen:Xg})});for(var h=f.EPISODES,i={},j=!1,k=0;k<h.length;k++){var l=Bc.chapters.getChapterById(h[k]),m=0===k?!0:Bc.chapters.getChapterById(h[k]).isUnlocked()||Bc.chapters.getChapterById(h[k-1]).progress>=1;if(!m)break;l.unlock(),f.activateEpisode(l.id),i[l.id]=!0;var n=l.progress;1>n&&(f.setProgress(l.id,n),j||(f.promoteEpisode(l.id),j=!0))}var o=null;if(c.listen(fd.events).on("click",function(a){g(a)}),c.listen(Fd.events).on("completedEpisodeConfirmed",function(){b(o)}),c.listen(Fd.events).on("resetEpisodeConfirmed",function(){o.reset(),f.setProgress(o.id,0)}),c.listen(fd.events).on("resetButtonClicked",function(a){o=a=Bc.chapters.getChapterById(a),e.showResetEpisodeConfirm(),Ee.api.episodes.hideResetButtons(),d=!d}),a&&a.showNextEpisode){var p=h[h.indexOf(a.showNextEpisode)+1];p&&g(p,!0)}})}});Bc.on("missionCompleted",function(a){Yg.$.completedMissions.push(a)});var Yg=new X({name:"planet",$completedMissions:[],onShow:function(a){function b(){Xc.setNodeStateRecursive(Fe.node,"hidden"),Jg.show(a.boardOpts,{fadeDelay:300})}var c=this,d=Fe.api.planet;Fe.show({missions:Bc.missions.visible,showAllElements:a.showAllElements},function(){c.listen(ff.events).on("HintButtonClicked",function(){Xc.setNodeStateRecursive(Fe.node,"hidden"),Jg.show(Object.merge(a.boardOpts,{showHints:!0}),{fadeDelay:300})}),c.listen(ff.events).on("manaButtonClicked",function(){Xc.setNodeStateRecursive(Fe.node,"hidden"),Jg.show(Object.merge(a.boardOpts,{showHints:!0}),{fadeDelay:300})}),c.listen(If.events).on("click",function(){b()}),c.listen(yf.events).on("click",function(){d.showFortune()}),c.listen(Fe.events).on("missionClicked",function(a){d.showMissionAlert(a)}).on("skipIntro",function(){b()}),c.listen(ff.events).on("bankButtonClicked",function(){lg.show({backScreen:Yg,backOpts:{boardOpts:a.boardOpts}},{instantSwitch:!0})}),c.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:Yg,backOpts:{boardOpts:a.boardOpts}})}),a.showAllElements?Fe.api.planet.showAllElements():Fe.api.planet.showPlanet(),Fe.api.planet.blinkElements(a.blinkElements),Yg.$.completedMissions.forEach(function(a){Fe.api.planet.showWinnerAlert(a)}),Yg.$.completedMissions.clear(),Bc.planet.firstTime=!1})}}),Zg=new X({name:"puzzles",onShow:function(){Lg.show({view:be,boardOpts:{deactivateOnMatch:!0,allowReversing:!0,helpScreen:$g,statusbarView:mf}})}}),$g=new X({name:"puzzles-help",onShow:function(a){function b(){c.listen(uf.events).on("click",function(){switch(d){case 0:d=0,Jg.show(a.boardOpts);break;case 1:d=0,Ge.show({page:0,finalElement:a.chapter.getPossibleElementById(a.chapter.data.finalElement)},b)}}),Ff&&c.listen(Ff.events).on("click",function(){d=1,Ge.show({page:1,finalElement:a.chapter.getPossibleElementById(a.chapter.data.finalElement)},b)})}var c=this,d=0;Ge.show({page:0,finalElement:a.chapter.getPossibleElementById(a.chapter.data.finalElement)},b,!0)}}),_g=new X({name:"quests",onShow:function(){Lg.show({view:ce,boardOpts:function(a){var b;switch(a.id){case"quest_1":b={helpScreen:ah,helpView:Kf,introView:Ie};break;case"quest_2":b={helpScreen:bh,helpView:Lf,introView:Ke};break;case"quest_3":b={helpScreen:dh,helpView:Nf,introView:Qe};break;case"quest_20th":b={helpScreen:ch,helpView:Mf,introView:Ne};break;case"quest_egypt":b={helpScreen:eh,helpView:Of,introView:Se};break;case"quest_lost":b={helpScreen:fh,helpView:Pf,introView:Ve};break;case"quest_qad":b={helpScreen:gh,helpView:Qf,introView:Ze}}return Object.merge(b,{statusbarTextType:"progress",showHiddenElements:!0}),b}})}}),ah=new X({name:"quests-quest_1-help",onShow:function(a){var b=this;He.show({elements:Bc.chapters.getChapterById("quest_1").elements,progress:Bc.chapters.getChapterById("quest_1").progress,toUnlock:["Sacrifice present","Gold present","Sunglasses present","Guitar present","Death star present","Joker present","Philosophers stone present","Crystall ball present",["Rum present","Absinthe present","Beer present","Tequila present","Vodka present"],"Brains present"]},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),bh=new X({name:"quests-quest_2-help",onShow:function(a){var b=this;Je.show({progress:Bc.chapters.getChapterById("quest_2").progress},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),ch=new X({name:"quests-quest_20th-help",onShow:function(a){var b=this;Me.show({progress:Bc.chapters.getChapterById("quest_20th").progress,groups:Bc.chapters.getChapterById("quest_20th").groups,decades:["1900s","1910s","1920s","1930s","1940s","1950s","1960s","1970s","1980s","1990s"]},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),dh=new X({name:"quests-quest_3-help",onShow:function(a){var b=this;Pe.show({progress:Bc.chapters.getChapterById("quest_3").progress},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),eh=new X({name:"quests-quest_egypt-help",onShow:function(a){var b=this;Re.show({progress:Bc.chapters.getChapterById("quest_egypt").progress},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),fh=new X({name:"quests-quest_lost-help",onShow:function(a){var b=this;Ue.show({progress:Bc.chapters.getChapterById("quest_lost").progress,lastRemeberedElementName:Bc.chapters.getChapterById("quest_lost").lastRemeberedElementName,progressLabel:Bc.chapters.getChapterById("quest_lost").progressLabel},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}}),gh=new X({name:"quests-quest_qad-help",onShow:function(a){var b=this;Ye.show({progress:Bc.chapters.getChapterById("quest_qad").progress,angel:Bc.chapters.getChapterById("quest_qad").countElements(["Animal","Beach","Bird","Beetle","Clay","Clothing","Dinosaur","Egg","Electricity","Energy","Flower","Forest","Grass","Heavens","Human","Light","Livestock","Milk","Sand","Sea","Stone","Sun","Tools","Tree","Wool"]),angelMax:25,devil:Bc.chapters.getChapterById("quest_qad").countElements(["Blood","Corpse","Warrior","Darkness","Demon","Dragon","Gold","Golem","Gunpowder","Inferno","Lava","Metal","Nuclear bomb","Phoenix","Poison","Radiation","Scorpion","Spirit","Sulfur","Storm","Treant","Vampire","Virus","Weapon","Werewolf"]),devilMax:25},function(){b.listen(uf.events).on("click",function(){Jg.show(a.boardOpts)})})}});Yc.register("safeMode",null),Yc.register("sound",!0),Yc.register("voice",!0),Yc.register("music",!0);var hh=new X({name:"settings",onShow:function(){function a(){var a=af.api,b=a.nav,e=Qc.getDefaultTranslator();e&&af.api.languages.enableLanguage(e.code),Oc.get(Zc.STORAGE_KEY,null,function(){af.api.languages.enableLanguage("auto")}),d.listen(xf.events).on("click",function(){Mg.show()}),d.listen(jd.events).on("enableSound",function(){Yc.set("sound",!0),b.enableSound()}).on("disableSound",function(){Yc.set("sound",!1),b.disableSound()}).on("enableVoice",function(){Yc.set("voice",!0),b.enableVoice()}).on("disableVoice",function(){Yc.set("voice",!1),b.disableVoice()}).on("enableMusic",function(){Yc.set("music",!0),b.enableMusic(),Bc.trigger("enableMusic")}).on("disableMusic",function(){Yc.set("music",!1),b.disableMusic(),Bc.trigger("disableMusic")}),d.listen(id.events).on("changeLanguage",function(a){function b(){af.api.languages.enableLanguage(a)}"auto"===a?Zc.useDefaultLanguage(b):Zc.changeLanguage(a,b)}),Yc.get("safeMode")&&af.api.nav.enableSafeMode(),d.listen(jd.events).on("enableSafeMode",function(){jh.show()}).on("disableSafeMode",function(){ih.show()}),Yc.get("music")?b.enableMusic():b.disableMusic(),Yc.get("voice")?b.enableVoice():b.disableVoice(),Yc.get("sound")?b.enableSound():b.disableSound(),d.listen(Bf.events).on("click",function(){c()}),sc()||d.listen(uf.events).on("click",function(){Sg.show()})}function b(){jd.show(null,function(){a(),d.listen(uf.events).on("click",function(){Sg.show()})})}function c(){id.show(null,function(){a(),d.listen(uf.events).on("click",function(){b()})})}var d=this;sc()?b():af.show(null,function(){a()})}}),ih=new X({name:"settings-safeMode-disable",onShow:function(){var a=this,b=[];kd.show(function(){var c=kd.api.safeMode;a.listen(uf.events).on("click",function(){hh.show()}),a.listen(kd.events).on("elementClick",function(a){b.length<c.ELEMENTS_LENGTH&&(c.putElementInPlace(a,b.length),b.push(a),b.length===c.ELEMENTS_LENGTH&&(b+""==Yc.get("safeMode")+""?(Yc.set("safeMode",null),Bc.trigger("safeModeChanged"),hh.show()):(b.clear(),c.clearElements(),c.showAlert())))}),c.showToEnter()})}}),jh=new X({name:"settings-safeMode-enable",onShow:function(){var a=this,b=[],c=null,d=!1;kd.show(function(){var e=kd.api.safeMode;a.listen(uf.events).on("click",function(){hh.show()}),a.listen(kd.events).on("elementClick",function(a){b.length<e.ELEMENTS_LENGTH&&(e.putElementInPlace(a,b.length),b.push(a),b.length===e.ELEMENTS_LENGTH&&(d?b+""!=c+""?(d=!1,c=null,b.clear(),e.clearElements(),e.showToCreate()):(Yc.set("safeMode",b),Bc.trigger("safeModeChanged"),hh.show()):(e.clearElements(),e.showToConfirm(),d=!0,c=b.clone(),b.clear())))}),e.showToCreate()})}});Bc.on("ready",function(){Bc.on("manaChanged",function(a){of.api.updateMana(a)}),Bc.on("hintCompleted",function(){bf.api.board.refresh()})});var kh=new X({name:"shop",onShow:function(a){var b=this;bf.show({mana:Yc.get("mana")},function(){b.listen(Xf.events).on("click",function(){var b=Bc.promo.getUniverse();lh.show({banners:b,backScreen:kh,backOpts:{boardOpts:a.boardOpts}})}),b.listen(ff.events).on("HintButtonClicked",function(){bf.api.board.show()}),b.listen(uf.events).on("click",function(){Jg.show(Object.merge(a.boardOpts,{showHints:!1}),{instantSwitch:!0})}),b.listen(Ef.events).on("click",function(){Wg.show(a)}),b.listen(ff.events).on("bankButtonClicked",function(){lg.show({backScreen:kh,backOpts:{boardOpts:a.boardOpts}},{instantSwitch:!0})}),b.listen(of.events).on("bankButtonClicked",function(){lg.show({backScreen:kh,backOpts:{boardOpts:a.boardOpts}},{instantSwitch:!0})});var c=null,d=!1;b.listen(bf.events).on("buy",function(a){null===c&&(c=a.hint,Bc.stats.send(Bc.stats.events.STAT_SHOP_ITEM_CLICK,{amount:c.name}),d=!0,c.isAffordable()?bf.api.board.showBuyDialog(a.hint,a.message):c.duration>0&&c.rewardedAds?Bc.ads.showAd(h.REWARDED_AD,function(){c.chargeHint(1e3*Bc.config.getAsInt("hint_ads_border_time",300)),ff.api.board.activateHint(c),bf.api.board.highlight(c),bf.api.board.refresh(),c=null}):bf.api.board.showNoManaAlert())}).on("sell",function(a){null===c&&(c=a.hint,Bc.stats.send(Bc.stats.events.STAT_SHOP_ITEM_CLICK,{amount:c.name}),d=!1,bf.api.board.showSellDialog(a.hint,a.message))}),b.listen(Cd.events).on("closed",function(){c=null}),b.listen(Ed.events).on("confirmed",function(){d?c.buy()&&(Bc.stats.send(Bc.stats.events.STAT_SHOP_ITEM_BUY,{amount:c.name}),ff.api.board.activateHint(c),bf.api.board.highlight(c),bf.api.board.refresh()):c.sell()&&(Bc.stats.send(Bc.stats.events.STAT_SHOP_ITEM_SOLD,{amount:c.name}),ff.api.board.deactivateHint(c),bf.api.board.refresh()),c=null}).on("closed",function(){c=null})},!0)}}),lh=new X({name:"universe",onShow:function(a){var b=this;dg.show({banners:a.banners},function(){b.listen(uf.events).on("click",function(){a.backScreen.show(a.backOpts)})})}}),mh=1024,nh=768,oh=1024,ph=768,qh={};Object.addProperty(qh,"width",function(){return yh=window.innerWidth<window.innerHeight?"portrait":"landscape","landscape"===yh?1024:640},null),Object.addProperty(qh,"height",function(){return yh=window.innerWidth<window.innerHeight?"portrait":"landscape","landscape"===yh?768:960},null),function(){var a=document.getElementsByName("viewport")[0],b="width={width}, minimum-scale={scale}, maximum-scale={scale}, user-scalable=no";a.content=b.replace("{width}","device-width").replace("{scale}","1").replace("{scale}","1")}();var rh,sh,th,uh,vh,wh,xh,yh="landscape",zh=0;Engine.on(Engine.BOOTSTRAP,function(){function a(){if(yh=window.innerWidth<window.innerHeight?"portrait":"landscape",mh=qh.width,nh=qh.height,uc(),sh.zoom=Math.min(window.innerWidth*window.devicePixelRatio/mh,window.innerHeight*window.devicePixelRatio/nh),rh.fill=!1,rh.width=oh*sh.zoom,rh.height=window.innerHeight*window.devicePixelRatio,zh=rh.height-nh*sh.zoom,null!=window.LOCKED_ORIENTATION)if(yh!==window.LOCKED_ORIENTATION){uh.opacity=0,wh.opacity=1,rh.width=innerWidth,rh.height=innerHeight,wh.scale=1/window.devicePixelRatio;var a=document.getElementById("engine");a.style.width="",null!=_e?_e.show():Bc.once("boot",function(){yh!==window.LOCKED_ORIENTATION&&_e.show()})}else{_e&&_e.hide(),wh.opacity=0,uh.opacity=1,wh.scale=1;var a=document.getElementById("engine");a.style.width=sc()?window.innerWidth+"px":Math.round(rh.width/window.devicePixelRatio)+"px"}Bc.trigger("orientationChanged",yh)}function b(){(d!=innerWidth||e!=innerHeight)&&(d=innerWidth,e=innerHeight,a(),sc()&&Bc.trigger("resize"))}function c(a){if(xh.opacity=a,f)for(var b=0;b<f.length;++b)f[b].style.opacity=a}rh=new Engine.Viewport({id:"engine"}),rh.div=document.getElementsByTagName("body")[0],th=new Engine.Scene({color:"black"}),wh=new Engine.Rectangle({opacity:0,width:1e4,height:1e4}),oh=qh.width,ph=qh.height,uh=new Engine.Node({x:0,y:0}),xh=new Engine.Node({}),vh=new Engine.Rectangle({opacity:0,width:mh,height:nh}),th.appendChild(uh),th.appendChild(vh),th.appendChild(xh),th.appendChild(wh),sh=new Engine.Camera({lookAt:th}),sh.toSceneX=function(a){return a*=window.devicePixelRatio,a-=this.width/2,a/this.zoom+this.x}.bind(sh),sh.toSceneY=function(a){return a*=window.devicePixelRatio,a-=this.height/2,a/this.zoom+this.y}.bind(sh),window.hostTempLabel?md5(document.location.host)===window.hostTempLabel&&rh.addCamera(sh):rh.addCamera(sh);var d=-1,e=-1;window.addEventListener("resize",b),Engine.Device.on(Engine.Device.SCREEN_ORIENTATION_CHANGE,b);var f=document.getElementsByClassName("background");c(0),b(),setInterval(b,1e3),Bc.on("loadingComplete",function(){setTimeout(function(){Engine.Loop.once("reflow",function(){var a=new Jc({duration:1e3,on:{play:function(){c(0)},step:function(){c(a.progress/a.duration)},stop:function(){c(1),Bc.trigger("loadGame")}}});a.play()})},1e3)})}),Bc.on("ready",function(){vh.width=mh,vh.height=nh,vh.image="landscape"===window.LOCKED_ORIENTATION?"splash/bkg_splash":"splash/bkg_splash_portrait",screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){xe&&xe.api.setFullscreen(screenfull.isFullscreen)})}),Engine.on(Engine.BOOTSTRAP,function(){function a(a){for(;a;){if(!a.opacity)return!1;a=a.parent}return!0}function b(){for(var a=[],b=Engine.Box(h.x,h.y,1,1),c=0;c<j.length;c++){var d=j[c],e=d.getGlobalBoundingBox();e.overlap(b)&&a.push(d),e.destroy()}a.forEach(function(a){g.indexOf(a)<0&&a.trigger("mouseover")}),g=a,b.destroy(),i=!1}function c(){for(q=Engine.now();l.length;){var b=l.shift(),c=b.e;switch(b.type){case"mousedown":d=c,Bc.mouse.ignoreNextMouseUp=!1;var g=Engine.Box(c.x,c.y,1,1),h={propagate:!0};th.captureByBoundingBox(c.x,c.y,function(b){if(a(b)){var c=b.getGlobalBoundingBox();c.overlap(g)&&(b.trigger("mousedown"),e.add(b),h.propagate&&(b.trigger("mousefocus",h),f.add(b))),Engine.Box.free(c)}}),Engine.Box.free(g);break;case"mouseup":if(d=c,!Bc.mouse.ignoreNextMouseUp){var g=Engine.Box(c.x,c.y,1,1),i=[];th.captureByBoundingBox(c.x,c.y,function(b){if(a(b)){var c=b.getGlobalBoundingBox();c.overlap(g)&&i.push(b),Engine.Box.free(c)}}),i.forEach(function(a){a.trigger("mouseup"),e.has(a)&&(a.trigger("mouseclick"),e.remove(a))}),f.filter(function(a,b,c){return c.indexOf(a)===b}),i.forEach(function(a){f.has(a)&&(a.trigger("mousefocusclick"),a.trigger("mouseblur"),f.remove(a))}),Engine.Box.free(g)}f.forEach(function(a){a.trigger("mouseblur")}),e.clear(),f.clear()}}}var d=null,e=[],f=[],g=[],h=null,i=!1,j=[],k=!1,l=[];Bc.mouse={stealEvents:function(){f.forEach(function(a){a.trigger("mouseblur")}),f.clear()},disabled:!1,registerMouseOver:function(a){if(k)for(k=!1;j.length>0;)j.pop();j.push(a)},unregisterMouseOver:function(a){j.remove(a),k=!0},ignoreNextMouseUp:!1,events:new Ic};var m=new Hammer(document.getElementById("engine")),n=new Hammer.Pinch,o=new Hammer.Rotate;n.recognizeWith(o),m.add([n,o]),m.on("rotatemove rotatestart rotateend pinchstart pinchmove pinchend",function(a){Bc.mouse.events.trigger(a.type,a)}),setInterval(c,50);var p=Engine.now(),q=0;th.on("mousedown",function(a){Bc.mouse.enabled&&l.push({type:"mousedown",e:Object.clone(a)})}).on("mouseup",function(a){if(Bc.mouse.enabled){l.push({type:"mouseup",e:Object.clone(a)});var b=Engine.now();b-p>200&&c(),p=b}}).on("mousemove",function(a){if(Bc.mouse.enabled){Engine.now()-q>200&&c(),d=h=a;for(var e=Engine.Box(a.x,a.y,1,1),g=0;g<f.length;g++){var j=f[g],k=j.getGlobalBoundingBox();k.overlap(e)||(j.trigger("mouseblur"),f.splice(g,1),g--),k.destroy()}i||setTimeout(b,300),e.destroy()}}),Engine.Input.on("wheel",function(b){if(Bc.mouse.enabled&&d){var c=Engine.Box(d.x,d.y,1,1);th.captureByBoundingBox(d.x,d.y,function(d){if(a(d)){var e=d.getGlobalBoundingBox();e.overlap(c)&&d.trigger("wheel",b),Engine.Box.free(e)}}),Engine.Box.free(c)}})});var Ah=window.RESOURSE_HOST+"fonts/{}",Bh=!1,Ch=!0,Dh=!1,Eh="undefined"!=typeof window.PRELOAD_ALL?window.PRELOAD_ALL:!1,Fh=!1,Gh=!window.USE_MOBILE_IMAGES,Hh="http://joybits.org/games",Ih="undefined"!=typeof window.XSOLLA_ID?window.XSOLLA_ID:14159,Jh="yahoo-ddgod",Kh=710,Lh=215,Mh="HTML5",Nh="undefined"!=typeof window.STORE?window.STORE:"HTML5",Oh="FREE",Ph="DoodleGod",Qh="1.1.2",Rh="104746566241877",Sh=new b,Th=10,Uh=3,Vh=["homeView","game","interface","cache","sounds","atlas","planet.json"],Wh=0,Xh="episode_1";if(function(){var a=(Engine.Device.platform.type,Engine.Device.platform.name,navigator.userAgent,Engine.Device.screen),b=Engine.Device.platform,c=0;"#mobile"===location.hash&&(window.USE_MOBILE_IMAGES=!0),"desktop"===b.type&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0||navigator.appVersion.indexOf("Edge/")>0)&&(Dh=!0,c=50),window.USE_MOBILE_IMAGES&&(Ch=!1,xc.degradateAll()),Math.max(a.width,a.height)*(a.pixelRatio?a.pixelRatio:1)<900&&(Bh=!0),"iOS"===Pc.platform.name&&(c=10),Engine.Renderer.Image.filesInBatch=c}(),window.USE_MOBILE_IMAGES)var Yh=1,Zh=sc()?window.RESOURSE_HOST+"static/images/640x960/{}":window.RESOURSE_HOST+"static/images/512x384/{}";else var Yh=1,Zh=sc()?window.RESOURSE_HOST+"static/images/640x960/{}":window.RESOURSE_HOST+"static/images/1024x768/{}";var $h=window.RESOURSE_HOST+"static/data/{}",_h=window.RESOURSE_HOST+"static/sounds/{}",ai=0,bi=0,ci=!1,di={},ei={};Engine.on(Engine.PRELOAD,function(){function a(){for(var a=["boot","atlas","runtimeAssets","loading","interface","game","sounds","homeView"];a.length;)Fc.unload(a.pop());Xc.stopMusic(),th.destroy(),Bc=window.Game=null}function b(a,b){Sh.load($h.format(a),Nc.JSON,b)}function n(a,b,c,d,e,f){var g=0,h=Object.keys(a).length;Object.keys(a).forEach(function(i){var j=a[i],k=b.format(j.image.texture),l=d*j.image.x,m=e*j.image.y;Fc.getById(k).once(Ec.READY,function(){Xc.getImageFromSprites(k,l,m,d,e,function(a){try{Fc.register(c.format(j),a,"runtimeAssets")}catch(d){console.log(c.format(j))}h===++g&&(wc(b),f&&f())})})})}function o(a){n(Bc.elements,Nb.IMAGE_SRC,Nb.ASSET_ID,60,45,a),Engine.rendererType!==Engine.WEBGL_RENDERER&&Bc.on("ready",function(){Fc.getById("elements/elements_texture_01").unload(),Fc.getById("elements/elements_texture_02").unload(),Fc.getById("elements/elements_texture_03").unload(),Fc.getById("elements/elements_texture_04").unload()})}function q(a){n(Bc.groups,$b.IMAGE_SRC,$b.ASSET_ID,192,192,a),Engine.rendererType!==Engine.WEBGL_RENDERER&&Bc.on("ready",function(){Fc.getById("groups/groups_texture_01").unload(),Fc.getById("groups/groups_texture_02").unload(),Fc.getById("groups/groups_texture_03").unload(),Fc.getById("groups/groups_texture_20th").unload()})}function y(a){for(var b in a)a[b].id=b,a[b]=new Ca(a[b]);return a}function Q(a){for(var b in a)a[b].id=b,a[b]=new La(a[b]);return a}function U(a){function b(a,b){var c=a.groups,d={all:{},kids:{}};for(var e in c)for(var f=c[e],g=0,h=f.length;h>g;g++){var i=f[g],j=new Ca({parent:Bc.elements[i],group:Bc.groups[e]});d.all[i]=j,j.isAdult||(d.kids[i]=j)}return d}function c(a,b){for(var c=a.reactions,d=0,e=c.length;e>d;d++){var f=new lb(c[d]);b.addReaction(f)}}function d(a,b){if(void 0!==a.filteredReactions)for(var c=a.filteredReactions,d=0,e=c.length;e>d;d++){var f=new lb(c[d]);b.addFilteredReaction(f)}}function e(a,b){var c=a.groups;for(var d in c){var e=new Ka({chapter:b,data:Bc.groups[d]});b.addGroup(e)}}function f(a,b){return a=Object.clone(a),delete a.reactions,delete a.groups,delete a.filteredReactions,a}function g(a){var b,c,d=!1;switch(!0){case/^episode_/.test(a):return null;case/^quest_/.test(a):b=["quest_1","quest_2","quest_3","quest_lost","quest_20th","quest_egypt","quest_qad"],c=Bc.config.getAsJSON("quest_locked_to_episode"),d=!0;break;case/^puzzle_/.test(a):b=["puzzle_lovebow","puzzle_snow","puzzle_xmastree","puzzle_3","puzzle_4","puzzle_1","puzzle_2","puzzle_5","puzzle_6","puzzle_7"],c=Bc.config.getAsJSON("puzzle_locked_to_episode")}var e=[{name:"episode_1",msg:"QUEST_PASS_EPISODE1_TO_UNLOCK"},{name:"episode_2",msg:"QUEST_PASS_EPISODE2_TO_UNLOCK"},{name:"episode_3",msg:"QUEST_PASS_EPISODE3_TO_UNLOCK"},{name:"episode_4",msg:"QUEST_PASS_EPISODE4_TO_UNLOCK"}],f=b.indexOf(a)+1;if(0>=f)return null;var g={chapters:[],buyMsg:d?"UNLOCK_QUEST_BY_MANA":"UNLOCK_PUZZLE_BY_MANA"};if(c.hasOwnProperty(f)){var h=c[f];0==h?g.unlocked=!0:(g.chapters.push(e[h-1].name),g.unlockMsg=e[h-1].msg)}return g}var h=new ra({chapters:{}});for(var i in a){var j=a[i];switch(!0){case/^episode_/.test(i):var k=na;break;case/^quest_/.test(i):var k=pa;break;case/^puzzle_/.test(i):var k=oa}var l=new k({id:i,elements:{},elementsData:b(j),groups:{},reactions:{},data:new qa(f(j)),unlockParams:g(i)});h.addChapter(l),c(j,l),e(j,l),d(j,l)}return h.loadSave(),h.setInappPrices(Bc.config.getAsJSON("chapter_inapp_price")),h}function V(){Bc.hints={1:new Ma({name:"1",initialAmount:Bc.config.getAsInt("initgame_params_hint1",3),buyPrice:Bc.config.getAsInt("price_shop_hint1",150),buyAmount:Bc.config.getAsInt("shop_hint1_count",10),countable:!0,sellable:!1,rechargeable:Bc.config.getAsBool("hint1_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("hint1_recharge_time",180),rewardedAds:Bc.config.getAsBool("hint1_rewarded_ads",!1)}),2:new Ma({name:"2",initialAmount:Bc.config.getAsInt("initgame_params_hint2",3),buyPrice:Bc.config.getAsInt("price_shop_hint2",500),buyAmount:Bc.config.getAsInt("shop_hint2_count",10),countable:!0,sellable:!1,rechargeable:Bc.config.getAsBool("hint2_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("hint2_recharge_time",420),rewardedAds:Bc.config.getAsBool("hint2_rewarded_ads",!1)}),3:new Ma({name:"3",initialAmount:Bc.config.getAsInt("initgame_params_hint3",3),buyPrice:Bc.config.getAsInt("price_shop_hint3",1e3),buyAmount:Bc.config.getAsInt("shop_hint3_count",10),countable:!0,sellable:!1,rechargeable:Bc.config.getAsBool("hint3_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("hint3_recharge_time",600),rewardedAds:Bc.config.getAsBool("hint3_rewarded_ads",!1)}),no_pairs:new Ma({name:"no_pairs",duration:864e5,buyPrice:Bc.config.getAsInt("price_shop_dotted",350),countable:!1,sellable:!0,rewardedAds:Bc.config.getAsBool("no_pairs_rewarded_ads",!1)}),no_reaction:new Ma({name:"no_reaction",duration:864e5,buyPrice:Bc.config.getAsInt("price_shop_gray",350),countable:!1,sellable:!0,rewardedAds:Bc.config.getAsBool("no_reaction_rewarded_ads",!1)}),no_repeat:new Ma({name:"no_repeat",buyPrice:Bc.config.getAsInt("price_shop_no_repeat",800),countable:!1,sellable:!0}),light_1:new Ma({initialAmount:1,name:"light_1",buyPrice:Bc.config.getAsInt("price_shop_light1",200),countable:!1,sellable:!1}),light_2:new Ma({name:"light_2",buyPrice:Bc.config.getAsInt("price_shop_light2",300),countable:!1,sellable:!1}),light_3:new Ma({name:"light_3",buyPrice:Bc.config.getAsInt("price_shop_light3",3500),countable:!1,sellable:!0}),artifacts_1:new Ma({name:"artifacts_1",initialAmount:Bc.config.getAsInt("initgame_params_ha_fifty_fifty",7),buyAmount:Bc.config.getAsInt("initgame_params_ha_fifty_fifty_buy",3),buyPrice:Bc.config.getAsInt("price_fifty_fifty",150),countable:!0,rechargeable:Bc.config.getAsBool("artifacts_hint1_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("artifacts_hint1_recharge_time",180),rewardedAds:Bc.config.getAsBool("artifacts_hint1_rewarded_ads",!1)}),artifacts_2:new Ma({name:"artifacts_2",initialAmount:Bc.config.getAsInt("initgame_params_ha_show_group",9),buyAmount:Bc.config.getAsInt("initgame_params_ha_show_group_buy",3),buyPrice:Bc.config.getAsInt("price_show_group",60),countable:!0,rechargeable:Bc.config.getAsBool("artifacts_hint2_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("artifacts_hint2_recharge_time",420),rewardedAds:Bc.config.getAsBool("artifacts_hint2_rewarded_ads",!1)}),artifacts_3:new Ma({name:"artifacts_3",initialAmount:Bc.config.getAsInt("initgame_params_ha_show_ele",5),buyAmount:Bc.config.getAsInt("initgame_params_ha_show_ele_buy",3),buyPrice:Bc.config.getAsInt("price_show_ele",210),countable:!0,rechargeable:Bc.config.getAsBool("artifacts_hint3_rechargeable",!1),rechargeTime:1e3*Bc.config.getAsBool("artifacts_hint3_recharge_time",600),rewardedAds:Bc.config.getAsBool("artifacts_hint3_rewarded_ads",!1)})}}function W(){return new Ja({enabled:Bc.config.getAsInt("fortune_enabled",0),cooldown:Bc.config.getAsInt("fortune_free_spin_cooldown",7200),price:Bc.config.getAsInt("fortune_spin_price",200),slots:Bc.config.getAsJSON("fortune_wheel_slots")})}function X(){var a=null;switch(window.LEADERBOARD_TYPE){case"facebookinstant":a=new Pa;break;default:a=new Na}return new Qa(a)}function Y(a,b,c){switch(a){case"vk":case"ok":case"wizq":Z(window.PLATFORM_SERVER_URL,window.PLATFORM_USER_ID,c,function(){c&&c(_(b))});break;case"facebookinstant":var d=new r;d.get(c,function(){c&&c(_(b))});break;default:c&&c(_(b))}}function Z(a,b,c,d){var e=new p;e.init(a,b),e.get(c,d)}function _(a){var b,c={deposites:{item0:{sku:"inapp3",type:"bag",price:3.99,currency:"USD",items:[{type:"mana",amount:1e3}]},item1:{sku:"inapp4",type:"box",price:9.99,currency:"USD",items:[{type:"mana",amount:3e3}]},item2:{sku:"inapp5",type:"suitcase",price:24.99,currency:"USD",items:[{type:"mana",amount:1e4}]},item3:{sku:"inapp6",type:"chest",price:49.99,currency:"USD",items:[{type:"mana",amount:3e4}]},item4:{sku:"inapp7",type:"infinity",price:99.99,currency:"USD",items:[{type:"mana",amount:1/0}]}}},d={deposites:{item0:{sku:"inapp3",type:"bag",price:28,currency:"RMB",items:[{type:"mana",amount:1e3}]},item1:{sku:"inapp4",type:"box",price:68,currency:"RMB",items:[{type:"mana",amount:3e3}]},item2:{sku:"inapp5",type:"suitcase",price:158,currency:"RMB",items:[{type:"mana",amount:1e4}]},item3:{sku:"inapp6",type:"chest",price:328,currency:"RMB",items:[{type:"mana",amount:3e4}]},item4:{sku:"inapp7",type:"infinity",price:658,currency:"RMB",items:[{type:"mana",amount:1/0}]}}},e={deposites:{item0:{sku:"net.wakool.games.ddgod.mana_400",type:"bag",price:50,currency:"NTD",items:[{type:"mana",amount:400}]},item1:{sku:"net.wakool.games.ddgod.mana_1350",type:"box",price:150,currency:"NTD",items:[{type:"mana",amount:1350}]},item2:{sku:"net.wakool.games.ddgod.mana_6000",type:"suitcase",price:500,currency:"NTD",items:[{type:"mana",amount:6e3}]},item3:{sku:"net.wakool.games.ddgod.mana_25000",type:"chest",price:1350,currency:"NTD",items:[{type:"mana",amount:25e3}]},item4:{sku:"net.wakool.games.ddgod.mana_unlimited",type:"infinity",price:3e3,currency:"NTD",items:[{type:"mana",amount:1/0}]}}};switch(a){case"XFORCE_CHINA":b=d;break;case"XFORCE_TAIWAN":b=e;break;default:b=c}var f=Bc.config.getAsJSON("inapp_price");if(!f)return b;for(var g in b.deposites)f&&f[g]&&(b.deposites[g].price=f[g].price,b.deposites[g].currency=f[g].currency);return b}function ba(a){Y(window.PAYMENTS_TYPE,window.STORE,function(b){function c(a){bb(cb()+a)}var d={endTime:0,bank:{deposites:{}}},e=new fa({mana:function(a){return new ja(a,c)},hint:function(a){return new ia(a,Bc.hints)}}),f=new ea(e),g=f.createBank(b),h=new ka(g),i=f.createBonus(d);h.addBonus(i),a&&a(h)})}function ca(a){var b={};return a.elements.forEach(function(a){b[a]=!0}),new gb({elements:b})}function da(){var a=new O,b="undefined"!=typeof window.PLATFORM_USER_ID?window.PLATFORM_USER_ID:Yc.get("user_uuid");return a.set("udid",b).set("platform",Mh).set("store",Nh).set("game_type",Oh).set("game_id",Ph).set("version",Qh),a}function ha(a){var b=new S(new P(new R(Sh,"https://dontrackmedoodlegod/stats.php")),new O);return b.data.fill(a),b.register("STAT_APPLICATION_LAUNCH"),b.register("STAT_APPLICATION_CLOSE"),b.register("STAT_BANNER_CLICK"),b.register("STAT_INAPP_BUY"),b.register("STAT_INAPP_CLICK"),b.register("STAT_SHOP_ITEM_CLICK"),b.register("STAT_SHOP_ITEM_BUY"),b.register("STAT_SHOP_ITEM_SOLD"),b.register("STAT_LOGIN_SUCCESSFUL"),b}function la(){switch(window.ACCOUNT_TYPE){case"wakool":return new g;case"hi5":return new f;case"facebookinstant":return new e;case"facebook":return new d;default:return new c}}function ma(){switch(window.PAYMENTS_TYPE){case"xsolla":return ya(window.PAYMENTS_SANDBOX);case"wakool":return Aa(window.PAYMENTS_SANDBOX);case"hi5":return Da(window.PAYMENTS_SANDBOX);case"vk":return va();case"ok":return wa();case"wizq":return xa();case"facebookinstant":return za();default:return ua()}}function sa(){switch(window.ADS){case"famobi":return Fa();case"gamedistribution":return Ga();case"facebookinstant":return Ha();case"wildtangent":return Ia();default:return Ea()}}function ta(a){switch(a){case"XFORCE_CHINA":return Zh.format("main_menu/name_of_game_chinese.png");case"XFORCE_TAIWAN":return Zh.format("main_menu/name_of_game_chinese_traditional.png");default:return Zh.format("main_menu/name_of_game.png")}}function ua(){return new E}function va(){return new J(window.PLATFORM_SERVER_URL,window.PLATFORM_USER_ID)}function wa(){return new H(window.PLATFORM_SERVER_URL,window.PLATFORM_USER_ID)}function xa(){return new L(window.PLATFORM_SERVER_URL,window.PLATFORM_USER_ID)}function ya(a){return new M(Ih,a)}function za(){return new F}function Aa(a){var b=Xc.urlParams.app_id?Xc.urlParams.app_id:Jh;return new K(b,a)}function Da(a){return new G(Lh,Kh,a)}function Ea(){return new i}function Fa(){return new k}function Ga(){return new l}function Ha(){return new j}function Ia(){return new m}function Oa(a){var b=new I(a);return b.init(),b}function Ra(a){var b=new h(a);return b.init(),b}function Sa(a,b,c){function d(a){i.load(function(c){l.decode(a,c,b,function(){b&&b(a)})},function(){b&&b(a)})}function e(a){h.load(function(c){l.decode(a,c,b,function(){d(a)},function(){b&&b(a)})},function(){b&&b(a)})}var f=new O;f.fill(a).set("cmd","get_config");var g=new P(new R(Sh,"https://dontrackmedoodlegod/stats.php")),h=new x(new v(g,f,1e3),function(a){var b=new C(new B("cachedGameConfig"));b.write(a)}),i=new w(new z("cachedGameConfig")),j="HTML5"===Nh?".txt":"_"+Nh.toLowerCase()+".txt",k=new w(new A(Sh,window.RESOURSE_HOST+"static/data/config"+j,5e3)),l=new t(new u);k.load(function(a){l.decode(new s,a,function(a){e(a)},c)},c)}function Ta(a){V(),ba(function(a){Bc.manaShop=a}),Bc.ads=Ra(sa()),Bc.fortune=W(),Bc.leaderboards=X(),b("elements.json",function(c){Bc.elements=y(c),o(function(){b("missions.json",function(c){Bc.missions=eb.fromJSON(c),wc("missions.json"),b("groups.json",function(c){Bc.groups=Q(c),q(function(){b("artifacts.json",function(c){Bc.artifacts=aa.fromJSON(c),b("chapters.json",function(c){Bc.chapters=U(c),Bc.conditions=new Ba,Bc.payments=Oa(ma()),wc("chapters.json"),b("achievements.json",function(c){Bc.achievements=$.fromJSON(c),wc("achievements.json"),b("planet.json",function(b){Bc.planet=ca(b),wc("planet.json"),a&&a(),Bc.trigger("loadingProgress",{progress:1,from:"planet.json"})})})})})})})})})})}function Ua(){var a=Fc._assets;for(var b in a)a[b].$.maxRetries=Th}function Va(a){var b=Fc.getById(a);b.unload(),b.status===Ec.INITIALIZED&&(void 0===b.$.maxRetries&&(b.$.maxRetries=Th),b.$.maxRetries--,b.$.maxRetries>0&&(b.load(),Bc.loadingAssets--))}function Wa(){var a=document.getElementById("loading");a.parentElement.removeChild(a)}function Xa(){Gh&&!Eh&&(Engine.Renderer.Image.filesInBatch=10,Fc.load("interface"),Fc.groups["interface"].loader.on("complete",function(){setTimeout(function(){Fc.load("game")},1)}))}function Ya(){clearTimeout(mb),ci&&(jb=1.5);var a=Engine.now();a-nb>17&&(kb=Xc.lerp(kb,jb,.01),Ae.api.setProgress(Math.min(kb,1)),"undefined"!=typeof FBInstant&&FBInstant.setLoadingProgress(Math.ceil(100*kb)),nb=a),kb>=.99&&ci?(ci=!1,Zc.trigger(Zc.LANGUAGE_CHANGE,Zc.setLanguage),Xa(),Bc.trigger("ready")):mb=setTimeout(Ya,17)}function Za(){ob||(ob=!0,pb=!1,wc("cache"),Bc.trigger("cacheReady"))}function $a(){console.info("Version: "+Qh),"undefined"!=typeof ga&&(ga("set","dimension1",Qh),ga("send","pageview"));var a=da();Bc.stats=ha(a),Bc.stats.send(Bc.stats.events.STAT_APPLICATION_LAUNCH),Bc.remoteStorage=new T,Bc.account=la(),Bc.account.on("connected",function(){Bc.stats.send(Bc.stats.events.STAT_LOGIN_SUCCESSFUL),Bc.account.remoteStorage&&Bc.remoteStorage.init(Bc.account.type,Bc.account.userId,Bc.account.firstTime)}),Bc.promo=new N,Bc.news=new D,Sa(a,function(a){Bc.config=a,Bc.trigger("configLoaded",a),Zc.init(),Bc.config.getAsBool("cross_promo_enabled",!1)&&Bc.promo.init(),Bc.config.getAsBool("account_enabled",!0)&&Bc.account.init(),Bc.config.getAsBool("news_enabled",!1)&&Bc.news.init()},function(){console.log("error")})}window.onbeforeunload=function(b){a()},window.onunload=function(b){a()},Fc.createGroup("atlas"),Fc.register({"elements/elements_texture_01":Dc(Zh.format("elements/elements_texture_01.png")),"elements/elements_texture_02":Dc(Zh.format("elements/elements_texture_02.png")),"elements/elements_texture_03":Dc(Zh.format("elements/elements_texture_03.png")),"elements/elements_texture_04":Dc(Zh.format("elements/elements_texture_04.png")),"groups/groups_texture_01":Dc(Zh.format("groups/groups_texture_01.png")),"groups/groups_texture_02":Dc(Zh.format("groups/groups_texture_02.png")),"groups/groups_texture_03":Dc(Zh.format("groups/groups_texture_03.png")),"groups/groups_texture_20th":Dc(Zh.format("groups/groups_texture_20th.png"))},"atlas"),ai++,ai++,ai++,ai++,ai++,ai++,Fc.createGroup("runtimeAssets"),Yc.register("user_uuid",uuid.v4()),Uh++;var _a=!0;"iOS"===Pc.platform.name&&window.navigator.standalone&&(_a=!1),_a&&Uh++;var ab=new fi({variants:{orientation:["landscape","portrait"],size:["1024x768","512x384","640x960"],platform:["iOS","android","other"],platform_type:["mobile","desktop"],sound:["sound_none","sound_low","sound_medium","sound_high"],credits:["remove_credits"],sketches:["remove_sketches"],advertising:["remove_advertising"],game_over:["remove_gameover"],home_screen:["merge_home_screen"],background_decorators:["remove_background_decorators"],large_achievements:["remove_large_achievements","remove_small_achievements"],help:["help_fragmented"]}});window.LOCKED_ORIENTATION&&"portrait"===window.LOCKED_ORIENTATION?(ab.set("portrait"),ab.set((window.USE_MOBILE_IMAGES,"640x960")),xc.REMOVE_GROUP_SKETCHES=!0,xc.HELP_FRAGMENTED=!0):(ab.set("landscape"),ab.set(window.USE_MOBILE_IMAGES?"512x384":"1024x768")),xc.LOW_BITRATE_SOUND&&(Ch=!1,Dh=!1,_h="static/sounds_low/{}"),window.USE_MOBILE_IMAGES?ab.set("mobile"):ab.set("desktop"),_a?Dh?ab.set("sound_medium"):Ch?ab.set("sound_high"):ab.set("sound_low"):ab.set("sound_none"),"iOS"===Engine.Device.platform.name&&ab.set("iOS"),xc.REMOVE_CREDITS&&ab.set("remove_credits"),xc.REMOVE_GROUP_SKETCHES&&ab.set("remove_sketches"),xc.REMOVE_ADVERTISING_BACKGROUNDS&&ab.set("remove_advertising"),xc.REMOVE_GAMEOVER&&ab.set("remove_gameover"),xc.MERGE_HOME_SCREEN&&ab.set("merge_home_screen"),xc.REMOVE_BACKGROUND_DECORATORS&&ab.set("remove_background_decorators"),xc.REMOVE_LARGE_ACHIEVEMENTS&&ab.set("remove_large_achievements"),xc.REMOVE_SMALL_ACHIEVEMENTS&&ab.set("remove_small_achievements"),xc.HELP_FRAGMENTED&&ab.set("help_fragmented"),Fc.createGroup("loading"),Fc.register(ab.generate({type:Engine.Image,template:"{ROOT}/{RES}/{NAME}.{EXT}",assets:{"splash/bkg_splash":{mobile:{EXT:"jpg"},"default":{NAME:"splash/bkg_splash"}},"splash/dg_splash":{"default":{NAME:"splash/dg_splash"}},"splash/loading_progressbar_01":{"default":{NAME:"splash/loading_progressbar_01"}},"splash/loading_progressbar_02":{"default":{NAME:"splash/loading_progressbar_02"}},"splash/load_anim_07":{"default":{NAME:"splash/load_anim_07"}},"splash/jb_logo":{"default":{NAME:"splash/jb_logo"}}},"default":{"1024x768":{RES:"1024x768"},"512x384":{RES:"512x384"},"640x960":{RES:"640x960"},"default":{EXT:"png",ROOT:window.RESOURSE_HOST+"static/images"}}}),"loading"),Fc.createGroup("interface"),Fc.register(ab.generate({type:Dc,assets:{"message_box/alert_border":Zh.format("message_box/alert_border.png"),"message_box/mission_rays":Zh.format("message_box/mission_rays.png"),"message_box/t9_dialog":Zh.format("message_box/t9_dialog.png"),"message_box/god_stars_01":Zh.format("message_box/god_stars_01.png"),"message_box/god_stars_02":Zh.format("message_box/god_stars_02.png"),"message_box/godhand_stars_03":Zh.format("message_box/godhand_stars_03.png"),"message_box/penta_sign":Zh.format("message_box/penta_sign.png"),"message_box/dialog_happy":Zh.format("message_box/dialog_happy.png"),"message_box/btn_green":Zh.format("message_box/btn_green.png"),"message_box/btn_grey":Zh.format("message_box/btn_grey.png"),"message_box/wheel_arrow":Zh.format("message_box/wheel_arrow.png"),"message_box/wheel_bkg":Zh.format("message_box/wheel_bkg.png"),"message_box/wheel_center":Zh.format("message_box/wheel_center.png"),"message_box/wheel_table":Zh.format("message_box/wheel_table.png"),"message_box/star_empty":Zh.format("message_box/star_empty.png"),"message_box/star_full":Zh.format("message_box/star_full.png"),"message_box/red_tape_up":Zh.format("message_box/red_tape_up.png"),"message_box/red_tape_down":Zh.format("message_box/red_tape_down.png"),"message_box/red_tape_down_flipped":Zh.format("message_box/red_tape_down_flipped.png"),"message_box/energy_card":Zh.format("message_box/energy_card.png"),"message_box/icon_chest_sign":Zh.format("message_box/icon_chest_sign.png"),"message_box/icon_dotted_border_sign":Zh.format("message_box/icon_dotted_border_sign.png"),"message_box/icon_energy_sign":Zh.format("message_box/icon_energy_sign.png"),"message_box/icon_gray_border_sign":Zh.format("message_box/icon_gray_border_sign.png"),"message_box/icon_hint_1_sign":Zh.format("message_box/icon_hint_1_sign.png"),"message_box/icon_hint_2_sign":Zh.format("message_box/icon_hint_2_sign.png"),"message_box/icon_hint_3_sign":Zh.format("message_box/icon_hint_3_sign.png"),"message_box/icon_not_repeat_sign":Zh.format("message_box/icon_not_repeat_sign.png"),"message_box/icon_reset":Zh.format("message_box/icon_reset.png"),"message_box/icon_star":Zh.format("message_box/icon_star.png"),"main_menu/facebook_button":Zh.format("main_menu/facebook_button.png"),"main_menu/facebook_chinese_traditional":Zh.format("main_menu/facebook_chinese_traditional.png"),"interface/under_group":Zh.format("interface/under_group.png"),"interface/encyclopedia_paper_element":Zh.format("interface/encyclopedia_paper_element.png"),"interface/button_wikipedia_small":Zh.format("interface/button_wikipedia_small.png"),"interface/ornament_line":Zh.format("interface/ornament_line.png"),"interface/book_scheme_1":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_1.png")},"interface/book_scheme_2":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_2.png")},"interface/book_scheme_3":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_3.png")},"interface/book_scheme_4":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_4.png")},"interface/book_scheme_5":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_5.png")},"interface/book_scheme_6":{remove_background_decorators:null,"default":Zh.format("interface/book_scheme_6.png")},"interface/paper_for_new_element":{portrait:null,"default":Zh.format("interface/paper_for_new_element.png")},"interface/rays_light":Zh.format("interface/rays_light.png"),"interface/plus_in_hint":Zh.format("interface/plus_in_hint.png"),"interface/equal_in_hint":Zh.format("interface/equal_in_hint.png"),"interface/quest_in_hint":Zh.format("interface/quest_in_hint.png"),"interface/button_wikipedia":Zh.format("interface/button_wikipedia.png"),"interface/button_find":Zh.format("interface/button_find.png"),"interface/button_close":Zh.format("interface/button_close.png"),"interface/arrow_u":Zh.format("interface/arrow_u.png"),"interface/arrow_d":Zh.format("interface/arrow_d.png"),"interface/arrow_l":Zh.format("interface/arrow_l.png"),"interface/arrow_r":Zh.format("interface/arrow_r.png"),"interface/bkg_new":{remove_background_decorators:null,"default":Zh.format("interface/bkg_new.jpg")},"interface/border_norepeat":Zh.format("interface/border_norepeat.png"),"interface/border_finish":Zh.format("interface/border_finish.png"),"interface/border_dotted":Zh.format("interface/border_dotted.png"),"interface/border_pentagram_01":Zh.format("interface/border_pentagram_01.png"),"interface/border_pentagram_02":Zh.format("interface/border_pentagram_02.png"),"interface/border_pentagram_03":Zh.format("interface/border_pentagram_03.png"),"interface/toolbar_penta_progress_01":Zh.format("interface/toolbar_penta_progress_01.png"),"interface/toolbar_penta_progress_02":Zh.format("interface/toolbar_penta_progress_02.png"),"interface/energy_infinity":Zh.format("interface/energy_infinity.png")}}),"interface"),Fc.createGroup("game"),Fc.register(ab.generate([{type:Dc,assets:{"options/under_on":Zh.format("options/under_on.png"),"options/sound_off":Zh.format("options/sound_off.png"),"options/under_off":Zh.format("options/under_off.png"),"options/voice_off":Zh.format("options/voice_off.png"),"options/music_off":Zh.format("options/music_off.png"),"options/kids_safe_on":Zh.format("options/kids_safe_on.png"),"options/kids_safe_off":Zh.format("options/kids_safe_off.png"),"options/music_01":Zh.format("options/music_01.png"),"options/music_02":Zh.format("options/music_02.png"),"options/music_03":Zh.format("options/music_03.png"),"options/sound_01":Zh.format("options/sound_01.png"),"options/sound_02":Zh.format("options/sound_02.png"),"options/sound_03":Zh.format("options/sound_03.png"),"options/voice_01":Zh.format("options/voice_01.png"),"options/voice_02":Zh.format("options/voice_02.png"),"options/voice_03":Zh.format("options/voice_03.png"),"language/checkbox_small_on":Zh.format("language/checkbox_small_on.png"),"language/checkbox_small_off":Zh.format("language/checkbox_small_off.png"),"language/checkbox_01":Zh.format("language/checkbox_01.png"),"language/checkbox_02":Zh.format("language/checkbox_02.png"),"credits/review_teaser":Zh.format("credits/review_teaser.png"),"interface/button_big_blue":Zh.format("interface/button_big_blue.png"),"credits/jb_logo":Zh.format("credits/jb_logo.png"),"artifacts_menu/dark_under_artefact":Zh.format("artifacts_menu/dark_under_artefact.png"),"artifacts_menu/stand":Zh.format("artifacts_menu/stand.png"),"artifacts_menu/plus":Zh.format("artifacts_menu/plus.png"),"artifacts_menu/reset_button":Zh.format("artifacts_menu/reset_button.png"),"artifacts_menu/reset_button_d":Zh.format("artifacts_menu/reset_button_d.png"),"artifacts_menu/submit_button":Zh.format("artifacts_menu/submit_button.png"),"artifacts_menu/submit_button_d":Zh.format("artifacts_menu/submit_button_d.png"),"artifacts_menu/close_element":Zh.format("artifacts_menu/close_element.png"),"artifacts_menu/shelf":Zh.format("artifacts_menu/shelf.png"),"artifacts_menu/lock":Zh.format("artifacts_menu/lock.png"),"artifacts_menu/plate":Zh.format("artifacts_menu/plate.png"),"artifacts_menu/place_for_element":Zh.format("artifacts_menu/place_for_element.png"),"artifacts_menu/sphinx":Zh.format("artifacts_menu/sphinx.png"),"artifacts_menu/sphinx_glass":Zh.format("artifacts_menu/sphinx_glass.png"),"artifacts_menu/stonehenge":Zh.format("artifacts_menu/stonehenge.png"),"artifacts_menu/stonehenge_glass":Zh.format("artifacts_menu/stonehenge_glass.png"),"artifacts_menu/titanic":Zh.format("artifacts_menu/titanic.png"),"artifacts_menu/titanic_glass":Zh.format("artifacts_menu/titanic_glass.png"),"artifacts_menu/time_machine":Zh.format("artifacts_menu/time_machine.png"),"artifacts_menu/time_machine_glass":Zh.format("artifacts_menu/time_machine_glass.png"),"artifacts_menu/sledge":Zh.format("artifacts_menu/sledge.png"),"artifacts_menu/sledge_glass":Zh.format("artifacts_menu/sledge_glass.png"),"artifacts_menu/ring_power":Zh.format("artifacts_menu/ring_power.png"),"artifacts_menu/ring_power_glass":Zh.format("artifacts_menu/ring_power_glass.png"),"artifacts_menu/pyramid":Zh.format("artifacts_menu/pyramid.png"),"artifacts_menu/pyramid_glass":Zh.format("artifacts_menu/pyramid_glass.png"),"artifacts_menu/perpetual":Zh.format("artifacts_menu/perpetual.png"),"artifacts_menu/perpetual_glass":Zh.format("artifacts_menu/perpetual_glass.png"),"artifacts_menu/pinocchio":Zh.format("artifacts_menu/pinocchio.png"),"artifacts_menu/pinocchio_glass":Zh.format("artifacts_menu/pinocchio_glass.png"),"artifacts_menu/pandora_box":Zh.format("artifacts_menu/pandora_box.png"),"artifacts_menu/pandora_box_glass":Zh.format("artifacts_menu/pandora_box_glass.png"),"artifacts_menu/myphone":Zh.format("artifacts_menu/myphone.png"),"artifacts_menu/myphone_glass":Zh.format("artifacts_menu/myphone_glass.png"),"artifacts_menu/mona_lisa":Zh.format("artifacts_menu/mona_lisa.png"),"artifacts_menu/mona_lisa_glass":Zh.format("artifacts_menu/mona_lisa_glass.png"),"artifacts_menu/grail":Zh.format("artifacts_menu/grail.png"),"artifacts_menu/grail_glass":Zh.format("artifacts_menu/grail_glass.png"),"artifacts_menu/lightsaber":Zh.format("artifacts_menu/lightsaber.png"),"artifacts_menu/lightsaber_glass":Zh.format("artifacts_menu/lightsaber_glass.png"),"artifacts_menu/godzilla":Zh.format("artifacts_menu/godzilla.png"),"artifacts_menu/godzilla_glass":Zh.format("artifacts_menu/godzilla_glass.png"),"artifacts_menu/golden_fleece":Zh.format("artifacts_menu/golden_fleece.png"),"artifacts_menu/golden_fleece_glass":Zh.format("artifacts_menu/golden_fleece_glass.png"),"artifacts_menu/eiffel_tower":Zh.format("artifacts_menu/eiffel_tower.png"),"artifacts_menu/eiffel_tower_glass":Zh.format("artifacts_menu/eiffel_tower_glass.png"),"artifacts_menu/excalibur":Zh.format("artifacts_menu/excalibur.png"),"artifacts_menu/excalibur_glass":Zh.format("artifacts_menu/excalibur_glass.png"),"artifacts_menu/babel":Zh.format("artifacts_menu/babel.png"),"artifacts_menu/babel_glass":Zh.format("artifacts_menu/babel_glass.png"),"artifacts_menu/basilisk":Zh.format("artifacts_menu/basilisk.png"),"artifacts_menu/basilisk_glass":Zh.format("artifacts_menu/basilisk_glass.png"),"artifacts_menu/lock_notif":Zh.format("artifacts_menu/lock_notif.png"),"message_box/dialog":Zh.format("message_box/dialog.png"),"hint/button_small_green":Zh.format("hint/button_small_green.png"),"hint/button_small_orange":Zh.format("hint/button_small_orange.png"),"hint/button_big_blue":Zh.format("hint/button_big_blue.png"),"puzzles_menu/valentines_day":Zh.format("puzzles_menu/valentines_day.png"),"quests_menu/ready":Zh.format("quests_menu/ready.png"),"quests_menu/unlock_quest":Zh.format("quests_menu/unlock_quest.png"),"puzzles_menu/snow":Zh.format("puzzles_menu/snow.png"),"puzzles_menu/christmas_tree":Zh.format("puzzles_menu/christmas_tree.png"),"puzzles_menu/ice_cream":Zh.format("puzzles_menu/ice_cream.png"),"puzzles_menu/flower":Zh.format("puzzles_menu/flower.png"),"puzzles_menu/locomotive":Zh.format("puzzles_menu/locomotive.png"),"puzzles_menu/skyscraper":Zh.format("puzzles_menu/skyscraper.png"),"puzzles_menu/firework":Zh.format("puzzles_menu/firework.png"),"puzzles_menu/tavern":Zh.format("puzzles_menu/tavern.png"),"puzzles_menu/android":Zh.format("puzzles_menu/android.png"),"tree_main_game/btn_soon":Zh.format("tree_main_game/btn_soon.png"),"tree_main_game/reset":Zh.format("tree_main_game/reset.png"),"tree_main_game/percent_bkg":Zh.format("tree_main_game/percent_bkg.png"),"tree_main_game/btn_beginning":Zh.format("tree_main_game/btn_beginning.png"),"tree_main_game/btn_modernage":Zh.format("tree_main_game/btn_modernage.png"),"tree_main_game/btn_technology":Zh.format("tree_main_game/btn_technology.png"),"tree_main_game/btn_worldofmagic":Zh.format("tree_main_game/btn_worldofmagic.png"),"message_box/dialog_god2":Zh.format("message_box/dialog_god2.png"),"message_box/dialog_god":Zh.format("message_box/dialog_god.png"),"interface/button_big_orange":Zh.format("interface/button_big_orange.png"),"quests_menu/new_year":Zh.format("quests_menu/new_year.png"),"quests_menu/princess":Zh.format("quests_menu/princess.png"),"quests_menu/god_vs_devil":Zh.format("quests_menu/god_vs_devil.png"),"quests_menu/survivor":Zh.format("quests_menu/survivor.png"),"quests_menu/20th":Zh.format("quests_menu/20th.png"),"quests_menu/Egypt":Zh.format("quests_menu/Egypt.png"),"quests_menu/angel_demon":Zh.format("quests_menu/angel_demon.png"),"interface/bkg_new_year":{remove_background_decorators:null,"default":Zh.format("interface/bkg_new_year.png")},"interface/bkg_angel_vs_demon":{remove_background_decorators:null,"default":Zh.format("interface/bkg_angel_vs_demon.png")},"interface/bkg_devil_vs_god":{remove_background_decorators:null,"default":Zh.format("interface/bkg_devil_vs_god.png")},"quests_progress/presents/cthulhu_01":Zh.format("quests_progress/presents/cthulhu_01.png"),"quests_progress/presents/cthulhu_02":Zh.format("quests_progress/presents/cthulhu_02.png"),"quests_progress/presents/dragon_01":Zh.format("quests_progress/presents/dragon_01.png"),"quests_progress/presents/dragon_02":Zh.format("quests_progress/presents/dragon_02.png"),"quests_progress/presents/drakula_01":Zh.format("quests_progress/presents/drakula_01.png"),"quests_progress/presents/drakula_02":Zh.format("quests_progress/presents/drakula_02.png"),"quests_progress/presents/elvis_01":Zh.format("quests_progress/presents/elvis_01.png"),"quests_progress/presents/elvis_02":Zh.format("quests_progress/presents/elvis_02.png"),"quests_progress/presents/emperor_01":Zh.format("quests_progress/presents/emperor_01.png"),"quests_progress/presents/emperor_02":Zh.format("quests_progress/presents/emperor_02.png"),"quests_progress/presents/hero_01":Zh.format("quests_progress/presents/hero_01.png"),"quests_progress/presents/hero_02":Zh.format("quests_progress/presents/hero_02.png"),"quests_progress/presents/newton_01":Zh.format("quests_progress/presents/newton_01.png"),"quests_progress/presents/newton_02":Zh.format("quests_progress/presents/newton_02.png"),"quests_progress/presents/nostradamus_01":Zh.format("quests_progress/presents/nostradamus_01.png"),"quests_progress/presents/nostradamus_02":Zh.format("quests_progress/presents/nostradamus_02.png"),"quests_progress/presents/robot_01":Zh.format("quests_progress/presents/robot_01.png"),"quests_progress/presents/robot_02":Zh.format("quests_progress/presents/robot_02.png"),"quests_progress/presents/zombie_01":Zh.format("quests_progress/presents/zombie_01.png"),"quests_progress/presents/zombie_02":Zh.format("quests_progress/presents/zombie_02.png"),"interface/bkg_save_princess":{remove_background_decorators:null,"default":Zh.format("interface/bkg_save_princess.png")},"quests_progress/princess/quest_map":Zh.format("quests_progress/princess/quest_map.png"),"quests_progress/princess/cross_big_01":Zh.format("quests_progress/princess/cross_big_01.png"),"quests_progress/princess/cross_big_02":Zh.format("quests_progress/princess/cross_big_02.png"),"quests_progress/princess/cross_small_01":Zh.format("quests_progress/princess/cross_small_01.png"),"quests_progress/princess/cross_small_02":Zh.format("quests_progress/princess/cross_small_02.png"),"quests_progress/god_vs_devil/percent_screen":Zh.format("quests_progress/god_vs_devil/percent_screen.png"),"quests_progress/god_vs_devil/percent_arrow":Zh.format("quests_progress/god_vs_devil/percent_arrow.png"),"interface/bkg_20th":Zh.format("interface/bkg_20th.png"),"quests_progress/20th/progress_bkg":Zh.format("quests_progress/20th/progress_bkg.png"),"quests_progress/20th/1900_normal":Zh.format("quests_progress/20th/1900_normal.png"),"quests_progress/20th/1910_normal":Zh.format("quests_progress/20th/1910_normal.png"),"quests_progress/20th/1920_normal":Zh.format("quests_progress/20th/1920_normal.png"),"quests_progress/20th/1930_normal":Zh.format("quests_progress/20th/1930_normal.png"),"quests_progress/20th/1940_normal":Zh.format("quests_progress/20th/1940_normal.png"),"quests_progress/20th/1950_normal":Zh.format("quests_progress/20th/1950_normal.png"),"quests_progress/20th/1960_normal":Zh.format("quests_progress/20th/1960_normal.png"),"quests_progress/20th/1970_normal":Zh.format("quests_progress/20th/1970_normal.png"),"quests_progress/20th/1980_normal":Zh.format("quests_progress/20th/1980_normal.png"),"quests_progress/20th/1990_normal":Zh.format("quests_progress/20th/1990_normal.png"),"quests_progress/20th/1900_complete":Zh.format("quests_progress/20th/1900_complete.png"),"quests_progress/20th/1910_complete":Zh.format("quests_progress/20th/1910_complete.png"),"quests_progress/20th/1920_complete":Zh.format("quests_progress/20th/1920_complete.png"),"quests_progress/20th/1930_complete":Zh.format("quests_progress/20th/1930_complete.png"),"quests_progress/20th/1940_complete":Zh.format("quests_progress/20th/1940_complete.png"),"quests_progress/20th/1950_complete":Zh.format("quests_progress/20th/1950_complete.png"),"quests_progress/20th/1960_complete":Zh.format("quests_progress/20th/1960_complete.png"),"quests_progress/20th/1970_complete":Zh.format("quests_progress/20th/1970_complete.png"),"quests_progress/20th/1980_complete":Zh.format("quests_progress/20th/1980_complete.png"),"quests_progress/20th/1990_complete":Zh.format("quests_progress/20th/1990_complete.png"),"quests_progress/egypt/progress_border":Zh.format("quests_progress/egypt/progress_border.png"),"quests_progress/egypt/progress_01":Zh.format("quests_progress/egypt/progress_01.png"),"quests_progress/egypt/progress_02":Zh.format("quests_progress/egypt/progress_02.png"),"quests_progress/egypt/progress_03":Zh.format("quests_progress/egypt/progress_03.png"),"quests_progress/egypt/progress_04":Zh.format("quests_progress/egypt/progress_04.png"),"quests_progress/egypt/progress_05":Zh.format("quests_progress/egypt/progress_05.png"),"quests_progress/egypt/progress_06":Zh.format("quests_progress/egypt/progress_06.png"),"quests_progress/egypt/progress_07":Zh.format("quests_progress/egypt/progress_07.png"),"quests_progress/egypt/progress_08":Zh.format("quests_progress/egypt/progress_08.png"),"quests_progress/egypt/progress_09":Zh.format("quests_progress/egypt/progress_09.png"),"quests_progress/egypt/progress_10":Zh.format("quests_progress/egypt/progress_10.png"),"quests_progress/egypt/progress_11":Zh.format("quests_progress/egypt/progress_11.png"),"quests_progress/egypt/progress_12":Zh.format("quests_progress/egypt/progress_12.png"),"quests_progress/egypt/progress_13":Zh.format("quests_progress/egypt/progress_13.png"),"quests_progress/egypt/progress_14":Zh.format("quests_progress/egypt/progress_14.png"),"quests_progress/egypt/progress_15":Zh.format("quests_progress/egypt/progress_15.png"),"quests_progress/egypt/progress_16":Zh.format("quests_progress/egypt/progress_16.png"),"quests_progress/egypt/progress_17":Zh.format("quests_progress/egypt/progress_17.png"),"quests_progress/egypt/progress_18":Zh.format("quests_progress/egypt/progress_18.png"),"quests_progress/egypt/progress_19":Zh.format("quests_progress/egypt/progress_19.png"),"quests_progress/egypt/progress_20":Zh.format("quests_progress/egypt/progress_20.png"),"quests_progress/egypt/progress_21":Zh.format("quests_progress/egypt/progress_21.png"),"quests_progress/egypt/progress_22":Zh.format("quests_progress/egypt/progress_22.png"),"quests_progress/egypt/progress_23":Zh.format("quests_progress/egypt/progress_23.png"),"quests_progress/egypt/progress_24":Zh.format("quests_progress/egypt/progress_24.png"),"quests_progress/qad/bkg_progress":Zh.format("quests_progress/qad/bkg_progress.png"),"quests_progress/qad/angel":Zh.format("quests_progress/qad/angel.png"),"quests_progress/qad/demon":Zh.format("quests_progress/qad/demon.png"),"interface/bkg_robinzon":{remove_background_decorators:null,"default":Zh.format("interface/bkg_robinzon.png")},"quests_progress/lost/progress_bkg":Zh.format("quests_progress/lost/progress_bkg.png"),"quests_progress/lost/progress_survivor":Zh.format("quests_progress/lost/progress_survivor.png"),"quests_progress/lost/murder":Zh.format("quests_progress/lost/murder.png"),"quests_progress/lost/torture":Zh.format("quests_progress/lost/torture.png"),"quests_progress/lost/happy_end":Zh.format("quests_progress/lost/happy_end.png"),"hint/line":Zh.format("hint/line.png"),"hint/border_hint_disable":Zh.format("hint/border_hint_disable.png"),"hint/border_hint":Zh.format("hint/border_hint.png"),"hint/hint_1_on":Zh.format("hint/hint_1_on.png"),"hint/hint_on":Zh.format("hint/hint_on.png"),"hint/button_big_gray":Zh.format("hint/button_big_gray.png"),"hint/hint_off":Zh.format("hint/hint_off.png"),"hint/button_big_green":Zh.format("hint/button_big_green.png"),"hint/shop":Zh.format("hint/shop.png"),"hint/hint_2_on":Zh.format("hint/hint_2_on.png"),"hint/hint_3_on":Zh.format("hint/hint_3_on.png"),"hint/ad":Zh.format("hint/ad.png"),"hint/ad_small":Zh.format("hint/ad_small.png"),"shop/purchased_frame":Zh.format("shop/purchased_frame.png"),"shop/button_buy":Zh.format("shop/button_buy.png"),"shop/button_sell":Zh.format("shop/button_sell.png"),"shop/button_disabled":Zh.format("shop/button_disabled.png"),"shop/button_timer":Zh.format("shop/button_timer.png"),"shop/line_old_price":Zh.format("shop/line_old_price.png"),"shop/energy_sign2":Zh.format("shop/energy_sign2.png"),"shop/energy_sign2_big":Zh.format("shop/energy_sign2_big.png"),"shop/hint_1_sign":Zh.format("shop/hint_1_sign.png"),"shop/hint_2_sign":Zh.format("shop/hint_2_sign.png"),"shop/hint_3_sign":Zh.format("shop/hint_3_sign.png"),"shop/dotted_border_sign":Zh.format("shop/dotted_border_sign.png"),"shop/gray_border_sign":Zh.format("shop/gray_border_sign.png"),"shop/not_repeat_sign":Zh.format("shop/not_repeat_sign.png"),"shop/light1_sign":Zh.format("shop/light1_sign.png"),"shop/light2_sign":Zh.format("shop/light2_sign.png"),"shop/light3_sign":Zh.format("shop/light3_sign.png"),"shop/wheel_fortune":Zh.format("shop/wheel_fortune.png"),"shop/button_free":Zh.format("shop/button_free.png"),"hint/hint_arti_01":Zh.format("hint/hint_arti_01.png"),"hint/hint_arti_02":Zh.format("hint/hint_arti_02.png"),"hint/hint_arti_03":Zh.format("hint/hint_arti_03.png"),"achievements/lock_achievement":Zh.format("achievements/lock_achievement.png"),"achievements/paper_up":{portrait:Zh.format("achievements/paper_up.png"),"default":null},"interface/pentagram_place":{remove_background_decorators:null,"default":Zh.format("interface/pentagram_place.png")},"interface/pentagram_01_1":{remove_background_decorators:null,"default":Zh.format("interface/pentagram_01_1.png")},"interface/penta_light":Zh.format("interface/penta_light.png"),"interface/new1":Zh.format("interface/new1.png"),"interface/new2":Zh.format("interface/new2.png"),"interface/new3":Zh.format("interface/new3.png"),"teaser/1/earth_01":Zh.format("teaser/1/earth_01.png"),"teaser/1/earth_02":Zh.format("teaser/1/earth_02.png"),"teaser/1/earth_03":Zh.format("teaser/1/earth_03.png"),"teaser/1/water_01":Zh.format("teaser/1/water_01.png"),"teaser/1/water_02":Zh.format("teaser/1/water_02.png"),"teaser/1/water_03":Zh.format("teaser/1/water_03.png"),"teaser/1/fire_01":Zh.format("teaser/1/fire_01.png"),"teaser/1/fire_02":Zh.format("teaser/1/fire_02.png"),"teaser/1/fire_03":Zh.format("teaser/1/fire_03.png"),"teaser/1/air_01":Zh.format("teaser/1/air_01.png"),"teaser/1/air_02":Zh.format("teaser/1/air_02.png"),"teaser/1/air_03":Zh.format("teaser/1/air_03.png"),"interface/plus":Zh.format("interface/plus.png"),"interface/equal":Zh.format("interface/equal.png"),"teaser/2/planet_big":Zh.format("teaser/2/planet_big.png"),"teaser/2/void_01":Zh.format("teaser/2/void_01.png"),"teaser/2/void_02":Zh.format("teaser/2/void_02.png"),"teaser/2/void_03":Zh.format("teaser/2/void_03.png"),"teaser/2/void_04":Zh.format("teaser/2/void_04.png"),"teaser/2/planet_small":Zh.format("teaser/2/planet_small.png"),"teaser/3/dragonanim_01":Zh.format("teaser/3/dragonanim_01.png"),"teaser/3/dragonanim_02":Zh.format("teaser/3/dragonanim_02.png"),"teaser/3/dragonanim_03":Zh.format("teaser/3/dragonanim_03.png"),"teaser/3/oops":Zh.format("teaser/3/oops.png"),"teaser/3/techno":Zh.format("teaser/3/techno.png"),"teaser/3/magic":Zh.format("teaser/3/magic.png"),"teaser/3/zigzag_01":Zh.format("teaser/3/zigzag_01.png"),"teaser/3/zigzag_02":Zh.format("teaser/3/zigzag_02.png"),"teaser/3/zigzag_03":Zh.format("teaser/3/zigzag_03.png"),"teaser/3/zigzag_techno":Zh.format("teaser/3/zigzag_techno.png"),"teaser/3/zigzag_magic":Zh.format("teaser/3/zigzag_magic.png"),"teaser/3/hands":Zh.format("teaser/3/hands.png"),"interface/new_element":Zh.format("interface/new_element.png"),"teaser/eye":Zh.format("teaser/eye.png"),"teaser/4/present_magic":Zh.format("teaser/4/present_magic.png"),"teaser/4/naughtiness":Zh.format("teaser/4/naughtiness.png"),"teaser/4/evil":Zh.format("teaser/4/evil.png"),"teaser/4/fight":Zh.format("teaser/4/fight.png"),"teaser/q1/screen_01":Zh.format("teaser/q1/screen_01.png"),"teaser/q1/screen_02":Zh.format("teaser/q1/screen_02.png"),"teaser/q1/screen_03":Zh.format("teaser/q1/screen_03.png"),"teaser/q1/screen_04_":Zh.format("teaser/q1/screen_04_.png"),"teaser/q2/abduction_bkg":Zh.format("teaser/q2/abduction_bkg.png"),"teaser/q2/abduction_dragon":Zh.format("teaser/q2/abduction_dragon.png"),"teaser/q2/abduction_crown":Zh.format("teaser/q2/abduction_crown.png"),"teaser/q2/abduction_king":Zh.format("teaser/q2/abduction_king.png"),"teaser/q2/band_bkg":Zh.format("teaser/q2/band_bkg.png"),"teaser/q2/band_arm":Zh.format("teaser/q2/band_arm.png"),"teaser/q2/band_fire_01":Zh.format("teaser/q2/band_fire_01.png"),"teaser/q2/band_fire_02":Zh.format("teaser/q2/band_fire_02.png"),"teaser/q2/band_fire_03":Zh.format("teaser/q2/band_fire_03.png"),"teaser/q2/band_hoop_01":Zh.format("teaser/q2/band_hoop_01.png"),"teaser/q2/band_hoop_02":Zh.format("teaser/q2/band_hoop_02.png"),"teaser/q2/band_hoop_03":Zh.format("teaser/q2/band_hoop_03.png"),"teaser/q2/win_bkg":Zh.format("teaser/q2/win_bkg.png"),"teaser/q2/win_princess":Zh.format("teaser/q2/win_princess.png"),"teaser/20th/20th_planet":Zh.format("teaser/20th/20th_planet.png"),"teaser/20th/20th_god":Zh.format("teaser/20th/20th_god.png"),"teaser/20th/20th_baloon":Zh.format("teaser/20th/20th_baloon.png"),"teaser/20th/20th_plane":Zh.format("teaser/20th/20th_plane.png"),"teaser/20th/20th_end_screen":Zh.format("teaser/20th/20th_end_screen.png"),"teaser/20th/20th_question_anim_01":Zh.format("teaser/20th/20th_question_anim_01.png"),"teaser/20th/20th_question_anim_02":Zh.format("teaser/20th/20th_question_anim_02.png"),"teaser/20th/20th_question_anim_03":Zh.format("teaser/20th/20th_question_anim_03.png"),"teaser/q3/scene_01_devil":Zh.format("teaser/q3/scene_01_devil.png"),"teaser/q3/scene_01_element_01":Zh.format("teaser/q3/scene_01_element_01.png"),"teaser/q3/scene_01_element_02":Zh.format("teaser/q3/scene_01_element_02.png"),"teaser/q3/scene_01_element_03":Zh.format("teaser/q3/scene_01_element_03.png"),"teaser/q3/scene_02_devil":Zh.format("teaser/q3/scene_02_devil.png"),"teaser/q3/scene_02_element_01":Zh.format("teaser/q3/scene_02_element_01.png"),"teaser/q3/scene_02_element_02":Zh.format("teaser/q3/scene_02_element_02.png"),"teaser/q3/scene_02_element_03":Zh.format("teaser/q3/scene_02_element_03.png"),"teaser/q3/scene_02_god":Zh.format("teaser/q3/scene_02_god.png"),"teaser/egypt/god":Zh.format("teaser/egypt/god.png"),"teaser/egypt/bubble":Zh.format("teaser/egypt/bubble.png"),"teaser/egypt/land_01":Zh.format("teaser/egypt/land_01.png"),"teaser/egypt/land_02":Zh.format("teaser/egypt/land_02.png"),"teaser/egypt/land_03":Zh.format("teaser/egypt/land_03.png"),"teaser/egypt/sun_01":Zh.format("teaser/egypt/sun_01.png"),"teaser/egypt/sun_02":Zh.format("teaser/egypt/sun_02.png"),"teaser/egypt/sun_03":Zh.format("teaser/egypt/sun_03.png"),"teaser/egypt/landscape":Zh.format("teaser/egypt/landscape.png"),"teaser/egypt/boat":Zh.format("teaser/egypt/boat.png"),"teaser/egypt/water_01":Zh.format("teaser/egypt/water_01.png"),"teaser/egypt/water_02":Zh.format("teaser/egypt/water_02.png"),"teaser/egypt/water_03":Zh.format("teaser/egypt/water_03.png"),"teaser/lost/intro_static":Zh.format("teaser/lost/intro_static.png"),"teaser/lost/intro_wave_01":Zh.format("teaser/lost/intro_wave_01.png"),"teaser/lost/intro_wave_02":Zh.format("teaser/lost/intro_wave_02.png"),"teaser/lost/knife":Zh.format("teaser/lost/knife.png"),"teaser/lost/map":Zh.format("teaser/lost/map.png"),"teaser/qad/teaser1_1":Zh.format("teaser/qad/teaser1_1.png"),"teaser/qad/teaser1_2":Zh.format("teaser/qad/teaser1_2.png"),"teaser/qad/teaser1_3_a_d":Zh.format("teaser/qad/teaser1_3_a_d.png"),"teaser/qad/teaser1_3_lizard":Zh.format("teaser/qad/teaser1_3_lizard.png"),"teaser/qad/teaser1_3_tyrannosaur":Zh.format("teaser/qad/teaser1_3_tyrannosaur.png"),"teaser/qad/teaser1_3_rabbit":Zh.format("teaser/qad/teaser1_3_rabbit.png"),"teaser/qad/teaser1_3_a_hand":Zh.format("teaser/qad/teaser1_3_a_hand.png"),"teaser/qad/teaser1_3_d_hand":Zh.format("teaser/qad/teaser1_3_d_hand.png"),"teaser/qad/teaser1_3_splash1":Zh.format("teaser/qad/teaser1_3_splash1.png"),"teaser/qad/teaser1_3_splash2":Zh.format("teaser/qad/teaser1_3_splash2.png"),"teaser/qad/teaser2_1":Zh.format("teaser/qad/teaser2_1.png"),"shop/daily_bonus_big":Zh.format("shop/daily_bonus_big.png"),"message_box/artifacts_bkg":Zh.format("message_box/artifacts_bkg.png"),"message_box/border_icon_01":Zh.format("message_box/border_icon_01.png"),"message_box/border_icon_02":Zh.format("message_box/border_icon_02.png"),"tutorial/dialog_help_small":Zh.format("tutorial/dialog_help_small.png"),"tutorial/dialog_help_arrow_up":Zh.format("tutorial/dialog_help_arrow_up.png"),"tutorial/dialog_help_arrow_right":Zh.format("tutorial/dialog_help_arrow_right.png"),"tutorial/dialog_help_arrow_left":Zh.format("tutorial/dialog_help_arrow_left.png"),"tutorial/dialog_help_arrow_down":Zh.format("tutorial/dialog_help_arrow_down.png"),"tutorial/dialog_help":Zh.format("tutorial/dialog_help.png"),"planet/bkg1_256":Zh.format("planet/bkg1_256.png"),"planet/bkg2_512":Zh.format("planet/bkg2_512.png"),"planet/bkg3_1024":Zh.format("planet/bkg3_1024.png"),"planet/bkg_planet_mask_01":Zh.format("planet/bkg_planet_mask_01.png"),"planet/bkg_planet_mask_02":Zh.format("planet/bkg_planet_mask_02.png"),"planet/mission_border":Zh.format("planet/mission_border.png"),"planet/images/water":Zh.format("planet/images/water.png"),"planet/images/pena":Zh.format("planet/images/pena.png"),"planet/images/plankton":Zh.format("planet/images/plankton.png"),"planet/images/earth":Zh.format("planet/images/earth.png"),"planet/images/fire":Zh.format("planet/images/fire.png"),"planet/images/grass":Zh.format("planet/images/grass.png"),"planet/images/ice":Zh.format("planet/images/ice.png"),"planet/images/sand":Zh.format("planet/images/sand.png"),"planet/images/tree":Zh.format("planet/images/tree.png"),"planet/images/swamp":Zh.format("planet/images/swamp.png"),"planet/images/skyscraper":Zh.format("planet/images/skyscraper.png"),"planet/images/airplane":Zh.format("planet/images/airplane.png"),"planet/images/bird":Zh.format("planet/images/bird.png"),"planet/images/clay":Zh.format("planet/images/clay.png"),"planet/images/sun":Zh.format("planet/images/sun.png"),"planet/images/whale":Zh.format("planet/images/whale.png"),"planet/images/arable":Zh.format("planet/images/arable.png"),"planet/images/wheat":Zh.format("planet/images/wheat.png"),"planet/images/reed":Zh.format("planet/images/reed.png"),"planet/images/palm":Zh.format("planet/images/palm.png"),"planet/images/human":Zh.format("planet/images/human.png"),"planet/images/flower":Zh.format("planet/images/flower.png"),"planet/images/hut":Zh.format("planet/images/hut.png"),"planet/images/boat":Zh.format("planet/images/boat.png"),"planet/images/sunflower":Zh.format("planet/images/sunflower.png"),"planet/images/dinosaur":Zh.format("planet/images/dinosaur.png"),"planet/images/dolphin":Zh.format("planet/images/dolphin.png"),"planet/images/egg":Zh.format("planet/images/egg.png"),"planet/images/stone":Zh.format("planet/images/stone.png"),"planet/images/fern":Zh.format("planet/images/fern.png"),"planet/images/house":Zh.format("planet/images/house.png"),"planet/images/mushroom":Zh.format("planet/images/mushroom.png"),"planet/images/octopus":Zh.format("planet/images/octopus.png"),"planet/images/livestock":Zh.format("planet/images/livestock.png"),"planet/images/blood":Zh.format("planet/images/blood.png"),"planet/images/butterfly":Zh.format("planet/images/butterfly.png"),"planet/images/lizard":Zh.format("planet/images/lizard.png"),"planet/images/turtle":Zh.format("planet/images/turtle.png"),"planet/images/apple":Zh.format("planet/images/apple.png"),"planet/images/treant":Zh.format("planet/images/treant.png"),"planet/images/storm":Zh.format("planet/images/storm.png"),"planet/images/locomotive":Zh.format("planet/images/locomotive.png"),"planet/images/rocket":Zh.format("planet/images/rocket.png"),"planet/images/astronaut":Zh.format("planet/images/astronaut.png"),"planet/images/ufo":Zh.format("planet/images/ufo.png"),"planet/images/alien":Zh.format("planet/images/alien.png"),"planet/images/animal":Zh.format("planet/images/animal.png"),"planet/images/dust":Zh.format("planet/images/dust.png"),"planet/images/poison":Zh.format("planet/images/poison.png"),"planet/images/bricks":Zh.format("planet/images/bricks.png"),"planet/images/limestone":Zh.format("planet/images/limestone.png"),"planet/images/book":Zh.format("planet/images/book.png"),"planet/images/wood":Zh.format("planet/images/wood.png"),"planet/images/glass":Zh.format("planet/images/glass.png"),"planet/images/cement":Zh.format("planet/images/cement.png"),"planet/images/ceramics":Zh.format("planet/images/ceramics.png"),"planet/images/wool":Zh.format("planet/images/wool.png"),"planet/images/meat":Zh.format("planet/images/meat.png"),"planet/images/milk":Zh.format("planet/images/milk.png"),"planet/images/tools":Zh.format("planet/images/tools.png"),"planet/images/metal":Zh.format("planet/images/metal.png"),"planet/images/coal":Zh.format("planet/images/coal.png"),"planet/images/seeds":Zh.format("planet/images/seeds.png"),"planet/images/fabric":Zh.format("planet/images/fabric.png"),"planet/images/paper":Zh.format("planet/images/paper.png"),"planet/images/manure":Zh.format("planet/images/manure.png"),"planet/images/saltpetre":Zh.format("planet/images/saltpetre.png"),"planet/images/sulfur":Zh.format("planet/images/sulfur.png"),"planet/images/tobacco":Zh.format("planet/images/tobacco.png"),"planet/images/flour":Zh.format("planet/images/flour.png"),"planet/images/dough":Zh.format("planet/images/dough.png"),"planet/images/bread":Zh.format("planet/images/bread.png"),"planet/images/spirit":Zh.format("planet/images/spirit.png"),"planet/images/beer":Zh.format("planet/images/beer.png"),"planet/images/cigarette":Zh.format("planet/images/cigarette.png"),"planet/images/feather":Zh.format("planet/images/feather.png"),"planet/images/alcoholic":Zh.format("planet/images/alcoholic.png"),"planet/images/assassin":Zh.format("planet/images/assassin.png"),"planet/images/hero":Zh.format("planet/images/hero.png"),"planet/images/hunter":Zh.format("planet/images/hunter.png"),"planet/images/corpse":Zh.format("planet/images/corpse.png"),"planet/images/warrior":Zh.format("planet/images/warrior.png"),"planet/images/pena1":Zh.format("planet/images/pena1.png"),"planet/images/pena3":Zh.format("planet/images/pena3.png"),"planet/images/pena2":Zh.format("planet/images/pena2.png"),"planet/images/lava":Zh.format("planet/images/lava.png"),"planet/images/fish":Zh.format("planet/images/fish.png"),"planet/images/steam":Zh.format("planet/images/steam.png"),"planet/images/ash":Zh.format("planet/images/ash.png"),"planet/images/planet_glow":Zh.format("planet/images/planet_glow.png"),"planet/images/cloud_01":Zh.format("planet/images/cloud_01.png"),"planet/images/cloud_02":Zh.format("planet/images/cloud_02.png"),"planet/images/cloud_03":Zh.format("planet/images/cloud_03.png"),"planet/images/cloud_04":Zh.format("planet/images/cloud_04.png"),"planet/button_rotate_01":Zh.format("planet/button_rotate_01.png"),"planet/button_rotate_02":Zh.format("planet/button_rotate_02.png"),"particles/spiral_3_480":Zh.format("particles/spiral_3_480.png"),"gameover/bkg_game_over":{remove_gameover:null,"default":Zh.format("gameover/bkg_game_over.jpg")},"gameover/end_game_bkg_god":{remove_gameover:null,"default":Zh.format("gameover/end_game_bkg_god.png")},"gameover/end_game_bkg2":{remove_gameover:null,"default":Zh.format("gameover/end_game_bkg2.png")},"message_box/robinzon_advertising_border":{remove_advertising:null,"default":Zh.format("message_box/robinzon_banner_border.png")},"message_box/close_robinzon_advertising":Zh.format("message_box/close_robinzon_banner.png"),"message_box/advertising_Save_the_princess":{remove_advertising:null,"default":Zh.format("message_box/banner_Save_the_princess.png")},"message_box/advertising_bkg":{remove_advertising:null,"default":Zh.format("message_box/banner_bkg.png")},"message_box/advertising_border":{remove_advertising:null,"default":Zh.format("message_box/banner_border.png")},"message_box/advertising_devil_vs_god":{remove_advertising:null,"default":Zh.format("message_box/banner_devil_vs_god.png")},"puzzles_menu/winicon_firework":Zh.format("puzzles_menu/winicon_firework.png"),"puzzles_menu/winicon_ice_cream":Zh.format("puzzles_menu/winicon_ice_cream.png"),"puzzles_menu/winicon_locomotive":Zh.format("puzzles_menu/winicon_locomotive.png"),"puzzles_menu/winicon_robot":Zh.format("puzzles_menu/winicon_robot.png"),"puzzles_menu/winicon_skyscraper":Zh.format("puzzles_menu/winicon_skyscraper.png"),"puzzles_menu/winicon_snow":Zh.format("puzzles_menu/winicon_snow.png"),"puzzles_menu/winicon_tavern":Zh.format("puzzles_menu/winicon_tavern.png"),"puzzles_menu/winicon_valentines_day":Zh.format("puzzles_menu/winicon_valentines_day.png"),"puzzles_menu/winicon_xmastree":Zh.format("puzzles_menu/winicon_xmastree.png"),"message_box/ad_button":Zh.format("message_box/ad_button.png"),"message_box/ad_close":Zh.format("message_box/ad_close.png"),"universe/arrow_left_normal":Zh.format("universe/arrow_left_normal.png"),"universe/arrow_right_normal":Zh.format("universe/arrow_right_normal.png"),"universe/bkg":Zh.format("universe/bkg.jpg"),"universe/btn_place":Zh.format("universe/btn_place.png"),"universe/shadow":Zh.format("universe/shadow.png"),"leaderboards/ava_border_gold":Zh.format("leaderboards/ava_border_gold.png"),"leaderboards/ava_border_normal":Zh.format("leaderboards/ava_border_normal.png"),"leaderboards/ava_profile_border":Zh.format("leaderboards/ava_profile_border.png"),"leaderboards/border_gold":Zh.format("leaderboards/border_gold.png"),"leaderboards/border_normal":Zh.format("leaderboards/border_normal.png"),"leaderboards/cup_01":Zh.format("leaderboards/cup_01.png"),"leaderboards/cup_02":Zh.format("leaderboards/cup_02.png"),"leaderboards/cup_03":Zh.format("leaderboards/cup_03.png"),"leaderboards/flag":Zh.format("leaderboards/flag.png"),"leaderboards/star":Zh.format("leaderboards/star.png"),"leaderboards/profile_border":Zh.format("leaderboards/profile_border.png")}},{type:Dc,assets:{"interface/help":Zh.format("interface/help.png"),"interface/help_puzzle_left":Zh.format("interface/help_puzzle_left.png"),"interface/help_artifact_left":Zh.format("interface/help_artifact_left.png"),"interface/help_artifact_right":Zh.format("interface/help_artifact_right.png"),"interface/help_puzzle_right":Zh.format("interface/help_puzzle_right.png")},override:{help_fragmented:null}},{type:Dc,assets:{"interface/help_artifact_left_fragment_0":Zh.format("interface/help_artifact_left_fragment_0.png"),"interface/help_artifact_left_fragment_1":Zh.format("interface/help_artifact_left_fragment_1.png"),"interface/help_artifact_right_fragment_0":Zh.format("interface/help_artifact_right_fragment_0.png"),"interface/help_artifact_right_fragment_1":Zh.format("interface/help_artifact_right_fragment_1.png"),"interface/help_puzzle_left_fragment_0":Zh.format("interface/help_puzzle_left_fragment_0.png"),"interface/help_puzzle_left_fragment_1":Zh.format("interface/help_puzzle_left_fragment_1.png"),"interface/help_puzzle_left_fragment_2":Zh.format("interface/help_puzzle_left_fragment_2.png"),"interface/help_puzzle_left_fragment_3":Zh.format("interface/help_puzzle_left_fragment_3.png"),"interface/help_puzzle_right_fragment_0":Zh.format("interface/help_puzzle_right_fragment_0.png"),"interface/help_puzzle_right_fragment_1":Zh.format("interface/help_puzzle_right_fragment_1.png"),"interface/help_puzzle_right_fragment_2":Zh.format("interface/help_puzzle_right_fragment_2.png")},override:{"!(help_fragmented)":null}},{type:Dc,assets:{"achievements/20th_century":Zh.format("achievements/20th_century.png"),"achievements/creator_of_life":Zh.format("achievements/creator_of_life.png"),"achievements/fan_club_member":Zh.format("achievements/fan_club_member.png"),"achievements/reviewer":Zh.format("achievements/reviewer.png"),"achievements/creator_of_magic":Zh.format("achievements/creator_of_magic.png"),"achievements/follower":Zh.format("achievements/follower.png"),"achievements/magic_epizode":Zh.format("achievements/magic_epizode.png"),"achievements/robinzon":Zh.format("achievements/robinzon.png"),"achievements/brilliant_inventor":Zh.format("achievements/brilliant_inventor.png"),"achievements/creator_of_modernity":Zh.format("achievements/creator_of_modernity.png"),"achievements/god_of_fun":Zh.format("achievements/god_of_fun.png"),"achievements/master_of_alchemy":Zh.format("achievements/master_of_alchemy.png"),"achievements/science_epizode":Zh.format("achievements/science_epizode.png"),"achievements/creator_of_civilization":Zh.format("achievements/creator_of_civilization.png"),"achievements/creator_of_technology":Zh.format("achievements/creator_of_technology.png"),"achievements/god_of_patience":Zh.format("achievements/god_of_patience.png"),"achievements/master_of_the_new_year":Zh.format("achievements/master_of_the_new_year.png"),"achievements/similar_to_similar":Zh.format("achievements/similar_to_similar.png"),"achievements/creator_of_diversity":Zh.format("achievements/creator_of_diversity.png"),"achievements/deity_of_darkness":Zh.format("achievements/deity_of_darkness.png"),"achievements/good_start":Zh.format("achievements/good_start.png"),"achievements/master_of_the_worlds":Zh.format("achievements/master_of_the_worlds.png"),"achievements/technology_epizode":Zh.format("achievements/technology_epizode.png"),"achievements/creator_of_humanity":Zh.format("achievements/creator_of_humanity.png"),"achievements/doodle_bar":Zh.format("achievements/doodle_bar.png"),"achievements/half_the_kingdom":Zh.format("achievements/half_the_kingdom.png"),"achievements/practice_makes_perfect":Zh.format("achievements/practice_makes_perfect.png"),"achievements/virtues":Zh.format("achievements/virtues.png")},override:{remove_small_achievements:null}},{type:Dc,assets:{"achievements/2x/20th_century":Zh.format("achievements/2x/20th_century.png"),"achievements/2x/creator_of_life":Zh.format("achievements/2x/creator_of_life.png"),"achievements/2x/fan_club_member":Zh.format("achievements/2x/fan_club_member.png"),"achievements/2x/lock_achievement":Zh.format("achievements/2x/lock_achievement.png"),"achievements/2x/reviewer":Zh.format("achievements/2x/reviewer.png"),"achievements/2x/creator_of_magic":Zh.format("achievements/2x/creator_of_magic.png"),"achievements/2x/follower":Zh.format("achievements/2x/follower.png"),"achievements/2x/magic_epizode":Zh.format("achievements/2x/magic_epizode.png"),"achievements/2x/robinzon":Zh.format("achievements/2x/robinzon.png"),"achievements/2x/brilliant_inventor":Zh.format("achievements/2x/brilliant_inventor.png"),"achievements/2x/creator_of_modernity":Zh.format("achievements/2x/creator_of_modernity.png"),"achievements/2x/god_of_fun":Zh.format("achievements/2x/god_of_fun.png"),"achievements/2x/master_of_alchemy":Zh.format("achievements/2x/master_of_alchemy.png"),"achievements/2x/science_epizode":Zh.format("achievements/2x/science_epizode.png"),"achievements/2x/creator_of_civilization":Zh.format("achievements/2x/creator_of_civilization.png"),"achievements/2x/creator_of_technology":Zh.format("achievements/2x/creator_of_technology.png"),"achievements/2x/god_of_patience":Zh.format("achievements/2x/god_of_patience.png"),"achievements/2x/master_of_the_new_year":Zh.format("achievements/2x/master_of_the_new_year.png"),"achievements/2x/similar_to_similar":Zh.format("achievements/2x/similar_to_similar.png"),"achievements/2x/creator_of_diversity":Zh.format("achievements/2x/creator_of_diversity.png"),"achievements/2x/deity_of_darkness":Zh.format("achievements/2x/deity_of_darkness.png"),"achievements/2x/good_start":Zh.format("achievements/2x/good_start.png"),"achievements/2x/master_of_the_worlds":Zh.format("achievements/2x/master_of_the_worlds.png"),"achievements/2x/technology_epizode":Zh.format("achievements/2x/technology_epizode.png"),"achievements/2x/creator_of_humanity":Zh.format("achievements/2x/creator_of_humanity.png"),"achievements/2x/doodle_bar":Zh.format("achievements/2x/doodle_bar.png"),"achievements/2x/half_the_kingdom":Zh.format("achievements/2x/half_the_kingdom.png"),"achievements/2x/practice_makes_perfect":Zh.format("achievements/2x/practice_makes_perfect.png"),"achievements/2x/virtues":Zh.format("achievements/2x/virtues.png")},override:{remove_large_achievements:null}},{type:Dc,assets:{"credits/artist_anim_01":Zh.format("credits/artist_anim_01.png"),"credits/artist_anim_02":Zh.format("credits/artist_anim_02.png"),"credits/artist_anim_03":Zh.format("credits/artist_anim_03.png"),"credits/artist_anim_04":Zh.format("credits/artist_anim_04.png"),"credits/gamedesigner_anim_01":Zh.format("credits/gamedesigner_anim_01.png"),"credits/gamedesigner_anim_02":Zh.format("credits/gamedesigner_anim_02.png"),"credits/gamedesigner_anim_03":Zh.format("credits/gamedesigner_anim_03.png"),"credits/gamedesigner_anim_04":Zh.format("credits/gamedesigner_anim_04.png"),"credits/director_anim_01":Zh.format("credits/director_anim_01.png"),"credits/director_anim_02":Zh.format("credits/director_anim_02.png"),"credits/director_anim_03":Zh.format("credits/director_anim_03.png"),"credits/director_anim_04":Zh.format("credits/director_anim_04.png"),"credits/programmer_anim_01":Zh.format("credits/programmer_anim_01.png"),"credits/programmer_anim_02":Zh.format("credits/programmer_anim_02.png"),"credits/programmer_anim_03":Zh.format("credits/programmer_anim_03.png"),"credits/programmer_anim_04":Zh.format("credits/programmer_anim_04.png"),"credits/musician_anim_01":Zh.format("credits/musician_anim_01.png"),"credits/musician_anim_02":Zh.format("credits/musician_anim_02.png"),"credits/musician_anim_03":Zh.format("credits/musician_anim_03.png"),"credits/musician_anim_04":Zh.format("credits/musician_anim_04.png"),"credits/sm_logo":Zh.format("credits/sm_logo.png")},override:{remove_credits:null}},{type:Dc,assets:{"groups/sketch/1900s":Zh.format("groups/sketch/1900s.png"),"groups/sketch/1910s":Zh.format("groups/sketch/1910s.png"),"groups/sketch/1920s":Zh.format("groups/sketch/1920s.png"),"groups/sketch/1930s":Zh.format("groups/sketch/1930s.png"),"groups/sketch/1940s":Zh.format("groups/sketch/1940s.png"),"groups/sketch/1950s":Zh.format("groups/sketch/1950s.png"),"groups/sketch/1960s":Zh.format("groups/sketch/1960s.png"),"groups/sketch/1970s":Zh.format("groups/sketch/1970s.png"),"groups/sketch/1980s":Zh.format("groups/sketch/1980s.png"),"groups/sketch/1990s":Zh.format("groups/sketch/1990s.png"),"groups/sketch/abstract":Zh.format("groups/sketch/Abstract.png"),"groups/sketch/air":Zh.format("groups/sketch/Air.png"),"groups/sketch/animals":Zh.format("groups/sketch/Animals.png"),"groups/sketch/bar":Zh.format("groups/sketch/Bar.png"),"groups/sketch/basic":Zh.format("groups/sketch/Basic.png"),"groups/sketch/civ":Zh.format("groups/sketch/Civ.png"),"groups/sketch/earth":Zh.format("groups/sketch/Earth.png"),"groups/sketch/egypt":Zh.format("groups/sketch/Egypt.png"),"groups/sketch/evil":Zh.format("groups/sketch/Evil.png"),"groups/sketch/fantasy":Zh.format("groups/sketch/Fantasy.png"),"groups/sketch/fire":Zh.format("groups/sketch/Fire.png"),"groups/sketch/flora":Zh.format("groups/sketch/Flora.png"),"groups/sketch/food":Zh.format("groups/sketch/Food.png"),"groups/sketch/good":Zh.format("groups/sketch/Good.png"),"groups/sketch/hitec":Zh.format("groups/sketch/Hitec.png"),"groups/sketch/human":Zh.format("groups/sketch/Human.png"),"groups/sketch/kitchen":Zh.format("groups/sketch/Kitchen.png"),"groups/sketch/lost_civ":Zh.format("groups/sketch/Lost_civ.png"),"groups/sketch/lost_constructions":Zh.format("groups/sketch/Lost_constructions.png"),"groups/sketch/lost_human":Zh.format("groups/sketch/Lost_human.png"),"groups/sketch/lost_materials":Zh.format("groups/sketch/Lost_materials.png"),"groups/sketch/lost_tools":Zh.format("groups/sketch/Lost_tools.png"),"groups/sketch/magic":Zh.format("groups/sketch/Magic.png"),"groups/sketch/massDestruction":Zh.format("groups/sketch/MassDestruction.png"),"groups/sketch/modernHandWpn":Zh.format("groups/sketch/ModernHandWpn.png"),"groups/sketch/modernWpn":Zh.format("groups/sketch/ModernWpn.png"),"groups/sketch/monsters":Zh.format("groups/sketch/Monsters.png"),"groups/sketch/mystic":Zh.format("groups/sketch/Mystic.png"),"groups/sketch/nature":Zh.format("groups/sketch/Nature.png"),"groups/sketch/professions":Zh.format("groups/sketch/Professions.png"),"groups/sketch/qad":Zh.format("groups/sketch/Qad.png"),"groups/sketch/races":Zh.format("groups/sketch/Races.png"),"groups/sketch/sciFi":Zh.format("groups/sketch/SciFi.png"),"groups/sketch/science":Zh.format("groups/sketch/Science.png"),"groups/sketch/simple":Zh.format("groups/sketch/Simple.png"),"groups/sketch/sins":Zh.format("groups/sketch/Sins.png"),"groups/sketch/social":Zh.format("groups/sketch/Social.png"),"groups/sketch/socialWpn":Zh.format("groups/sketch/SocialWpn.png"),"groups/sketch/tools":Zh.format("groups/sketch/Tools.png"),"groups/sketch/vehicle":Zh.format("groups/sketch/Vehicle.png"),"groups/sketch/virtues":Zh.format("groups/sketch/Virtues.png"),"groups/sketch/water":Zh.format("groups/sketch/Water.png"),"groups/sketch/weapon":Zh.format("groups/sketch/Weapon.png"),"groups/sketch/zoo":Zh.format("groups/sketch/Zoo.png")},override:{remove_sketches:null}}]),"game"),Fc.createGroup("sounds"),Fc.register(ab.generate([{type:Engine.Sound,assets:{"sound/click":_h.format("fx/button_click"),"music/bg1":_h.format("music/music"),"music/bgMain":_h.format("music/doodlegod_menu")},override:{sound_none:null}},{type:Engine.Sound,assets:{"music/bg2":_h.format("music/music2"),"sound/flight":_h.format("fx/combine_elements_1"),"sound/element_click":_h.format("fx/element_click"),"sound/group_open":_h.format("fx/sfx_open_group"),"sound/group_close":_h.format("fx/sfx_close_group"),"sound/tool_bar_btn_appear":_h.format("fx/icon_appear"),"sound/wrong_click":_h.format("fx/element_wrong"),"voice/quest_1_1":_h.format("voice/quest_1_1"),"voice/quest_1_2":_h.format("voice/quest_1_2"),"voice/quest_1_3":_h.format("voice/quest_1_3"),"voice/quest_1_4":_h.format("voice/quest_1_4"),"voice/quest_2_1":_h.format("voice/quest_2_1"),"voice/quest_2_2":_h.format("voice/quest_2_2"),"voice/quest_3_1":_h.format("voice/quest_3_1"),"voice/quest_3_2":_h.format("voice/quest_3_2"),"voice/quest_4_1":_h.format("voice/quest_4_1"),"voice/quest_5_1":_h.format("voice/quest_5_1"),"voice/quest_5_2":_h.format("voice/quest_5_2"),"music/intro_1":_h.format("intro/intro_1"),"music/intro_2":_h.format("intro/intro_2"),"music/intro_3":_h.format("intro/intro_3"),"music/intro_4":_h.format("intro/intro_4"),"voice/new_element":_h.format("voice/new_element_v2_01"),"voice/new_element__1":_h.format("voice/new_element_v2_02"),"voice/miss":_h.format("voice/match3_miss_click_v01"),"voice/miss__1":_h.format("voice/match3_miss_click_v02"),"voice/god_thanks":_h.format("voice/god_thanks_v01"),"voice/god_thanks__1":_h.format("voice/god_thanks_v02"),"sound/new_element":_h.format("fx/new_element_v1"),"sound/new_element__1":_h.format("fx/new_element_v2")},override:{sound_none:null,sound_low:null}},{type:Engine.Sound,assets:{"sound/button_hover":_h.format("fx/button_select"),"sound/flash":_h.format("fx/create_new_element"),"sound/flight__1":_h.format("fx/combine_elements_2"),"sound/flight__2":_h.format("fx/combine_elements_3"),"sound/children_mode_on":_h.format("fx/children_mode"),"sound/buy_inapp":_h.format("fx/credit_take"),"sound/dialog_open":_h.format("fx/dialog_appear"),"sound/god_appear":_h.format("fx/menu_appear"),"sound/daily_bonus_come":_h.format("fx/everyday_bonus_appear"),"sound/dialy_bonus_away":_h.format("fx/everyday_bonus_away"),"sound/bonus_select":_h.format("fx/bonus_select"),"sound/notification_appear":_h.format("fx/natific_appear"),"sound/encyclopedia_open":_h.format("fx/enc_open"),"sound/move":_h.format("fx/window_fold"),"sound/hint":_h.format("fx/use_hint"),"sound/hint_buy":_h.format("fx/shop_buy"),"sound/buy_hint_light1":_h.format("fx/shop_pure_radiance"),"sound/buy_hint_light2":_h.format("fx/buy_divine_light"),"sound/buy_hint_light3":_h.format("fx/buy_eternal_sunshine"),"sound/element_info":_h.format("fx/element_info"),"sound/hint_recharged":_h.format("fx/hint_recharged"),"sound/match_blast":_h.format("fx/match_blast"),"sound/new_element__2":_h.format("fx/new_element_v3"),"sound/new_element__3":_h.format("fx/new_element_v4"),"sound/no":_h.format("fx/no"),"sound/old_element":_h.format("fx/old_element_v1"),"sound/old_element__1":_h.format("fx/old_element_v2"),"sound/synthesis_complete":_h.format("fx/synthesis_complete"),"sound/page_flash":_h.format("fx/page_flash"),"sound/quest_intro_transition":_h.format("fx/sfx_quest_intro_transition"),"sound/gamemodes_screen_transition":_h.format("fx/sfx_gamemodes_screen_transition"),"sound/credits_screen_transistion":_h.format("fx/sfx_credits_screen_transistion"),"sound/doodleuniverse_screen_transition":_h.format("fx/sfx_doodleuniverse_screen_transition"),"sound/select_alphabetical_tab":_h.format("fx/sfx_select_alphabetical_tab"),"sound/gamemode_select":_h.format("fx/sfx_gamemode_select"),"sound/bank_screen_transition":_h.format("fx/sfx_store_screen_transition"),"sound/store_screen_transition":_h.format("fx/sfx_store_screen_transition_mana"),"sound/howtoplay_screen_transition":_h.format("fx/sfx_howtoplay_screen_transition"),"sound/acheivements_screen_transition":_h.format("fx/sfx_acheivements_screen_transition"),"sound/button_blinking":_h.format("fx/sfx_button_blinking"),"sound/credits_screen_whoosh":_h.format("fx/sfx_credits_screen_whoosh"),"sound/doodleuniverse_gameinfo_screen_transistion":_h.format("fx/sfx_doodleuniverse_gameinfo_screen_transistion"),"sound/freeversion_unlock_screen_button":_h.format("fx/sfx_freeversion_unlock_screen_button"),"sound/freeversion_unlock_screen_transition":_h.format("fx/sfx_freeversion_unlock_screen_transition"),"sound/options_screen_transition":_h.format("fx/sfx_options_screen_transition"),"sound/round_ui_button_slidein_or_grow":_h.format("fx/sfx_round_ui_button_slidein_or_grow"),"voice/god_thanks__2":_h.format("voice/god_thanks_v03"),"voice/god_thanks__3":_h.format("voice/god_thanks_v04"),"voice/god_thanks__4":_h.format("voice/god_thanks_v05"),"voice/god_thanks__5":_h.format("voice/god_thanks_v06"),"voice/god_thanks__6":_h.format("voice/god_thanks_v07"),"voice/god_thanks__7":_h.format("voice/god_thanks_v08"),"voice/god_thanks__8":_h.format("voice/god_thanks_v09"),"voice/god_thanks__9":_h.format("voice/god_thanks_v10"),"voice/god_thanks__10":_h.format("voice/god_thanks_v11"),"voice/god_thanks__11":_h.format("voice/god_thanks_v12"),"voice/god_thanks__12":_h.format("voice/god_thanks_v13"),"voice/god_thanks__13":_h.format("voice/god_thanks_v14"),"voice/god_thanks__14":_h.format("voice/god_thanks_v15"),"voice/god_thanks__15":_h.format("voice/god_thanks_v16"),"voice/god_thanks__16":_h.format("voice/god_thanks_v17"),"voice/god_thanks__17":_h.format("voice/god_thanks_v18"),"voice/god_thanks__18":_h.format("voice/god_thanks_v19"),"voice/god_thanks__19":_h.format("voice/god_thanks_v20"),"voice/god_thanks__20":_h.format("voice/god_thanks_v21"),"voice/god_thanks__21":_h.format("voice/god_thanks_v22"),"voice/god_thanks__22":_h.format("voice/god_thanks_v23"),"voice/god_thanks__23":_h.format("voice/god_thanks_v24"),"voice/god_thanks__24":_h.format("voice/god_thanks_v25"),"voice/miss__2":_h.format("voice/match3_miss_click_v03"),"voice/miss__3":_h.format("voice/match3_miss_click_v04"),"voice/miss__4":_h.format("voice/match3_miss_click_v05"),"voice/miss__5":_h.format("voice/match3_miss_click_v06"),"voice/miss__6":_h.format("voice/match3_miss_click_v07"),"voice/miss__7":_h.format("voice/match3_miss_click_v08"),"voice/miss__8":_h.format("voice/match3_miss_click_v09"),"voice/miss__9":_h.format("voice/match3_miss_click_v10"),"voice/miss__10":_h.format("voice/match3_miss_click_v11"),"voice/miss__11":_h.format("voice/match3_miss_click_v12"),"voice/miss__12":_h.format("voice/match3_miss_click_v13"),"voice/miss__13":_h.format("voice/match3_miss_click_v14"),"voice/miss__14":_h.format("voice/match3_miss_click_v15"),"voice/miss__15":_h.format("voice/match3_miss_click_v16"),"voice/miss__16":_h.format("voice/match3_miss_click_v17"),"voice/miss__17":_h.format("voice/match3_miss_click_v18"),"voice/miss__18":_h.format("voice/match3_miss_click_v19"),"voice/miss__19":_h.format("voice/match3_miss_click_v20"),"voice/new_element__2":_h.format("voice/new_element_v2_03"),"voice/new_element__3":_h.format("voice/new_element_v2_04"),"voice/new_element__4":_h.format("voice/new_element_v2_05"),"voice/new_element__5":_h.format("voice/new_element_v2_06"),"voice/new_element__6":_h.format("voice/new_element_v2_07"),"voice/new_element__7":_h.format("voice/new_element_v2_08"),"voice/new_element__8":_h.format("voice/new_element_v2_09"),"voice/new_element__9":_h.format("voice/new_element_v2_10"),"voice/new_element__10":_h.format("voice/new_element_v2_11"),"voice/new_element__11":_h.format("voice/new_element_v2_12"),"voice/new_element__12":_h.format("voice/new_element_v2_13"),"voice/new_element__13":_h.format("voice/new_element_v2_14"),"voice/new_element__14":_h.format("voice/new_element_v2_15"),"voice/new_element__15":_h.format("voice/new_element_v2_16"),"voice/new_element__16":_h.format("voice/new_element_v2_17"),"voice/new_element__17":_h.format("voice/new_element_v2_18"),"voice/new_element__18":_h.format("voice/new_element_v2_19"),"voice/new_element__19":_h.format("voice/new_element_v2_20"),"voice/new_element__20":_h.format("voice/new_element_v2_21"),"voice/new_element__21":_h.format("voice/new_element_v2_22"),"voice/new_element__22":_h.format("voice/new_element_v2_23"),"voice/new_element__23":_h.format("voice/new_element_v2_24"),"voice/new_element__24":_h.format("voice/new_element_v2_25"),"voice/new_element__25":_h.format("voice/new_element_v2_26"),"voice/new_element__26":_h.format("voice/new_element_v2_27"),"voice/new_element__27":_h.format("voice/new_element_v2_28"),"voice/new_element__28":_h.format("voice/new_element_v2_29"),"voice/new_element__29":_h.format("voice/new_element_v2_30"),"voice/new_element__30":_h.format("voice/new_element_v2_31"),"voice/new_element__31":_h.format("voice/new_element_v2_32"),"voice/new_element__32":_h.format("voice/new_element_v2_33"),"voice/new_element__33":_h.format("voice/new_element_v2_34"),"voice/new_element__34":_h.format("voice/new_element_v2_35"),"voice/new_element__35":_h.format("voice/new_element_v2_36"),"voice/new_element__36":_h.format("voice/new_element_v2_37"),"voice/new_element__37":_h.format("voice/new_element_v2_38"),"voice/new_element__38":_h.format("voice/new_element_v2_39"),"voice/new_element__39":_h.format("voice/new_element_v2_40"),"voice/new_element__40":_h.format("voice/new_element_v2_41"),"voice/new_element__41":_h.format("voice/new_element_v2_42"),"voice/new_element__42":_h.format("voice/new_element_v2_43"),"voice/new_element__43":_h.format("voice/new_element_v2_44"),"voice/new_element__44":_h.format("voice/new_element_v2_45"),"voice/new_element__45":_h.format("voice/new_element_v2_46"),"voice/new_element__46":_h.format("voice/new_element_v2_47"),"voice/new_element__47":_h.format("voice/new_element_v2_48"),"voice/new_element__48":_h.format("voice/new_element_v2_49"),"voice/new_element__49":_h.format("voice/new_element_v2_50"),"voice/new_element__50":_h.format("voice/new_element_v2_51"),"voice/new_element__51":_h.format("voice/new_element_v2_52"),"voice/new_element__52":_h.format("voice/new_element_v2_53"),"voice/new_element__53":_h.format("voice/new_element_v2_54"),"voice/new_element__54":_h.format("voice/new_element_v2_55"),"voice/new_element__55":_h.format("voice/new_element_v2_56"),"voice/new_element__56":_h.format("voice/new_element_v2_57"),"voice/new_element__57":_h.format("voice/new_element_v2_58"),"music/doodlegod_store":_h.format("music/doodlegod_store")},override:{sound_none:null,sound_low:null,sound_medium:null}}]),"sounds"),ai++,Fc.createGroup("homeView"),Fc.register(ab.generate([{type:Dc,assets:{"toolbar/sound_on":Zh.format("toolbar/sound_off.png"),"toolbar/sound_off":Zh.format("toolbar/sound_on.png"),"main_menu/scale_big_01":Zh.format("main_menu/scale_big_01.png"),"main_menu/scale_big_02":Zh.format("main_menu/scale_big_02.png"),"main_menu/achivements_button":Zh.format("main_menu/achivements_button.png"),"main_menu/news_button":Zh.format("main_menu/news_button.png"),"main_menu/bkg_main_menu":{mobile:Zh.format("main_menu/bkg_main_menu.jpg"),"default":Zh.format("main_menu/bkg_main_menu.png")},"main_menu/credits_button":Zh.format("main_menu/credits_button.png"),"main_menu/achievements_button":Zh.format("main_menu/achievements_button.png"),"main_menu/options_button":Zh.format("main_menu/options_button.png"),"main_menu/play_button":Zh.format("main_menu/play_button.png"),"main_menu/rays":Zh.format("main_menu/rays.png"),"main_menu/rays_down":Zh.format("main_menu/rays_down.png"),"main_menu/under_play_overlay":Zh.format("main_menu/under_play_overlay.png"),"main_menu/home_screen_bkg":{merge_home_screen:Zh.format("main_menu/home_screen_bkg.png"),"default":null},"elements/border_shadow":Zh.format("elements/border_shadow.png"),"elements/border_solid":Zh.format("elements/border_solid.png"),"elements/border_dotted":Zh.format("elements/border_dotted.png"),"elements/border_gray":Zh.format("elements/border_gray.png"),"elements/border_new_year":Zh.format("elements/border_new_year.png"),"elements/border_orange":Zh.format("elements/border_orange.png"),"elements/border_select":Zh.format("elements/border_select.png"),"elements/not_opened_element":Zh.format("elements/not_opened_element.png"),"interface/book_under_hole_right":Zh.format("interface/book_under_hole_right.png"),"interface/book_hole_right":Zh.format("interface/book_hole_right.png"),"alphabet/alphabetical_search_right":Zh.format("alphabet/alphabetical_search_right.png"),"interface/book_under_hole_left":Zh.format("interface/book_under_hole_left.png"),"interface/book_hole_left":Zh.format("interface/book_hole_left.png"),"alphabet/alphabetical_search_left":Zh.format("alphabet/alphabetical_search_left.png"),"message_box/button_yes":Zh.format("message_box/button_yes.png"),"shop_money/energy_slot_02":Zh.format("shop_money/energy_slot_02.png"),"shop_money/sale_line_little":Zh.format("shop_money/sale_line_little.png"),"interface/button_small_green":Zh.format("interface/button_small_green.png"),"shop_money/energy_slot_03":Zh.format("shop_money/energy_slot_03.png"),"shop_money/energy_slot_04":Zh.format("shop_money/energy_slot_04.png"),"shop_money/energy_slot_05":Zh.format("shop_money/energy_slot_05.png"),"shop_money/energy_slot_infinity_03":Zh.format("shop_money/energy_slot_infinity_03.png"),"shop_money/energy_slot_infinity_01":Zh.format("shop_money/energy_slot_infinity_01.png"),"shop_money/energy_slot_infinity_02":Zh.format("shop_money/energy_slot_infinity_02.png"),"shop_money/pic_in_bank":Zh.format("shop_money/pic_in_bank.png"),"shop_money/sign_viewads":Zh.format("shop_money/sign_viewads.png"),"shop_money/action_box_wide":Zh.format("shop_money/action_box_wide.png"),"shop_money/energy_slot_free":Zh.format("shop_money/energy_slot_free.png"),"interface/plus_energy":Zh.format("interface/plus_energy.png"),"interface/bkg_4_3_book":{portrait:Zh.format("interface/bkg.jpg"),"default":Zh.format("interface/bkg_4_3_book.jpg")},"interface/up_board_2":Zh.format("interface/up_board_2.png"),"interface/glow_under_energy":Zh.format("interface/glow_under_energy.png"),"shop/lightning":Zh.format("shop/lightning.png"),"play_menu/button_main_game":{portrait:Zh.format("play_menu/button_main_game_portret.png"),"default":Zh.format("play_menu/button_main_game.png")},"play_menu/under_buttons":{portrait:null,"default":Zh.format("play_menu/under_buttons.png")},"play_menu/button_quests":Zh.format("play_menu/button_quests.png"),"play_menu/button_puzzles":Zh.format("play_menu/button_puzzles.png"),"play_menu/button_artifacts":Zh.format("play_menu/button_artifacts.png"),"play_menu/button_encyclopedia":{portrait:null,"default":Zh.format("play_menu/button_encyclopedia.png")},"play_menu/button_main_game_select":{portrait:null,"default":Zh.format("play_menu/button_main_game_select.png")},"interface/planet_slots":{portrait:null,"default":Zh.format("interface/planet_slots.png")},"toolbar/back":Zh.format("toolbar/back.png"),"toolbar/btn_profile":Zh.format("toolbar/btn_profile.png"),"toolbar/leaderboards":Zh.format("toolbar/leaderboards.png"),"toolbar/next":{portrait:Zh.format("toolbar/next.png"),"default":null},"toolbar/reset":Zh.format("toolbar/reset.png"),"tree_main_game/tree":{portrait:null,"default":Zh.format("tree_main_game/tree.png")},"tree_main_game/begining":{portrait:null,"default":Zh.format("tree_main_game/begining.png")},"tree_main_game/percent_basic":Zh.format("tree_main_game/percent_basic.png"),"interface/reset":Zh.format("interface/reset.png"),"tree_main_game/technology":{portrait:null,"default":Zh.format("tree_main_game/technology.png")},"tree_main_game/technology_lock":{portrait:null,"default":Zh.format("tree_main_game/technology_lock.png")},"tree_main_game/percent_technology":Zh.format("tree_main_game/percent_technology.png"),"tree_main_game/modern_age":{portrait:null,"default":Zh.format("tree_main_game/modern_age.png")},"tree_main_game/modern_age_lock":{portrait:null,"default":Zh.format("tree_main_game/modern_age_lock.png")},"tree_main_game/percent_modern":Zh.format("tree_main_game/percent_modern.png"),"tree_main_game/world_of_magic":{portrait:null,"default":Zh.format("tree_main_game/world_of_magic.png")},"tree_main_game/world_of_magic_lock":{portrait:null,"default":Zh.format("tree_main_game/world_of_magic_lock.png")},"tree_main_game/percent_magic":Zh.format("tree_main_game/percent_magic.png"),"toolbar/button_toolbar_2":{portrait:null,iOS:Zh.format("toolbar/button_toolbar_2.tga"),"default":Zh.format("toolbar/button_toolbar_2.png")},"toolbar/button_toolbar_2_d":{portrait:null,"default":Zh.format("toolbar/button_toolbar_2_d.png")},"toolbar/language":{portrait:Zh.format("toolbar/language.png"),"default":null},"toolbar/achievements":{portrait:Zh.format("toolbar/achievements.png"),"default":null},"toolbar/log":Zh.format("toolbar/log.png"),"toolbar/planet":Zh.format("toolbar/planet.png"),"toolbar/shop":Zh.format("toolbar/shop.png"),"toolbar/shop_money":Zh.format("toolbar/shop_money.png"),"toolbar/help":Zh.format("toolbar/help.png"),"toolbar/book":Zh.format("toolbar/book.png"),"toolbar/camera":Zh.format("toolbar/camera.png"),"toolbar/credits":Zh.format("toolbar/credits.png"),"toolbar/cloud_sync":Zh.format("toolbar/cloud_sync.png"),"toolbar/exclamation_mark":Zh.format("toolbar/exclamation_mark.png"),"main_menu/go_mobile":Zh.format("main_menu/go_mobile.png"),"toolbar/advertisement":Zh.format("toolbar/banner.png"),"toolbar/menu":Zh.format("toolbar/menu.png"),"toolbar/undo":Zh.format("toolbar/undo.png"),"toolbar/quest_new_year":Zh.format("toolbar/quest_new_year.png"),"toolbar/quest_princess":Zh.format("toolbar/quest_princess.png"),"toolbar/quest_devilvsgod":Zh.format("toolbar/quest_devilvsgod.png"),"toolbar/quest_robinzon":Zh.format("toolbar/quest_robinzon.png"),"toolbar/quest_20th":Zh.format("toolbar/quest_20th.png"),"toolbar/quest_angel_vs_demon":Zh.format("toolbar/quest_angel_vs_demon.png"),"toolbar/double_hint_on":Zh.format("toolbar/double_hint_on.png"),"toolbar/next_epizod":Zh.format("toolbar/next_epizod.png"),"toolbar/wheel_fortune":Zh.format("toolbar/wheel_fortune.png"),"toolbar/du":Zh.format("toolbar/du.png"),"toolbar/du_02":Zh.format("toolbar/du_02.png"),"toolbar/du_03":Zh.format("toolbar/du_03.png"),"toolbar/du_04":Zh.format("toolbar/du_04.png"),"toolbar/du_05":Zh.format("toolbar/du_05.png"),"toolbar/alook":{portrait:Zh.format("toolbar/alook.png"),"default":null},"interface/line":Zh.format("interface/line.png"),"language/de":Zh.format("language/de.png"),"language/en":Zh.format("language/en.png"),"language/es":Zh.format("language/es.png"),"language/fr":Zh.format("language/fr.png"),"language/it":Zh.format("language/it.png"),"language/ja":Zh.format("language/ja.png"),"language/nl":Zh.format("language/nl.png"),"language/pl":Zh.format("language/pl.png"),"language/pt":Zh.format("language/pt.png"),"language/ru":Zh.format("language/ru.png"),"language/sv":Zh.format("language/sv.png"),"language/zh-Hans":Zh.format("language/zh-Hans.png"),"language/zh-Hant":Zh.format("language/zh-Hant.png"),"language/ko":Zh.format("language/ko.png"),"message_box/arrow_right":Zh.format("message_box/arrow_right.png"),"message_box/arrow_left":Zh.format("message_box/arrow_left.png"),"message_box/big_btn":Zh.format("message_box/big_btn.png"),"message_box/news_dialog_body":Zh.format("message_box/news_dialog_body.png"),"message_box/close":Zh.format("message_box/close.png")}},{type:Dc,assets:{"main_menu/god":Zh.format("main_menu/god.png"),"main_menu/name_of_game":ta(window.STORE),"main_menu/space_circle":Zh.format("main_menu/space_circle.png"),"main_menu/star_color_red":Zh.format("main_menu/star_color_red.png")},override:{merge_home_screen:null}}]),"homeView"),Fc.createGroup("boot"),Fc.register(ab.generate([{type:Engine.Font,assets:{font:Ah.format(Bh?"doodlegod_low.fnt":"doodlegod.fnt")}},{type:Engine.Font,assets:{font_universe:Ah.format("universe.fnt")}},{type:Engine.Image,assets:{"rotate/rotate_icon":{portrait:Zh.format("rotate/rotate_icon_landscape.png"),"default":Zh.format("rotate/rotate_icon_portrait.png")},"rotate/rotate_bkg":Zh.format("rotate/rotate_bkg.jpg")}}]),"boot"),Fc.groups.boot.loader.once("complete",function(){Bc.trigger("boot"),Wa(),tc()?Fc.load("loading"):Bc.once("orientationChanged",function(){Fc.load("loading")})}),Fc.groups.homeView.loader.on("complete",function(){wc("homeView"),_a?setTimeout(function(){Fc.load("sounds")},1):Yc.ready?Ta():Yc.once("ready",Ta)}),_a&&(ai++,Fc.groups.sounds.loader.on("progress",function(a){Bc.trigger("loadingProgress",{progress:a,from:"sounds"})}),Fc.groups.sounds.loader.on("complete",function(){wc("sounds"),Yc.ready?Ta():Yc.once("ready",Ta)})),Zc.once(Zc.LANGUAGE_CHANGE,function(){Fc.load("boot")});var db=0;Bc.loadingAssets=0,Bc.on("loadingStarted",function(){db=Engine.now()}),Bc.on("loadingStopped",function(a){db=Engine.now(),setTimeout(function(){Be.hide()},500),Ua()});var fb=Fc._assets;for(var hb in fb)fb[hb].on(Ec.ERROR,function(){var a=hb;return function(){Fc.getById(a)&&setTimeout(function(){Va(a)},1e3)}}());ai++,Fc.groups.loading.loader.on("complete",function(){if(ib=bi+1,wc("loading"),Ae.show(),Engine.rendererType!==Engine.WEBGL_RENDERER){var a=new Engine.Rectangle({opacity:1,color:"black",width:mh,height:nh,x:0,children:[new Engine.Text({name:"text",text:"WebGL not detected!",font:Fc.getById("font"),x:-window.innerWidth/2,width:window.innerWidth,textColor:"white",textAlign:"center"})]});th.appendChild(a)}Bc.trigger("loadingComplete")}),Eh&&(Uh+=2,ai++,Fc.groups.game.loader.on("complete",function(){wc("game"),setTimeout(function(){Fc.load("interface")},1)}),ai++,Fc.groups["interface"].loader.on("complete",function(){wc("interface"),setTimeout(function(){Fc.load("homeView")},1)})),ai++,Fc.groups.atlas.loader.on("complete",function(){wc("atlas"),setTimeout(function(){Eh?Fc.load("game"):Fc.load("homeView")},1)}),Fc.groups.atlas.loader.on("progress",function(a){Bc.trigger("loadingProgress",{progress:a,from:"atlas"})}),Fc.groups.game.loader.on("progress",function(a){Bc.trigger("loadingProgress",{progress:a,from:"game"})}),Fc.groups["interface"].loader.on("progress",function(a){Bc.trigger("loadingProgress",{progress:a,from:"interface"})}),Fc.groups.homeView.loader.on("progress",function(a){Bc.trigger("loadingProgress",{progress:a,from:"homeView"})});var ib=0,jb=0,kb=0;Bc.on("loadingProgress",function(a){var b=0;a&&Vh.indexOf(a.from)>=0&&(b=a.progress/Uh);var c=Wh/Uh+b;isNaN(c)||(jb=c,Ya())});var mb=null,nb=Engine.now();mb=setTimeout(Ya,500),Bc.on("loadGame",function(){Engine.rendererType==Engine.WEBGL_RENDERER&&setTimeout(function(){ob?setTimeout(function(){Fc.load("atlas")},1):(pb=!0,Bc.on("cacheReady",function(){setTimeout(function(){Fc.load("atlas")},1)}))},200)});var ob=!1,pb=!1;Bc.on("ready",function(){Ae.hide(),setTimeout(function(){Fc.unload("loading")},2e3)}),ai++,Za(),Yc.ready?$a():Yc.on("ready",$a)}),Bc.on("ready",function(){function a(){Sg.show({},{fadeDuration:500,fadeDelay:0,fadeIn:!1})}return"facebookinstant"!=Bc.account.type||Bc.account.isConnected()?void a():void Bc.account.once("connected",a)});var fi=function(){function a(a){var b=k,c=[];a.slice();for(a=a.replace(/\s/g,""),b.lastIndex=0;b.exec(a);)a=a.substr(b.lastIndex),b.lastIndex=0,c.push(RegExp.$1);return a.length?null:c}function b(a){var c,d;if(a)for(;c=a.shift();)switch(c){case"(":d=b(a);break;case")":return d;case"&&":d=b(a)&&d;break;case"||":d=b(a)||d;break;case"!":d=!b(a);break;case"true":d=!0;break;case"false":d=!1}return d}function c(c){return b(a(c))}function d(a,b,d){function e(a){var b=k;for(b.lastIndex=0;b.test(a);)a=a.substr(b.lastIndex),b.lastIndex=0;return!a.length}var f={};for(var g in a){var h=g.replace(b,"true").replace(d,"false").replace(/\s/g,"");if(e(h)&&c(h)){var i=a[g];if(null===i)return null;if("string"==typeof i)return i;for(var j in i)f.hasOwnProperty(j)||(f[j]=i[j])}}return f}function e(a){var b="default";return a&&a.forEach(function(a){b+="|"+a}),new RegExp(b,"g")}function f(a,b){var c="false";for(var d in a)a[d].forEach(function(a){b.indexOf(a)<0&&(c+="|"+a)});return new RegExp(c,"g")}function g(a,b,c,e){if(e){var f=d(e,b,c);f&&"object"==typeof f&&(a=Object.merge(f,a))}return a}function h(a,b,c,e){if(e){var f=d(e,b,c);a=f&&"object"==typeof f?Object.merge(a,f):f}return a}function i(a,b,c,e){var f=d(e,b,c);return f?"object"==typeof f&&Object.keys(f).length&&(a=f):a=f,a}function j(a){this.variantGroups={},this.cachedGroups={},a&&a.hasOwnProperty("variants")&&this.setVariantGroups(a.variants),this.variants=[]}var k=/^(true|false|\(|\)|&&|\|\||!)/g;return j.prototype=Object.create(null),j.prototype.constructor=j,j.prototype.variantGroups={},j.prototype.variants=[],j.prototype.set=function(a){var b=this;if(this.cachedGroups.hasOwnProperty(a)){var c=this.cachedGroups[a];c.forEach(function(a){b.variants.remove(a)}),this.variants.add(a)}},j.prototype.clear=function(a){this.variants.remove(a)},j.prototype.setVariantGroups=function(a){var b=this;this.variantGroups=this.variantGroups||{};for(var c in a)a.hasOwnProperty(c)&&(this.variantGroups[c]=a[c],a[c].forEach(function(d){b.cachedGroups[d]=a[c]}))},j.prototype.generate=function(a){a instanceof Array||(a=[a]);var b=this.variants||[],c=this.variantGroups||{},j={},k=e(b),l=f(c,b);return a.forEach(function(a){var b=a.template,c=a.type;for(var e in a.assets){var f=a.assets[e];if(f){var m=null;"object"==typeof f?(m=d(f,k,l),m&&"object"==typeof m&&a["default"]&&(m=g(m,k,l,a["default"]))):"string"==typeof f&&(m=f),m&&(a.override&&(m="string"==typeof m?i(m,k,l,a.override):h(m,k,l,a.override)),m&&("string"==typeof m?j[e]=c(m):j[e]=c(b.format(m))))}}}),j},j}();!function(a){function b(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function c(a,b){return a<<b|a>>>32-b}function d(a,d,e,f,g,h){return b(c(b(b(d,a),b(f,h)),g),e)}function e(a,b,c,e,f,g,h){return d(b&c|~b&e,a,b,f,g,h)}function f(a,b,c,e,f,g,h){return d(b&e|c&~e,a,b,f,g,h)}function g(a,b,c,e,f,g,h){return d(b^c^e,a,b,f,g,h)}function h(a,b,c,e,f,g,h){return d(c^(b|~e),a,b,f,g,h)}function i(a,c){a[c>>5]|=128<<c%32,a[(c+64>>>9<<4)+14]=c;var d,i,j,k,l,m=1732584193,n=-271733879,o=-1732584194,p=271733878;for(d=0;d<a.length;d+=16)i=m,j=n,k=o,l=p,m=e(m,n,o,p,a[d],7,-680876936),p=e(p,m,n,o,a[d+1],12,-389564586),o=e(o,p,m,n,a[d+2],17,606105819),n=e(n,o,p,m,a[d+3],22,-1044525330),m=e(m,n,o,p,a[d+4],7,-176418897),p=e(p,m,n,o,a[d+5],12,1200080426),o=e(o,p,m,n,a[d+6],17,-1473231341),n=e(n,o,p,m,a[d+7],22,-45705983),m=e(m,n,o,p,a[d+8],7,1770035416),p=e(p,m,n,o,a[d+9],12,-1958414417),o=e(o,p,m,n,a[d+10],17,-42063),n=e(n,o,p,m,a[d+11],22,-1990404162),m=e(m,n,o,p,a[d+12],7,1804603682),p=e(p,m,n,o,a[d+13],12,-40341101),o=e(o,p,m,n,a[d+14],17,-1502002290),n=e(n,o,p,m,a[d+15],22,1236535329),m=f(m,n,o,p,a[d+1],5,-165796510),p=f(p,m,n,o,a[d+6],9,-1069501632),o=f(o,p,m,n,a[d+11],14,643717713),n=f(n,o,p,m,a[d],20,-373897302),m=f(m,n,o,p,a[d+5],5,-701558691),p=f(p,m,n,o,a[d+10],9,38016083),o=f(o,p,m,n,a[d+15],14,-660478335),n=f(n,o,p,m,a[d+4],20,-405537848),m=f(m,n,o,p,a[d+9],5,568446438),p=f(p,m,n,o,a[d+14],9,-1019803690),o=f(o,p,m,n,a[d+3],14,-187363961),n=f(n,o,p,m,a[d+8],20,1163531501),m=f(m,n,o,p,a[d+13],5,-1444681467),p=f(p,m,n,o,a[d+2],9,-51403784),o=f(o,p,m,n,a[d+7],14,1735328473),n=f(n,o,p,m,a[d+12],20,-1926607734),m=g(m,n,o,p,a[d+5],4,-378558),p=g(p,m,n,o,a[d+8],11,-2022574463),o=g(o,p,m,n,a[d+11],16,1839030562),n=g(n,o,p,m,a[d+14],23,-35309556),m=g(m,n,o,p,a[d+1],4,-1530992060),p=g(p,m,n,o,a[d+4],11,1272893353),o=g(o,p,m,n,a[d+7],16,-155497632),n=g(n,o,p,m,a[d+10],23,-1094730640),m=g(m,n,o,p,a[d+13],4,681279174),p=g(p,m,n,o,a[d],11,-358537222),o=g(o,p,m,n,a[d+3],16,-722521979),n=g(n,o,p,m,a[d+6],23,76029189),m=g(m,n,o,p,a[d+9],4,-640364487),p=g(p,m,n,o,a[d+12],11,-421815835),o=g(o,p,m,n,a[d+15],16,530742520),n=g(n,o,p,m,a[d+2],23,-995338651),m=h(m,n,o,p,a[d],6,-198630844),p=h(p,m,n,o,a[d+7],10,1126891415),o=h(o,p,m,n,a[d+14],15,-1416354905),n=h(n,o,p,m,a[d+5],21,-57434055),m=h(m,n,o,p,a[d+12],6,1700485571),p=h(p,m,n,o,a[d+3],10,-1894986606),o=h(o,p,m,n,a[d+10],15,-1051523),n=h(n,o,p,m,a[d+1],21,-2054922799),m=h(m,n,o,p,a[d+8],6,1873313359),p=h(p,m,n,o,a[d+15],10,-30611744),o=h(o,p,m,n,a[d+6],15,-1560198380),n=h(n,o,p,m,a[d+13],21,1309151649),m=h(m,n,o,p,a[d+4],6,-145523070),p=h(p,m,n,o,a[d+11],10,-1120210379),o=h(o,p,m,n,a[d+2],15,718787259),n=h(n,o,p,m,a[d+9],21,-343485551),m=b(m,i),n=b(n,j),o=b(o,k),p=b(p,l);return[m,n,o,p]}function j(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function k(a){var b,c=[];for(c[(a.length>>2)-1]=void 0,b=0;b<c.length;b+=1)c[b]=0;for(b=0;b<8*a.length;b+=8)c[b>>5]|=(255&a.charCodeAt(b/8))<<b%32;return c}function l(a){return j(i(k(a),8*a.length))}function m(a,b){var c,d,e=k(a),f=[],g=[];for(f[15]=g[15]=void 0,e.length>16&&(e=i(e,8*a.length)),c=0;16>c;c+=1)f[c]=909522486^e[c],g[c]=1549556828^e[c];return d=i(f.concat(k(b)),512+8*b.length),j(i(g.concat(d),640))}function n(a){var b,c,d="0123456789abcdef",e="";for(c=0;c<a.length;c+=1)b=a.charCodeAt(c),e+=d.charAt(b>>>4&15)+d.charAt(15&b);return e}function o(a){return unescape(encodeURIComponent(a))}function p(a){return l(o(a))}function q(a){return n(p(a))}function r(a,b){return m(o(a),o(b))}function s(a,b){return n(r(a,b))}function t(a,b,c){return b?c?r(b,a):s(b,a):c?p(a):q(a)}"function"==typeof define&&define.amd?define(function(){return t}):a.md5=t}(window);var gi={convertActionName:function(a){var b={STAT_INAPP_BUY:"Purchase",STAT_INAPP_CLICK:"InitiateCheckout",STAT_SHOP_ITEM_CLICK:"StoreClick",STAT_SHOP_ITEM_BUY:"StoreBuy",STAT_SHOP_ITEM_SOLD:"StoreSell",STAT_LOGIN_SUCCESSFUL:"Login"};return b[a]?b[a]:null},convertParams:function(a,b){var c={STAT_INAPP_CLICK:this.generateInappBuyParams,STAT_INAPP_BUY:this.generateInappBuyParams,STAT_SHOP_ITEM_CLICK:this.generateContendIdsParams,STAT_SHOP_ITEM_BUY:this.generateContendIdsParams,STAT_SHOP_ITEM_SOLD:this.generateContendIdsParams};return c[a]?"function"==typeof c[a]?c[a](b):c[a]:void 0},trackFromStats:function(a,b){var c=this.convertActionName(a);if(c){var d=this.convertParams(a,b);this.track(c,d)}},track:function(a,b){"undefined"!=typeof fbq&&fbq("track",a,b)},generateContendIdsParams:function(a){var b={},c=a.amount;return b.id=[c],b},generateInappBuyParams:function(a){var b={},c=a.amount;if(0==c.indexOf("quest")){var d=Bc.chapters.getChapterById(c);b.value=d.getInappPrice(),b.currency=d.getCurrencyPrice()}else{var e=Bc.manaShop.bank.getBoxById(c);b.value=e.price,b.currency=e.currency}return b.id=[c],b}};(function(){function a(a,b,c){var d=b&&c||0,e=0;for(b=b||[],a.toLowerCase().replace(/[0-9a-f]{2}/g,function(a){16>e&&(b[d+e++]=n[a])});16>e;)b[d+e++]=0;return b}function b(a,b){var c=b||0,d=m;return d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+"-"+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]+d[a[c++]]}function c(a,c,d){var e=c&&d||0,f=c||[];a=a||{};var g=null!=a.clockseq?a.clockseq:r,h=null!=a.msecs?a.msecs:(new Date).getTime(),i=null!=a.nsecs?a.nsecs:t+1,j=h-s+(i-t)/1e4;if(0>j&&null==a.clockseq&&(g=g+1&16383),(0>j||h>s)&&null==a.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,t=i,r=g,h+=122192928e5;var k=(1e4*(268435455&h)+i)%4294967296;f[e++]=k>>>24&255,f[e++]=k>>>16&255,f[e++]=k>>>8&255,f[e++]=255&k;var l=h/4294967296*1e4&268435455;f[e++]=l>>>8&255,f[e++]=255&l,f[e++]=l>>>24&15|16,f[e++]=l>>>16&255,f[e++]=g>>>8|128,f[e++]=255&g;for(var m=a.node||q,n=0;6>n;n++)f[e+n]=m[n];return c?c:b(f)}function d(a,c,d){var f=c&&d||0;"string"==typeof a&&(c="binary"==a?new l(16):null,a=null),a=a||{};var g=a.random||(a.rng||e)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,c)for(var h=0;16>h;h++)c[f+h]=g[h];return c||b(g)}var e,f=window,g=f.crypto||f.msCrypto;if("function"==typeof f.require)try{var h=f.require("crypto").randomBytes;e=h&&function(){return h(16)}}catch(i){}if(!e&&g&&g.getRandomValues){var j=new Uint8Array(16);e=function(){return g.getRandomValues(j),j}}if(!e){var k=new Array(16);e=function(){for(var a,b=0;16>b;b++)0===(3&b)&&(a=4294967296*Math.random()),k[b]=a>>>((3&b)<<3)&255;return k}}for(var l="function"==typeof f.Buffer?f.Buffer:Array,m=[],n={},o=0;256>o;o++)m[o]=(o+256).toString(16).substr(1),n[m[o]]=o;var p=e(),q=[1|p[0],p[1],p[2],p[3],p[4],p[5]],r=16383&(p[6]<<8|p[7]),s=0,t=0,u=d;if(u.v1=c,u.v4=d,u.parse=a,u.unparse=b,u.BufferClass=l,"undefined"!=typeof module&&module.exports)module.exports=u;else if("function"==typeof define&&define.amd)define(function(){return u});else{var v=f.uuid;u.noConflict=function(){return f.uuid=v,u},f.uuid=u}}).call(this)}();})();