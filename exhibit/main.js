let globalScene,phaserGame,selfMe,config={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,parent:"phaser-app",width:1210,height:920},antialias:!0,backgroundColor:"#000000",parent:"phaser-example",scene:{preload:preload,create:create,update:update},fps:{target:10}},game=new Phaser.Game(config),gameVars={baseSway:.015,gameStarted:!1,gameConstructed:!1,mousedown:!1,mouseposx:0,mouseposy:0,prevMouseposx:0,prevMouseposy:0,mouseaccx:0,mouseaccy:0,lastmousedown:{x:0,y:0},width:1220,halfWidth:610,height:920,halfHeight:460,horrorPoint:!1,darkPoint:!1,isFrozen:!1,lastLoadingWelcomeRef:null,walkSlow:!1,initialExtraDark:0},oneTimeScares={},gameObjectsTemp={},gameVarsTemp={darkFlickerCountdown:1e3},gameObjects={buttonList:[],draggedObj:null,loadingWelcomes:[],noteList:[],starPressSequence:[]},updateFuncList=[];function preload(){game.canvas;phaserGame=this,selfMe=this,gameObjects.exhibCntr=this.add.container(0,0),gameObjects.exhibCntr.goalOffsetX=0,gameObjects.exhibCntr.goalOffsetY=0,gameObjects.exhibCntr.offsetX=0,gameObjects.exhibCntr.offsetY=0,gameObjects.exhibCntr.offsetAccX=0,gameObjects.exhibCntr.offsetAccY=0,gameObjects.exhibCntr.swayX=0,gameObjects.exhibCntr.swayY=0,gameObjects.exhibCntr.swayAccX=0,gameObjects.exhibCntr.swayAccY=0,gameObjects.exhibCntr.swayAmt=0,gameObjects.shadowCntr=this.add.container(0,0),gameObjects.portraitCntr=this.add.container(0,0),gameObjects.btnCntr=this.add.container(0,0),gameObjects.hueCntr=this.add.container(0,0),gameObjects.darkCtnr=this.add.container(0,0),gameObjects.mainDarkCntr=this.add.container(0,0),gameObjects.topBtnCntr=this.add.container(0,0),gameObjects.sfxTopCtnr=this.add.container(0,0),gameObjects.loadingCntr=this.add.container(0,0),gameObjects.loadingCntr.goalOffsetX=0,gameObjects.loadingCntr.goalOffsetY=0,gameObjects.loadingCntr.offsetX=0,gameObjects.loadingCntr.offsetY=0,gameObjects.loadingCntr.offsetAccX=0,gameObjects.loadingCntr.offsetAccY=0,gameObjects.loadingCntr.shakeAccX=0,gameObjects.loadingCntr.shakeAccY=0,gameObjects.loadingCntr.swayX=0,gameObjects.loadingCntr.swayY=0,gameObjects.loadingCntr.swayAccX=0,gameObjects.loadingCntr.swayAccY=0,gameObjects.loadingCntr.swayAmt=0,this.load.image("whitePixel","sprites/white_pixel.png"),this.load.image("blackPixel","sprites/black_pixel.png"),this.load.image("darkBluePixel","sprites/dark_blue_pixel.png"),this.load.image("hand","sprites/mouse.png"),this.load.image("handPoint","sprites/mouse_point.png"),this.load.image("headphones","sprites/headphones.png")}function create(){onPreloadComplete(this)}function onPreloadComplete(e){setupHand(e),globalScene=e,gameObjectsTemp.loadingText=e.add.text(gameVars.halfWidth,gameVars.halfHeight-50,"LOADING",{fontFamily:"Times New Roman",fontSize:38,color:"#ffffff",align:"center"}),gameObjectsTemp.loadingText.setOrigin(.5,.5),gameObjectsTemp.loadingText.setDepth(1),gameObjectsTemp.loadingBarBacking=e.add.image(gameVars.halfWidth,gameVars.height-30,"whitePixel"),gameObjectsTemp.loadingBarBacking.alpha=.25,gameObjectsTemp.loadingBarBacking.scaleY=3,gameObjectsTemp.loadingBarBacking.scaleX=100,gameObjectsTemp.loadingBarBacking.setDepth(1),gameObjectsTemp.loadingBar=e.add.image(gameVars.halfWidth,gameVars.height-30,"whitePixel"),gameObjectsTemp.loadingBar.scaleY=3,gameObjectsTemp.loadingBar.setDepth(1),gameObjectsTemp.warningText=e.add.text(gameVars.halfWidth,gameVars.height-185,"Warning: This game contains content some players may find disturbing",{fontFamily:"Times New Roman",fontSize:18,color:"#ffffff",align:"center"}),gameObjectsTemp.warningText.setOrigin(.5,.5),gameObjectsTemp.warningText.setDepth(1),gameObjectsTemp.headphones=e.add.image(gameVars.halfWidth,gameVars.height-135,"headphones"),gameObjectsTemp.headphoneText=e.add.text(gameVars.halfWidth,gameVars.height-90,"For the best experience, play with headphones",{fontFamily:"Times New Roman",fontSize:18,color:"#ffffff",align:"center"}),gameObjectsTemp.headphoneText.setOrigin(.5,.5),gameObjectsTemp.headphoneText.setDepth(1),e.load.on("progress",function(e){gameVarsTemp.loadAmt=e}),e.load.on("complete",()=>{onLoadComplete(e)}),e.load.image("handPointBlood","sprites/mouse_point_blood.png"),e.load.multiatlas("menu","sprites/menu/menu.json"),e.load.multiatlas("loadingSS","sprites/loading/loadingSS.json"),e.load.multiatlas("bgs","sprites/backgrounds/backgrounds.json"),e.load.multiatlas("roomPump","sprites/roompump/roompump.json"),e.load.multiatlas("roomFaucet","sprites/roomfaucet/roomfaucet.json"),e.load.multiatlas("roomHandy","sprites/roomhandy/roomhandy.json"),e.load.multiatlas("roomStretch","sprites/roomstretch/roomstretch.json"),e.load.multiatlas("roomJack","sprites/roomjack/roomjack.json"),e.load.multiatlas("roomClown","sprites/clown/clown.json"),e.load.multiatlas("flashScreens","sprites/flashscreens/flashscreens.json"),e.load.multiatlas("staticScreens","sprites/staticscreens/staticscreens.json"),e.load.multiatlas("staticLite","sprites/staticscreens/staticlite.json"),e.load.multiatlas("buttons","sprites/buttons/buttons.json"),e.load.multiatlas("misc","sprites/misc/misc.json"),e.load.audio("loadingMusic","audio/loadingmusic.mp3"),e.load.audio("click1","audio/click1.mp3"),e.load.audio("click2","audio/click2.mp3"),e.load.audio("click3","audio/click3.mp3"),e.load.audio("click4","audio/click4.mp3"),e.load.audio("airpump","audio/airpump.mp3"),e.load.audio("doorslam","audio/doorslam.mp3"),e.load.audio("dooropen","audio/dooropen.mp3"),e.load.audio("dooropen2","audio/dooropen2.mp3"),e.load.audio("squeakopen","audio/squeakopen.mp3"),e.load.audio("lidslam","audio/lidslam.mp3"),e.load.audio("creepysfx","audio/creepysfx.mp3"),e.load.audio("void","audio/void.mp3"),e.load.audio("metalgrind1","audio/metalgrind1.mp3"),e.load.audio("metalgrind2","audio/metalgrind2.mp3"),e.load.audio("metalgrind3","audio/metalgrind3.mp3"),e.load.audio("metalgrind4","audio/metalgrind4.mp3"),e.load.audio("metalsqueak1","audio/metalsqueak1.mp3"),e.load.audio("metalsqueak2","audio/metalsqueak2.mp3"),e.load.audio("keyfound","audio/keyfound.mp3"),e.load.audio("keyget","audio/keyget.mp3"),e.load.audio("keygetred","audio/keygetred.mp3"),e.load.audio("deepbell1","audio/deepbell1.mp3"),e.load.audio("deepbell2","audio/deepbell2.mp3"),e.load.audio("deepbell3","audio/deepbell3.mp3"),e.load.audio("deepbell4","audio/deepbell4.mp3"),e.load.audio("deepbell5","audio/deepbell5.mp3"),e.load.audio("fan1","audio/fan1.mp3"),e.load.audio("fan2","audio/fan2.mp3"),e.load.audio("nyaha","audio/nyaha.mp3"),e.load.audio("muffle1","audio/muffle1.mp3"),e.load.audio("muffle2","audio/muffle2.mp3"),e.load.audio("muffle3","audio/muffle3.mp3"),e.load.audio("muffle4","audio/muffle4.mp3"),e.load.audio("muffle5","audio/muffle5.mp3"),e.load.audio("muffle6","audio/muffle6.mp3"),e.load.audio("muffle7","audio/muffle7.mp3"),e.load.audio("muffle8","audio/muffle8.mp3"),e.load.audio("splurt","audio/splurt.mp3"),e.load.audio("watergurgle","audio/watergurgle.mp3"),e.load.audio("a7","audio/notes/a7.mp3"),e.load.audio("b7","audio/notes/b7.mp3"),e.load.audio("c7","audio/notes/c7.mp3"),e.load.audio("c7b","audio/notes/c7b.mp3"),e.load.audio("d7","audio/notes/d7.mp3"),e.load.audio("e7","audio/notes/e7.mp3"),e.load.audio("e7b","audio/notes/e7b.mp3"),e.load.audio("f7","audio/notes/f7.mp3"),e.load.audio("f7b","audio/notes/f7b.mp3"),e.load.audio("g6","audio/notes/g6.mp3"),e.load.audio("g6s","audio/notes/g6s.mp3"),e.load.audio("g7","audio/notes/g7.mp3"),e.load.audio("c8","audio/notes/c8.mp3"),e.load.audio("rubber1","audio/rubber1.mp3"),e.load.audio("rubber2","audio/rubber2.mp3"),e.load.audio("rubber3","audio/rubber3.mp3"),e.load.audio("rubber4","audio/rubber4.mp3"),e.load.audio("rubber5","audio/rubber5.mp3"),e.load.audio("rubber6","audio/rubber6.mp3"),e.load.audio("rubber7","audio/rubber7.mp3"),e.load.audio("rubber8","audio/rubber8.mp3"),e.load.audio("tear1","audio/tear1.mp3"),e.load.audio("tear2","audio/tear2.mp3"),e.load.audio("tear3","audio/tear3.mp3"),e.load.audio("tear4","audio/tear4.mp3"),e.load.audio("tear5","audio/tear5.mp3"),e.load.audio("tear6","audio/tear6.mp3"),e.load.audio("sing1","audio/sing1.mp3"),e.load.audio("glassbreak","audio/glassbreak.mp3"),e.load.audio("flickeron","audio/flickeron.mp3"),e.load.audio("horrortrack1","audio/horrortrack1.mp3"),e.load.audio("groundthud2","audio/groundthud2.mp3"),e.load.audio("emerge1","audio/emerge1.mp3"),e.load.audio("emerge2","audio/emerge2.mp3"),e.load.audio("squeak1","audio/squeak1.mp3"),e.load.audio("squeak2","audio/squeak2.mp3"),e.load.audio("squeak3","audio/squeak3.mp3"),e.load.audio("stopmusic","audio/stopmusic.mp3"),e.load.audio("gladiator0","audio/gladiator0.mp3"),e.load.audio("gladiator1","audio/gladiator1.mp3"),e.load.audio("gladiator2","audio/gladiator2.mp3"),e.load.audio("gladiatorx","audio/gladiatorx.mp3"),e.load.audio("pumpamb","audio/pumpamb.mp3"),e.load.audio("shout1","audio/shout1.mp3"),e.load.audio("shout2","audio/shout2.mp3"),e.load.audio("shout3","audio/shout3.mp3"),e.load.audio("shout4","audio/shout4.mp3"),e.load.audio("shout5","audio/shout5.mp3"),e.load.audio("clownlaugh1","audio/clownlaugh1.mp3"),e.load.audio("clownlaugh2","audio/clownlaugh2.mp3"),e.load.audio("clownlaughfinal","audio/clownlaughfinal.mp3"),e.load.image("candleBright","sprites/candleBright.png"),e.load.image("candleDark","sprites/candleDark.png"),e.load.image("shinelight","sprites/shinelight.png"),e.load.image("redlight","sprites/redlight.png"),e.load.image("generalDim","sprites/generalDim.png"),e.load.image("theEnd","sprites/altreality/the_end.jpg"),e.load.image("stretch1","sprites/altreality/stretch1.jpg"),e.load.image("stretch2","sprites/altreality/stretch2.jpg"),e.load.image("stretch3","sprites/altreality/stretch3.jpg"),e.load.image("stretch4","sprites/altreality/stretch4.jpg"),e.load.image("stretch5","sprites/altreality/stretch5.jpg"),e.load.image("stretch6","sprites/altreality/stretch6.jpg"),e.load.image("floaty1","sprites/altreality/floaty1.jpg"),e.load.image("floaty2","sprites/altreality/floaty2.jpg"),e.load.image("floaty3","sprites/altreality/floaty3.jpg"),e.load.image("floaty4","sprites/altreality/floaty4.jpg"),e.load.image("balloon1","sprites/altreality/balloon1.jpg"),e.load.image("balloon2","sprites/altreality/balloon2.jpg"),e.load.image("balloon3","sprites/altreality/balloon3.jpg"),e.load.image("balloon4","sprites/altreality/balloon4.jpg"),e.load.image("balloon5","sprites/altreality/balloon5.jpg"),e.load.start()}function onLoadComplete(e){gameObjectsTemp.loadingBg=e.add.image(gameVars.halfWidth,gameVars.halfHeight,"blackPixel"),gameObjectsTemp.loadingBg.scaleX=1e3,gameObjectsTemp.loadingBg.scaleY=1e3,gameObjects.loadingCntr.add(gameObjectsTemp.loadingBg),e.tweens.timeline({targets:[gameObjectsTemp.loadingText],tweens:[{alpha:0,duration:150}]}),gameObjectsTemp.brightLight=e.add.image(gameVars.halfWidth,gameVars.halfHeight-50,"loadingSS","bright_light"),gameObjectsTemp.brightLight.scaleX=1,gameObjectsTemp.brightLight.scaleY=1,gameObjectsTemp.brightLight.alpha=0,gameObjects.loadingCntr.add(gameObjectsTemp.brightLight),gameObjectsTemp.loadingWelcome=makeWelcomeImage("loading_welcome"),gameObjects.loadingCntr.add(gameObjectsTemp.loadingWelcome),gameObjectsTemp.loadingWelcome.rotation=0,gameObjectsTemp.loadingWelcome.alpha=0,gameObjectsTemp.loadingWelcome.scaleX=.8,gameObjectsTemp.loadingWelcome.scaleY=.8,e.tweens.timeline({targets:[gameObjectsTemp.loadingWelcome],tweens:[{alpha:.01,duration:1,onComplete:()=>{gameObjects.startGameButton=new Button(e,gameObjects.loadingCntr,()=>{startGame(e)},{ref:"transparent_pixel",atlas:"loadingSS",x:gameVars.halfWidth,y:gameVars.halfHeight-60,scaleX:240,scaleY:160})}},{alpha:1,duration:400}]})}function onLoadAnimComplete(e){e.tweens.timeline({targets:[gameObjectsTemp.loadingBar,gameObjectsTemp.loadingBarBacking],tweens:[{offset:0,scaleY:0,ease:"Cubic.easeOut",duration:600},{offset:0,alpha:0,scaleX:800,duration:600,onComplete:()=>{gameObjectsTemp.loadingBar.destroy(),gameObjectsTemp.loadingBarBacking.destroy()}}]}),e.tweens.timeline({targets:[gameObjectsTemp.headphones,gameObjectsTemp.headphoneText,gameObjectsTemp.warningText],tweens:[{alpha:.5,duration:250}]})}function startGame(e){gameObjects.loadingMusic=e.sound.add("loadingMusic"),gameObjects.loadingMusic.play(),gameObjects.startGameButton.destroy(),gameVars.gameStarted=!0,gameObjects.scene=e,setupGame(e),gameObjectsTemp.blackTeeth=e.add.image(gameVars.halfWidth,gameVars.halfHeight-50,"menu","teethBlack"),gameObjectsTemp.blackTeeth.scaleX=1.6,gameObjectsTemp.blackTeeth.scaleY=1.6,gameObjectsTemp.blackTeethAnim=e.tweens.timeline({targets:[gameObjectsTemp.blackTeeth],tweens:[{scaleX:1.45,scaleY:1.45,ease:"Quad.easeIn",duration:3e3}]}),e.tweens.timeline({targets:[gameObjectsTemp.headphones,gameObjectsTemp.headphoneText,gameObjectsTemp.warningText],tweens:[{alpha:0,duration:260,onComplete:()=>{gameObjectsTemp.headphones.destroy(),gameObjectsTemp.headphoneText.destroy(),gameObjectsTemp.warningText.destroy()}}]}),gameObjects.clickBlocker=new Button(e,gameObjects.loadingCntr,()=>{console.log("blocked game")},{ref:"transparent_pixel",atlas:"loadingSS",x:gameVars.halfWidth,y:gameVars.halfHeight,scaleX:2e3,scaleY:2e3});e.tweens.timeline({targets:[gameObjectsTemp.brightLight],tweens:[{alpha:1.2,scaleX:3,scaleY:3,duration:2500,ease:"Quad.easeOut"}]}),e.tweens.timeline({targets:[gameObjectsTemp.loadingWelcome],tweens:[{rotation:.01,scaleX:1.14,scaleY:1.14,duration:2500,ease:"Quad.easeIn"}]}),gameObjectsTemp.circleLoading=[],e.tweens.timeline({targets:[gameObjectsTemp.loadingWelcome],tweens:[{alpha:.999,duration:800},{alpha:0,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x1",!0),addToUpdateFuncList(updateWelcomeFollower)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x2",!0)}},{alpha:.001,duration:400,onStart:()=>{let a=e.add.image(gameVars.halfWidth,gameVars.halfHeight-50-105,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),e.tweens.add({targets:a,y:gameVars.halfHeight-50-165,duration:1500}),makeWelcomeImage("loading_welcome_x3",!0)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x4",!0)}},{alpha:.001,duration:350,onStart:()=>{let a=e.add.image(gameVars.halfWidth+155,gameVars.halfHeight-50+70,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),e.tweens.add({targets:a,x:gameVars.halfWidth+250,y:gameVars.halfHeight-50+110,duration:1300}),makeWelcomeImage("loading_welcome_x5",!0)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x6",!0)}},{alpha:.001,duration:300,onStart:()=>{let a=e.add.image(gameVars.halfWidth-190,gameVars.halfHeight-50-75,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),e.tweens.add({targets:a,x:gameVars.halfWidth-250,y:gameVars.halfHeight-50-100,duration:1e3}),makeWelcomeImage("loading_welcome_x7",!0)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x8",!0)}},{alpha:.001,duration:200,onStart:()=>{let a=e.add.image(gameVars.halfWidth,gameVars.halfHeight-50+135,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),e.tweens.add({targets:a,y:gameVars.halfHeight-50+185,duration:700}),makeWelcomeImage("loading_welcome_x9",!0)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x10",!0)}},{alpha:.001,duration:150,onStart:()=>{let a=e.add.image(gameVars.halfWidth+250,gameVars.halfHeight-50-100,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),makeWelcomeImage("loading_welcome_x11",!0)}},{alpha:.001,duration:10,onStart:()=>{makeWelcomeImage("loading_welcome_x12",!0)}},{alpha:.001,duration:500,onStart:()=>{let a=e.add.image(gameVars.halfWidth-250,gameVars.halfHeight-50+110,"loadingSS","circle");gameObjectsTemp.circleLoading.push(a),gameObjects.loadingCntr.add(a),makeWelcomeImage("loading_welcome_x13",!0)},onComplete:()=>{removeFromUpdateFuncList(updateWelcomeFollower),gameObjects.loadingMusic.stop(),gameVars.gameConstructed=!0;for(let e in gameObjects.loadingWelcomes)gameObjects.loadingWelcomes[e].destroy();for(let e=0;e<gameObjectsTemp.circleLoading.length;e++)gameObjectsTemp.circleLoading[e].destroy();gameObjectsTemp.brightLight.destroy(),gameObjects.clickBlocker.destroy(),gameObjectsTemp.loadingBg.destroy(),gameObjectsTemp.blackTeeth.destroy(),gameObjectsTemp.blackTeethAnim.destroy(),setTimeout(()=>{gameObjects.sounds.gladiator0.play({loop:!0}),gameObjects.sounds.gladiator0.volume=.6,tweenVolume("gladiator0",.7)},0),setTimeout(()=>{addToUpdateFuncList(flipEntryLights)},350),setTimeout(()=>{gameVarsTemp.hasMoved||ftueMoveButton()},4e3)}}]})}function updateWelcomeFollower(){gameObjectsTemp.loadingWelcomeFollower.scaleX=2*gameObjectsTemp.loadingWelcome.scaleX,gameObjectsTemp.loadingWelcomeFollower.scaleY=2*gameObjectsTemp.loadingWelcome.scaleY;let e=.86*gameObjectsTemp.loadingWelcome.scaleX*(1+.12*gameObjectsTemp.loadingWelcome.scaleX),a=.86*gameObjectsTemp.loadingWelcome.scaleY*(1+.12*gameObjectsTemp.loadingWelcome.scaleY);for(let t=0;t<gameObjectsTemp.circleLoading.length;t++){let s=gameObjectsTemp.circleLoading[t];s.scaleX=e*(1+.45*Math.random()),s.scaleY=a*(1+.45*Math.random())}}function initializeSounds(e){gameObjects.sounds={a7:e.sound.add("a7"),b7:e.sound.add("b7"),c7:e.sound.add("c7"),c7b:e.sound.add("c7b"),d7:e.sound.add("d7"),e7:e.sound.add("e7"),e7b:e.sound.add("e7b"),f7:e.sound.add("f7"),f7b:e.sound.add("f7b"),g6:e.sound.add("g6"),g6s:e.sound.add("g6s"),g7:e.sound.add("g7"),c8:e.sound.add("c8"),click1:e.sound.add("click1"),click2:e.sound.add("click2"),click3:e.sound.add("click3"),click4:e.sound.add("click4"),clownlaugh1:e.sound.add("clownlaugh1"),clownlaugh2:e.sound.add("clownlaugh2"),clownlaughfinal:e.sound.add("clownlaughfinal"),airpump:e.sound.add("airpump"),doorslam:e.sound.add("doorslam"),dooropen:e.sound.add("dooropen"),dooropen2:e.sound.add("dooropen2"),squeakopen:e.sound.add("squeakopen"),lidslam:e.sound.add("lidslam"),creepysfx:e.sound.add("creepysfx"),void:e.sound.add("void"),metalgrind1:e.sound.add("metalgrind1"),metalgrind2:e.sound.add("metalgrind2"),metalgrind3:e.sound.add("metalgrind3"),metalgrind4:e.sound.add("metalgrind4"),metalsqueak1:e.sound.add("metalsqueak1"),metalsqueak2:e.sound.add("metalsqueak2"),keyfound:e.sound.add("keyfound"),keyget:e.sound.add("keyget"),keygetred:e.sound.add("keygetred"),deepbell1:e.sound.add("deepbell1"),deepbell2:e.sound.add("deepbell2"),deepbell3:e.sound.add("deepbell3"),deepbell4:e.sound.add("deepbell4"),deepbell5:e.sound.add("deepbell5"),fan1:e.sound.add("fan1"),fan2:e.sound.add("fan2"),nyaha:e.sound.add("nyaha"),rubber1:e.sound.add("rubber1"),rubber2:e.sound.add("rubber2"),rubber3:e.sound.add("rubber3"),rubber4:e.sound.add("rubber4"),rubber5:e.sound.add("rubber5"),rubber6:e.sound.add("rubber6"),rubber7:e.sound.add("rubber7"),rubber8:e.sound.add("rubber8"),tear1:e.sound.add("tear1"),tear2:e.sound.add("tear2"),tear3:e.sound.add("tear3"),tear4:e.sound.add("tear4"),tear5:e.sound.add("tear5"),tear6:e.sound.add("tear6"),muffle1:e.sound.add("muffle1"),muffle2:e.sound.add("muffle2"),muffle3:e.sound.add("muffle3"),muffle4:e.sound.add("muffle4"),muffle5:e.sound.add("muffle5"),muffle6:e.sound.add("muffle6"),muffle7:e.sound.add("muffle7"),muffle8:e.sound.add("muffle8"),splurt:e.sound.add("splurt"),watergurgle:e.sound.add("watergurgle"),sing1:e.sound.add("sing1"),glassbreak:e.sound.add("glassbreak"),flickeron:e.sound.add("flickeron"),horrortrack1:e.sound.add("horrortrack1"),groundthud2:e.sound.add("groundthud2"),emerge1:e.sound.add("emerge1"),emerge2:e.sound.add("emerge2"),squeak1:e.sound.add("squeak1"),squeak2:e.sound.add("squeak2"),squeak3:e.sound.add("squeak3"),stopmusic:e.sound.add("stopmusic"),gladiator0:e.sound.add("gladiator0"),gladiator1:e.sound.add("gladiator1"),gladiator2:e.sound.add("gladiator2"),gladiatorx:e.sound.add("gladiatorx"),pumpamb:e.sound.add("pumpamb"),shout1:e.sound.add("shout1"),shout2:e.sound.add("shout2"),shout3:e.sound.add("shout3"),shout4:e.sound.add("shout4"),shout5:e.sound.add("shout5")}}function playSound(e,a,t=1){let s="";void 0!==a&&(s=Math.floor(Math.random()*a)+1);let o=e+s;gameObjects.sounds[o].volume=t,gameObjects.sounds[o].play()}function tweenVolume(e,a,t=1500){globalScene.tweens.timeline({targets:[gameObjects.sounds[e]],tweens:[{volume:a,duration:t}]})}function playSoundOnce(e,a,t=1){oneTimeScares[e]||(oneTimeScares[e]=!0,a?setTimeout(()=>{gameObjects.sounds[e].volume=t,gameObjects.sounds[e].play()},a):(gameObjects.sounds[e].volume=t,gameObjects.sounds[e].play()))}function setupHand(e){gameObjects.baseTouchLayer=e.make.image({x:0,y:0,key:"whitePixel",add:!0,scale:{x:2e3,y:1e3},alpha:.01}),gameObjects.baseTouchLayer.setInteractive(),gameObjects.baseTouchLayer.on("pointerdown",onPointerDown,e),gameObjects.baseTouchLayer.on("pointermove",onPointerMove,e),gameObjects.baseTouchLayer.on("pointerup",onPointerUp,e),gameObjects.hand=new Hand(e)}function setupGame(e){initializeSounds(e),gameObjects.generalDarkness=e.add.image(gameVars.halfWidth,gameVars.halfHeight,"darkBluePixel"),gameObjects.generalDarkness.scaleX=1e3,gameObjects.generalDarkness.scaleY=1e3,gameObjects.generalDarkness.setBlendMode(Phaser.BlendModes.MULTIPLY),gameObjects.generalDarkness.alpha=0,gameObjects.generalDim=e.add.image(gameVars.halfWidth,gameVars.halfHeight,"generalDim"),gameObjects.generalDim.alpha=.75,gameObjects.hueCntr.add(gameObjects.generalDim),gameObjects.maskImage=e.make.sprite({x:gameVars.halfWidth,y:gameVars.halfHeight,key:"shinelight",add:!1}),gameObjects.maskImage.accX=0,gameObjects.maskImage.accY=0,gameObjects.maskImage.swayX=0,gameObjects.maskImage.swayY=0,gameObjects.maskImage.scaleX=2.5,gameObjects.maskImage.scaleY=2.5;let a=new Phaser.Display.Masks.BitmapMask(e,gameObjects.maskImage);gameObjects.exhibit=new Exhibit(e,gameObjects.exhibCntr,gameObjects.shadowCntr,gameObjects.portraitCntr,gameObjects.btnCntr,gameObjects.darkCtnr,a),gameObjects.flashDim=e.add.image(gameVars.halfWidth,gameVars.halfHeight,"blackPixel"),gameObjects.flashDim.scaleX=1e3,gameObjects.flashDim.scaleY=1e3,gameObjects.flashDim.alpha=0,gameObjects.flashDim.brightVal=0,gameObjects.flashDim.blackOut=!1,gameObjects.flashDim.recovering=!1,gameObjects.mainDarkCntr.add(gameObjects.flashDim),gameObjects.candleBright=e.make.sprite({x:gameVars.halfWidth,y:gameVars.halfHeight,key:"candleBright",add:!0}),gameObjects.candleBright.alpha=0,gameObjects.candleBright.scaleX=2.75,gameObjects.candleBright.scaleY=2.75,gameObjects.candleBright.setBlendMode(Phaser.BlendModes.MULTIPLY),gameObjects.mainDarkCntr.add(gameObjects.candleBright),gameObjects.candleDark=e.make.sprite({x:gameVars.halfWidth,y:gameVars.halfHeight,key:"candleDark",add:!0}),gameObjects.candleDark.alpha=0,gameObjects.candleDark.accX=0,gameObjects.candleDark.accY=0,gameObjects.candleDark.swayX=0,gameObjects.candleDark.swayY=0,gameObjects.candleDark.swayAccX=0,gameObjects.candleDark.swayAccY=0,gameObjects.candleDark.scaleSpdX=0,gameObjects.candleDark.scaleSpdY=0,gameObjects.candleDark.setBlendMode(Phaser.BlendModes.MULTIPLY),gameObjects.mainDarkCntr.add(gameObjects.candleDark),gameObjects.generalRedness=e.add.image(gameVars.halfWidth,gameVars.halfHeight,"redlight"),gameObjects.generalRedness.alpha=0,gameObjects.hueCntr.add(gameObjects.generalRedness),this.setupMoveButtons(e),this.setupGameplayButtons(e),initGuideIndicators(e),this.initExhibit(e),this.setupInstructionsStand(e),initFlashScreens(),initStaticScreens(),initOneTimeListeners(),gameObjects.infoText=e.make.text({x:gameVars.halfWidth,y:gameVars.halfHeight+50,text:" ",origin:{x:.5,y:.5},style:{font:"bold 46px Times New Roman",align:"center",fill:"white"}}),gameObjects.infoText.setOrigin(.5,.5),gameObjects.infoText.setShadow(0,0,void 0,6,!0,!0),gameObjects.infoText.setStroke("#000000",6),gameObjects.infoText.alpha=0}function update(e,a){let t=Math.min(5,a/16.666666);if(gameVarsTemp.skipUpdateFrame)return void(gameVarsTemp.skipUpdateFrame=!1);for(let e=0;e<updateFuncList.length;e++)updateFuncList[e](t);gameVars.mouseaccx=gameVars.mouseposx-gameVars.prevMouseposx,gameVars.mouseaccy=gameVars.mouseposy-gameVars.prevMouseposy,gameVars.prevMouseposx=gameVars.mouseposx,gameVars.prevMouseposy=gameVars.mouseposy,gameObjects.hand.update(t);let s=gameObjects.hand.getPosX()-gameObjects.exhibCntr.goalOffsetX,o=gameObjects.hand.getPosY()-gameObjects.exhibCntr.goalOffsetY,m=!1,d=null;for(let e=gameObjects.buttonList.length-1;e>=0;e--){let a=gameObjects.buttonList[e];if(a&&a.checkCoordOver(s,o)){a.onHover(),m=!0,d=a;break}}if(this.lastHovered&&this.lastHovered!==d&&"disable"!==this.lastHovered.getState()&&this.lastHovered.setState("normal"),this.lastHovered&&!d?gameObjects.hand.setPointing(!1):!this.lastHovered&&d&&gameObjects.hand.setPointing(!0),this.lastHovered=d,gameVars.gameConstructed){if(handleViewShift(),gameVars.darkPoint){gameObjects.maskImage.x,gameObjects.maskImage.y;let e=gameObjects.candleDark.x-s+gameObjects.exhibCntr.swayX,a=gameObjects.candleDark.y-o+gameObjects.exhibCntr.swayY;Math.sqrt(e*e+a*a)<10&&(e*=.5,a*=.5);let m=Math.sqrt(gameVars.mouseaccx*gameVars.mouseaccx+gameVars.mouseaccy*gameVars.mouseaccy),d=1-.02*t;gameObjects.candleDark.swayAccX=gameObjects.candleDark.swayAccX*d+(Math.random()-.5)*(.015+.004*m),gameObjects.candleDark.swayAccY=gameObjects.candleDark.swayAccY*d+(Math.random()-.5)*(.015+.004*m);let n=.1/t,l=t*t*.005,i=1.2-Math.min(.1,n);gameObjects.candleDark.swayX+=.016*e-gameObjects.candleDark.swayX*i+gameObjects.candleDark.swayAccX,gameObjects.candleDark.swayY+=.013*a-gameObjects.candleDark.swayY*i+gameObjects.candleDark.swayAccY,gameObjects.candleDark.accX+=.11*-gameObjects.candleDark.accX+gameObjects.candleDark.swayX,gameObjects.candleDark.accY+=.11*-gameObjects.candleDark.accY+gameObjects.candleDark.swayY,gameObjects.candleDark.x-=gameObjects.candleDark.accX*t+l*e,gameObjects.candleDark.y-=gameObjects.candleDark.accY*t+l*a,gameObjects.maskImage.x=gameObjects.candleDark.x,gameObjects.maskImage.y=gameObjects.candleDark.y,gameObjects.candleBright.x=gameObjects.candleDark.x,gameObjects.candleBright.y=gameObjects.candleDark.y;let g=.1*(2-gameObjects.maskImage.scaleX)+.1*(Math.random()-.5)+.05*m;gameObjects.maskImage.scaleX+=g,gameObjects.maskImage.scaleY=gameObjects.maskImage.scaleY,gameObjects.maskImage.alpha=gameObjects.maskImage.scaleX*gameObjects.maskImage.scaleX*.25,gameObjects.candleDark.scaleSpdX=.985*gameObjects.candleDark.scaleSpdX+.08*m,gameObjects.candleDark.scaleSpdY=gameObjects.candleDark.scaleSpdX;let c=4+.08*Math.random()-Math.min(1.4,.05*Math.abs(gameObjects.candleDark.scaleSpdX)),r=4+.08*Math.random()-Math.min(1.4,.05*Math.abs(gameObjects.candleDark.scaleSpdY));gameObjects.flashDim.blackOut?(Math.random()>.97?gameObjects.flashDim.alpha=1-.5*Math.random():gameObjects.flashDim.alpha=1,gameObjects.flashDim.brightVal+=.006,gameObjects.flashDim.brightVal>.4&&(gameObjects.maskImage.alpha=1,gameObjects.flashDim.blackOut=!1,gameObjects.flashDim.recovering=!0,c=2,r=2,gameObjects.flashDim.alpha=0)):gameVars.darkPoint;Math.random();gameObjects.candleDark.scaleX=c+gameVars.initialExtraDark,gameObjects.candleDark.scaleY=r+gameVars.initialExtraDark,gameVars.initialExtraDark>.01&&(gameVars.initialExtraDark*=.94,gameObjects.candleBright.scaleX=2.75+.25*gameVars.initialExtraDark,gameObjects.candleBright.scaleY=2.75+.25*gameVars.initialExtraDark)}if(globalScene.cameras.main.x*=.6,globalScene.cameras.main.y*=.6,gameVars.horrorPoint&&(gameObjects.generalRedness.alpha=Math.max(0,.998*gameObjects.generalRedness.alpha-1e-4*t)),updateMusicBox(t),gameVarsTemp.startDarkFlicker&&(gameVarsTemp.darkFlickerCountdown-=t,gameVarsTemp.darkFlickerCountdown<=0)){gameVarsTemp.darkFlickerCountdown=1e3+4e3*Math.random();let e=.01+.1*Math.random();gameObjects.generalDarkness.alpha+=e;let a=12*Math.random()+5;a=Math.floor(a*a),setTimeout(()=>{if(gameObjects.generalDarkness.alpha-=e,Math.random()<.6){let e=800+1200*Math.random();setTimeout(()=>{let e=15*Math.random();e=Math.floor(e*e);let a=.03+.06*Math.random();gameObjects.generalDarkness.alpha+=a,setTimeout(()=>{gameObjects.generalDarkness.alpha-=a},e)},e)}},a)}}else{handleViewShift(),handleViewShiftLoading();let e=0,a=(e=gameVarsTemp.loadAmt<.8?.6*gameVarsTemp.loadAmt:gameVarsTemp.loadAmt<.999?.6*gameVarsTemp.loadAmt+1.98*(gameVarsTemp.loadAmt-.8):gameVarsTemp.loadAmt)*gameObjectsTemp.loadingBarBacking.scaleX-gameObjectsTemp.loadingBar.scaleX;if(1===gameVarsTemp.loadAmt&&(a+=12),gameObjectsTemp.loadingBar.scaleX=Math.min(gameObjectsTemp.loadingBarBacking.scaleX,gameObjectsTemp.loadingBar.scaleX+.05*a),gameObjectsTemp.loadingBar.scaleX>=gameObjectsTemp.loadingBarBacking.scaleX&&!gameVarsTemp.loadAnimComplete&&(gameVarsTemp.loadAnimComplete=!0,onLoadAnimComplete(this)),gameObjectsTemp.loadingWelcome&&gameVars.gameStarted){let e=gameObjectsTemp.loadingWelcome.rotation*(1+gameObjectsTemp.loadingWelcome.rotation)*4e3;gameObjects.loadingCntr.shakeAccX=-.4*gameObjects.loadingCntr.swayX+(Math.random()-.5)*e,gameObjects.loadingCntr.shakeAccY=-.4*gameObjects.loadingCntr.swayY+(Math.random()-.5)*e,gameObjects.loadingCntr.swayX+=gameObjects.loadingCntr.shakeAccX,gameObjects.loadingCntr.swayY+=gameObjects.loadingCntr.shakeAccY}}}function handleViewShift(){if(gameVars.isFrozen)return;gameObjects.exhibCntr.swayAmt=Math.max(gameVars.baseSway,gameObjects.exhibCntr.swayAmt-.001),gameObjects.exhibCntr.swayAccX+=(Math.random()-.5)*gameObjects.exhibCntr.swayAmt,gameObjects.exhibCntr.swayAccY+=(Math.random()-.5)*gameObjects.exhibCntr.swayAmt,gameObjects.exhibCntr.swayAccX*=.975,gameObjects.exhibCntr.swayAccY*=.975,gameObjects.exhibCntr.swayX+=gameObjects.exhibCntr.swayAccX,gameObjects.exhibCntr.swayY+=gameObjects.exhibCntr.swayAccY,gameObjects.exhibCntr.swayX*=.995,gameObjects.exhibCntr.swayY*=.995;let e=gameObjects.exhibCntr.goalOffsetX-gameObjects.exhibCntr.offsetX,a=gameObjects.exhibCntr.goalOffsetY-gameObjects.exhibCntr.offsetY;gameObjects.exhibCntr.offsetAccX+=.0012*e-.02*gameObjects.exhibCntr.offsetAccX,gameObjects.exhibCntr.offsetAccY+=.0012*a-.02*gameObjects.exhibCntr.offsetAccY,gameObjects.exhibCntr.offsetX=.9*gameObjects.exhibCntr.offsetX+gameObjects.exhibCntr.offsetAccX,gameObjects.exhibCntr.offsetY=.9*gameObjects.exhibCntr.offsetY+gameObjects.exhibCntr.offsetAccY,gameObjects.exhibCntr.x=gameObjects.exhibCntr.swayX+gameObjects.exhibCntr.offsetX,gameObjects.exhibCntr.y=gameObjects.exhibCntr.swayY+gameObjects.exhibCntr.offsetY+4,gameObjects.shadowCntr.x=1.01*gameObjects.exhibCntr.x,gameObjects.shadowCntr.y=1.01*gameObjects.exhibCntr.y,gameObjects.portraitCntr.x=gameObjects.exhibCntr.x,gameObjects.portraitCntr.y=gameObjects.exhibCntr.y,gameObjects.btnCntr.x=gameObjects.exhibCntr.x,gameObjects.btnCntr.y=gameObjects.exhibCntr.y,gameObjects.mainDarkCntr.x=gameObjects.exhibCntr.x,gameObjects.mainDarkCntr.y=gameObjects.exhibCntr.y,gameObjects.darkCtnr.x=gameObjects.exhibCntr.x,gameObjects.darkCtnr.y=gameObjects.exhibCntr.y,gameObjects.hueCntr.x=-5*gameObjects.exhibCntr.x,gameObjects.hueCntr.y=-5*gameObjects.exhibCntr.y,gameObjects.sfxTopCtnr.x=gameObjects.exhibCntr.x,gameObjects.sfxTopCtnr.y=gameObjects.exhibCntr.y}function handleViewShiftLoading(){if(!gameObjects.loadingCntr)return;if(gameVars.isFrozen)return;gameObjects.exhibCntr.swayAmt=Math.max(gameVars.baseSway,gameObjects.exhibCntr.swayAmt-.001),gameObjects.loadingCntr.swayAccX+=(Math.random()-.5)*gameObjects.loadingCntr.swayAmt,gameObjects.loadingCntr.swayAccY+=(Math.random()-.5)*gameObjects.loadingCntr.swayAmt,gameObjects.loadingCntr.swayAccX*=.975,gameObjects.loadingCntr.swayAccY*=.975,gameObjects.loadingCntr.swayX+=gameObjects.loadingCntr.swayAccX,gameObjects.loadingCntr.swayY+=gameObjects.loadingCntr.swayAccY,gameObjects.loadingCntr.swayX*=.995,gameObjects.loadingCntr.swayY*=.995;let e=gameObjects.loadingCntr.goalOffsetX-gameObjects.loadingCntr.offsetX,a=gameObjects.loadingCntr.goalOffsetY-gameObjects.loadingCntr.offsetY;gameObjects.loadingCntr.offsetAccX+=.0012*e-.02*gameObjects.loadingCntr.offsetAccX,gameObjects.loadingCntr.offsetAccY+=.0012*a-.02*gameObjects.loadingCntr.offsetAccY,gameObjects.loadingCntr.offsetX=.9*gameObjects.loadingCntr.offsetX+gameObjects.loadingCntr.offsetAccX,gameObjects.loadingCntr.offsetY=.9*gameObjects.loadingCntr.offsetY+gameObjects.loadingCntr.offsetAccY,gameObjects.loadingCntr.x=gameObjects.loadingCntr.swayX+gameObjects.loadingCntr.offsetX,gameObjects.loadingCntr.y=gameObjects.loadingCntr.swayY+gameObjects.loadingCntr.offsetY}function mouseToHand(e,a){gameVars.halfWidth,gameVars.halfHeight;let t=gameVars.halfWidth/(gameVars.halfWidth-10),s=gameVars.halfHeight/(gameVars.halfHeight-10),o=gameVars.halfWidth+t*(e-gameVars.halfWidth),m=gameVars.halfHeight+s*(a-gameVars.halfHeight);return{x:o=Math.min(Math.max(0,o),gameVars.width-1),y:m=Math.min(Math.max(0,m),gameVars.height-1)}}function disableMoveButtons(){gameObjects.moveLeftBtn.setState("disable"),gameObjects.moveRightBtn.setState("disable")}function enableMoveButtons(){0!==gameObjects.exhibit.getCurrentScene()&&gameObjects.moveLeftBtn.setState("normal"),gameObjects.moveRightBtn.setState("normal")}function disableMoveRightButton(){gameObjects.moveRightBtn.setState("disable")}function disableMoveLeftButton(){gameObjects.moveLeftBtn.setState("disable")}function enableMoveLeftButton(){0!==gameObjects.exhibit.getCurrentScene()&&gameObjects.moveLeftBtn.setState("normal")}function enableMoveRightButton(){gameObjects.moveRightBtn.setState("normal")}function setupMoveButtons(e){gameObjects.moveLeftBtn=new Button(e,gameObjects.topBtnCntr,gameObjects.exhibit.moveLeft.bind(gameObjects.exhibit),{atlas:"buttons",ref:"move_btn_normal",x:15,y:gameVars.halfHeight,scaleX:-1},{atlas:"buttons",ref:"move_btn_over"},{atlas:"buttons",ref:"move_btn_press"},{atlas:"buttons",ref:"move_btn_disable"}),gameObjects.moveLeftBtnHighlight=globalScene.add.image(gameObjects.moveLeftBtn.getPosX(),gameObjects.moveLeftBtn.getPosY(),"buttons","move_btn_glow"),gameObjects.moveLeftBtnHighlight.scaleX=-1,gameObjects.moveLeftBtnHighlight.alpha=0,gameObjects.moveRightBtn=new Button(e,gameObjects.topBtnCntr,gameObjects.exhibit.moveRight.bind(gameObjects.exhibit),{atlas:"buttons",ref:"move_btn_normal",x:gameVars.width-22,y:gameVars.halfHeight},{atlas:"buttons",ref:"move_btn_over"},{atlas:"buttons",ref:"move_btn_press"},{atlas:"buttons",ref:"move_btn_disable"}),gameObjects.moveRightBtnHighlight=globalScene.add.image(gameObjects.moveRightBtn.getPosX(),gameObjects.moveRightBtn.getPosY(),"buttons","move_btn_glow"),gameObjects.moveRightBtnHighlight.alpha=0,gameObjects.moveRightBtnHighlight.state="brightening"}function tempFreeze(e=1e3){gameVars.isFrozen=!0,setTimeout(()=>{gameVars.isFrozen=!1},e)}function initOneTimeListeners(){let e,a;e=messageBus.subscribe("startDarkSequence",a=>{e.unsubscribe(),gameObjects.entrance.entryLights1.alpha=0,gameObjects.entrance.entryLights2.alpha=0,removeFromUpdateFuncList(flipEntryLights),gameObjects.entrance.welcomeBtn.setState("disable")}),a=messageBus.subscribe("startHorrorSequence",e=>{a.unsubscribe(),addToUpdateFuncList(flipEntryLights),gameObjects.entrance.welcomeBtn.setState("normal"),gameObjects.entrance.welcomeBtn.setNormalRef("welcomeTextDisable"),gameObjects.entrance.welcomeBtn.setHoverRef("welcomeTextDisable"),gameObjects.entrance.welcomeBtn.setPressRef("welcomeTextDisable"),gameObjects.museumStand.bringToTop(),gameObjects.standArrow=globalScene.add.image(gameObjects.museumStand.getPosX(),gameObjects.museumStand.getPosY(),"buttons","stand_arrow"),gameObjects.standArrow.setOrigin(.5,1),gameObjects.gameCtnr1.add(gameObjects.standArrow),gameObjects.museumStand.tweenScale({rotation:-.01,duration:150,ease:"Cubic.easeOut",onComplete:()=>{gameObjects.museumStand.tweenScale({rotation:0,yoyo:!0,ease:"Sine.easeInOut",duration:650})}}),setupRoomFlower1(globalScene,8,gameObjects.gameCtnr8),setupRoomFlower2(globalScene,9,gameObjects.gameCtnr9),setupRoomFlower3(globalScene,10,gameObjects.gameCtnr10),setupRoomFlower4(globalScene,11,gameObjects.gameCtnr11),setupRoomFlower5(globalScene,12,gameObjects.gameCtnr12),gameObjects.sounds.gladiatorx.play({loop:!0}),gameObjects.sounds.gladiatorx.volume=.01,globalScene.tweens.add({targets:gameObjects.sounds.gladiatorx,volume:.7,duration:5e3}),setTimeout(()=>{tweenVolume("gladiatorx",.9)},5e3);let t=gameObjects.clownWelcomePic.x,s=gameObjects.clownWelcomePic.y,o=gameObjects.clownWelcomePic.scaleX;gameObjects.clownWelcomePic.destroy(),gameObjects.clownWelcomePic=globalScene.add.image(t,s,"menu","framesEnter5"),gameObjects.clownWelcomePic.scaleX=o,gameObjects.clownWelcomePic.scaleY=o,gameObjects.clownWelcomePic.cantChange=!0,gameObjects.gameCtnr1.add(gameObjects.clownWelcomePic)})}function showAltReality(e,a=1){if(!e||0===e.length)return;let t=e.shift(),s=globalScene.add.image(gameVars.halfWidth,gameVars.halfHeight,t);s.depth=1,s.scaleX=a,s.scaleY=a;let o=1===e.length?70:40;setTimeout(()=>{s.destroy(),showAltReality(e,a)},o)}
